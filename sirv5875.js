/*
    @license
    Sirv JS v3.14.5 (f1c058fc)
    Copyright 2023 Sirv Limited
    https://sirv.com
*/

if (!window.Sirv) {(()=>{"use strict";var r,e,o,t,a,n={},i={};function p(r){var e=i[r];if(void 0!==e)return e.exports;var o=i[r]={exports:{}};return n[r](o,o.exports,p),o.exports}p.m=n,r="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",o="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",t=r=>{r&&!r.d&&(r.d=1,r.forEach((r=>r.r--)),r.forEach((r=>r.r--?r.r++:r())))},p.a=(a,n,i)=>{var p;i&&((p=[]).d=1);var f,l,u,s=new Set,b=a.exports,v=new Promise(((r,e)=>{u=e,l=r}));v[e]=b,v[r]=r=>(p&&r(p),s.forEach(r),v.catch((r=>{}))),a.exports=v,n((a=>{var n;f=(a=>a.map((a=>{if(null!==a&&"object"==typeof a){if(a[r])return a;if(a.then){var n=[];n.d=0,a.then((r=>{i[e]=r,t(n)}),(r=>{i[o]=r,t(n)}));var i={};return i[r]=r=>r(n),i}}var p={};return p[r]=r=>{},p[e]=a,p})))(a);var i=()=>f.map((r=>{if(r[o])throw r[o];return r[e]})),l=new Promise((e=>{(n=()=>e(i)).r=0;var o=r=>r!==p&&!s.has(r)&&(s.add(r),r&&!r.d&&(n.r++,r.push(n)));f.map((e=>e[r](o)))}));return n.r?l:i()}),(r=>(r?u(v[o]=r):l(b),t(p)))),p&&(p.d=0)},a=[],p.O=(r,e,o,t)=>{if(!e){var n=1/0;for(u=0;u<a.length;u++){for(var[e,o,t]=a[u],i=!0,f=0;f<e.length;f++)(!1&t||n>=t)&&Object.keys(p.O).every((r=>p.O[r](e[f])))?e.splice(f--,1):(i=!1,t<n&&(n=t));if(i){a.splice(u--,1);var l=o();void 0!==l&&(r=l)}}return r}t=t||0;for(var u=a.length;u>0&&a[u-1][2]>t;u--)a[u]=a[u-1];a[u]=[e,o,t]},p.d=(r,e)=>{for(var o in e)p.o(e,o)&&!p.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:e[o]})},p.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),p.r=r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},(()=>{var r={666:0};p.O.j=e=>0===r[e];var e=(e,o)=>{var t,a,[n,i,f]=o,l=0;if(n.some((e=>0!==r[e]))){for(t in i)p.o(i,t)&&(p.m[t]=i[t]);if(f)var u=f(p)}for(e&&e(o);l<n.length;l++)a=n[l],p.o(r,a)&&r[a]&&r[a][0](),r[a]=0;return p.O(u)},o=globalThis.sirvViewerChunks=globalThis.sirvViewerChunks||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))})()})();"use strict";(globalThis.sirvViewerChunks=globalThis.sirvViewerChunks||[]).push([[291],{7488:(t,o,s)=>{s.d(o,{Z:()=>v});var i=s(3089),e=s(5245),h=s(9913),n=s(932);const p=s(4186).i2+"-hotspot-pointer",a=p+"--active",r="sirv-hotspot-tooltip",l="sirv-hotspot-box-out-of-width",d="sirv-hotspot-box-out-of-height";n.KF.addCssModule("Hotspot",'@charset "UTF-8";.smv-hotspot-pointer{height:0;pointer-events:auto;position:absolute;width:0;z-index:11}.sirv-hotspot-pointer{cursor:pointer;height:20px;transform:translate(-50%,-50%);width:20px}.sirv-hotspot-pointer.pulsating-point{background-image:none}.sirv-hotspot-pointer.pulsating-point:after,.sirv-hotspot-pointer.pulsating-point:before{border-radius:100%;content:"";display:inline-block;height:100%;left:0;position:absolute;top:0;transform-origin:50% 50%;width:100%}.sirv-hotspot-pointer.pulsating-point:before{background-color:#ff0;opacity:.6;overflow:hidden;transition:opacity .2s ease-in,transform .1s ease-out}.sirv-hotspot-pointer.pulsating-point:after{animation:pulsating-point-pulsate 3s ease-out infinite;border:1px solid #ff0;box-sizing:border-box;opacity:0;pointer-events:none}.sirv-hotspot-pointer.pulsating-point:active:before{transform:scale(.875)}.sirv-hotspot-pointer.pulsating-point:active:after{animation:pulsating-point-stop-pulsate .3s}@media (any-hover:hover){.sirv-hotspot-pointer.pulsating-point:hover:before{cursor:pointer;opacity:.8}.sirv-hotspot-pointer.pulsating-point:hover:after{animation:none}}.smv-hotspot-pointer--active .sirv-hotspot-pointer.pulsating-point:before{opacity:1}.smv-hotspot-pointer--active .sirv-hotspot-pointer.pulsating-point:after{animation:none}.smv .smv-slides-box .smv-slides .smv-slide .smv-content .sirv-hotspot-container{pointer-events:none;position:absolute!important}.smv .smv-slides-box .smv-slides .smv-slide .smv-content .sirv-hotspot-container.sirv-hotspot-overwrite-pointer-event{pointer-events:auto!important}@keyframes pulsating-point-pulsate{0%{opacity:.8;transform:scale(1)}45%{opacity:0;transform:scale(1.75)}}@keyframes pulsating-point-stop-pulsate{0%{opacity:.4}to{opacity:0;transform:scale(2)}}.sirv-hotspot-tooltip{-webkit-font-smoothing:antialiased;background-color:#fff;border:1px solid #efefef;border-collapse:initial;border-radius:4px;box-shadow:0 5px 10px 2px #0000001a;display:block;font:normal 12px/1.42857 Lucida Grande,Lucida Sans Unicode,Verdana,Helvetica Neue,Arial,Helvetica,sans-serif;opacity:0;padding:8px 24px;pointer-events:none;position:absolute;transition:opacity .15s linear 0s;z-index:9999999999}.sirv-hotspot-tooltip--default{background-color:#31333dc2;border:0;color:#eee;margin-top:-8px;padding:6px 9px;transform:translate(-50%,-100%)}.sirv-hotspot-tooltip--default:after{border-color:#31333dc2 #0000 #0000;border-style:solid;border-width:8px 8px 0;content:"";height:0;left:50%;position:absolute;top:100%;transform:translateX(-50%);width:0}.sirv-hotspot-tooltip--balloon{margin-top:-40px;transform:translate(-40px,-100%)}.sirv-hotspot-tooltip--balloon:after{border-color:#0000 #fff #0000 #0000;border-style:solid;border-width:0 15px 40px 0;content:"";height:0;left:24px;position:absolute;top:100%;width:0}.sirv-hotspot-tooltip.sirv-hotspot-tooltip-visible{opacity:1;transition-delay:.1s}.sirv-hotspot-box{box-sizing:border-box;display:flex;max-height:100vh;max-width:100vw;padding:10px;position:fixed;transition:opacity .15s linear 0s;z-index:9999999999}.sirv-hotspot-box.sirv-hotspot-box-out-of-width{left:0!important;right:0!important}.sirv-hotspot-box.sirv-hotspot-box-out-of-height{bottom:0!important;top:0!important}.sirv-hotspot-box .sirv-hotspot-box-wrapper{background:#fff;border:1px solid #efefef;border-collapse:initial;border-radius:4px;box-shadow:0 5px 10px 2px #0000001a;box-sizing:border-box;display:flex;font-size:16px!important;line-height:100%;max-height:inherit;max-width:inherit;overflow:hidden;padding:22px;position:relative;text-align:left}.sirv-hotspot-box .sirv-hotspot-box-content{height:calc(100% + 2px);left:0;max-height:inherit;max-width:inherit;overflow:auto;top:0;width:100%}.sirv-hotspot-box .sirv-hotspot-close-button{speak:none;-webkit-font-smoothing:antialiased;color:#888;cursor:pointer;font:normal 22px/1 Arial,monospace;height:24px;position:absolute;right:2px;text-align:center;top:2px;width:24px}.sirv-hotspot-box .sirv-hotspot-close-button:before{-webkit-font-smoothing:inherit!important;color:inherit!important;content:"Ã—";display:inline;font:inherit!important;position:static;vertical-align:middle}');const c="sirv-hotspot-overwrite-pointer-event",b={AUTO:0,VISIBLE:1};class g extends i.Z{constructor(t,o,s){super(),this.container=t,this.hotspotData=o,this._id=s,this.box=null,this.boxContainer=h.Z.D.node.body,this.baseBoxSize=null,this.tooltip=null,this.version=1,this.pointer=h.Z.$new("div").addClass(p),this.hotspotSettings={},this.dX=1,this.dY=1,this.isActive=!1,this.isDisabled=!1,this.isPointerInDoc=!1,this.isTtShown=!1,this.isShown=!1,this.isBoxContent=!1,this.tooltipState=b.AUTO,this.boxState=b.AUTO,this.init()}isTooltipShown(){return this.isTtShown}isBoxActivated(){return this.isActive}isBoxAlwaysVisible(){return this.boxState===b.VISIBLE}isTooltipAlwaysVisible(){return this.tooltipState===b.VISIBLE}init(){this.setVersion(),this.parseHotspotData(),this.createBlocks(),this.addEvents(),this.createBox()}setVersion(){(this.hotspotData.style||this.hotspotData.tooltip||this.hotspotData.box&&this.hotspotData.box.content)&&(this.version=2)}parseHotspotData(){Object.keys(this.hotspotData).forEach((t=>this.hotspotSettings[t]=this.hotspotData[t])),this.hotspotSettings.pointerPositionPercentage={top:(0,e.Z)(""+this.hotspotSettings.pointer.y),left:(0,e.Z)(""+this.hotspotSettings.pointer.x)}}createBlocks(){var t,o;const s=null==(t=this.hotspotSettings)||null==(o=t.pointer)?void 0:o.template;if(s)this.pointer.node.innerHTML=s;else{var i,e,n,p;const t=h.Z.$new("div").addClass("pulsating-point").addClass("sirv-hotspot-pointer").addClass("hotspot-pointer"),o=null!=(i=null==(e=this.hotspotSettings)||null==(n=e.pointer)?void 0:n.style)?i:null==(p=this.hotspotSettings)?void 0:p.style;o&&t.addClass(o),this.pointer.append(t)}var a,l,d,c;(this.pointer.attr("data-spot-id",this._id),this.version>1&&this.hotspotSettings.tooltip&&this.hotspotSettings.tooltip.content)&&(this.tooltip=h.Z.$new("div").addClass(r).changeContent(this.hotspotSettings.tooltip.content),null!=(a=this.hotspotSettings)&&null!=(l=a.tooltip)&&l.style&&this.tooltip.addClass(null==(d=this.hotspotSettings)||null==(c=d.tooltip)?void 0:c.style))}setTooltipPosition(){if(this.tooltip){let t=this.pointer.rect;const o={top:0,left:0};o.top=this.hotspotSettings.tooltip.style?t.top:t.bottom,o.left=this.hotspotSettings.tooltip.style?(t.left+t.right)/2:t.right,"body"!==h.Z.$(this.boxContainer).tagName&&(t=this.pointer.node.getBoundingClientRect(),o.top=this.hotspotSettings.tooltip.style?t.top-this.container.node.getBoundingClientRect().top:t.bottom-this.container.node.getBoundingClientRect().top,o.left=this.hotspotSettings.tooltip.style?t.left-this.container.node.getBoundingClientRect().left+t.width/2:t.left-this.container.node.getBoundingClientRect().left+t.width),this.tooltip.setCss(o)}}showTooltip(){this.isTtShown||this.isDisabled||!this.tooltip||(this.isTtShown=!0,this.setTooltipPosition(),this.tooltip.appendTo(this.boxContainer).addClass(r+"-visible"),this.emit("hotspotTooltipShown",{data:{hotspot:this}}))}hideTooltip(){this.isTtShown&&this.tooltip&&(this.isTtShown=!1,this.tooltip.removeClass(r+"-visible"),this.isActive||this.pointer.removeClass(a),this.emit("hotspotTooltipHidden",{data:{hotspot:this}}))}addEvents(){let t;this.pointer.addEvent(["click","mousedown"],(t=>{t.stop()})),this.pointer.addEvent(["btnclick","tap"],(t=>3===t.button||(this.hotspotSettings.link?(t.stop(),setTimeout((()=>{window.open(this.hotspotSettings.link)}))):this.isBoxContent?(t.stop(),this.isActive?this.hideBox():this.showBox()):this.tooltip&&"tap"===t.type&&(this.isTtShown?this.hideTooltip():(this.showTooltip(),this.pointer.addClass(a))),!1))),"edge"===h.Z.browser.uaName&&this.pointer.addEvent("mousedown",(t=>{t.stopDistribution()})),this.hotspotSettings.tooltip&&this.hotspotSettings.tooltip.content&&(this.pointer.addEvent("mouseenter",(t=>{this.isActive||this.showTooltip()})),this.pointer.addEvent("mouseleave",(()=>{this.tooltipState!==b.VISIBLE&&this.hideTooltip()}))),h.Z.$(h.Z.W).addEvent("resize",(o=>{clearTimeout(t),t=setTimeout((()=>{if(this.isActive){const t=this.hotspotSettings;t&&this.box.setCss(this.correctBoxPosition(this.getBoxPosition(t)))}}),42)}))}createBox(){var t,o;let s=null;var i,e;(this.version>1&&this.hotspotSettings.box&&this.hotspotSettings.box.content?s=this.hotspotSettings.box.content:this.hotspotSettings.data&&(s=this.hotspotSettings.data),this.box=h.Z.$new("div").addClass("sirv-hotspot-box"),null!=(t=this.hotspotSettings)&&null!=(o=t.box)&&o.style)&&this.box.addClass(null==(i=this.hotspotSettings)||null==(e=i.box)?void 0:e.style);if(s){this.isBoxContent=!0;const t=h.Z.$new("div").addClass("sirv-hotspot-box-wrapper").append(h.Z.$new("div").addEvent(["btnclick","tap"],(t=>{this.boxState!==b.VISIBLE&&(t.stop(),this.hideBox(!0))})).addClass("sirv-hotspot-close-button")),o=h.Z.$new("div").addClass("sirv-hotspot-box-content").changeContent(s+"").addEvent("click",(t=>{t.stopDistribution()}));t.append(o),this.box.append(t)}this.box.setCss({top:"-10000px",left:"-10000px",position:"absolute",opacity:0})}getBoxPosition(t){const o={top:0,left:0,transform:""};if(t&&t.box){const s=t.box.x,i=t.box.y;if(this.hotspotSettings.box.fixed){const t=this.container.rect;if(o.position="absolute","body"!==h.Z.$(this.boxContainer).tagName){switch(i){case"top":o.top=0;break;case"bottom":o.top=t.bottom-t.top,o.transform+=" translateY(-100%)";break;case"center":o.top=(t.bottom-t.top+0)/2,o.transform+=" translateY(-50%)";break;default:o.top=0+(parseFloat(i)||0)}switch(s){case"left":o.left=0;break;case"right":o.left=t.right-t.left,o.transform+=" translateX(-100%)";break;case"center":o.left=(t.right-t.left)/2,o.transform+=" translateX(-50%)";break;default:o.left=t.left+(parseFloat(s)||0)}}else{switch(i){case"top":o.top=t.top;break;case"bottom":o.top=t.bottom,o.transform+=" translateY(-100%)";break;case"center":o.top=(t.top+t.bottom)/2,o.transform+=" translateY(-50%)";break;default:o.top=t.top+(parseFloat(i)||0)}switch(s){case"left":o.left=t.left;break;case"right":o.left=t.right,o.transform+=" translateX(-100%)";break;case"center":o.left=(t.left+t.right)/2,o.transform+=" translateX(-50%)";break;default:o.left=t.left+(parseFloat(s)||0)}}}else{const t=this.pointer.position,e=h.Z.W.scroll;o.left=t.left-e.x+(parseFloat(s)||0),o.top=t.top-e.y+(parseFloat(i)||0)}}return o}correctBoxPosition(t){if(this.hotspotSettings.box&&!this.hotspotSettings.box.fixed){this.box.removeClass(l),this.box.removeClass(d);const o=h.Z.W.size;this.baseBoxSize.width>o.width?this.box.addClass(l):t.left+this.baseBoxSize.width>o.width&&(t.left=o.width-this.baseBoxSize.width),this.baseBoxSize.height>o.height?this.box.addClass(d):t.top+this.baseBoxSize.height>o.height&&(t.top=o.height-this.baseBoxSize.height)}return t}setBoxPosition(){let t={transform:""};t=this.correctBoxPosition(this.getBoxPosition(this.hotspotSettings)),this.box.setCssProp("position",""),this.box.setCss(t),this.box.render()}showBox(){this.isActive||this.isDisabled||(this.tooltip&&this.tooltipState===b.AUTO&&this.tooltip.removeClass(r+"-visible"),this.box.setCss({opacity:0}),this.box.appendTo(this.boxContainer),this.setBaseBoxSize(this.box.size),this.setBoxPosition(),this.box.setCss({opacity:1}),this.pointer.addClass(a),this.isActive=!0,this.emit("hotspotActivate",{data:{hotspot:this}}))}hideBox(t){if(this.isActive){if(t)return this.box&&this.box.setCssProp("opacity",0),setTimeout((()=>{this.hideBox()}),300),this._id;this.box&&(this.pointer.removeClass(a),this.box.remove()),this.isActive=!1,this.emit("hotspotDeactivate",{data:{hotspot:this}})}}changeBoxContainer(t){this.boxContainer=null!=t?t:h.Z.D.node.body}setBaseBoxSize(t,o){(t&&o||!this.baseBoxSize)&&(this.baseBoxSize={width:t.width,height:t.height})}setHotspotSettings(t){for(const o in t)({}).hasOwnProperty.call(t,o)&&(this.hotspotSettings[o]=t[o])}getHotspotSettings(t){return this.hotspotSettings}setAspectRatio(t,o){this.dX=t,this.dY=o}setPointerPosition(){const t=this.hotspotSettings;t&&this.pointer.setCss({top:t.pointerPositionPercentage.top?t.pointer.y:Math.ceil(t.pointer.y*this.dY),left:t.pointerPositionPercentage.left?t.pointer.x:Math.ceil(t.pointer.x*this.dX)})}showPointer(){this.hotspotSettings&&!this.isDisabled?(this.setPointerPosition(),this.isPointerInDoc||(this.isPointerInDoc=!0,this.pointer.appendTo(this.container))):this.hidePointer()}hidePointer(){this.isPointerInDoc&&(this.isPointerInDoc=!1,this.pointer.remove())}isHotspotShown(){return this.isShown}show(){this.isDisabled||this.isShown||(this.isShown=!0,this.showPointer(),this.boxState===b.SHOW&&this.showBox(),this.tooltipState===b.SHOW&&this.showTooltip())}hide(){this.isShown&&(this.isShown=!1,this.hideBox(),this.hideTooltip(),this.hidePointer())}isEnabled(){return!this.isDisabled}enable(){this.isDisabled&&(this.isDisabled=!1)}disable(){this.isDisabled||(this.isDisabled=!0,this.hide())}overridePointerEvent(){this.isBoxAlwaysVisible()||this.isTooltipAlwaysVisible()||this.container.addClass(c)}removeOverridePointerEvent(){this.container.removeClass(c)}get id(){return this._id}set id(t){this._id=t}get boxSize(){var t,o;return null!=(t=null==(o=this.box)?void 0:o.size)?t:{width:0,height:0}}setState(t,o){this.boxState!==t.popup&&(this.boxState=t.popup,t.popup===b.VISIBLE?o||this.showBox():this.hideBox()),this.tooltipState!==t.tooltip&&(this.tooltipState=t.tooltip,t.tooltip===b.VISIBLE?o||this.showTooltip():this.hideTooltip())}rewriteAttrPointer(t){this.pointer.attr("data-spot-id",t||this._id)}getHotspotPointer(){return this.pointer.node}destroy(){this.hideBox(),this.hideTooltip(),this.hotspotData=null,this.container=null,this._id=null,this.pointer.clearEvents(),this.tooltip&&this.tooltip.clearEvents(),this.pointer.remove(),this.box=null,this.boxContainer=null,this.baseBoxSize=null,this.tooltip=null,this.version=null,this.pointer=null,this.hotspotSettings=null,this.isActive=!1,this.isDisabled=!1,this.isPointerInDoc=!1,this.isTtShown=!1,super.destroy()}}const v=g},8574:(t,o,s)=>{s.r(o),s.d(o,{default:()=>p});var i=s(7488),e=s(3089),h=s(9913);class n extends e.Z{constructor(){super(),this.container=h.Z.$new("div").addClass("sirv-hotspot-container"),this.hotspots=[],this.activeHotspots=[],this.shownTooltips=[],this._originImageSize={width:0,height:0},this._instanceComponentNode=null,this.api={add:this.addHotspot.bind(this),remove:this.removeHotspot.bind(this),removeAll:this.removeAllHotspots.bind(this),list:()=>this.hotspots.map((t=>t.getHotspotPointer())),setVisibility:this.setStateById.bind(this),enable:this.enable.bind(this),disable:this.disable.bind(this)},this.addEvents()}set originImageSize(t){this._originImageSize={width:t.width,height:t.height}}appendTo(t){this.container.appendTo(t)}set instanceComponentNode(t){this.hotspots.length||(this._instanceComponentNode=t)}set containerSize(t){if(!this.hotspots.length||!t)return;const o=this.getRightBoundengClientRect();this.container.setCss({top:t.top-o.top,left:t.left-o.left,width:100*t.width/o.width+"%",height:100*t.height/o.height+"%"});const s=this.container.size,i=s.width/this._originImageSize.width,e=s.height/this._originImageSize.height;this.hotspots.forEach((t=>t.setAspectRatio(i,e)))}getActiveHotspot(t){return this.activeHotspots.find((o=>o.id===t))}getShownTooltips(t){return this.shownTooltips.find((o=>o.id===t))}addEvents(){this.on("hotspotActivate",(t=>{t.stopEmptyEvent();this.getActiveHotspot(t.data.hotspot.id)||(this.activeHotspots.forEach((t=>{t.isBoxAlwaysVisible()||t.hideBox(!0)})),this.activeHotspots.push(t.data.hotspot),this.activeHotspots[this.activeHotspots.length-1].overridePointerEvent(),t.data.id=t.data.hotspot.id,delete t.data.hotspot)})),this.on("hotspotDeactivate",(t=>{t.stopEmptyEvent();const o=this.getActiveHotspot(t.data.hotspot.id);o&&(o.removeOverridePointerEvent(),this.activeHotspots=this.activeHotspots.filter((t=>t.id!==o.id))),t.data.id=t.data.hotspot.id,delete t.data.hotspot})),this.on("hotspotTooltipShown",(t=>{t.stopAll();this.getShownTooltips(t.data.hotspot.id)||(h.Z.browser.mobile&&this.shownTooltips.forEach((t=>{t.isTooltipAlwaysVisible()||t.hideTooltip(!0)})),this.shownTooltips.push(t.data.hotspot),h.Z.browser.mobile&&(this.shownTooltips[this.shownTooltips.length-1].overridePointerEvent(),this.emit("hotspotActivate",{data:{id:t.data.hotspot.id}})))})),this.on("hotspotTooltipHidden",(t=>{t.stopAll();const o=this.getShownTooltips(t.data.hotspot.id);o&&(h.Z.browser.mobile&&o.removeOverridePointerEvent(),this.shownTooltips=this.shownTooltips.filter((t=>t.id!==o.id)),h.Z.browser.mobile&&this.emit("hotspotDeactivate",{data:{id:t.data.hotspot.id}}))})),this.clickFn=t=>{this.activeHotspots.forEach((t=>{t.isBoxAlwaysVisible()||t.hideBox(!0)})),this.shownTooltips.forEach((t=>{t.isTooltipAlwaysVisible()||t.hideTooltip(!0)}))},h.Z.D.addEvent("click",this.clickFn)}isHotspotActivated(){return this.activeHotspots.length>0}createHotspots(t){t&&t.length&&t.forEach((t=>{this.createHotspot(t,this.hotspots.length)}))}createHotspot(t,o){const s=new i.Z(this.container,t,o);s.parentClass=this,this.hotspots.push(s)}addHotspot(t){Array.isArray(t)||(t=[t]),this.createHotspots(t,this.hotspots.length)}getRightBoundengClientRect(t){return this.hotspots.length?this.container.node.parentNode.getBoundingClientRect():this._instanceComponentNode?this._instanceComponentNode.node.getBoundingClientRect():t.node.getBoundingClientRect()}changeBoxContainerParent(t){const o=t?this.container:null;this.hotspots.forEach((t=>{t.changeBoxContainer(o)}))}hideActiveHotspotBox(t){const o=this.activeHotspots.length||this.shownTooltips.length;return this.activeHotspots.forEach((o=>{o.hideBox(t)})),this.shownTooltips.forEach((t=>{t.hideTooltip()})),o}show(t){const o=this.hotspots[t];o&&o.show()}showAll(){this.hotspots.forEach((t=>{t.show()}))}hide(t){const o=this.hotspots[t];o&&o.hide()}hideAll(){this.hotspots.forEach((t=>{t.hide()}))}enable(t){const o=this.hotspots[t];o&&(o.enable(),o.show())}disable(t){this.hotspots[t]&&this.hotspots[t].disable()}enableAll(){this.hotspots.forEach((t=>{t.enable(),t.show()}))}disableAll(){this.hotspots.forEach((t=>{t.disable()}))}showNeededElements(){this.hotspots.forEach((t=>{t.isEnabled()&&t.isHotspotShown()&&(t.isBoxAlwaysVisible()&&(t.isBoxActivated()&&t.setBoxPosition(),t.showBox()),t.isTooltipAlwaysVisible()&&(t.isTooltipShown()&&t.setTooltipPosition(),t.showTooltip()))}))}removeHotspot(t){const o=this.hotspots[t];o&&(o.disable(),o.destroy(),this.removeByIndex(t),this.hotspots.length||this.container.remove())}removeAllHotspots(){for(let t=this.hotspots.length-1;t>=0;t--)this.removeHotspot(t)}removeByIndex(t){this.hotspots.splice(t,1),(this.hotspots.length>0&&0===t||t>0&&t<=this.hotspots.length-1)&&this.rewriteHotspotIndex(t)}rewriteHotspotIndex(t){for(let o=t,s=this.hotspots.length;o<s;o++)this.hotspots[o].id=o,this.hotspots[o].rewriteAttrPointer()}setStateById(t,o){this.hotspots[t]&&this.hotspots[t].setState(o)}destroy(){h.Z.D.removeEvent("click",this.clickFn),this.hotspots.forEach((t=>{t.destroy()})),this.container=null,this.activeHotspots=[],this.shownTooltips=[],this._instanceComponentNode=null,this.off("hotspotActivate"),this.off("hotspotDeactivate"),this.off("hotspotTooltipShown"),this.off("hotspotTooltipHidden"),this.hotspots=[],super.destroy()}}const p=n},6683:(t,o,s)=>{s.r(o),s.d(o,{default:()=>n});var i=s(8574),e=s(5245);class h extends i.default{constructor(){super(),this.options={rows:1,columns:36,rowsRevers:!1,columnsRevers:!1,originImageSize:{}},this.row=null,this.col=null,this.hotspotsSettings=[]}set Options(t){this.options=Object.assign(this.options,t||{})}get frameIndex(){let t;return t=this.options.rowsRevers&&this.options.columnsRevers?(this.options.rows-this.row-1)*this.options.columns+(this.options.columns-this.col):this.options.rowsRevers?(this.options.rows-this.row-1)*this.options.columns+this.col+1:this.options.columnsRevers?this.row*this.options.columns+(this.options.columns-this.col):this.row*this.options.columns+this.col+1,t}createHotspotsSettings(t){let o=!0;for(let s=0,i=t.length;s<i;s++){const i=new Map;Object.entries(t[s].frames).forEach((h=>{let[n,p]=h;const a=p;a.pointerPositionPercentage={top:(0,e.Z)(""+p.pointer.y),left:(0,e.Z)(""+p.pointer.x)},Object.entries(t[s]).forEach((t=>{let[s,i]=t;"frames"!==s&&("data"!==s||o)&&("pointer"===s?Object.assign(a[s],i):a[s]=i,o=!1)})),i.set(parseInt(n,10),a)})),this.hotspotsSettings.push(i),o=!0}}createHotspots(t){Array.isArray(t)||(t=[t]),this.createHotspotsSettings(t);const o=this.startHotspotSettings;super.createHotspots(o),this.hotspotsSettings.forEach(((t,o)=>{const s=t.get(this.frameIndex),i=this.hotspots[o];s&&i.isEnabled()&&(i.setHotspotSettings(s),i.setPointerPosition())}))}addHotspot(t){Array.isArray(t)||(t=[t]),this.createHotspotsSettings(t);const o=this.startHotspotSettings;super.createHotspots(o.slice(o.length-t.length)),this.updateAndShow()}get startHotspotSettings(){const t=[];return this.hotspotsSettings.forEach((o=>{let s=null;o.entries().next().value&&(s=o.entries().next().value[1]),s&&t.push(s)})),t}setFramePosition(t,o){this.row=t,this.col=o}updateAndShow(){const t=this.frameIndex;this.hotspotsSettings.forEach(((o,s)=>{const i=o.get(t),e=this.hotspots[s];i&&e.isEnabled()?(e.setHotspotSettings(i),e.isHotspotShown()?(e.setPointerPosition(),this.showNeededElements(),e.isBoxAlwaysVisible()&&(e.setBaseBoxSize(e.boxSize),e.setBoxPosition()),e.isTooltipAlwaysVisible()&&e.setTooltipPosition()):this.show(s)):this.hide(s)}))}hideNeededElements(t){this.activeHotspots.forEach((o=>{o.isBoxAlwaysVisible()||o.hideBox(t)})),this.shownTooltips.forEach((o=>{o.isTooltipAlwaysVisible()&&o.hideTooltip(t)}))}changeHotspotsPosition(t,o){this.row===t&&this.col===o||(this.setFramePosition(t,o),this.updateAndShow())}showAll(){const t=this.frameIndex;this.hotspotsSettings.forEach(((o,s)=>{o.get(t)&&this.show(s)}))}enable(t){if(this.hotspotsSettings[t]){const o=this.hotspots[t];o.enable(),this.hotspotsSettings[t].get(this.frameIndex)&&o.show()}}setStateById(t,o){this.hotspots[t]&&this.hotspots[t].setState(o,!this.hotspotsSettings[t].get(this.frameIndex))}removeHotspot(t){this.hotspots[t]&&(this.hotspotsSettings.splice(t,1),super.removeHotspot(t))}destroy(){super.destroy(),this.options=null,this.row=null,this.col=null,this.hotspotsSettings=null}}const n=h},5245:(t,o,s)=>{s.d(o,{Z:()=>i});const i=t=>/^([-]?[0-9]*\.?[0-9]+)%$/.test(""+t)}},t=>{var o=o=>t(t.s=o);t.O(0,[312,676,121,181,179],(()=>(o(7488),o(8574),o(6683),o(5245))));t.O()}]);"use strict";(globalThis.sirvViewerChunks=globalThis.sirvViewerChunks||[]).push([[181],{758:(t,i,e)=>{e.d(i,{Z:()=>a});var s=e(7244),h=e(3627),o=e(4186);class n extends s.Z{constructor(t,i,e){super(t,i,e),this.zoom=null,this.upscale=!1,this.defaultZoomOptions={},this.zoomContainer=this.instanceNode,this.zoomClassName=o.i2+"-zoomed-in",this.api=Object.assign(this.api,{zoomIn:()=>this.zoomIn(),zoomOut:()=>this.zoomOut(),isZoomed:()=>this.isZoomed()})}setDefaultZoomOptions(){this.defaultZoomOptions={test:!1,upscale:this.upscale,smoothing:!0}}createZoom(t,i){if(!this.destroyed){let t=Object.assign({},this.defaultZoomOptions);return i&&(t=Object.assign(t,i)),this.zoom=new h.Z(this.instanceNode,t),this.zoom.parentClass=this,this.zoom.setFullscreenState(this.isFullscreenEnabled?this.fullscreenState:o.UW.OPENED),t}return null}onZoomGetImage(t){t.data.exactSize=!0,t.data.maxSize=!1,t.data.round=!1,t.data.callbackData={lens:!0,indexX:t.data.indexX,indexY:t.data.indexY,level:t.data.level,number:t.data.number,map:t.data.map}}onZoomCancelLoadingOfTiles(t){t.data.callbackData||(t.data.callbackData={}),t.data.callbackData.lens=!0}onZoomBeforeShow(t){}onZoomShown(t){}onZoomHidden(t){}setZoomEvents(){this.zoom&&(this.on("zoomGetImage",(t=>{t.stopAll(),this.onZoomGetImage(t)})),this.on("zoomCancelLoadingOfTiles",(t=>{t.stopAll(),this.onZoomCancelLoadingOfTiles(t)})),this.on("zoomBeforeShow",(t=>{t.stopAll(),this.onZoomBeforeShow(t)})),this.on("zoomShown",(t=>{t.stopAll(),this.onZoomShown(t)})),this.on("zoomHidden",(t=>{t.stopAll(),this.onZoomHidden(t)})),this.on("zoomClick",(t=>{t.stopAll(),this.goToFullscreen&&this.fullscreenState===o.UW.CLOSED&&1===this.zoom.getZoomData()&&(this.zoom.hide(!0),this.emit("goToFullscreen"))})))}onAfterFullscreenIn(t){var i;null==(i=this.zoom)||i.setFullscreenState(o.UW.OPENED),super.onAfterFullscreenIn(t)}onAfterFullscreenOut(t){var i;null==(i=this.zoom)||i.setFullscreenState(o.UW.CLOSED),super.onAfterFullscreenOut(t)}zoomIn(){return this.ready}zoomOut(){return this.ready}getZoomData(){return this.ready&&this.zoom?this.zoom.getZoomData():0}isZoomed(){return!(!this.ready||!this.zoom)&&(this.zoom.shown||this.zoom.showing)}isZoomSizeExist(){return!1}clearZoom(){this.zoom&&(this.off("zoomGetImage"),this.off("zoomCancelLoadingOfTiles"),this.off("zoomBeforeShow"),this.off("zoomShown"),this.off("zoomHidden"),this.zoom.destroy(),this.zoom=null)}destroy(){this.clearZoom(),super.destroy()}}const a=n},6361:(t,i,e)=>{e.d(i,{Z:()=>h});var s=e(3412);e(932).KF.addCssModule("Hint",".sirv-hint{-webkit-font-smoothing:antialiased;display:inline-block;left:0;opacity:0;pointer-events:none;position:absolute;text-align:center;top:50%;transform:translate3d(0,-50%,1px);transition:opacity .3s linear;width:100%;z-index:42}.sirv-hint.show{opacity:1}.sirv-hint-message{background:#373a3ccc;border-radius:2px;color:#fff;display:inline-block;font:normal 16px/1.5 Lucida Grande,Lucida Sans Unicode,Verdana,Helvetica Neue,Arial,Helvetica,sans-serif;padding:.35em 1.5em;position:relative;text-decoration:none}");const h=class{constructor(t,i){this.parent=s.Z.$(t),this.options=Object.assign({html:"hint",showClass:"show",additionalClass:[],autohide:3500},i||{}),this.instanceNode=s.Z.$new("div").addClass("sirv-hint"),this.hintContainer=s.Z.$new("span").addClass("sirv-hint-message"),this.inDoc=!1,this.isShown=!1,this.timer=null,this.instanceNode.addClass(...this.options.additionalClass),this.hintContainer.node.innerHTML=this.options.html,this.instanceNode.append(this.hintContainer)}get autoHideTime(){return this.options.autohide}get actionTime(){let t=0,i=this.instanceNode.getCss("transition");try{i=i.split(" ")[1]}catch(t){i=0}return i&&(i=i.trim(),/m?s$/.test(i)&&(/s$/.test(i)?(t=parseFloat(i),t*=1e3):t=parseInt(i,10))),t}get movingTime(){return this.autoHideTime+this.actionTime}append(){this.inDoc||(this.inDoc=!0,this.parent.append(this.instanceNode))}removeEvent(){this.instanceNode.removeEvent("transitionend")}show(){this.append(),clearTimeout(this.timer),this.timer=null,this.instanceNode.render(),this.removeEvent(),this.instanceNode.addClass(this.options.showClass),this.isShown=!0,this.options.autohide&&(this.timer=setTimeout((()=>{this.hide()}),this.options.autohide))}hide(){this.inDoc&&(this.removeEvent(),clearTimeout(this.timer),this.timer=null,this.instanceNode.addEvent("transitionend",(t=>{t.stop(),this.removeEvent(),this.inDoc=!1,this.instanceNode.remove()})),this.instanceNode.removeClass(this.options.showClass),this.isShown=!1)}destroy(){this.instanceNode.setCssProp("transitionend","none"),this.hide(),this.removeEvent(),this.hintContainer.remove(),this.hintContainer.node.innerHTML="",this.instanceNode.remove(),this.inDoc=!1}}},3627:(t,i,e)=>{e.d(i,{Z:()=>ht});var s=e(9913);const h=class{constructor(t){this.pn=s.Z.$(t);const i="sirv-zoom";var e;this.cnv=s.Z.$new("div"),this.cnv.addClass(i),this.node=s.Z.$new("div").setCss({opacity:0}),this.node.addClass(i+"-wrapper"),this.zoomWrapper=s.Z.$new("div").addClass("sirv-zoom-image-wrapper"),this.zoom=(e=this.pn,s.Z.$(s.Z.$(e).node.getElementsByTagName("img")[0]||s.Z.$(e).node.getElementsByTagName("canvas")[0]||e)),this.lens=s.Z.D.node.body,this.isBody=!0,this.lastCursorClass=null,this.image=null,this.perspective="",s.Z.browser.mobile&&"ios"===s.Z.browser.platform&&(this.perspective="perspective(1000px) ")}get hash(){return this.image?this.image.$J_UUID+""||this.image.attr("src"):null}get parentSize(){return this.pn.size}get parentPostion(){return this.pn.position}get zoomSize(){return this.zoom.size}get parentBoundaries(){return this.cnv.node.parentNode?this.cnv.node.getBoundingClientRect():null}addScrollEvent(t){s.Z.W.addEvent("scroll",t)}removeScrollEvent(t){t?s.Z.W.removeEvent("scroll",t):s.Z.W.removeEvent("scroll")}addClassToWrapper(t){this.node.addClass("sirv-"+t+"-zoom")}addEventToMainContainer(t,i){this.cnv.addEvent(t,i)}removeEventFromMainContainer(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];this.cnv.removeEvent(i)}addEventToWrapper(t,i){this.node.addEvent(t,i)}removeEventFromWrapper(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];this.node.removeEvent(i)}addMouseoutEvent(t){this.addEventToWrapper("mouseout",(i=>{let e=i.related;if(e){for(;e&&e!==this.node.node&&e!==this.lens.node;)e=e.parentNode;this.node.node!==e&&t(i)}}))}set lensContainer(t){t||(t=s.Z.$(s.Z.D.node.body)),this.isBody=s.Z.$(t)===s.Z.$(s.Z.D.node.body),this.lens=s.Z.$(t)}toggleCursorClass(t){t!==this.lastCursorClass&&(this.lastCursorClass&&(this.cnv.removeClass(this.lastCursorClass),this.lastCursorClass=null),t&&(this.cnv.addClass(t),this.lastCursorClass=t))}setImagePosition(t,i){this.image&&this.zoomWrapper.setCssProp("transform",this.perspective+"translate3d("+t.x+"px, "+t.y+"px, 0) scale("+i.x+", "+i.y+")")}addStartCss(){this.lensStyle={opacity:0,transform:"scale(0)"}}appendNodes(t,i){this.cnv.addEvent("contextmenu",(t=>{t.stopDefaults()})),this.image=s.Z.$(t),this.image.setCss({width:i.width+"px",height:i.height+"px"}),s.Z.browser.mobile||this.image.addEvent("mousedown",(t=>{t.stopDefaults()})),this.zoomWrapper.append(this.image),this.node.append(this.zoomWrapper),this.node.appendTo(this.cnv),this.cnv.appendTo(this.lens,!1)}set eventNodePositionSize(t){let i=t.position.top,e=t.position.left;if(!this.isBody){const t=this.lens.position;i-=t.top,e-=t.left}this.cnv.setCss({top:i,left:e,width:t.size.width,height:t.size.height})}set lensStyle(t){this.node.setCss(t)}set lensPosition(t){this.lensStyle={top:t.top,left:t.left}}set lensSize(t){this.lensStyle={width:t.width,height:t.height}}setLensCss(t,i,e){this.lensPosition=t,this.lensSize=i,this.lensStyle={opacity:1,transform:"scale(1)",transition:e||"none"}}setImageSize(t,i,e){this.zoomWrapper.setCss({top:0,left:0,width:i.width+"px",height:i.height+"px","transform-origin":"50% 50%",transform:this.perspective+"translate3d("+t.x+"px, "+t.y+"px, 0) scale("+e.x+", "+e.y+")"}),this.zoomWrapper.render(),this.image.setCss({width:"100%",height:"100%"}),this.image.render()}clearCss(){this.node.setCss({transition:"",opacity:"",transform:""}),this.node.removeAttr("style"),this.image&&this.image.setCss({width:"",height:""}),this.zoomWrapper.setCss({top:"",left:"",width:"",height:"",transition:"",transform:""})}clearDOM(){this.image&&(this.image.remove(),this.image=null),this.zoomWrapper.remove(),this.node.remove(),this.cnv.remove()}removeEvents(){this.cnv.clearEvents(),this.image&&this.image.clearEvents(),this.node.clearEvents()}get boundaries(){return this.cnv.node.getBoundingClientRect()}destroy(){this.image&&(this.image.remove(),this.image=null),this.zoomWrapper.remove(),this.node.remove(),this.cnv.remove()}};const o=class extends h{constructor(t){super(t),this.mouseMoveHandler=null}getContainerForMap(){return this.node}addStartCss(){super.addStartCss(),this.node.addEvent("mousescroll",(t=>{t.stop()})),this.lensStyle={opacity:0,transform:"scale(1)"}}removeDragstart(){this.node.del("event:mousedrag:dragstart")}addEventsCanvasClass(t){this.cnv.addClass(t)}removeEventsCanvasClass(t){this.cnv.removeClass(t)}getContainerSize(){return this.node.size}getContainerPosition(){return this.node.position}addGlobalEvent(t){this.mouseMoveHandler||(this.mouseMoveHandler=t,s.Z.D.addEvent("mousemove",t))}removeGlobalEvent(){this.mouseMoveHandler&&(s.Z.D.removeEvent("mousemove",this.mouseMoveHandler),this.mouseMoveHandler=null)}removeEvents(){super.removeEvents(),this.removeGlobalEvent()}};const n=class{constructor(t,i){this.p=s.Z.$(t),this.c=s.Z.$new("div"),this.c.addClass(i+"-deepzoom")}get container(){return this.c}show(){this.p.append(this.c)}hide(){this.c.remove()}destroy(){this.c.remove(),this.c=null}};const a=class{constructor(t,i){this.p=s.Z.$(t),this.dppx=i,this.w=s.Z.$new("div"),this.cvs=s.Z.$new("canvas"),this.ctx=this.cvs.node.getContext("2d"),this.w.append(this.cvs)}set index(t){this.w.attr("z-index"+(t+1))}append(){this.p.append(this.w)}show(){this.w.setCssProp("display","")}hide(){this.w.setCssProp("display","none")}clear(){this.ctx.clearRect(0,0,this.cvs.node.width,this.cvs.node.height)}draw(t,i,e,s){this.ctx.setTransform(1,0,0,1,0,0),this.clear(),this.ctx.setTransform(t,0,0,i,e,s)}drawTile(t,i,e){"edge"===s.Z.browser.uaName?this.dppx>1?this.ctx.drawImage(t.node,0,0,i.width,i.height,e.x,e.y,i.width,i.height):this.ctx.drawImage(t.node,e.x,e.y,i.width,i.height):this.ctx.drawImage(t.node,0,0,i.width,i.height,e.x,e.y,i.width,i.height)}set canvasSize(t){this.cvs.setCss(t),this.cvs.attr("width",t.width*this.dppx),this.cvs.attr("height",t.height*this.dppx)}destroy(){this.cvs.remove(),this.w.remove()}};class r{constructor(t){this.isInner=t.inner,this.rows=t.lengthOfRow,this.cols=t.lengthOfColumn,this.size={width:t.cameraWidth,height:t.cameraHeight},this.bMapS={width:t.mapWidth,height:t.mapHeight},this.bTileS={width:t.tileWidth,height:t.tileHeight},this.bScale={x:t.scaleX,y:t.scaleY},this.mapS={width:this.bMapS.width,height:this.bMapS.height},this.tileS={width:this.bTileS.width,height:this.bTileS.height},this.baseLastTileSize={width:this.bMapS.width-(this.cols-1)*this.bTileS.width,height:this.bMapS.height-(this.rows-1)*this.bTileS.height},this.lastTileSize={width:this.baseLastTileSize.width,height:this.baseLastTileSize.height},this.position={x:0,y:0},this.lastCorrectionPosition={x:0,y:0},this.scale={x:0,y:0},this.lastScale=0,this.lastGlobaslScale=0,this.count={x:0,y:0},this.calcCount(),this.shownTiles={startX:0,countX:this.count.x,startY:0,countY:this.count.y}}static getTileIndex(t,i){return Math.floor(t/i)}static getTileSize(t,i){return t*i}get x(){return this.position.x}get y(){return this.position.y}get width(){return this.size.width}get height(){return this.size.height}get mapWidth(){return this.mapS.width}get mapHeight(){return this.mapS.height}get shownTilesX(){return this.shownTiles.startX}get shownTilesY(){return this.shownTiles.startY}get shownTilesWidth(){return this.shownTiles.countX}get shownTilesHeight(){return this.shownTiles.countY}get scaleX(){return this.scale.x}get scaleY(){return this.scale.y}set mapWidth(t){null!=t&&(this.mapS.width=t)}set mapHeight(t){null!=t&&(this.mapS.height=t)}checkTile(t,i){const e=this.shownTiles;return e.startX<=t&&e.startY<=i&&e.startX+e.countX>t&&e.startY+e.countY>i}calcCount(){this.count={x:Math.ceil(this.size.width/this.tileS.width)+1,y:Math.ceil(this.size.height/this.tileS.height)+1}}findShownTiles(){const t=this.position,i=this.tileS;let e=0,s=0,h=this.count.x,o=this.count.y;t.x<0&&(e=r.getTileIndex(Math.abs(t.x),i.width)),t.y<0&&(s=r.getTileIndex(Math.abs(t.y),i.height)),e+h>this.cols&&(h=this.cols-e),s+o>this.rows&&(o=this.rows-s),this.shownTiles={startX:e,countX:h,startY:s,countY:o}}calcTileSize(){this.tileS.width=r.getTileSize(this.bTileS.width,this.scale.x),this.tileS.height=r.getTileSize(this.bTileS.height,this.scale.y),this.lastTileSize.width=r.getTileSize(this.baseLastTileSize.width,this.scale.x),this.lastTileSize.height=r.getTileSize(this.baseLastTileSize.height,this.scale.y)}calcData(t){this.lastScale!==this.scale.x&&(this.calcTileSize(),this.calcCount(),this.mapS.width=this.tileS.width*(this.cols-1)+this.lastTileSize.width,this.mapS.height=this.tileS.height*(this.rows-1)+this.lastTileSize.height,this.lastCorrectionPosition.x=(this.bMapS.width*this.bScale.x-this.mapS.width)/2,this.lastCorrectionPosition.y=(this.bMapS.height*this.bScale.y-this.mapS.height)/2,this.lastScale=this.scale.x),this.position.x=t.x+this.lastCorrectionPosition.x,this.position.y=t.y+this.lastCorrectionPosition.y}action(t,i){this.lastGlobaslScale!==i.x&&(this.lastScale=this.scale.x,this.scale.x=i.x*this.bScale.x,this.scale.y=i.y*this.bScale.y,this.lastGlobaslScale=i.x),this.calcData(t),this.findShownTiles()}resize(t){this.size.width=t.width,this.size.height=t.height,this.calcCount(),this.findShownTiles()}destroy(){this.shownTiles=[]}}const l=r;var d=e(3089);const c=0,m=1,g=2;class p extends d.Z{constructor(t){super(),this.id=t.id,this.index={x:t.indexX,y:t.indexY},this.position={x:t.x,y:t.y},this.size={width:t.width,height:t.height},this.storage=t.storage,this.state=c,this.node=null,this.storage.has(this.id)&&(this.node=this.storage.get(this.id),this.state=g)}get loaded(){return this.state===g}addImageToStorage(){this.storage.has(this.id)||this.storage.set(this.id,this.node)}load(){this.state===c&&(this.state=m,this.emit("getTile",{data:{indexX:this.index.x,indexY:this.index.y,number:this.id}}))}cancelLoading(){this.state===m&&(this.state=c,this.emit("zoomCancelLoadingOfTiles",{data:{indexX:this.index.x,indexY:this.index.y,number:this.id}}))}set image(t){this.state!==g&&(this.state=g,this.node=s.Z.$(t),this.addImageToStorage())}destroy(){this.cancelLoading(),this.storage=null,super.destroy()}}const w=p,S=new Map,z=(t,i)=>t/i;class u extends d.Z{constructor(t,i){super(),this.view=t,this.id=i.id,this.dppx=i.dppx,this.size={width:i.width,height:i.height},this.mSize={width:i.maxWidth,height:i.maxHeight},this.tSize={width:i.tileWidth,height:i.tileHeight},this.tileImageSize={width:i.tileImageWidth,height:i.tileImageHeight},this.layerSize={width:i.layerWidth,height:i.layerHeight},this.hash=i.hash+"-"+this.size.width+"x"+this.size.height,S.has(this.hash)||S.set(this.hash,new Map),this.scaleFactor={x:(this.mSize.width-this.size.width)/this.size.width+1,y:(this.mSize.height-this.size.height)/this.size.height+1},this.maxDisplayedSize={width:i.maxDisplayedWidth,height:i.maxDisplayedHeight},this.minDisplayedSize={width:i.minDisplayedWidth,height:i.minDisplayedHeight},this.globalScale={x:1,y:1},this.globalPosition={x:0,y:0},this.view.index=this.id,this.lensSize={width:i.viewPortWidth,height:i.viewPortHeight},this.isAdded=!1,this.isShown=!1,this.isDisplayed=!1,this.tiles=this.calcTiles(),this.tileCount=this.tiles.length*this.tiles[0].length,this.loadedTiles=0,this.camera=new l({inner:i.inner,scaleX:this.scaleFactor.x,scaleY:this.scaleFactor.y,cameraWidth:i.viewPortWidth,cameraHeight:i.viewPortHeight,mapWidth:this.size.width,mapHeight:this.size.height,tileWidth:z(this.tileImageSize.width,this.dppx),tileHeight:z(this.tileImageSize.height,this.dppx),lengthOfRow:this.tiles.length,lengthOfColumn:this.tiles[0].length})}addEvents(){const t=this.tileImageSize;this.on("getTile",(i=>{i.data.width=this.size.width,i.data.height=this.size.height,i.data.level=this.id,i.data.imageSettings={tile:{width:t.width,height:t.height,number:i.data.number}},this.dppx>1&&(i.data.dppx=this.dppx)})),this.on("zoomCancelLoadingOfTiles",(i=>{i.data.width=this.size.width,i.data.height=this.size.height,i.data.imageSettings={tile:{width:t.width,height:t.height,number:i.data.number}}}))}cancelLoadingOfTiles(){this.tiles.forEach((t=>{t.forEach((t=>{t.cancelLoading()}))}))}set image(t){const i=this.tiles[t.indexY][t.indexX];i.loaded||(this.loadedTiles+=1),i.image=t.node,this.isShown&&this.camera.checkTile(t.indexX,t.indexY)&&this.drawTile(i)}append(){!this.isAdded&&this.isShown&&(this.isAdded=!0,this.addEvents(),this.view.append())}calcTiles(){const t=[],i=this.tileImageSize,e=Math.ceil(this.layerSize.width/i.width),s=Math.ceil(this.layerSize.height/i.height);for(let h=0;h<s;h++){const o=[];for(let t=0;t<e;t++){const n=new w({y:h*i.height,x:t*i.width,indexX:t,indexY:h,id:h*e+t,width:t!==e-1?i.width:this.layerSize.width-t*i.width,height:h!==s-1?i.height:this.layerSize.height-h*i.height,storage:S.get(this.hash)});n.parentClass=this,o.push(n)}t.push(o)}return t}correctDPPXPosition(t,i,e){let s=t;if(this.dppx>1){const h=i/2;s=Math.abs(t-h)/(e/100),s=h*this.dppx-e*this.dppx/100*s}return s}draw(){const t=this.camera;this.isShown&&(this.view.draw(t.scaleX,t.scaleY,this.correctDPPXPosition(t.x,t.width,t.mapWidth),this.correctDPPXPosition(t.y,t.height,t.mapHeight)),this.eachTile((t=>{this.drawTile(t)})))}drawTile(t){t&&t.loaded&&this.view.drawTile(t.node,t.size,t.position)}eachTile(t){const i=this.camera;for(let e=0,s=i.shownTilesHeight;e<s;e++)for(let s=0,h=i.shownTilesWidth;s<h;s++)t(this.tiles[i.shownTilesY+e][i.shownTilesX+s])}checkSize(){const t=this.isShown,i=this.camera,e=i.mapWidth<=this.maxDisplayedSize.width,s=i.mapHeight<=this.maxDisplayedSize.height,h=i.mapWidth>this.minDisplayedSize.width,o=i.mapHeight>this.minDisplayedSize.height;this.isShown=h&&o,this.isDisplayed=e&&s&&h&&o,t!==this.isShown&&(this.isShown?this.view.show():this.view.hide(),this.isShown||this.cancelLoadingOfTiles())}action(t,i){this.globalPosition.x=t.x,this.globalPosition.y=t.y,this.globalScale.x=i.x,this.globalScale.y=i.y,this.camera.action(this.globalPosition,this.globalScale),(this.camera.mapWidth>this.mSize.width||this.camera.mapHeight>this.mSize.height)&&(this.camera.mapWidth=this.mSize.width,this.camera.mapHeight=this.mSize.height),this.checkSize(),this.append(),this.draw()}loadImages(){this.isShown&&this.isDisplayed&&this.loadedTiles!==this.tileCount&&this.eachTile((t=>{t.load()}))}set lensSize(t){this.view.canvasSize=t}resize(t){this.lensSize=t,this.camera.resize(t),this.action(this.globalPosition,this.globalScale)}destroy(){this.off("getTile"),this.off("zoomCancelLoadingOfTiles"),this.isShown=!1,this.camera.destroy(),this.tiles.forEach((t=>{t.forEach((t=>{t.destroy()}))})),super.destroy()}}const v=u;var x=e(4186);const y={canZoom:x.i2+"-cursor-zoom",zoomIn:x.i2+"-cursor-zoom-in",zoomOut:x.i2+"-cursor-zoom-out",drag:x.i2+"-cursor-dragging",hidden:x.i2+"-cursor-hidden"},b=["mousedrag","touchdrag"],P="edge"===s.Z.browser.uaName?"pointerup":"touchend",f="edge"===s.Z.browser.uaName?"pointermove":"mousemove",C=(t,i)=>t/100*i,Z=(t,i)=>t/i*100,E=(t,i)=>(t-i)/2,T=(t,i,e,s)=>(t>i&&(t=i),t+e<s&&(t=s-e),t),D=(t,i)=>i/t;var I=e(6511),M=e(2194);class O extends d.Z{constructor(t,i){super(),this.view=t,this.options=Object.assign({tiles:!0,inner:!0,tileSize:{width:256,height:256},minZoomFactor:100,upscale:!1},i),this._hash=null,this.setDefaultVars()}static convertScaleToSize(t,i){return{width:(0,M.Z)(t.width*i.x,2),height:(0,M.Z)(t.height*i.y,2)}}set hash(t){this._hash=""+s.Z.getHashCode(t)}setDefaultVars(){this.isShown=!1,this.originSize={width:0,height:0},this._maxSize={width:0,height:0},this._minSize={width:0,height:0},this._lensSize={width:0,height:0},this.currentSize={width:0,height:0},this.levels=[],this.on("getTile",(t=>{this.options.tiles||(delete t.data.imageSettings.tile,delete t.data.number)}))}createLevels(){const t=(t,i)=>i<1.5?t:t*s.Z.DPPX,i=this._maxSize,e=this._minSize;if(!this.levels.length&&i.width-e.width>this.options.minZoomFactor){let s=[];if(this.options.inner){if(s=((t,i)=>{let e=Math.max(1,Math.round(Math.log(Math.max(i.width/t.width,i.height/t.height))/Math.LN2)),{width:s,height:h}=i;const o=[];for(;e>0;)e-=1,o.push({width:s,height:h}),s=Math.trunc(s/2),h=Math.trunc(h/2);return o})(e,i),!this.options.tiles){const t=(0,I.Z)(s[0].width,this.originSize.width,this.options.upscale);t>1&&t<2&&(s[0]=this.originSize)}}else s.push({width:i.width,height:i.height});let h=this.options.tileSize;for(let o=0,n=s.length;o<n;o++){this.options.tiles||(h=s[o]);const r=o+1<n-1?s[o+1]:e,l=o-1>=0?s[o-1]:i,d=(0,I.Z)(s[o].width,this.originSize.width,this.options.upscale),c=new a(this.view.container,d),m=new v(c,{id:n-o,hash:this._hash,dppx:d,inner:this.options.inner,width:s[o].width,height:s[o].height,maxWidth:this._maxSize.width,maxHeight:this._maxSize.height,layerWidth:Math.round(s[o].width*d),layerHeight:Math.round(s[o].height*d),maxDisplayedWidth:s[o].width+C(l.width-s[o].width,50),maxDisplayedHeight:s[o].height+C(l.height-s[o].height,50),minDisplayedWidth:r.width+C(s[o].width-r.width,50),minDisplayedHeight:r.height+C(s[o].height-r.height,50),tileWidth:h.width,tileHeight:h.height,tileImageWidth:t(h.width,d),tileImageHeight:t(h.height,d),viewPortWidth:this._lensSize.width,viewPortHeight:this._lensSize.height});m.parentClass=this,this.levels.push({view:c,controller:m})}this.levels.reverse()}}getCurrentShownLevel(){let t=null;const i=this.levels.length;if(this.isShown)for(let e=i-1;e>=0;e--)if(this.levels[e].controller.isShown){t=this.levels[e].controller;break}return t}getScale(t){const i=this.getCurrentShownLevel();let e;const s=this.levels.length;switch(t){case"zoomin":e=i?this.currentSize.width<i.size.width?D(this._maxSize.width,i.size.width):i.id!==s?D(this._maxSize.width,this.levels[i.id].controller.size.width):D(this._maxSize.width,this.levels[s-1].controller.size.width):D(this._maxSize.width,this.levels[0].controller.size.width);break;case"zoomout":e=i?this.currentSize.width>i.size.width?D(this._maxSize.width,i.size.width):i.id>1?D(this._maxSize.width,this.levels[i.id-2].controller.size.width):D(this._maxSize.width,this._minSize.width):D(this._maxSize.width,this._minSize.width)}return e}show(){return this.isShown||(this.isShown=!0,this.view.show()),this}hide(){return this.isShown&&(this.isShown=!1,this.view.hide(),this.levels.forEach((t=>{t.view.destroy(),t.controller.destroy()})),this.setDefaultVars()),this}action(t,i){return this.isShown&&(this.currentSize=O.convertScaleToSize(this._maxSize,i),this.levels.forEach((e=>{e.controller.action(t,i)}))),this}set lensSize(t){this._lensSize.width=t.width,this._lensSize.height=t.height}set minSize(t){this._minSize.width=t.width,this._minSize.height=t.height}set maxSize(t){this._maxSize.width=t.width,this._maxSize.height=t.height,this.originSize.width=t.originWidth,this.originSize.height=t.originHeight,this.createLevels()}loadImages(){this.isShown&&this.levels.forEach((t=>{t.controller.loadImages()}))}set image(t){this.isShown&&(this.levels[t.level-1].controller.image=t)}resize(){this.isShown&&this.levels.forEach((t=>{t.controller.resize(this._lensSize)}))}destroy(){this.hide(),this.off("getTile"),this.off("zoomCancelLoadingOfTiles"),super.destroy()}}const H=O;class N extends d.Z{constructor(t,i){super(),this.view=new n(t,"sirv"),this.controller=new H(this.view,i),this.controller.parentClass=this}set lensSize(t){this.controller.lensSize=t}loadImages(){this.controller.loadImages()}getScale(t){return this.controller.getScale(t)}set image(t){this.controller.image=t}set hash(t){this.controller.hash=t}set minSize(t){this.controller.minSize=t}set maxSize(t){this.controller.maxSize=t}show(){this.controller.show()}hide(){this.controller.hide()}action(t,i){this.controller.action(t,i)}resize(){this.controller.resize()}destroy(){this.controller.destroy(),this.controller=null,this.view.destroy(),this.view=null,super.destroy()}}const W=N,_=0,L=1;const k=class{constructor(t,i){this.state=_,this.id=null,this.cb=t||(()=>{}),this.stopCb=i||(()=>{})}start(){if(this.state!==L){this.state=L;const t=i=>{this.cb(i),this.state!==_&&(this.id=requestAnimationFrame(t))};this.id=requestAnimationFrame(t)}}stop(){this.state!==_&&(this.state=_,cancelAnimationFrame(this.id),this.stopCb())}};var A=e(441);class R extends d.Z{constructor(t,i){super(),this.o=Object.assign({test:!1,pan:!1,smoothing:!0,tiles:!0,customZooming:!0,clickBehavior:"both",upscale:!1,trigger:"hover"},i),this.view=t,this.state=x.OR.HIDDEN,this.fsState=x.UW.CLOSED,this._x=0,this._y=0,this.baseScale={x:1,y:1},this.scale={x:1,y:1},this.dScale={x:1,y:1},this.iSize={width:0,height:0},this.iPos={x:0,y:0},this.iDPos={x:0,y:0},this.pPos={top:0,left:0},this.pSize={width:0,height:0},this.anim=null,this.animCb=null,this.animStep=0,this.lastAnimTimer=0,this.deepZoom=null,this.deepZoomTimer=null,this.lensSize={width:0,height:0},this.lensHalfSize={width:0,height:0},this.lensPosition={top:0,left:0},this.currentLensSize={width:100,height:100},this.dppx=1,this.zoomNodeSize={width:0,height:0},this.boundaries=null,this.ANIM_STEP=.1,this.nonDeepZoomImageLevels=[],this.scrollHandler=()=>{[x.OR.SHOWING,x.OR.SHOWN].includes(this.state)&&this.hide(this.state===x.OR.SHOWING)}}setFullscreenState(t){this.fsState=t}init(){this.getAllSizes(),this.view.setLensCss(this.lensPosition,this.lensSize),this.createDeepZoom(),this.createAnimation(this.ANIM_STEP),this.view.addScrollEvent(this.scrollHandler)}createDeepZoom(){this.deepZoom=new W(this.view.node,{tiles:this.o.tiles,inner:["inner","outside"].includes(this.o.type),upscale:this.o.upscale}),this.deepZoom.parentClass=this,this.on("getTile",(t=>{t.stopAll(),this.emit("zoomGetImage",{data:t.data})})),this.on("zoomCancelLoadingOfTiles",(t=>{t.stopEmptyEvent()}))}set lensContainer(t){this.view.lensContainer=t}getBoundaries(){this.boundaries=this.view.parentBoundaries}getAllSizes(){this.pSize=this.view.parentSize,this.pPos=this.view.parentPostion,this.zoomNodeSize=this.view.zoomSize,this.getBoundaries()}get shown(){return this.state===x.OR.SHOWN}get showing(){return this.state===x.OR.SHOWING}deepZoomAction(t,i){clearTimeout(this.deepZoomTimer),this.deepZoomTimer=setTimeout((()=>{this.deepZoom.loadImages(),i&&(this.deepZoom.lensSize=i,this.deepZoom.resize()),this.deepZoom.action(this.iDPos,this.dScale),t||this.deepZoomAction(this.dScale.x===this.scale.x)}),this.lastAnimTimer+10),i&&(this.deepZoom.lensSize=i,this.deepZoom.resize()),this.deepZoom.action(this.iDPos,this.dScale)}stopMovingAndZooming(){this.scale.x=this.dScale.x,this.scale.y=this.dScale.y,this.iPos.x=this.iDPos.x,this.iPos.y=this.iDPos.y}createAnimation(t){const i=t=>{let i=!1;return this.dScale[t]<this.baseScale[t]&&(i=!0,this.dScale[t]=this.baseScale[t]),this.dScale[t]>1&&(i=!0,this.dScale[t]=1),i};this.animStep=t;let e=0,s=!1;this.anim=new k((h=>{if(!e)return void(e=h);let o,n,a,r,l=!1;this.lastAnimTimer=h-e;let d=!1,c=!1;e=h;let m=!0;if(this.scale.x!==this.dScale.x&&(l=!0,this.sendZoomingAction(),a=this.scale.x-this.dScale.x,o=a*this.animStep,this.dScale.x+=o,this.dScale.y+=o,d=i("x"),c=d,Math.abs(a)<.2?Math.abs(a)<1e-4&&(this.dScale.x=this.scale.x,this.dScale.y=this.scale.x):(m=!1,s=!0)),this.iPos.x!==this.iDPos.x||this.iPos.y!==this.iDPos.y){l=!0,a=this.iPos.x-this.iDPos.x,r=this.iPos.y-this.iDPos.y,o=a*this.animStep,n=r*this.animStep,this.iDPos.x+=o,this.iDPos.y+=n,this.iDPos.x=(0,M.Z)(this.iDPos.x,4),this.iDPos.y=(0,M.Z)(this.iDPos.y,4);Math.max(Math.abs(a),Math.abs(r))<2?(Math.max(Math.abs(a),Math.abs(r))<1||d||c)&&(this.iDPos.x=this.iPos.x,this.iDPos.y=this.iPos.y):(m=!1,s=!0)}l?(this.render(this.iDPos,this.dScale),m&&s&&(s=!1,this.deepZoom.loadImages())):this.animCb&&(this.animCb(),this.animStep=t,this.animCb=null)}),(()=>{e=0,s=!0}))}render(t,i){this.deepZoomAction(),this.view.setImagePosition(t||this.iDPos,i||this.dScale)}correctX(t){return t-this.pPos.left}correctY(t){return t-this.pPos.top}set x(t){this._x=this.correctX(t)}set y(t){this._y=this.correctY(t)}getZoomData(t){let i=0;return t||(t=this.scale.x),(this.shown||this.showing)&&(i=(0,M.Z)((t-this.baseScale.x)/(1-this.baseScale.x),2)),i}get nextMinZoom(){let t=this.deepZoom.getScale("zoomout");return t<this.baseScale.x&&(t=this.baseScale.x),this.getZoomData(t)}get nextMaxZoom(){let t=this.deepZoom.getScale("zoomin");return t>1&&(t=1),this.getZoomData(t)}zoom(t,i,e){const s=this.scale.x,h=this.iSize,o=h.width*this.scale.x,n=h.height*this.scale.y,a=E(h.width,o),r=E(h.height,n);i=i||this.pPos.left+this.lensHalfSize.width,e=e||this.pPos.top+this.lensHalfSize.height,this.baseScalePercent={x:Z(Math.abs(this.iPos.x)+this.correctX(i)-a,o),y:Z(Math.abs(this.iPos.y)+this.correctY(e)-r,n)};const l=this.deepZoom.getScale(t);this.scale.x=l,this.scale.y=l,this.x=i,this.y=e,this.afterZoom(s)}afterZoom(t){t!==this.scale.x&&(this.sendZoomingAction(),this.setCursorState(this.figureOutCursorState()),this.o.smoothing?this.animStep=.25:(this.dScale.x=this.scale.x,this.dScale.y=this.scale.y,this.iDPos.x=this.iPos.x,this.iDPos.y=this.iPos.y,this.render(this.iPos,this.scale)))}zoomUp(t,i){return!(!this.shown&&!this.showing||1===this.scale.x)&&(this.zoom("zoomin",t,i),!0)}zoomDown(t,i){return!(!this.shown&&!this.showing||this.scale.x===this.baseScale.x)&&(this.zoom("zoomout",t,i),!0)}sendZoomingAction(){clearTimeout(this.zoomingTimer),this.zoomingTimer=setTimeout(s.Z.$((t=>{this.emit("zooming",{data:{zoom:this.getZoomData(),from:t,to:this.scale.x}})})).bind(this,this.dScale.x),24)}figureOutCursorState(){const t=this.getZoomData();return 0===t?"zoomIn":1===t?"zoomOut":t>0&&t<1?"up"===this.o.clickBehavior?"zoomIn":"zoomOut":void 0}setCursorState(t){return"zoomOut"===t&&"hover"===this.o.trigger&&(t=this.fsState===x.UW.CLOSED?"zoomIn":null),this.view.toggleCursorClass(y[t]),t}setImage(t){const i=t.node;if(this.shown||this.showing){const e=Object.assign({},t.callbackData);e.node=i,this.deepZoom.image=e}}setLensSize(t,i){this.lensSize={width:t,height:i},this.lensHalfSize={width:this.lensSize.width/2,height:this.lensSize.height/2}}calcLensSize(){const t=this.pSize,i=this.currentLensSize;this.setLensSize(C(t.width,i.width),C(t.height,i.height))}getBaseScale(){this.baseScale={x:this.zoomNodeSize.width/this.iSize.width,y:this.zoomNodeSize.height/this.iSize.height}}calcLensPosition(){}getImagePosition(){}showDeepZoom(t,i){if(this.deepZoom){const e=this.view.hash;e&&(this.deepZoom.hash=e),this.deepZoom.lensSize=this.lensSize,this.deepZoom.minSize=this.zoomNodeSize,this.deepZoom.maxSize=Object.assign({originWidth:t,originHeight:i},this.iSize),this.deepZoom.show()}}setShown(t){void 0===t&&(t=!0);let i=!1;return this.state===x.OR.SHOWING&&(i=!0,this.state=x.OR.SHOWN,t&&this.setEvents(),this.setCursorState(this.figureOutCursorState()),this.o.smoothing||this.deepZoomAction()),i}sendZoomShownEvent(){this.emit("zoomShown",{data:{clientPosition:{x:this._x,y:this._y},pagePosition:{x:this.pPos.left,y:this.pPos.top}}})}showCenter(t,i,e){this.getAllSizes();const s=this.pPos.left+this.pSize.width/2,h=this.pPos.top+this.pSize.height/2;return this.show(t,i,s,h,!1,e)}show(){return this.state===x.OR.HIDDEN&&(this.state=x.OR.SHOWING,this.setCursorState("zoomIn"),!0)}setHidden(){this.stopMovingAndZooming(),clearTimeout(this.hideTimer),this.anim.stop(),this.setCursorState("zoomIn"),this.view.clearCss(),this.baseScale={x:1,y:1},this.scale={x:1,y:1},this.dScale={x:1,y:1},this.setUpEvent=!1,this.baseScalePercent={x:0,y:0},clearTimeout(this.deepZoomTimer),this.deepZoom.hide(),this.view.clearDOM(),this.state=x.OR.HIDDEN,this.emit("zoomHidden",{data:{clientPosition:{x:this._x,y:this._y},pagePosition:{x:this.pPos.left,y:this.pPos.top}}})}hide(t){return!![x.OR.SHOWN,x.OR.SHOWING].includes(this.state)&&(this.state=x.OR.HIDING,this.view.removeEvents(),t?(clearTimeout(this.deepZoomTimer),this.deepZoom.hide(),this.setHidden()):this.stopMovingAndZooming(),!0)}addClickEvent(){let t=["btnclick","tap"];"dblclick"===this.o.trigger&&(t=["dblbtnclick","dbltap"]),this.view.addEventToWrapper(t,(t=>{t.stop(),this.x=t.x,this.y=t.y,"up"===this.o.clickBehavior?this.zoomUp(t.x,t.y)||this.hide():this.o.smoothing&&this.scale.x!==this.baseScale.x?this.hide():this.hide(!0)}))}sendClickEvent(t){[x.OR.HIDDEN,x.OR.HIDING].includes(this.state)||(t.stop(),this.emit("zoomClick"))}customMove(t,i){[x.OR.HIDDEN,x.OR.HIDING].includes(this.state)||this.move(t,i)}move(t,i){this.x=t,this.y=i,this.afterMove()}afterMove(){this.o.smoothing||this.render(this.iPos,this.scale)}setEvents(){}setLensStyleOnResize(){this.view.lensStyle={top:this.lensPosition.top,left:this.lensPosition.left,width:this.lensSize.width,height:this.lensSize.height}}onResize(){if(this.state!==x.OR.HIDDEN)if(this.state===x.OR.HIDING)this.hide(!0);else{if(this.state===x.OR.SHOWING&&this.o.smoothing&&(this.state=x.OR.SHOWN,this.setEvents(),this.view.removeEventFromWrapper("transitionend"),this.view.lensStyle={transition:""},this.stopMovingAndZooming(),this.view.setImagePosition(this.iPos,this.scale)),this.getAllSizes(),this.zoomNodeSize.width>this.iSize.width||this.zoomNodeSize.height>this.iSize.height)return void this.hide(!0);this.getBaseScale(),this.scale.x=(0,A.Z)(this.scale.x,this.baseScale.x,1),this.scale.y=(0,A.Z)(this.scale.y,this.baseScale.y,1),this.calcLensSize(),this.calcLensPosition(),this.setLensStyleOnResize(),this.deepZoom.lensSize=this.pSize,this.deepZoom.minSize=this.zoomNodeSize,this.deepZoom.resize(),this.view.eventNodePositionSize={position:this.pPos,size:this.pSize},this.o.smoothing||(this.sendZoomingAction(),this.setCursorState(this.figureOutCursorState()),this.deepZoomAction(),this.view.setImagePosition(this.iPos,this.scale))}}destroy(){this.hide(!0),clearTimeout(this.zoomingTimer),this.view.removeScrollEvent(this.scrollHandler),this.setCursorState("canZoom"),clearTimeout(this.deepZoomTimer),this.deepZoom.destroy(),this.deepZoom=null,this.off("getTile"),this.off("zoomCancelLoadingOfTiles"),this.zoomingTimer=null,super.destroy()}}const B=R;const F=class{constructor(t){this.p=s.Z.$(t);const i="sirv-zoom-map";this.c=s.Z.$new("div"),this.c.addClass(i),this.lens=s.Z.$new("div"),this.lens.addClass(i+"-lens"),this._img=null,this.b=s.Z.$(s.Z.D.node.body),this.c.append(this.lens)}calcRightPosition(t,i){const e=this.c.rect;return{x:t-e.left,y:i-e.top}}addDomEventToDocBody(t,i){this.b.addEvent(t,i)}removeDomEventToDocBody(t,i){this.b.removeEvent(t,i)}addDomEventToLens(t,i){this.lens.addEvent(t,i)}addDomEvent(t,i){this.c.addEvent(t,i)}set cursor(t){this.c.setCssProp("cursor",t)}removeEvents(){this.c.removeEvent(["btnclick","tap"]),this.c.removeEvent(["mousedown","touchstart"]),this.lens.removeEvent(["mousedown","touchstart"]),this.c.removeEvent(["mousemove","touchmove"])}set size(t){this.c.setCss({width:t.width+"px",height:t.height+"px"})}addLensCss(t,i,e){this.lens.setCss({top:t.top-1+"px",left:t.left-1+"px",width:i.width+"px",height:i.height+"px","font-size":e+"px"})}set img(t){this._img=s.Z.$new("img",{src:t.src}),t.srcset&&this._img.attr("srcset",t.srcset+" 2x"),this.c.append(this._img)}removeEventTransitionEvent(){this.c.removeEvent("transitionend")}show(t){this.c.setCss({opacity:0,transition:"opacity .3s linear"}),this.p.append(this.c),this.c.render(),this.removeEventTransitionEvent(),this.c.addEvent("transitionend",(i=>{i.stop(),this.removeEventTransitionEvent(),this.c.setCssProp("transition",""),this.addDomEvent(["mousedown","touchstart"],(t=>{t.stop()})),t()})),this.c.setCssProp("opacity",1)}hide(t,i){this.removeEventTransitionEvent(),t?(this.c.remove(),this.removeEvents(),i()):this.c.addEvent("transitionend",(t=>{t.stop(),this._removeEventTransitionEvent(),this.c.setCssProp("transition",""),this.c.remove(),this.removeEvents(),i()})),this.c.setCssProp("opacity",0)}destroy(){this.c=null,this.lens=null}};class X extends d.Z{constructor(t,i){super(),this.view=t,this.o=i,this.state=x.OR.HIDDEN,this.scale={x:1,y:1},this.viewPortSize={width:0,height:0},this.bISize={width:0,height:0},this.cBISize={width:0,height:0},this.cBIPosition={top:0,left:0},this.mapSize={width:0,height:0},this.ls={width:0,height:0},this.lp={top:0,left:0},this.clp={x:0,y:0},this.isDragMoved=!1}static setInTheCenter(t){return t<50?t=Math.max(t-(50-t),0):t>50&&(t=Math.min(t+(t-50),100)),t}getPercentPosition(t,i){const e=this.mapSize,s=this.view.calcRightPosition(t,i);return{x:t=(0,A.Z)((0,M.Z)(Z(s.x,e.width),1),0,100),y:i=(0,A.Z)((0,M.Z)(Z(s.y,e.height),1),0,100)}}isInside(t,i){const{lp:e,ls:s}=this,h=this.view.calcRightPosition(t,i);return e.left<h.x&&e.left+s.width>h.x&&e.top<h.y&&e.top+s.height>h.y}addEvents(){let t=1,i=!1;this.dragEndHandler=t=>{i&&(t.stop(),i=!1,this.clp={x:0,y:0},this.view.cursor="",this.view.removeDomEventToDocBody(t.type,this.dragEndHandler),this.view.removeDomEventToDocBody("mouseout",this.mouseOutHandler))},this.mouseOutHandler=t=>{t.stop(),t.oe.relatedTarget&&"HTML"!==t.oe.relatedTarget.tagName||!i||(this.dragEndHandler(t),this.view.removeDomEventToDocBody(["mouseup","touchend"],this.dragEndHandler))},this.view.addDomEvent(["btnclick","tap"],(t=>{t.stop(),this.emit("zoomMapNewPosition",{data:this.getPercentPosition(t.x,t.y)})})),this.view.addDomEventToLens(["mousedown","touchstart"],(e=>{const h=e.pageXY;if(this.isInside(h.x,h.y)){e.stop(),t=1;const h=(t=>{let i;const e={x:0,y:0},h=t.originEvent;return null!=h.offsetX?(e.x=h.offsetX,e.y=h.offsetY):(i=s.Z.$(t.target).position,e.x=h.targetTouches[0].pageX-i.left,e.y=h.targetTouches[0].pageY-i.top),e})(e);this.clp.y=h.y,this.clp.x=h.x,i=!0,this.view.addDomEventToDocBody(["mouseup","touchend"],this.dragEndHandler),this.view.addDomEventToDocBody("mouseout",this.mouseOutHandler)}})),this.view.addDomEvent(["mousemove","touchmove"],(e=>{i&&(t<=0&&(e.stop(),this.view.cursor="move",this.emit("zoomMapNewPosition",{data:this.getPercentPosition(e.pageXY.x,e.pageXY.y)})),t--)}))}calcMap(t,i,e,s){let h=this.o.maxwidth,o=this.o.maxheight;e<=h&&(h=e/2,o=h*(i/t)),s<=o&&(o=s/2,h=o*(t/i)),h/o>t/i?h=o*(t/i):o=h*(i/t),h=Math.trunc(h),o=Math.trunc(o),this.mapSize.width=h,this.mapSize.height=o,this.viewPortSize.width=e,this.viewPortSize.height=s,this.bISize.width=t,this.bISize.height=i}prepare(t,i,e,s){this.calcMap(t,i,e,s),this.view.size=this.mapSize,this.emit("zoomGetImage",{data:{width:this.mapSize.width,height:this.mapSize.height}})}set lensPosition(t){const i=this.cBISize,e=this.mapSize;let s=e.height/i.height*t.top,h=e.width/i.width*t.left;this.cBIPosition.top=t.top,this.cBIPosition.left=t.left,s<0&&(s=0),h<0&&(h=0);const o=this.ls;s+o.height>e.height&&(s=e.height-o.height),h+o.width>e.width&&(h=e.width-o.width),this.lp.top=s,this.lp.left=h}set lensSize(t){this.cBISize.width=t.width,this.cBISize.height=t.height;const i=this.mapSize,e=this.viewPortSize;this.ls.width=e.width>=t.width?i.width:e.width/t.width*i.width,this.ls.height=e.height>=t.height?i.height:e.height/t.height*i.height}move(t,i){const e=this.bISize,s=e.width*i.x,h=e.height*i.y,o=Math.abs(t.y+(e.height-h)/2),n=Math.abs(t.x+(e.width-s)/2);this.scale.x=i.x,this.scale.y=i.y,this.lensSize={width:s,height:h},this.lensPosition={top:o,left:n},this.view.addLensCss(this.lp,this.ls,Math.max(this.mapSize.width,this.mapSize.height))}show(){[x.OR.SHOWING,x.OR.SHOWN].includes(this.state)||(this.state=x.OR.SHOWING,this.view.show((()=>{this.addEvents(),this.state=x.OR.SHOWN})))}hide(t){[x.OR.HIDDEN,x.OR.HIDING].includes(this.state)&&!t||(this.state=x.OR.HIDING,this.view.hide(t,(()=>{this.view.removeDomEventToDocBody(["mouseup","touchend"],this.dragEndHandler),this.state=x.OR.HIDDEN})))}resize(t,i,e,s,h,o){this.o.maxwidth=t,this.o.maxheight=i,this.calcMap(e,s,h,o),this.view.size=this.mapSize}destroy(){this.hide(!0),super.destroy()}}const Y=X;class $ extends d.Z{constructor(t,i){super(),this.options=Object.assign({maxwidth:200,maxheight:200},i||{}),this.view=new F(t),this.controller=new Y(this.view,this.options),this.controller.parentClass=this}prepare(t,i,e,s){this.controller.prepare(t,i,e,s)}move(t,i){this.controller.move(t,i)}set img(t){this.view.img=t}show(){this.controller.show()}hide(t){this.controller.hide(t)}resize(t,i,e,s,h,o){this.controller.resize(t,i,e,s,h,o)}destroy(){this.controller.destroy(),this.view.destroy(),super.destroy()}}const G=$;const U=class extends B{constructor(t,i){super(t,Object.assign({map:!1,mapSize:50},i)),this.baseScalePercent={x:0,y:0},this.clonedImage=null,this.hideTimer=null,this.showTimer=null,this.map=null,this.zoomingTimer=null,this.currentCursorState=0,this.innerImagePosition={x:0,y:0},this.setUpEvent=!1,s.Z.browser.mobile&&(this.o.pan=!0,"hover"===this.o.trigger&&(this.o.trigger="click")),this.view.setLensCss(this.lensPosition,this.lensSize),this.ANIM_STEP=.3}init(){super.init(),this.createZoomMap()}figureOutCursorState(){let t=super.figureOutCursorState();return"up"!==this.o.clickBehavior&&"hover"!==this.o.trigger&&"zoomIn"===t&&(t="zoomOut"),t}createZoomMap(){this.o.map&&(this.map=new G(this.view.getContainerForMap(),{maxwidth:Math.trunc(C(this.pSize.width/2,this.o.mapSize)),maxheight:Math.trunc(C(this.pSize.height/2,this.o.mapSize))}),this.map.parentClass=this,this.on("zoomGetImage",(t=>{t.stopEmptyEvent(),t.data.map=!0,t.data.exactSize=!0})),this.on("zoomMapNewPosition",(t=>{t.stopAll(),this.x=this.pPos.left+C(this.lensSize.width,t.data.x),this.y=this.pPos.top+C(this.lensSize.height,t.data.y),this.calcImagePositionInCenter(this.scale),this.o.smoothing||(this.deepZoomAction(),this.view.setImagePosition(this.iPos,this.scale),this.map&&this.map.move(this.iPos,this.scale))})))}move(t,i){this.x=t,this.y=i,this.calcImagePosition(this.scale),this.afterMove()}render(t,i){super.render(t,i),this.map&&this.map.move(t||this.iDPos,i||this.dScale)}calcImagePositionForPinch(t){t||(t=this.dScale);const i=this.iSize.width*t.x,e=E(this.iSize.width,i);let s;i>this.lensSize.width?(s=this._x-(C(i,this.baseScalePercent.x)+e),s=T(s,0-e,e+i,this.lensSize.width)):s=this.lensSize.width/2-(i/2+e);const h=this.iSize.height*t.y,o=E(this.iSize.height,h);let n;h>this.lensSize.height?(n=this._y-(C(h,this.baseScalePercent.y)+o),n=T(n,0-o,o+h,this.lensSize.height)):n=this.lensSize.height/2-(h/2+o),this.iPos={x:s,y:n}}setScale(t,i,e){this.state===x.OR.SHOWN&&(Number.isFinite(i)&&(this.x=i,this.y=e),this.scale.x=t,this.scale.y=t,this.scale.x=(0,A.Z)(this.scale.x,this.baseScale.x,1),this.scale.y=(0,A.Z)(this.scale.y,this.baseScale.y,1),this.calcImagePositionForPinch(this.scale),this.sendZoomingAction(),this.setCursorState(this.figureOutCursorState()),this.o.smoothing||(this.dScale.x=this.scale.x,this.dScale.y=this.scale.y,this.imageDPosition.x=this.imagePosition.x,this.imageDPosition.y=this.imagePosition.y,this.deepZoomAction(),this.view.setImagePosition(this.imagePosition,this.scale),this.map&&this.map.move(this.imagePosition,this.scale)))}afterZoom(t){this.calcImagePositionForPinch(this.scale),super.afterZoom(t)}calcImagePosition(t,i,e,s){const h=e||this._x,o=s||this._y;t||(t=this.dScale);const n=this.iSize.width*t.x,a=E(this.iSize.width,n);let r;n>this.lensSize.width?(r=h-C(n,Z(h,this.pSize.width))-a,r=T(r,0-a,a+n,this.lensSize.width)):r=this.lensSize.width/2-(n/2+a);const l=this.iSize.height*t.y,d=E(this.iSize.height,l);let c;l>this.lensSize.height?(c=o-C(l,Z(o,this.pSize.height))-d,c=T(c,0-d,d+l,this.lensSize.height)):c=this.lensSize.height/2-(l/2+d),this.iPos={x:r,y:c}}calcImagePositionInCenter(t){t||(t=this.dScale);const i=this.iSize.width*t.x,e=this.iSize.height*t.y,s=E(this.iSize.width,i),h=E(this.iSize.height,e);let o=this._x/(this.lensSize.width/i),n=this._y/(this.lensSize.height/e);o=this.lensSize.width/2-o-s,n=this.lensSize.height/2-n-h,o=T(o,0-s,s+i,this.lensSize.width),n=T(n,0-h,h+e,this.lensSize.height),this.iPos={x:o,y:n}}set basePercent(t){if([x.OR.SHOWN,x.OR.SHOWING].includes(this.state)){const i=this.iSize,e=i.width*this.scale.x,s=i.height*this.scale.y,h=E(i.width,e),o=E(i.height,s);this.baseScalePercent={x:Z(Math.abs(this.iPos.x)+this.correctX(t.x)-h,e),y:Z(Math.abs(this.iPos.y)+this.correctY(t.y)-o,s)}}}setImage(t){(this.shown||this.showing)&&(t.callbackData.map?this.map&&(this.map.img={src:t.src,srcset:t.srcset}):super.setImage(t))}setShown(t){super.setShown(t)&&this.map&&this.map.show()}getImagePosition(){this.innerImagePosition={x:E(this.lensSize.width,this.zoomNodeSize.width),y:E(this.lensSize.height,this.zoomNodeSize.height)}}show(t,i,e,s,h,o){return!!super.show()&&(this.setUpEvent=h,this.iSize={width:i.width,height:i.height},this.view.addStartCss(),this.view.appendNodes(t,this.iSize),this.getAllSizes(),this.x=e,this.y=s,this.calcLensSize(),this.getImagePosition(),this.getBaseScale(),this.showDeepZoom(i.originWidth,i.originHeight),this.showTimer=setTimeout((()=>{if(this.showTimer=null,this.emit("zoomBeforeShow",{data:{}}),o&&"max"!==o)if("zero"===o)this.scale.x=this.baseScale.x,this.scale.y=this.baseScale.y;else{const t=this.deepZoom.getScale("zoomin");this.scale.x=t,this.scale.y=t}this.calcImagePosition(this.scale,!0),this.view.eventNodePositionSize={position:this.pPos,size:this.pSize},this.dScale.x=this.baseScale.x,this.dScale.y=this.baseScale.y,this.iDPos={x:-1*E(this.iSize.width,this.iSize.width*this.dScale.x)+this.innerImagePosition.x,y:-1*E(this.iSize.height,this.iSize.height*this.dScale.y)+this.innerImagePosition.y},this.view.setLensCss(this.lensPosition,this.lensSize),this.view.setImageSize(this.iDPos,this.iSize,this.dScale),this.boundaries=this.view.boundaries,this.map&&this.map.prepare(this.iSize.width,this.iSize.height,this.pSize.width,this.pSize.height),this.o.smoothing&&"zero"!==o?(this.setEvents(),this.animStep=.3,this.animCb=()=>{this.deepZoomAction(),this.setShown(!1)}):this.setShown(),this.o.smoothing&&this.anim.start(),this.sendZoomShownEvent()}),0),!0)}hide(t){const i=super.hide(t);return i&&(clearTimeout(this.showTimer),t||(this.scale.x!==this.baseScale.x||this.scale.y!==this.baseScale.y?(this.animStep=.4,this.scale.x=this.baseScale.x,this.scale.y=this.baseScale.y,this.iPos={x:-1*E(this.iSize.width,this.iSize.width*this.scale.x)+this.innerImagePosition.x,y:-1*E(this.iSize.height,this.iSize.height*this.scale.y)+this.innerImagePosition.y},this.animCb=()=>{this.setHidden()}):this.setHidden())),i}addMouseScrollEvent(){this.view.addEventToWrapper("mousescroll",(t=>{if(t.stop(),this.o.pan){const i=this.iSize,e=i.width*this.scale.x,s=i.height*this.scale.y,h=E(i.width,e),o=E(i.height,s);this.baseScalePercent={x:Z(Math.abs(this.iPos.x)+this.correctX(t.x)-h,e),y:Z(Math.abs(this.iPos.y)+this.correctY(t.y)-o,s)}}const i=this.scale.x;if(t.isMouse){const i=37,e=t.delta/C(t.deltaFactor,i);this.scale.x+=e,this.scale.y+=e}else{let i=t.delta;Math.abs(i)>15&&(i=15,t.delta<0&&(i*=-1)),i/=350,this.scale.x+=i,this.scale.y+=i}this.scale.x=(0,A.Z)(this.scale.x,this.baseScale.x,1),this.scale.y=(0,A.Z)(this.scale.y,this.baseScale.y,1),this.o.pan?(this.x=t.x,this.y=t.y,this.calcImagePositionForPinch(this.scale)):this.calcImagePosition(this.scale),i!==this.scale.x&&(this.sendZoomingAction(),this.setCursorState(this.figureOutCursorState()),this.o.smoothing||(this.dScale.x=this.scale.x,this.dScale.y=this.scale.y,this.iDPos.x=this.iPos.x,this.iDPos.y=this.iPos.y,this.deepZoomAction(),this.view.setImagePosition(this.iPos,this.scale),this.map&&this.map.move(this.iPos,this.scale))),this.hideByTimer()}))}hideByTimer(){clearTimeout(this.hideTimer),"outside"!==this.o.type&&this.scale.x<=this.baseScale.x+1e-8&&(this.hideTimer=setTimeout((()=>{this.scale.x<=this.baseScale.x+1e-8&&this.hide(!0)}),1e3))}addInnerTouchDrag(){let t,i,e,s,h,o,n=!1;this.view.addEventToWrapper(b,(a=>{a.stop(),"dragstart"===a.state?(n=!0,this.view.addEventsCanvasClass(y.drag),this.stopMovingAndZooming(),this.x=a.x,this.y=a.y,e=this.iSize.width*this.scale.x,s=this.iSize.height*this.scale.y,h=E(this.iSize.width,e),o=E(this.iSize.height,s),t=a.x,i=a.y):"dragend"===a.state?(n=!1,this.view.removeEventsCanvasClass(y.drag)):n&&(this.x=a.x,this.y=a.y,e>this.lensSize.width?(this.iPos.x+=a.x-t,this.iPos.x=T(this.iPos.x,0-h,h+e,this.lensSize.width)):this.iPos.x=this.lensSize.width/2-(e/2+h),s>this.lensSize.height?(this.iPos.y+=a.y-i,this.iPos.y=T(this.iPos.y,0-o,o+s,this.lensSize.height)):this.iPos.y=this.lensSize.height/2-(s/2+o),this.o.smoothing&&this.o.pan?this.animStep=.3:(this.iDPos.x=this.iPos.x,this.iDPos.y=this.iPos.y,this.deepZoomAction(),this.view.setImagePosition(this.iPos,this.scale),this.map&&this.map.move(this.iPos,this.scale)),t=a.x,i=a.y)}))}addInnerPinch(){let t,i;const e=1-this.baseScale.x;let s,h,o,n,a;this.o.customZooming&&this.view.addEventToWrapper("pinch",(r=>{r.stop(),"pinchstart"===r.state?(clearTimeout(t),this.stopMovingAndZooming(),this.view.node.removeEvent(b),this.scale.x=this.dScale.x,this.scale.y=this.dScale.y,i=this.scale.x,h=1,o=1,n=1,a=this.baseScale.x,this.basePercent=r.centerPoint):"pinchresize"===r.state?this.basePercent=r.centerPoint:"pinchmove"===r.state?(this.x=r.centerPoint.x,this.y=r.centerPoint.y,s=r.scale,s*=i,n<s&&(n=s,a=this.baseScale.x,o=1,h=e/(n-this.baseScale.x)),a>s&&(a=s,n=1,h=1,o=this.baseScale.x/a),s=(this.baseScale.x+(s-this.baseScale.x)*h)*o,this.scale.x=s,this.scale.y=s,this.scale.x=(0,A.Z)(this.scale.x,this.baseScale.x,1),this.scale.y=(0,A.Z)(this.scale.y,this.baseScale.y,1),this.calcImagePositionForPinch(this.scale),this.sendZoomingAction(),this.setCursorState(this.figureOutCursorState()),this.o.smoothing||(this.dScale.x=this.scale.x,this.dScale.y=this.scale.y,this.iDPos.x=this.iPos.x,this.iDPos.y=this.iPos.y,this.deepZoomAction(),this.view.setImagePosition(this.iPos,this.scale),this.map&&this.map.move(this.iPos,this.scale))):"pinchend"===r.state&&(clearTimeout(t),t=setTimeout((()=>{this.addInnerTouchDrag()}),42),this.scale.x<=this.baseScale.x+1e-8&&"outside"!==this.o.type&&this.state!==x.OR.HIDING&&(clearTimeout(t),this.hide(!0)))}))}hideZoomByMouseOut(){this.view.addGlobalEvent((t=>{((t,i,e,s)=>{let h=!1;const o=i.left-s.x,n=i.top-s.y;return(t.x<=o||t.y<=n||t.x>=o+e.width||t.y>=n+e.height)&&(h=!0),h})(t.clientXY,this.view.getContainerPosition(),this.view.getContainerSize(),s.Z.D.scroll)&&(this.view.removeGlobalEvent(),this.hide())}))}setEvents(){this.setUpEvent&&s.Z.browser.mobile&&this.view.addEventToWrapper(P,(t=>{t.stop(),this.hide(!0)})),this.o.customZooming&&this.addMouseScrollEvent(),this.addInnerTouchDrag(),this.view.removeDragstart(),this.setUpEvent||this.addInnerPinch(),"hover"!==this.o.trigger?this.addClickEvent():this.hideZoomByMouseOut(),s.Z.browser.mobile||"hover"!==this.o.trigger||this.view.addEventToWrapper("click",(t=>this.sendClickEvent(t))),this.o.pan||s.Z.browser.mobile||this.view.addEventToMainContainer(f,(t=>{if(t.pointerType&&"touch"===t.pointerType)return;t.stop();const i=t.pageXY;this.move(i.x,i.y)}))}keepOldPosition(t){let i=this.iPos.x,e=this.iPos.y;const s=this.iSize.width*this.scale.x,h=this.iSize.height*this.scale.y,o=E(this.iSize.width,s),n=E(this.iSize.height,h);i-=(t.width-this.lensSize.width)/2,e-=(t.height-this.lensSize.height)/2,i=s>this.lensSize.width?T(i,0-o,o+s,this.lensSize.width):this.lensSize.width/2-(s/2+o),e=h>this.lensSize.height?T(e,0-n,n+h,this.lensSize.height):this.lensSize.height/2-(h/2+n),this.iPos={x:i,y:e}}onResize(){const t=this.lensSize;if(super.onResize(),this.state!==x.OR.HIDDEN&&this.state!==x.OR.HIDING&&(this.keepOldPosition(t),this.getImagePosition(),this.map)){const t=Math.trunc(C(this.pSize.width/2,this.o.mapSize)),i=Math.trunc(C(this.pSize.height/2,this.o.mapSize));this.map.resize(t,i,this.iSize.width,this.iSize.height,this.pSize.width,this.pSize.height),this.o.smoothing||this.map.move(this.iPos,this.scale)}}destroy(){clearTimeout(this.showTimer),this.map&&(this.map.destroy(),this.map=null,this.off("zoomGetImage"),this.off("zoomMapNewPosition")),super.destroy()}};const j=class extends h{get parentSize(){return this.zoom.size}get parentPostion(){return this.zoom.position}};const q=class extends B{constructor(t,i){s.Z.browser.mobile&&9===i.margin&&delete i.margin,super(t,Object.assign({width:70,height:70,margin:65},i)),this.setUpEvent=!1,this.isSquare=!0,this.ANIM_STEP=.4}init(){super.init(),this.setOutsideLensSize()}setCursorState(t){"zoomOut"===t&&this.fsState===x.UW.OPENED&&(t="hidden"),super.setCursorState(t)}setOutsideLensSize(){const t={width:this.o.width,height:this.o.height};t.width===t.height&&(this.isSquare=!0),[t.width,t.height].includes("auto")?(this.isSquare=!0,"auto"===t.width?"auto"!==t.height?(t.height=this.getPercentSize(t.height,"height"),t.width=t.height):(t.height=70,t.width=t.height):(t.width=this.getPercentSize(t.width,"width"),t.height=t.width)):(t.width=this.getPercentSize(t.width,"width"),t.height=this.getPercentSize(t.height,"height")),this.currentLensSize=(t=>{let i;i=t.width>=t.height?t.width/t.height:t.height/t.width;const e=10,s=90;return i>9?{width:50,height:50}:(t.width<e&&(t.height=e*(t.height/t.width),t.width=e),t.height<e&&(t.width=e*(t.width/t.height),t.height=e),t.width>s&&(t.height=s*(t.height/t.width),t.width=s),t.height>s&&(t.width=s*(t.width/t.height),t.height=s),t)})({width:t.width,height:t.height}),this.ANIM_STEP=.6}calcLensSize(){if(this.isSquare){const t=this.pSize,i=this.currentLensSize,e=C(Math.min(t.width,t.height),i.width);this.setLensSize(e,e)}else super.calcLensSize()}calcLensPosition(){const t=this.pSize;let i=this.o.margin;i<0&&(i=0),this._x<0&&(this._x=0),this._y<0&&(this._y=0),this._x>t.width&&(this._x=t.width),this._y>t.height&&(this._y=t.height);let e=this._y-this.lensHalfSize.height,h=this._x-this.lensHalfSize.width;if(s.Z.browser.mobile){e-=i;const t=this.pPos,o=s.Z.W.scroll,n=s.Z.W.size;t.top+e<o.y&&(t.left+this._x-this.lensSize.width-i>o.x?(e=this._y-this.lensHalfSize.height,h=this._x-this.lensSize.width-i):t.left+this._x+this.lensSize.width+i<o.x+n.width?(e=this._y-this.lensHalfSize.height,h=this._x+i):o.y+n.height>t.top+this._y+i+this.lensSize.height&&(e=this._y+i))}this.lensPosition={top:e,left:h}}calcImagePosition(t,i,e,s){const h=e||this._x,o=s||this._y,n=this.lensHalfSize.width-C(this.iSize.width,Z(h,this.pSize.width)),a=this.lensHalfSize.height-C(this.iSize.height,Z(o,this.pSize.height));this.iPos={x:n,y:a}}getPercentSize(t,i){return/%$/.test(t)?t=parseInt(t,10):(t=parseInt(t,10),t/=this.pSize[i]/100),t}setEvents(){this.setUpEvent&&!this.o.pan&&this.view.addEventToMainContainer(P,(t=>{t.stop(),this.hide(!0)})),this.o.customZooming&&this.addMouseScroollEvent(),this.addMouseOverEvent(),"hover"===this.o.trigger?this.addMouseOutEvent():this.addClickEvent(),s.Z.browser.mobile||"up"!==this.o.clickBehavior&&"hover"!==this.o.trigger||this.view.addEventToWrapper("click",(t=>this.sendClickEvent(t))),this.o.pan&&this.addDragEvent(),s.Z.browser.mobile&&this.addTapEvent(),this.o.pan||s.Z.browser.mobile||this.view.addEventToMainContainer(f,(t=>{t.pointerType&&"touch"===t.pointerType||(t.stop(),this.move(t.pageXY.x,t.pageXY.y),(this._x<=0||this._y<=0||this._x>=this.pSize.width||this._y>=this.pSize.height)&&this.hide())}))}afterMove(){this.calcLensPosition(),this.calcImagePosition(this.scale),this.view.lensPosition=this.lensPosition,super.afterMove()}changeLensSize(t){t.width=(0,A.Z)(t.width,10,90),t.height=(0,A.Z)(t.height,10,90),t.width!==this.currentLensSize.width&&(this.currentLensSize.width=t.width,this.currentLensSize.height=t.height,this.calcLensSize(),this.calcLensPosition(),this.calcImagePosition(),this.iDPos.x=this.iPos.x,this.iDPos.y=this.iPos.y,this.deepZoomAction(!1,this.lensSize),this.view.setImagePosition(this.iPos,this.scale),this.view.lensPosition=this.lensPosition,this.view.lensSize=this.lensSize)}addMouseScroollEvent(){this.view.addEventToWrapper("mousescroll",(t=>{t.stop();const i=t.delta,e={width:0,height:0};if(this.isSquare)for(const t in e)({}).hasOwnProperty.call(e,t)&&(e[t]=this.currentLensSize[t]+i);else{const t=this.currentLensSize.height/this.currentLensSize.width;e.width=this.currentLensSize.width+i,e.height=this.currentLensSize.height+i*t}this.changeLensSize(e)}))}addMouseOverEvent(){this.view.addEventToMainContainer("mouseover",(t=>{t.stop();const i=t.pageXY;this.x=i.x,this.y=i.y,this.calcLensPosition(),this.calcImagePosition(),this.view.lensPosition={top:this.lensPosition.top,left:this.lensPosition.left},this.view.setImagePosition(this.iPos,this.scale)}))}addMouseOutEvent(){this.view.addEventToWrapper("mouseout",(t=>{let i=t.related;for(;i&&i!==this.node&&i!==this.lensContainer&&i!==this.eventsCanvasNode;)i=i.parentNode;if(this.node!==i&&this.eventsCanvasNode!==i){const i=t.clientXY;(i.x<this.boundaries.left||i.x>this.boundaries.right||i.y<this.boundaries.top||i.y>this.boundaries.bottom)&&(t.stop(),this.hide(!this.o.smoothing))}}))}addDragEvent(){let t=!1;this.view.addEventToMainContainer(b,(i=>{i.stop(),"dragstart"===i.state?t=!0:"dragend"===i.state?t=!1:t&&this.move(i.x,i.y)}))}addTapEvent(){this.view.addEventToMainContainer("dblclick"===this.o.trigger?"dbltap":"tap",(t=>{t.stop(),this.hide(!this.o.smoothing)}))}hide(t){const i=super.hide(t);return i&&(t||(this.view.addEventToWrapper("transitionend",(t=>{t.stop(),this.view.removeEventFromWrapper("transitionend"),this.setHidden()})),this.view.lensStyle={transition:"opacity .2s linear, transform .2s linear",opacity:0,transform:"scale(0)"})),i}show(t,i,e,s,h,o){return!!super.show()&&(this.emit("zoomBeforeShow",{data:{}}),this.setUpEvent=h,this.iSize={width:i.width,height:i.height},this.view.addStartCss(),this.view.appendNodes(t,this.iSize),this.getAllSizes(),this.x=e,this.y=s,this.calcLensSize(),this.calcLensPosition(),this.getBaseScale(),this.showDeepZoom(i.originWidth,i.originHeight),this.calcImagePosition(this.scale,!0),this.view.eventNodePositionSize={position:this.pPos,size:this.pSize},this.dScale.x=this.baseScale.x,this.dScale.y=this.baseScale.y,this.iDPos={x:-1*E(this.iSize.width,this.iSize.width*this.dScale.x)-this.lensPosition.left,y:-1*E(this.iSize.height,this.iSize.height*this.dScale.y)-this.lensPosition.top},this.view.setLensCss(this.lensPosition,this.lensSize,"opacity .15s linear, transform .15s linear"),this.view.setImageSize(this.iDPos,this.iSize,this.dScale),this.boundaries=this.view.boundaries,this.o.smoothing?(this.view.addEventToWrapper("transitionend",(t=>{t.stop(),this.view.removeEventFromWrapper("transitionend"),this.view.lensStyle={transition:""},this.sendZoomShownEvent()})),this.setShown(),this.anim.start()):(this.setShown(),this.sendZoomShownEvent()),!0)}};const V=class extends h{getImageForEye(){return this.image.node.cloneNode()}getNodeForEye(){return this.zoom}set lensPosition(t){this.cnv.setCss({top:t.top,left:t.left})}setCanvasNodeSize(t){this.cnv.setCss({width:t.width,height:t.height})}addStartCss(t){this.lensStyle={opacity:0,transform:"translate3d("+t.start.x+"%, "+t.start.y+"%, 0px)"}}get parentSize(){return this.zoom.size}get parentPostion(){return this.zoom.position}setLensCss(t,i,e){this.cnv.setCss({top:t.top,left:t.left}),super.setLensCss(t,i,e)}addMouseMoveEvent(t){s.Z.W.addEvent("mousemove",t)}removeMouseMoveEvent(t){s.Z.W.removeEvent("mousemove",t)}clearCss(){this.cnv.removeAttr("style")}};const K=class{constructor(t,i){this.pn=s.Z.$(t);const e="sirv-zoom-lens";this.c=s.Z.$new("div"),this.c.addClass(e+"-wrapper"),this.ic=s.Z.$new("div"),this.ic.addClass(e),this.ic.appendTo(this.c),this.img=null,this.bwImg=null,this.lastCursorClass=null,i&&this.c.addEvent("mousedown",(t=>{t.stop()}))}get container(){return this.c}calcContainerPosition(){if(["img","canvas"].includes(this.pn.tagName)){const t=this.pn.position,i=s.Z.$(this.pn.node.parentNode).position;this.c.setCss({top:t.top-i.top,left:t.left-i.left})}}set imageSize(t){this.img&&[this.img,this.bwImg].forEach((i=>{i&&i.setCss({top:0,left:0,width:t.width,height:t.height,position:"absolute"})}))}get size(){return this.pn.size}set containerSize(t){this.c.setCss({width:t.width,height:t.height})}set insideContainerSize(t){this.ic.setCss({width:t.width,height:t.height})}set insideContainerFontSize(t){this.ic.setCssProp("font-size",Math.max(t.width,t.height)+"px")}toggleCursorClass(t){t!==this.lastCursorClass&&(this.lastCursorClass&&(this.c.removeClass(this.lastCursorClass),this.lastCursorClass=null),t&&(this.c.addClass(t),this.lastCursorClass=t))}setTransform(t,i){this.ic.setCssProp("transform","translate3d("+t+"px,"+i+"px, 0px)"),this.img&&this.img.setCssProp("transform","translate3d("+-1*t+"px, "+-1*i+"px, 0px)")}show(t,i){t&&(this.img=s.Z.$(t)),this.calcContainerPosition(),this.imageSize=i,this.img&&this.ic.append(this.img);let e=this.pn;["img","canvas"].includes(e.tagName)&&(e=s.Z.$(e.node.parentNode)),e.append(this.c)}hide(){this.c.remove(),this.img&&(this.img.remove(),this.img=null,this.bwImg&&(this.bwImg.remove(),this.bwImg=null))}destroy(){this.c.removeEvent("mousedown"),this.c.remove()}},J=(t,i)=>Math.abs(t-i),Q=(t,i,e)=>(t-i)*e;const tt=class{constructor(t){this.view=t,this.pSize={width:0,height:0},this.inDoc=!1,this.timer=null,this.isPlaying=!1,this.pos={x:null,y:null},this.dPos={x:null,y:null},this._size={width:0,height:0},this.dSize={width:0,height:0}}doAnimation(){let t=!1;const i=.001;return(J(this.pos.x,this.dPos.x)>i||J(this.pos.y,this.dPos.y)>i||J(this._size.width,this.dSize.width)>i||J(this._size.height,this.dSize.height)>i)&&(t=!0),t}animate(){this.isPlaying=!0;const t=.4,i=Q(this.pos.x,this.dPos.x,t),e=Q(this.pos.y,this.dPos.y,t),s=Q(this._size.width,this.dSize.width,t),h=Q(this._size.height,this.dSize.height,t);this.dPos.x+=i,this.dPos.y+=e,this.dSize.width+=s,this.dSize.height+=h,this.setCss(),this.doAnimation()?this.timer=setTimeout((()=>{this.animate()}),16):this.stopAnimation()}setCss(){const t=this._size,i=this.dSize;(J(t.width,i.width)>0||J(t.height,i.height)>0)&&(this.view.insideContainerSize=i,this.view.insideContainerFontSize=this.pSize),this.view.setTransform(Math.round(this.dPos.x),Math.round(this.dPos.y))}stopAnimation(){this.isPlaying&&(this.isPlaying=!1,clearTimeout(this.timer),this.dPos.x=this.pos.x,this.dPos.y=this.pos.y,this.dSize.width=this._size.width,this.dSize.height=this._size.height,this.setCss())}set size(t){this._size.width=t.width,this._size.height=t.height,this.inDoc&&null!==this.dPos.x&&(this.isPlaying||this.animate())}set position(t){const i=this._size,e=this.pSize;let s=t.x-i.width/2,h=t.y-i.height/2;s<0&&(s=0),h<0&&(h=0),s>e.width-i.width&&(s=e.width-i.width),h>e.height-i.height&&(h=e.height-i.height),this.pos.x=s,this.pos.y=h,null===this.dPos.x&&(this.dPos.x=s,this.dPos.y=h),this.inDoc&&(this.isPlaying||this.animate())}setSizes(){const t=this.view.size;this.pSize=t,this.view.containerSize=t,this.view.insideContainerFontSize=t}show(t){this.inDoc||(this.inDoc=!0,this.setSizes(),this.view.show(t,this.pSize))}hide(){this.inDoc&&(this.inDoc=!1,this.view.hide(),this.pos={x:null,y:null},this.dPos={x:null,y:null},this._size={width:0,height:0},this.dSize={width:0,height:0})}resize(){this.inDoc&&(this.setSizes(),this.view.calcContainerPosition())}destroy(){this.stopAnimation(),this.inDoc=!1}};const it=class{constructor(t,i){this.view=new K(t,i),this.controller=new tt(this.view)}addEventToMainContainer(t,i){this.view.container.addEvent(t,i)}removeEventToMainContainer(t,i){i?this.view.container.removeEvent(t,i):this.view.container.removeEvent(t)}clearEvents(){this.view.container.clearEvents()}get boundaries(){return this.view.container.node.getBoundingClientRect()}show(t){this.controller.show(t)}hide(){this.controller.hide()}toggleCursorClass(t){this.view.toggleCursorClass(t)}set size(t){this.controller.size=t}set position(t){this.controller.position=t}destroy(){this.controller.destroy(),this.view.destroy()}};const et=class extends B{constructor(t,i){super(t,Object.assign({margin:9,outsidePosition:"right",width:100,height:100},i)),this.showingParams=null,this.eye=new it(this.view.getNodeForEye(),"hover"===this.o.trigger),this.ANIM_STEP=.18,this.mouseOutHandler=this.mouseOut.bind(this)}getBoundaries(){this.boundaries=this.eye.boundaries}init(){super.init(),this.setOutsideLensSize()}figureOutCursorState(){let t=super.figureOutCursorState();return"hover"!==this.o.trigger&&"zoomIn"===t&&0===this.getZoomData()&&(t="zoomOut"),t}setCursorState(t){t=super.setCursorState(t),this.eye.toggleCursorClass(y[t])}setEyesParams(){const t=this.currentLensSize.width/(this.iSize.width*this.scale.x),i=this.currentLensSize.height/(this.iSize.height*this.scale.y);this.eye.size={width:t*this.zoomNodeSize.width,height:i*this.zoomNodeSize.height},this.eye.position={x:this._x,y:this._y}}calcLensPosition(){let t=this.o.margin;const i=this.pSize,e=this.pPos;t<0&&(t=0);let{top:s,left:h}=e;switch(this.o.outsidePosition){case"top":s+=-1*(this.lensSize.height+t);break;case"left":h+=-1*(this.lensSize.width+t);break;case"right":h+=i.width+t;break;case"bottom":s+=i.height+t}this.lensPosition={top:s,left:h}}calcImagePosition(t){t||(t=this.dScale);const i=this.iSize.width*t.x,e=this.iSize.height*t.y,s=E(this.iSize.width,i),h=E(this.iSize.height,e);let o=this._x/(this.zoomNodeSize.width/i),n=this._y/(this.zoomNodeSize.height/e);o=this.lensSize.width/2-o-s,n=this.lensSize.height/2-n-h,o=T(o,0-s,s+i,this.lensSize.width),n=T(n,0-h,h+e,this.lensSize.height),this.iPos={x:o,y:n}}afterMove(){this.calcLensPosition(),this.calcImagePosition(this.scale),this.setEyesParams(),this.view.lensPosition=this.lensPosition,super.afterMove()}hide(t){const i=super.hide(t);return i&&(s.Z.browser.mobile||this.view.removeMouseMoveEvent(this.mouseOutHandler),this.eye.clearEvents(),this.eye.hide(),t||(this.view.removeEvents(),this.setHidden())),i}getStartCss(){const t={start:{x:0,y:0},end:{x:0,y:0}};switch(this.o.outsidePosition){case"top":t.start.y=10,t.end.y=0;break;case"left":t.start.x=10,t.end.x=0;break;case"right":t.start.x=-10,t.end.x=0;break;case"bottom":t.start.y=-10,t.end.y=0}return t}setShown(){super.setShown(),this.getBoundaries()}show(t,i,e,s,h,o){return!!super.show()&&(this.emit("zoomBeforeShow",{data:{}}),this.iSize={width:i.width,height:i.height},this.showingParams=this.getStartCss(),this.view.addStartCss(this.showingParams),this.view.appendNodes(t,this.iSize),this.getAllSizes(),this.x=e,this.y=s,this.calcLensSize(),this.calcLensPosition(),this.getBaseScale(),this.showDeepZoom(i.originWidth,i.originHeight),this.calcImagePosition(this.scale,!0),this.view.eventNodePositionSize={position:this.pPos,size:this.pSize},this.dScale.x=this.baseScale.x,this.dScale.y=this.baseScale.y,this.iDPos={x:-1*E(this.iSize.width,this.iSize.width*this.dScale.x),y:-1*E(this.iSize.height,this.iSize.height*this.dScale.y)},this.view.setLensCss(this.lensPosition,this.lensSize,this.o.smoothing?"opacity .4s linear, transform .15s ease-in":"none"),this.view.setImageSize(this.iDPos,this.iSize,this.dScale),(this.o.smoothing||"zero"===o)&&this.setShown(),this.eye.show(this.view.getImageForEye()),this.getBoundaries(),this.setEyesParams(),this.animStep=.3,this.o.smoothing?this.anim.start():this.setShown(),this.sendZoomShownEvent(),!0)}setOutsideLensSize(){const t={width:this.o.width,height:this.o.height};"auto"===t.width?t.width=this.pSize.width:/%$/.test(this.o.width)?t.width=this.pSize.width/100*parseInt(this.o.width,10):t.width=parseInt(t.width,10),"auto"===t.height?t.height=this.pSize.height:/%$/.test(this.o.height)?t.height=this.pSize.height/100*parseInt(this.o.height,10):t.height=parseInt(t.height,10),this.currentLensSize={width:t.width,height:t.height}}calcLensSize(){this.lensSize={width:this.currentLensSize.width,height:this.currentLensSize.height},this.lensHalfSize={width:this.lensSize.width/2,height:this.lensSize.height/2}}setEvents(){if(s.Z.browser.mobile&&this.o.pan&&this.addOutsideTouchDrag(),s.Z.browser.mobile||!s.Z.browser.touchScreen||"edge"!==s.Z.browser.uaName||this.o.pan||this.eye.addEventToMainContainer("pointerup",(t=>{this.hide()})),this.eye.addEventToMainContainer("mousemove",(t=>{t.stop(),this.move(t.pageXY.x,t.pageXY.y)})),"hover"===this.o.trigger)s.Z.browser.mobile||this.view.addMouseMoveEvent(this.mouseOutHandler),this.eye.addEventToMainContainer("mouseout",this.mouseOutHandler);else{let t=["btnclick","tap"];"dblclick"===this.o.trigger&&(t=["dblbtnclick","dbltap"]),this.eye.addEventToMainContainer(t,(t=>{this.hide()}))}s.Z.browser.mobile||"up"!==this.o.clickBehavior&&"hover"!==this.o.trigger||this.eye.addEventToMainContainer("click",(t=>this.sendClickEvent(t))),this.o.customZooming&&this.setMouseScrollEvent()}mouseOut(t){const i=t.clientXY;(i.x<this.boundaries.left||i.x>this.boundaries.right||i.y<this.boundaries.top||i.y>this.boundaries.bottom)&&this.hide(!this.getZoomData())}addOutsideTouchDrag(){let t=!1;this.eye.addEventToMainContainer(b,(i=>{i.stop(),"dragstart"===i.state?t=!0:"dragend"===i.state?t=!1:t&&this.move(i.x,i.y)}))}setMouseScrollEvent(){this.eye.addEventToMainContainer("mousescroll",(t=>{const i=this.scale.x;if(t.stop(),t.isMouse){const i=37,e=t.delta/C(t.deltaFactor,i);this.scale.x+=e,this.scale.y+=e}else{let i=t.delta;Math.abs(i)>15&&(i=15,t.delta<0&&(i*=-1)),i/=350,this.scale.x+=i,this.scale.y+=i}this.scale.x=(0,A.Z)(this.scale.x,this.baseScale.x,1),this.scale.y=(0,A.Z)(this.scale.y,this.baseScale.y,1),this.calcImagePosition(this.scale),i!==this.scale.x&&(this.sendZoomingAction(),this.setCursorState(this.figureOutCursorState()),this.o.smoothing||(this.dScale.x=this.scale.x,this.dScale.y=this.scale.y,this.iDPos.x=this.iPos.x,this.iDPos.y=this.iPos.y,this.deepZoomAction(),this.setImagePosition(this.iPos,this.scale)),this.setEyesParams())}))}setLensStyleOnResize(){this.view.lensPosition=this.lensPosition,this.view.setCanvasNodeSize(this.lensSize)}onResize(){var t;(super.onResize(),this.state!==x.OR.HIDDEN&&this.state!==x.OR.HIDING)&&(null==(t=this.eye)||t.resize())}destroy(){var t;null==(t=this.eye)||t.destroy(),this.view.removeMouseMoveEvent(this.mouseOutHandler),super.destroy()}};e(932).KF.addCssModule("ImageZoom",".sirv-zoom{-webkit-touch-callout:none!important;-webkit-tap-highlight-color:transparent!important;backface-visibility:hidden!important;outline:0!important;position:absolute;touch-action:none;-webkit-user-select:none!important;user-select:none!important;z-index:999999999}.sirv-zoom .sirv-outside-zoom{background:#fff;box-shadow:0 0 3px #99999980}.sirv-zoom .sirv-circle-zoom{background:#ffffff4d;border:0;border-radius:100%}.sirv-zoom .sirv-circle-zoom:before{background:#0000;border:1px solid #999999b3;border-radius:100%;bottom:0;box-shadow:inset 0 0 20px 1px #0000004d;content:\"\";display:block;left:0;position:absolute;right:0;top:0;z-index:126}.sirv-zoom .sirv-zoom-wrapper{display:inline-block;z-index:9}.sirv-zoom .sirv-zoom-wrapper,.sirv-zoom .sirv-zoom-wrapper .sirv-zoom-image-wrapper{overflow:hidden;position:absolute}.sirv-zoom .sirv-zoom-wrapper .sirv-zoom-image-wrapper>img{-webkit-user-drag:none;user-drag:none;left:0;margin:0;padding:0;position:absolute;top:0;-webkit-user-select:none;user-select:none}.sirv-zoom .sirv-zoom-wrapper .sirv-deepzoom{height:100%;left:0;overflow:hidden;position:relative;top:0;width:100%;z-index:42}.sirv-zoom .sirv-zoom-wrapper .sirv-deepzoom>div{height:100%;left:0;position:absolute;top:0;width:100%}.sirv-zoom .sirv-zoom-wrapper .sirv-deepzoom>div canvas{left:0;top:0}.zoom-helper{background-color:#eaeaea;border:1px solid #ccc9c9;border-radius:4px;box-shadow:1px 1px 9px 1px #00000080;display:inline-block;overflow:hidden;overflow-y:auto;padding:10px;position:fixed;right:10px;top:10px;z-index:999}.zoom-helper .z-loaded-color{background-color:#87bd89!important}.zoom-helper .z-loading-color{background-color:#a99cef!important}.zoom-helper .z-canceled-color{background-color:#f19c9c!important}.zoom-helper .z-helper-head{margin-bottom:9px}.zoom-helper .z-body,.zoom-helper .z-head,.zoom-helper .z-level{position:relative}.zoom-helper .z-level{background-color:#d4d3d3;border-radius:4px;box-sizing:border-box;margin-bottom:9px;padding:10px}.zoom-helper .z-head{margin-bottom:9px}.zoom-helper .z-body{border-left:1px solid;border-top:1px solid}.zoom-helper .z-tile{border-bottom:1px solid;border-right:1px solid;box-sizing:border-box;display:inline-block;position:absolute}.zoom-helper .z-status{background-color:#e87979;border-radius:50%;box-sizing:border-box;display:inline-block;height:10px;margin-left:10px;width:10px}.zoom-helper .z-status.shown{background-color:#66ca66!important}.sirv-zoom-map{border:1px solid #bdbdbd;bottom:16px;box-sizing:border-box;cursor:pointer;height:150px;left:16px;overflow:hidden;position:absolute;width:200px;z-index:126}.sirv-zoom-map .sirv-zoom-map-lens{border:1px solid #fff;box-sizing:border-box;height:50px;left:50px;position:absolute;top:50px;width:50px;z-index:42}.sirv-zoom-map .sirv-zoom-map-lens:after,.sirv-zoom-map .sirv-zoom-map-lens:before{content:\"\";display:block;height:100%;position:absolute;width:100%}.sirv-zoom-map .sirv-zoom-map-lens:before{border:1em solid #0009;border-image:initial;box-sizing:initial;left:-1em;top:-1em}.sirv-zoom-map .sirv-zoom-map-lens:after{border:1px solid #fff;border-image:initial;box-sizing:border-box}.sirv-zoom-map>img{height:100%;left:0;position:relative;top:0;width:100%}.sirv-zoom-lens,.sirv-zoom-lens-wrapper{left:0;position:absolute;top:0}.sirv-zoom-lens-wrapper{background-color:#9996;overflow:hidden;z-index:9999999999}.sirv-zoom-lens{box-shadow:0 0 3px #99999980;overflow:hidden}.sirv-zoom-lens img{max-height:none!important;max-width:none!important;transition:none!important}.sirv-filter-bw{filter:grayscale(.5) opacity(.5);filter:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='grayscale'><feColorMatrix type='saturate' values='0'/><feComponentTransfer><feFuncA type='linear' slope='0.6'/></feComponentTransfer></filter></svg>#grayscale\")}");class st extends d.Z{constructor(t,i){super(),this.zoomType=i.type,"inner"===i.type?(this.view=new o(t),this.view.addClassToWrapper("inner"),this.controller=new U(this.view,i)):["circle","square"].includes(i.type)?(this.view=new j(t),this.view.addClassToWrapper(i.type),this.controller=new q(this.view,i)):(this.view=new V(t),this.view.addClassToWrapper("outside"),this.controller=new et(this.view,i)),this.controller.parentClass=this,this.controller.init()}set lensContainer(t){this.controller.lensContainer=t}get shown(){return this.controller.shown}get showing(){return this.controller.showing}getZoomData(t){return this.controller.getZoomData(t)}get nextMinZoom(){return this.controller.nextMinZoom}get nextMaxZoom(){return this.controller.nextMaxZoom}zoomUp(t,i){return this.controller.zoomUp(t,i)}zoomDown(t,i){return this.controller.zoomDown(t,i)}showCenter(t,i,e){return this.controller.showCenter(t,i,e)}addLoadedImage(t){this.controller.setImage(t)}show(t,i,e,s,h,o){return this.controller.show(t,i,e,s,h,o)}hide(t){return this.controller.hide(t)}customMove(t,i){this.controller.customMove(t,i)}get baseScale(){return this.controller.baseScale}set basePercent(t){"inner"===this.zoomType&&(this.controller.basePercent=t)}setScale(t,i,e){"inner"===this.zoomType&&this.controller.setScale(t,i,e)}setFullscreenState(t){this.controller.setFullscreenState(t)}onResize(){this.controller.onResize()}destroy(){this.view.destroy(),this.controller.destroy()}}const ht=st},441:(t,i,e)=>{e.d(i,{Z:()=>s});const s=function(t,i,e){return void 0===i&&(i=Number.NEGATIVE_INFINITY),void 0===e&&(e=Number.POSITIVE_INFINITY),Math.min(Math.max(t,i),e)}}},t=>{var i=i=>t(t.s=i);t.O(0,[121,179],(()=>(i(6394),i(758),i(3627),i(6361))));t.O()}]);"use strict";(globalThis.sirvViewerChunks=globalThis.sirvViewerChunks||[]).push([[312],{7647:(t,i,e)=>{e.d(i,{Z:()=>a});var s=e(3089),o=e(9913);class n extends s.Z{constructor(t,i,e){super(),this.parentNode=o.Z.$(t),this.options=Object.assign({class:null,disabledClass:"disable"},i),this.events=e||{},this.disabled=!1,this.isDisabledClassAdded=!1,this.instanceNode=o.Z.$new("button"),this.options.class&&this.instanceNode.addClass(this.options.class),Object.entries(this.events).forEach((t=>{this.instanceNode.addEvent(...t)}))}append(){this.parentNode.append(this.instanceNode)}changeState(t){t?(this.disable(!0),this.isDisabledClassAdded||(this.isDisabledClassAdded=!0,this.instanceNode.addClass(this.options.disabledClass))):(this.isDisabledClassAdded&&(this.isDisabledClassAdded=!1,this.instanceNode.removeClass(this.options.disabledClass)),this.disable())}disable(t){t?this.disabled||(this.disabled=!0,this.instanceNode.attr("disabled","disabled")):this.disabled&&(this.disabled=!1,this.instanceNode.removeAttr("disabled"))}destroy(){Object.entries(this.events).forEach((t=>{this.instanceNode.removeEvent(...t)})),this.events={},this.changeState(),this.instanceNode.remove(),this.instanceNode=null,super.destroy()}}class h extends s.Z{constructor(t){super(),this.parentNode=o.Z.$(t),this.instanceNode=o.Z.$new("div").addClass("zoom-controls"),this.zoomInButton=new n(this.instanceNode,{class:"zoom-in"},{btnclick:t=>{t.stop(),this.emit("zoomControlsAction",{data:{type:"zoomin"}})},tap:t=>{t.stop(),this.emit("zoomControlsAction",{data:{type:"zoomin"}})}}),this.zoomInButton.parentClass=this,this.zoomOutButton=new n(this.instanceNode,{class:"zoom-out"},{btnclick:t=>{t.stop(),this.emit("zoomControlsAction",{data:{type:"zoomout"}})},tap:t=>{t.stop(),this.emit("zoomControlsAction",{data:{type:"zoomout"}})}}),this.zoomOutButton.parentClass=this,this.zoomCloseButton=new n(this.instanceNode,{class:"zoom-close"},{btnclick:t=>{t.stop(),this.emit("zoomControlsAction",{data:{type:"zoomclose"}})},tap:t=>{t.stop(),this.emit("zoomControlsAction",{data:{type:"zoomclose"}})}}),this.zoomCloseButton.parentClass=this,this.zoomInButton.append(),this.zoomOutButton.append(),this.zoomCloseButton.append()}show(){this.parentNode.append(this.instanceNode)}hide(){this.instanceNode.remove()}invisibleDisable(t){this.zoomInButton.disable(t),this.zoomOutButton.disable(t),this.zoomCloseButton.disable(t)}disable(t){t?"in"===t?(this.zoomInButton.changeState(!0),this.zoomOutButton.changeState(),this.zoomCloseButton.changeState()):(this.zoomOutButton.changeState(!0),this.zoomCloseButton.changeState(!0),this.zoomInButton.changeState()):(this.zoomInButton.changeState(),this.zoomOutButton.changeState(),this.zoomCloseButton.changeState())}destroy(){this.zoomInButton.destroy(),this.zoomOutButton.destroy(),this.zoomCloseButton.destroy(),this.hide(),super.destroy()}}const a=h},9840:(t,i,e)=>{e.a(t,(async(t,s)=>{try{e.r(i),e.d(i,{default:()=>N});var o=e(5378),n=e(1398),h=e(7647),a=e(293),r=e(6031),d=e(6511),l=e(9680),c=e(7504),m=e(9913),p=e(758),u=e(6361),g=e(6450),z=e(6394),b=e(932),f=e(4186);let t=null;try{t=(await Promise.resolve().then((()=>{if(!e.m[8574]){var t=new Error("Module '8574' is not available (weak dependency)");throw t.code="MODULE_NOT_FOUND",t}return e(8574)}))).default}catch(t){}const w="https://sirv.com/about-zoom/?utm_source=client&utm_medium=sirvembed&utm_content=typeofembed(zoom)&utm_campaign=branding",S=t=>{t.stop()},y=(t,i)=>Math.abs(t-i),v=t=>{let i=null;for(;t.node!==document.body&&!i;)(t=m.Z.$(t.node.parentNode)).hasClass(f.i2+"-slides-box")&&(i=t);return i},O=(t,i)=>new Promise(((e,s)=>{const o=m.Z.$(t).size;i||(i=100),i-=1,o.width||o.height?e(o):i>0?setTimeout((()=>{O(t,i).then(e).catch(s)}),16):s(null)}));b.KF.addCssModule("Zoom",o.Z+n.Z);class I extends p.Z{constructor(t,i){if(super(t,i,a.ce),this.type=f.mA.ZOOM,this.insideOptions={type:"outside",position:"right",hideZoomForClickTrigger:!0,zooming:!0,map:!1,mapSize:50,controls:!1,trigger:"click",outsideModeWasChanged:!1},this.queryParamsObj=(0,c.Z)(this.queryParams),this.queryParamsObj){const t=parseInt(this.queryParamsObj.quality,10);isNaN(t)?delete this.queryParamsObj.quality:this.queryParamsObj.quality=t}this.queryParamsQuality=this.queryParamsObj.quality||null,this.imageNode=null,this.loader=null,this.image=null,this.controls=null,this.differenceBetweenSizes=100,this.currentSize={width:0,height:0},this.currentImageSize={width:0,height:0},this.isInfoLoaded=!1,this.zoomIsOpened=!1,this.imageShowPromise=null,this.hint=null,this.longTapTimer=null,this.setImageCss=!1,this.lastTriggerAction=null,this.isNotMouse=!1,this.accountInfo={},this.postInitState=0,this.clonedImage=null,this.isHidden=!1,this.destroyed=!1,this.waitingCallbacks=[],this.fsClickHandler=null,this.lastImageSize={width:0,height:0},this.hotspotsTurnedOn=!0,this.scrollDebounce=(0,r.Z)((()=>{this.replaceZoom()}),16),this.zoomDebounce=(0,r.Z)((()=>{this.controls&&(this.controls.invisibleDisable(),this.changeControlsState(this.zoom.getZoomData()))}),42),this.onScrollHandler=this.onScroll.bind(this),this.instanceNode.addEvent("selectstart",(t=>{t.stop()})),this.createHotspotsClass(),this.createSirvImage()}makeOptions(){let t=new m.Z.Options(this.defaultSchema);return t=this.makeGlobalOptions(t),["top","left","right","bottom","inner","magnifier"].includes(t.get("mode"))&&t.parseSchema(a.uS,!0),m.Z.browser.touchScreen&&m.Z.browser.mobile&&(t.parseSchema(a.OM,!0),t=this.makeMobileOptions(t),["inner","deep"].includes(t.get("mode"))&&t.parseSchema(a.yh,!0)),"deep"===t.get("mode")&&t.parseSchema(a.uf,!0),t}getInfo(){return this.gettingInfoPromise||(this.gettingInfoPromise=new Promise(((t,i)=>{this.waitGettingInfo.wait((()=>{this.image.loadInfo().then((i=>{this.destroyed||(this.isInfoLoaded=!0,this.accountInfo=this.image.accountInfo,this.dataAlt||(this.dataAlt=this.image.description),this.hotspotsData=i.hotspots,this.infoSize=this.image.originSize,this.hotspots&&(this.hotspots.originImageSize=this.infoSize),t())})).catch((t=>{this.destroyed||i(t)}))}))}))),this.gettingInfoPromise}showHint(){!this.hint||this.always&&![f.UW.OPENING,f.UW.OPENED].includes(this.fullscreenState)||this.hint.show()}onStartActions(){this.ready?this.isInView&&this.isZoomSizeExist()&&this.showHint():this.isStarted&&this.isInView&&this.isSlideShown&&!this.preload&&this.postInit(),super.onStartActions()}onStopActions(){this.zoomOut(!0),this.hint&&this.hint.hide(),super.onStopActions()}onInView(t){t&&(this.ready?this.isSlideShown&&this.isZoomSizeExist()&&this.showHint():this.isStarted&&(this.isInView||!this.preload&&!this.isSlideShown||(this.isInView=!0,this.postInit())))}startFullInit(t){this.isStartedFullInit||(super.startFullInit(t),this.normalizeOptions(),this.getId("zoom-"),this.instanceNode.addClass(f.i2+"-zoom-view"),this.instanceNode.addEvent("mousedown",S),this.createLoader())}imageSettings(t){t||(t={}),t.imageSettings||(t.imageSettings={}),t.imageSettings.scale||(t.imageSettings.scale={}),t.callbackData||(t.callbackData={}),t.imageSettings.scale.option="fill",null!==this.quality&&null===this.queryParamsQuality&&(t.src||(t.src={}),t.src.quality=this.quality);const i=this.hdQuality;return(null===this.queryParamsQuality||this.isHDQualitySet&&i<this.queryParamsQuality)&&(t.srcset={quality:i}),t}setHDQuality(t){return t.dppx>1&&t.dppx<1.5&&(null===this.queryParamsQuality&&null!==this.quality?t.srcset.quality=this.quality:t.srcset&&delete t.srcset.quality),t}isOutsideZoom(){return["top","left","right","bottom"].includes(this.option("mode"))}createHint(t){this.option("hint.enable")&&(this.hint=new u.Z(this.instanceNode,{html:"<span>"+t+"<span>"}),this.hint.append())}clearZoom(){this.zoom&&(this.off("zooming"),this.off("zoomUp"),this.off("zoomDown"),this.imageNode&&this.imageNode.removeClass(this.zoomClassName)),super.clearZoom()}replaceZoom(){let t=!1;const i=this.option("trigger"),e={clickBehavior:"both"};if(!this.ready)return;"hover"===i&&"magnifier"!==this.option("mode")&&([f.UW.OPENING,f.UW.OPENED].includes(this.fullscreenState)?(t="click",e.trigger=t):t=i);let s,o=t&&this.insideOptions.trigger!==t;if(t&&this.insideOptions.trigger!==t&&(o=!0),"outside"===this.insideOptions.type){s=this.canIUseOutsideZoom(),(s&&this.insideOptions.outsideModeWasChanged||!s&&!this.insideOptions.outsideModeWasChanged)&&(this.insideOptions.outsideModeWasChanged=!this.insideOptions.outsideModeWasChanged,o=!0);const t=this.imageNode.size;!o&&s&&this.lastImageSize.width!==t.width&&(this.lastImageSize=t,o=!0)}o&&(this.clearZoom(),"outside"===this.insideOptions.type&&(s?e.type="outside":(e.type="inner",m.Z.browser.mobile&&(e.pan=!0,"hover"===i&&(t="dblclick",e.trigger=t)))),t&&(this.insideOptions.trigger=t),this.setTriggerAction(t),this.createZoom(e),this.setZoomEvents(),this.imageNode&&(this.imageNode.removeClass(f.cY),this.addCursor(),this.isZoomSizeExist()?this.removeFullscreenClick():this.addFullscreenClick()))}canIUseOutsideZoom(){let t=!1;if("outside"===this.insideOptions.type){if([f.UW.OPENING,f.UW.OPENED].includes(this.fullscreenState))return t;const i=this.imageNode.size,e=this.option("width"),s=this.option("height"),o={width:i.width,height:i.height};"auto"!==e&&(/%$/.test(e)?i.width=i.width/100*parseInt(e,10):i.width=parseInt(e,10)),"auto"!==s&&(/%$/.test(s)?i.height=i.height/100*parseInt(s,10):i.height=parseInt(s,10));const n=this.option("margin"),h=m.Z.$(window).scroll,a=this.imageNode.position;let r;switch(this.insideOptions.position){case"top":r=a.top-h.y-n,r>i.height&&(t=!0);break;case"left":r=a.left-h.x-n,r>=i.width&&(t=!0);break;case"right":r=a.left-h.x,r+=o.width+n,window.innerWidth-r>=i.width&&(t=!0);break;case"bottom":r=a.top-h.y,r+=o.height+n,window.innerHeight-r>=i.height&&(t=!0)}}return t}createHotspotsClass(){"magnifier"!==this.option("mode")&&(m.Z.browser.mobile||"hover"!==this.option("trigger")||(this.hotspotsTurnedOn=!1),super.createHotspotsClass(t))}run(t,i,e){const s=super.run(t,i,e);return s&&(this.getInfo().finally((()=>{this.calcContainerSize(),this.isInView&&(this.preload||this.isSlideShown)&&this.postInit()})),this.startGettingInfo()),s}done(){if(!this.ready&&!this.destroyed){super.done(),this.hotspots&&(this.hotspots.instanceComponentNode=this.imageNode,this.hotspots.containerSize=this.imageNode.node.getBoundingClientRect()),this.createZoom(),this.replaceZoom(),this.createControls();const t=this.isZoomSizeExist();this.controls&&(this.controls.disable("out"),t&&this.controls.show()),this.imageNode&&(this.addCursor(),t||this.addFullscreenClick()),this.setZoomEvents(),this.isSlideShown&&this.isInView&&t&&this.showHint(),this.accountInfo.branded&&b.KF.showSirvAd(this.instanceNode,this.instanceNode,w,"Deep zoom image viewer by Sirv")}}normalizeOptions(){switch("deep"!==this.option("mode")&&this.option("map.enable",!1),("deep"===this.option("mode")||m.Z.browser.mobile)&&this.option("pan",!0),"magnifier"!==this.option("mode")||m.Z.browser.mobile||this.option("pan",!1),this.isOutsideZoom()||"auto"===this.option("width")&&"auto"===this.option("height")&&this.option("width","70%"),this.option("trigger")){case"hover":"deep"===this.option("mode")&&this.option("trigger","click");break;case"click":case"dblclick":break;default:this.option("trigger",!1)}switch(this.option("mode")){case"top":case"left":case"right":case"bottom":this.insideOptions.type="outside",this.insideOptions.position=this.option("mode");break;case"magnifier":this.insideOptions.type="circle";break;case"inner":this.insideOptions.type="inner";break;case"deep":this.insideOptions.type="deep",this.insideOptions.controls=!0}"deep"===this.insideOptions.type&&this.option("map.enable")&&(this.insideOptions.map=0!==this.option("map.size"),this.insideOptions.map&&(this.insideOptions.mapSize=2*this.option("map.size"))),this.insideOptions.trigger=this.option("trigger"),m.Z.browser.mobile&&(this.insideOptions.hideZoomForClickTrigger=!1),"max"!==this.option("ratio")&&this.option("ratio")<f.Jk&&this.option("ratio",0),"deep"===this.option("mode")&&this.option("tiles",!0),this.setDefaultZoomOptions()}setDefaultZoomOptions(){const t="deep"===this.insideOptions.type;super.setDefaultZoomOptions(),this.defaultZoomOptions=Object.assign(this.defaultZoomOptions,{trigger:this.option("trigger"),tiles:this.option("tiles"),width:this.option("width"),height:this.option("height"),map:this.insideOptions.map,clickBehavior:t?"up":"both",outsidePosition:this.insideOptions.position,margin:this.option("margin"),type:t?"inner":this.insideOptions.type,pan:this.option("pan"),customZooming:this.option("wheel"),mapSize:this.insideOptions.mapSize})}onZoomGetImage(t){super.onZoomGetImage(t),t.data=this.imageSettings(t.data),t.data=this.setHDQuality(t.data);const i=this.image.getImage(t.data);this.checkImage(t.data,t.data.dontLoad)&&this.zoom.addLoadedImage(i)}onZoomCancelLoadingOfTiles(t){super.onZoomCancelLoadingOfTiles(t),t.data=this.imageSettings(t.data),this.image.cancelLoadingImage(t.data)}onZoomBeforeShow(t){"magnifier"!==this.option("mode")&&("outside"!==this.insideOptions.type||this.insideOptions.outsideModeWasChanged?this.imageNode.addClass(this.zoomClassName):this.imageNode.addClass("sirv-filter-bw"),this.hotspots&&this.hotspots.disableAll())}onZoomShown(t){this.isSlideShown&&this.sendEvent("zoomIn",{trigger:this.option("trigger"),isOutsideZoom:this.isOutsideZoom()})}onZoomHidden(t){this.imageNode.removeClass(this.zoomClassName),this.imageNode.removeClass("sirv-filter-bw"),this.sendEvent("zoomOut"),this.isNotMouse=!1,this.zoomIsOpened=!1,this.pinchCloud&&this.pinchCloud.addEvent(),this.hotspots&&(this.hotspotsTurnedOn&&[f.UW.CLOSED,f.UW.OPENING].includes(this.fullscreenState)||"hover"!==this.insideOptions.trigger&&[f.UW.OPENED,f.UW.CLOSING].includes(this.fullscreenState))&&(this.hotspots.enableAll(),this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements())}setZoomEvents(){super.setZoomEvents(),this.on("zooming",(t=>{const i=t.data.zoom;t.stopAll(),this.controls&&(this.controls.invisibleDisable(!0),this.changeControlsState(i),this.zoomDebounce())})),this.on("zoomUp",(t=>{t.stop(),this.makeZoom("zoomin",t.data.x,t.data.y)})),this.on("zoomDown",(t=>{t.stop(),this.makeZoom("zoomout",t.data.x,t.data.y)}))}onBeforeFullscreenIn(t){this.zoomIsOpened&&(this.zoom.hide(!0),this.controls&&this.controls.disable("out")),this.ready&&this.isSlideShown&&this.isInView&&this.imageNode&&(this.isHidden=!0,this.imageNode.setCss({opacity:0,visibility:"hidden"})),super.onBeforeFullscreenIn(t),this.hotspots&&this.hotspots.disableAll()}onAfterFullscreenIn(t){this.calcContainerSize(),this.replaceZoom(),this.isHidden&&(this.isHidden=!1,setTimeout((()=>{this.setImageWidthHeight(),this.imageNode.setCss({opacity:"",visibility:""})}),0)),this.hotspots&&setTimeout((()=>{this.hotspotsTurnedOn&&this.fullscreenState===f.UW.OPENED&&(this.hotspots.enableAll(),this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements())}),100),super.onAfterFullscreenIn(t)}onBeforeFullscreenOut(t){this.zoomIsOpened&&(this.zoom.hide(!0),this.controls&&this.controls.disable("out")),super.onBeforeFullscreenOut(t),this.hotspots&&!this.hotspotsTurnedOn&&this.hotspots.disableAll(),this.replaceZoom(),this.ready&&this.isSlideShown&&this.isInView&&this.imageNode&&(this.isHidden=!0,this.imageNode.setCss({opacity:0,visibility:"hidden"}))}onAfterFullscreenOut(t){this.isHidden&&(this.isHidden=!1,setTimeout((()=>{this.destroyed||(this.setImageWidthHeight(),this.imageNode.setCss({opacity:"",visibility:""}))}),0)),super.onAfterFullscreenOut(t)}onSecondSelectorClick(){this.zoomOut(!0)}onMouseAction(t){"mouseout"===t&&(["deep","magnifier"].includes(this.option("mode"))||!("outside"===this.insideOptions.type&&this.insideOptions.outsideModeWasChanged||"inner"===this.insideOptions.type)||"hover"!==this.insideOptions.trigger&&!this.insideOptions.hideZoomForClickTrigger||this.isNotMouse||this.zoomOut(!0))}makeZoom(t,i,e){let s=!1;if(this.ready&&this.zoom)switch(t){case"zoomin":this.zoomIsOpened?(1===this.zoom.nextMinZoom&&this.controls.disable("in"),s=this.zoom.zoomUp(i,e)):s=this.openZoom(i,e,"deep"===this.insideOptions.type&&"first");break;case"zoomout":this.zoomIsOpened&&(0===this.zoom.getZoomData()||0===this.zoom.nextMinZoom?(s=this.zoom.hide(),this.controls&&this.controls.disable("out")):s=this.zoom.zoomDown(i,e));break;default:this.zoomIsOpened&&(s=this.zoom.hide(),this.controls&&this.controls.disable("out"))}return s}calcContainerSize(){if(this.destroyed)return;const t=this.instanceNode.size;if(t.height&&t.width)this.currentSize=t;else{const i=this.image.originSize;t.height?(this.currentSize.height=t.height,this.currentSize.width=i.width/i.height*t.height):(this.currentSize.width=t.width,this.currentSize.height=i.height/i.width*t.width)}}getImageSize(){let t,i;const e=this.currentSize,s=this.image.originSize;return e.width>=e.height?(i=Math.min(e.height,s.height),t=s.width/s.height*i,t>e.width&&(t=Math.min(e.width,s.width),i=s.height/s.width*t)):(t=Math.min(e.width,s.width),i=s.height/s.width*t,i>e.height&&(i=Math.min(e.height,s.height),t=s.width/s.height*i)),Object.assign({realWidth:t,realHeight:i},this.image.getClearSizeWithoutProcessingSettings({width:t,height:i}))}setTriggerAction(t){let i=this.option("trigger");if(this.isNotMouse=!1,!("max"!==this.option("ratio")&&this.option("ratio")<f.Jk)&&i){let e,s,o=!1;this.lastTriggerAction&&(this.lastTriggerAction(),this.lastTriggerAction=null,this.hint&&(this.hint.destroy(),this.hint=null,o=!0)),t&&(i=t);const n=[["btnclick","tap"],["dblbtnclick","dbltap"]];switch(i){case"click":e=n[0],s=this.option("hint.text.click");break;case"dblclick":e=n[1],s=this.option("hint.text.dblclick");break;case"hover":e="mouseover",s=this.option("hint.text.hover"),m.Z.browser.mobile&&this.outsideModeWasChanged&&(s=this.option("hint.text.dblclick"),e="dbltap",i=e)}this.createHint(s),o&&this.isSlideShown&&this.isInView&&this.isZoomSizeExist()&&this.showHint();const h=[];if("hover"===i)m.Z.browser.touchScreen&&h.push(this.setLongTapEvents()),m.Z.browser.mobile||h.push(this.setHoverEvents());else{const t=t=>{this.fullscreenState!==f.UW.OPENED&&this.always||(t.stop(),this.isFullscreenActionEnded()&&this.openZoom(t.pageXY.x,t.pageXY.y,!1))};if(m.Z.browser.touchScreen){const t=t=>{this.isNotMouse=t.isTouchEvent()};this.imageNode.addEvent("pointerup",t),h.push(m.Z.$((t=>{this.isNotMouse=!1,this.imageNode.removeEvent("pointerup",t)})).bind(this,t))}if(this.imageNode.addEvent(e,t),h.push(m.Z.$(((t,i)=>{this.imageNode.removeEvent(t,i)})).bind(this,e,t)),m.Z.browser.mobile&&this.goToFullscreen){const t=e===n[0]?n[1]:n[0],i=t=>{this.fullscreenState===f.UW.CLOSED&&(t.stop(),this.emit("goToFullscreen"))};this.imageNode.addEvent(t,i),h.push(m.Z.$(((t,i)=>{this.imageNode.removeEvent(t,i)})).bind(this,t,i))}}this.lastTriggerAction=m.Z.$((t=>{m.Z.$(t).forEach((t=>{t()}))})).bind(this,h)}}setImageSrc(t,i,e){this.imageNode&&(i?this.imageNode.attr("srcset",i+" "+e+"x"):this.imageNode.removeAttr("srcset"),this.imageNode.attr("src",t),this.clonedImage=m.Z.$(this.imageNode.node.cloneNode(!1)),this.clonedImage.node.className="",this.clonedImage.setCss({opacity:"",visibility:""}))}setImageWidthHeight(){if(this.destroyed)return;const t={width:"",height:""},i="100%";this.currentImageSize.realWidth/this.currentImageSize.realHeight>=this.currentSize.width/this.currentSize.height?t.width=i:t.height=i,this.imageNode.setCss(t)}createImage(t,i,e,s){if(!this.imageNode){this.imageNode=t?m.Z.$(t):m.Z.$new("img"),this.imageNode.attr("referrerpolicy",this.referrerPolicy);const o=this.image.originSize;this.imageNode.setCss({maxWidth:o.width,maxHeight:o.height}),this.setImageWidthHeight(),this.setTriggerAction(),this.option("wheel")&&"deep"===this.option("mode")&&this.imageNode.addEvent("mousescroll",(t=>{!this.zoomIsOpened&&t.delta>0&&(t.stop(),this.openZoom(t.x,t.y,"first"))})),m.Z.$(window).addEvent("scroll",this.onScrollHandler),this.dataAlt&&this.imageNode.attr("alt",this.dataAlt),this.setImageSrc(i,e,s)}}setLongTapEvents(){let t=!1,i=!1;const e=e=>{clearTimeout(this.longTapTimer),this.zoomIsOpened||e.isTouchEvent()&&!e.isPrimaryTouch()||this.isFullscreenActionEnded()&&(this.longTapTimer=setTimeout((()=>{e.isTouchEvent()&&!e.isPrimaryTouch()||(e.stop(),t=!0,this.openZoom(e.pageXY.x,e.pageXY.y,!1,!0))}),201),i=!0)},s=i=>{i.isTouchEvent()&&!i.isPrimaryTouch(i)||(t?(i.stop(),this.zoom.customMove(i.pageXY.x,i.pageXY.y)):clearTimeout(this.longTapTimer))},o=e=>{e.isTouchEvent()&&!e.isPrimaryTouch(e)||(i&&(i=!1,clearTimeout(this.longTapTimer)),t&&(e.stop(),t=!1,this.zoom.hide(!0)))};return this.fullscreenState!==f.UW.OPENED&&this.always||(this.instanceNode.addEvent(["touchstart","pointerdown"],e),this.instanceNode.addEvent(["touchmove","pointermove"],s),this.instanceNode.addEvent(["touchend","pointerup"],o)),()=>{this.instanceNode.removeEvent(["touchstart","pointerdown"],e),this.instanceNode.removeEvent(["touchmove","pointermove"],s),this.instanceNode.removeEvent(["touchend","pointerup"],o)}}setHoverEvents(){let t,i,e,s=!1;const o=()=>m.Z.browser.touchScreen&&!m.Z.browser.mobile,n=n=>{t=n.pageXY.x,i=n.pageXY.y,o()&&n.isTouchEvent()||s||!this.isSlideShown||this.fullscreenState!==f.UW.OPENED&&this.always||(s=!0,e=setTimeout((()=>{this.openZoom(t,i,!1)}),84))},h=n=>{let h=m.Z.$(n.related);if((!o()||!n.isTouchEvent())&&s&&(this.fullscreenState===f.UW.OPENED||!this.always)&&(s=!1,this.isFullscreenActionEnded())){for(;h&&h!==this.imageNode.node&&h!==document.body;)h=m.Z.$(h.parentNode);h!==this.imageNode.node&&(t=null,i=null,clearTimeout(e))}};let a=()=>{},r="mousemove",d="mouseout";return o()&&"edge"===m.Z.browser.uaName&&(a=this.on("zoomHidden",(t=>{t.stop(),s=!1})),r="pointermove",d="pointerup"),this.imageNode.addEvent(r,n),this.imageNode.addEvent(d,h),()=>{a(),this.imageNode.removeEvent(r,n),this.imageNode.removeEvent(d,h)}}getZoomImageSize(){const t=this.image.originSize,i=t.width,e=t.height,s=this.option("ratio");let o={width:i,height:e};return"max"!==s&&(o.width=this.currentImageSize.realWidth*s,o.height=this.currentImageSize.realHeight*s,o=g.Z.roundImageSize(o)),o.width=Math.min(i,o.width),o.height=Math.min(e,o.height),{width:o.width,height:o.height,originWidth:i,originHeight:e}}openZoom(t,i,e,s){"deep"===this.insideOptions.type&&"zero"!==e&&(e="first");let o=!1;if(!this.zoom||!this.isZoomSizeExist())return o;this.zoomIsOpened=!0,this.hint&&this.hint.hide(),this.hotspots&&this.hotspots.hideActiveHotspotBox(!0);const n=this.clonedImage,h=this.getZoomImageSize();return o=void 0===t?this.zoom.showCenter(n,h,e):this.zoom.show(n,h,t,i,s,e),o}createPinchEvent(){let t,i,e,s,o,n,h,a,r;const d=()=>{o=1,n=1,i=this.zoom.baseScale.x,h=1,a=i,e=1-i};super.createPinchEvent(this.instanceNode),this.pinchCloud.onPinchStart=t=>{[f.UW.OPENING,f.UW.CLOSING].includes(this.fullscreenState)||"outside"===this.insideOptions.type&&!this.insideOptions.outsideModeWasChanged||(this.pinchCloud.pinch=!0,clearTimeout(this.longTapTimer),r=!1,this.pinchCloud.scale=t.scale,s=1,this.hotspots&&this.hotspots.hideActiveHotspotBox(!0),this.zoomIsOpened&&(s=this.zoom.scale.x,i===m.Z.U&&d(),s/=i),this.sendEvent("pinchStart"))},this.pinchCloud.onPinchResize=t=>{this.pinchCloud.pinch&&!this.pinchCloud.block&&this.zoom&&this.fullscreenState===f.UW.OPENED&&this.zoomIsOpened&&(this.pinchCloud.scale=t.scale,this.zoom.basePercent=t.centerPoint)},this.pinchCloud.onPinchMove=l=>{this.pinchCloud.pinch&&!this.pinchCloud.block&&(this.fullscreenState!==f.UW.OPENED&&this.isFullscreenEnabled?l.scale>=2&&(this.pinchCloud.block=!0,this.sendEvent("fullscreenIn")):this.zoomIsOpened?this.zoom&&(r?(t=l.scale,t*=i,h<t&&(h=t,a=i,n=1,o=e/(h-i)),a>t&&(a=t,h=1,o=1,n=i/a),t*=s,t=(i+(t-i)*o)*n,this.zoom.setScale(t,l.centerPoint.x,l.centerPoint.y)):(r=!0,this.zoom.basePercent=l.centerPoint),this.pinchCloud.scale=l.scale):l.scale>1.1?"magnifier"!==this.option("mode")&&this.option("wheel")&&(this.openZoom(l.centerPoint.x,l.centerPoint.y,"zero"),d(),s=1):l.scale<.2&&this.isFullscreenEnabled&&(this.pinchCloud.block=!0,this.sendEvent("fullscreenOut")))},this.pinchCloud.onPinchEnd=t=>{this.pinchCloud.pinch&&(this.pinchCloud.pinch=!1,this.sendEvent("pinchEnd")),this.zoomIsOpened&&this.pinchCloud.removeEvent(),this.pinchCloud.block=!1}}loadContent(){this.postInit()}postInit(){this.postInitState||(this.postInitState=1,this.waitToStart.start(),O(this.instanceNode.node).then((t=>{this.currentSize=t})).catch((t=>{this.destroyed||this.calcContainerSize()})).finally((()=>{this.destroyed||(this.postInitState=2,this.getImage())})))}get imageClassContainer(){return this.image}getImage(){if(this.destroyed)return;const t=this.getImageSize(),i=y(g.Z.roundImageSize({width:this.currentImageSize.width}).width,g.Z.roundImageSize({width:t.width}).width);if(this.setImageCss=!1,!this.ready||i>=this.differenceBetweenSizes||this.fullscreenState===f.UW.OPENED){if(!this.ready&&!t.width&&!t.height)return void setTimeout((()=>{this.calcContainerSize(),this.getImage()}),16);(i>=this.differenceBetweenSizes||this.fullscreenState===f.UW.OPENED||!this.currentImageSize.width)&&(this.currentImageSize=t);const e=!0;let s,o=this.imageSettings({width:this.currentImageSize.realWidth,height:this.currentImageSize.realHeight,round:!0,dontLoad:e});if(m.Z.DPPX>1&&(s=o.height>o.width?(0,d.Z)(o.round?g.Z.roundImageSize({height:o.height}).height:o.height,this.image.originSize.height,this.upscale):(0,d.Z)(o.round?g.Z.roundImageSize({width:o.width}).width:o.width,this.image.originSize.width,this.upscale),o.dppx=s),o=this.setHDQuality(o),this.checkImage(o,e)&&this.ready){const t=this.image.getImage(o);this.setImageSrc(t.src,t.srcset,s)}else this.image.getImage(o)}else i<this.differenceBetweenSizes&&(this.setImageCss=!0)}imageRequest(){this.image.getImage(this.imageSettings({width:this.currentImageSize.width,height:this.currentImageSize.height}))}showImage(){return this.imageShowPromise||(this.imageShowPromise=new Promise(((t,i)=>{let e=null,s=null;this.isInView&&this.isSlideShown?(this.imageNode.setCss({opacity:0,transition:"opacity .3s linear"}),this.instanceNode.append(this.imageNode),(0,l.Z)(this.imageNode.node).then((t=>{e=t})).catch((t=>{s=t})).finally((()=>{this.destroyed||(this.imageNode.addEvent("transitionend",(o=>{o.stop(),this.imageNode.removeEvent("transitionend"),this.imageNode.setCss({opacity:"",transition:""}),e?(this.sendContentLoadedEvent(),t(e)):i(s)})),this.imageNode.render(),this.imageNode.setCssProp("opacity",1))}))):(this.instanceNode.append(this.imageNode),(0,l.Z)(this.imageNode.node).then((t=>{e=t})).catch((t=>{s=t})).finally((()=>{e?(this.sendContentLoadedEvent(),t(e)):i(s)})))}))),this.imageShowPromise}createLoader(){this.loader=new z.Z(this.instanceNode,{class:"zoom-loader"})}createSirvImage(){this.instanceUrl&&(this.on("imageOnload",(t=>{t.stopAll(),t.data.callbackData.lens?(this.zoom.shown||this.zoom.showing)&&this.zoomIsOpened&&this.zoom.addLoadedImage(t.data):this.ready?this.imageShowPromise&&this.setImageSrc(t.data.src,t.data.srcset,t.data.dppx):(this.createImage(t.data.node,t.data.src,t.data.srcset,t.data.dppx),this.showImage().finally((()=>{this.loader&&this.loader.hide(),this.done(),this.sendContentLoadedEvent()})))})),this.on("imageOnerror",(t=>{t.stopAll(),this.loader&&this.loader.hide(),console.log("image error")})),this.image=new g.Z(this.instanceUrl,{imageSettings:this.queryParamsObj,referrerPolicy:this.referrerPolicy}),this.image.parentClass=this,this.getInfo())}getInfoSize(){return new Promise(((t,i)=>{this.getInfo().then((()=>{t({size:this.infoSize})})).catch((t=>{i({error:t,isPlaceholder:t._isplaceholder})}))}))}getSelectorImgUrl(t){return new Promise(((i,e)=>{const s=this.imageSettings();s.src&&(t.src=s.src),t.srcset=s.srcset,this.isInfoLoaded?this.waitToStart.wait((()=>{i(Object.assign(this.image.getThumbnail(t),{alt:this.dataAlt}))})):this.getInfo().then((()=>{this.waitToStart.wait((()=>{i(Object.assign(this.image.getThumbnail(t),{alt:this.dataAlt}))}))})).catch(e)}))}getThumbnailData(t){return this.image.getThumbnail(t)}createControls(){this.insideOptions.controls&&(this.controls=new h.Z(this.instanceNode),this.controls.parentClass=this,this.on("zoomControlsAction",(t=>{t.stopAll(),this.zoom&&this.makeZoom(t.data.type)})))}changeControlsState(t){this.controls&&(1===t||0===t?1===t?this.controls.disable("in"):this.controls.disable("out"):this.controls.disable())}createZoom(t){let i=null;if(!this.destroyed){let e=this.zoomContainer;i=super.createZoom(this.instanceNode,t),"magnifier"===this.option("mode")?e=v(this.instanceNode):[f.UW.OPENING,f.UW.OPENED].includes(this.fullscreenState)||"outside"===i.type&&(e=v(this.instanceNode),e=document.body),e&&(this.zoom.lensContainer=e)}return i}zoomIn(){let t=!1;return this.ready&&this.zoom&&(this.option("fullscreenOnly")&&this.fullscreenState===f.UW.CLOSED?this.sendEvent("fullscreenIn"):t=this.makeZoom("zoomin")),t}zoomOut(t){let i=!1;return this.ready&&this.zoom&&(t?this.zoomIsOpened&&(i=this.zoom.hide(!this.zoom.getZoomData())):i=this.makeZoom("zoomout")),i}get originImageUrl(){return this.ready?this.image.originUrl:null}isZoomSizeExist(){let t=!1;if(this.ready){const i=100,e=this.currentImageSize;this.getZoomImageSize().originWidth-e.realWidth>=i&&("max"===this.option("ratio")||this.option("ratio")>=f.Jk)&&(t=!0)}return t}onResize(){let t=!1;if(!this.destroyed&&![f.UW.CLOSING,f.UW.OPENING].includes(this.fullscreenState))return this.isStarted&&2===this.postInitState&&(this.calcContainerSize(),this.getImage(),this.hotspots&&(this.hotspotsTurnedOn&&[f.UW.CLOSED,f.UW.OPENING].includes(this.fullscreenState)||"hover"!==this.insideOptions.trigger&&[f.UW.OPENED,f.UW.CLOSING].includes(this.fullscreenState))&&(this.hotspots.containerSize=this.imageNode.node.getBoundingClientRect(),this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements()),this.imageNode&&(this.setImageWidthHeight(),this.imageNode.removeClass(f.cY),this.addCursor(),this.isZoomSizeExist()||this.hint&&this.hint.hide()),t=!0),this.controls&&(this.isZoomSizeExist()?this.controls.show():this.controls.hide()),this.replaceZoom(),this.zoom&&this.zoom.onResize(),t}addCursor(){(this.isZoomSizeExist()||this.isFullscreenEnabled&&this.goToFullscreen&&this.fullscreenState===f.UW.CLOSED)&&this.imageNode.addClass(f.cY)}addFullscreenClick(){this.imageNode&&this.isFullscreenEnabled&&this.goToFullscreen&&!this.fsClickHandler&&(this.fsClickHandler=t=>{this.fullscreenState===f.UW.CLOSED&&(t.stop(),this.emit("goToFullscreen"))},this.imageNode.addEvent(["btnclick","tap"],this.fsClickHandler))}removeFullscreenClick(){this.fsClickHandler&&(this.imageNode.removeEvent(["btnclick","tap"],this.fsClickHandler),this.fsClickHandler=null)}onScroll(t){this.zoomIsOpened&&t.stop(),clearTimeout(this.longTapTimer),this.scrollDebounce()}destroy(){return this.destroyed=!0,this.loader&&(this.loader.destroy(),this.loader=null),m.Z.$(window).removeEvent("scroll",this.onScrollHandler),this.onScrollHandler=null,this.lastTriggerAction&&(this.lastTriggerAction(),this.lastTriggerAction=null),this.removeFullscreenClick(),this.hint&&(this.hint.destroy(),this.hint=null),this.image&&(this.off("imageOnload"),this.off("imageOnerror"),this.image.destroy(),this.image=null),this.controls&&(this.controls.destroy(),this.controls=null,this.off("zoomControlsAction")),this.hotspots&&(this.hotspotsTurnedOn=!1,this.instanceNode.removeEvent("tap")),this.zoom&&(this.off("zooming"),this.off("zoomUp"),this.off("zoomDown")),this.instanceNode.clearEvents(),this.instanceNode.removeClass(f.i2+"-zoom-view"),this.imageNode&&(this.imageNode.remove(),this.imageNode=null),this.clonedImage&&(this.clonedImage=null),this.zoomDebounce.cancel(),this.zoomDebounce=null,this.scrollDebounce.cancel(),this.scrollDebounce=null,clearTimeout(this.longTapTimer),this.longTapTimer=null,this.hotspotsData=null,super.destroy(),!0}}const N=I;s()}catch(t){s(t)}}),1)},293:(t,i,e)=>{e.d(i,{OM:()=>h,ce:()=>n,uS:()=>a,uf:()=>d,yh:()=>r});var s=e(3315),o=e(9913);let n={mode:{type:"string",enum:["top","left","right","bottom","inner","magnifier","deep"],default:"inner"},margin:{type:"number",default:9},width:{oneOf:[{type:"number"},{type:"string",enum:["auto"]}],default:"auto"},height:{oneOf:[{type:"number"},{type:"string",enum:["auto"]}],default:"auto"},pan:{type:"boolean",default:!1},ratio:{oneOf:[{type:"number",minimum:0},{type:"string",enum:["max"]}],default:2.5},wheel:{type:"boolean",default:!0},tiles:{type:"boolean",default:!1},trigger:{oneOf:[{type:"string",enum:["hover","click","dblclick"]},{type:"boolean",enum:[!1]}],default:"click"},hint:{enable:{type:"boolean",default:!0},text:{hover:{type:"string",default:"Hover to zoom"},click:{type:"string",default:"Click to zoom"},dblclick:{type:"string",default:"Double click to zoom"}}},map:{enable:{type:"boolean",default:!1},size:{type:"number",minimum:0,maximum:50,default:25}}};o.Z.browser.touchScreen&&(n=(0,s.Z)(n,{hint:{text:{hover:{default:"Tap and hold to zoom"}}}}));const h={hint:{text:{hover:{type:"string",default:"Tap and hold to zoom"},click:{type:"string",default:"Tap to zoom"},dblclick:{type:"string",default:"Double tap to zoom"}}}},a={trigger:{oneOf:[{type:"string",enum:["hover","click","dblclick"]},{type:"boolean",enum:[!1]}],default:"hover"}},r={trigger:{oneOf:[{type:"string",enum:["hover","click","dblclick"]},{type:"boolean",enum:[!1]}],default:"dblclick"}},d={ratio:{oneOf:[{type:"number",minimum:0},{type:"string",enum:["max"]}],default:"max"}}},1398:(t,i,e)=>{e.d(i,{Z:()=>s});const s='.zoom-controls{bottom:16px;display:flex;flex-flow:row-reverse;height:28px;position:absolute;right:16px;z-index:168}.zoom-controls>button{background-color:#f5f5f5e6;color:#777}.zoom-controls>button:after,.zoom-controls>button:before{opacity:.65;transition:opacity .2s linear}.zoom-controls>button:hover:after,.zoom-controls>button:hover:before{opacity:1}.zoom-controls>button.disable:after,.zoom-controls>button.disable:before{opacity:.2}.zoom-controls>button+button{margin-right:4px}.zoom-controls .zoom-close,.zoom-controls .zoom-in,.zoom-controls .zoom-out{border:1px solid #d7d7d7;border-radius:2px;cursor:pointer;display:inline-block;height:28px;outline:0;padding:0;position:relative;width:28px}.zoom-controls .zoom-close:after,.zoom-controls .zoom-close:before,.zoom-controls .zoom-in:after,.zoom-controls .zoom-in:before,.zoom-controls .zoom-out:before{border-top:2px solid;content:"";font-size:0;left:50%;line-height:100%;position:absolute;top:50%;transform:translate3d(-50%,-50%,0);width:65%}.zoom-controls .zoom-close:after,.zoom-controls .zoom-in:after{border-left:1px solid;transform-origin:center}.zoom-controls .zoom-in:after{transform:translate3d(-50%,-50%,0) rotate(-90deg)}.zoom-controls .zoom-close{display:none!important}.zoom-controls .zoom-close:before{transform:translate3d(-50%,-50%,0) rotate(-45deg)}.zoom-controls .zoom-close:after{transform:translate3d(-50%,-50%,0) rotate(-135deg)}'},5378:(t,i,e)=>{e.d(i,{Z:()=>s});const s='.smv-zoom-view{-webkit-tap-highlight-color:transparent!important;-webkit-touch-callout:none!important;backface-visibility:hidden!important;display:inline-block;height:100%;left:0;outline:0!important;position:relative;top:0;touch-action:pan-y;-webkit-user-select:none!important;user-select:none!important;width:100%}.smv-zoom-view:after{content:"";display:inline-block;height:100%;vertical-align:middle}.smv-zoom-view .zoom-loader{bottom:0;left:0;margin:5px}.smv-zoom-view>img.smv-zoomed-in{visibility:hidden!important}.smv-zoom-view .sirv-zoom{z-index:126}.smv .smv-slides-box .smv-zoom-view>img{display:inline-block!important;height:auto;margin:0;max-height:100%;max-width:100%;padding:0;position:relative!important;vertical-align:middle;width:auto}'}},t=>{t.O(0,[121,181,179],(()=>{return i=9840,t(t.s=i);var i}));t.O()}]);"use strict";(globalThis.sirvViewerChunks=globalThis.sirvViewerChunks||[]).push([[676],{917:(t,e,i)=>{i.d(e,{Z:()=>m});var s=i(6394),o=i(4186),n=i(9913);i(932).KF.addCssModule("ProgressLoader",'.smv-progress-loader{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;pointer-events:none}.smv-progress-loader .smv-pl-circle-wrapper,.smv-progress-loader .smv-pl-indicator,.smv-progress-loader .smv-pl-indicator .smv-pl-pie,.smv-progress-loader .smv-pl-indicator .smv-pl-slice,.smv-progress-loader .smv-pl-text-wrapper,.smv-progress-loader .smv-pl-wrapper{height:100%;left:0;top:0;width:100%}.smv-progress-loader .smv-pl-text-wrapper,.smv-progress-loader .smv-pl-wrapper{display:inline-block;position:relative}.smv-progress-loader .smv-pl-wrapper{background-color:#0000008c;border-radius:50%;opacity:0;transform:scale(0);transition:transform .15s cubic-bezier(.17,.67,.57,1.47),opacity .2s linear}.smv-progress-loader .smv-pl-circle-wrapper,.smv-progress-loader .smv-pl-indicator,.smv-progress-loader .smv-pl-indicator .smv-pl-pie,.smv-progress-loader .smv-pl-indicator .smv-pl-slice{position:absolute}.smv-progress-loader .smv-pl-circle-wrapper,.smv-progress-loader .smv-pl-indicator{z-index:1}.smv-progress-loader .smv-pl-circle-wrapper{animation:sirv-pl-loader-rotate 2s linear infinite}.smv-progress-loader .smv-pl-indicator .smv-pl-pie,.smv-progress-loader .smv-pl-indicator .smv-pl-slice{stroke-width:2;fill:#0000}.smv-progress-loader .smv-pl-indicator .smv-pl-pie{stroke:#ffffff4d;z-index:1}.smv-progress-loader .smv-pl-indicator .smv-pl-slice{stroke:#fff;stroke-linecap:round;z-index:2}.smv-progress-loader .smv-pl-text-wrapper{align-items:center;display:inline-flex;font-size:12px;justify-content:center;position:relative;text-align:center;z-index:2}.smv-progress-loader .smv-pl-text-wrapper:after{content:"";display:inline-block;height:100%;vertical-align:middle}.smv-progress-loader .smv-pl-text-wrapper .smv-pl-text{color:#fff;display:inline;font-weight:700;position:relative}.smv-progress-loader .smv-pl-text-wrapper .smv-pl-text .smv-pl-text-percent{font-size:.7em}@keyframes sirv-pl-loader-rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}');const a=(t,e)=>{const i=n.Z.$(n.Z.D.node.createElementNS("http://www.w3.org/2000/svg",t));return e||(e={}),Object.entries(e).forEach((t=>i.attr(...t))),i},r=0,h=1,l=2;class d extends s.Z{constructor(t,e){super(t,e=(t=>(t||(t={}),t.width||(t.width=44),t.height||(t.height=44),t.max||(t.max=0),t))(e)),this.type="progress",this.lineSize=125,this.currentLineSize=125,this.currentPersent=0,this.currentValue=0,this.progressState=r,this.maxOpacityFlag=!1,this.maxOpacity=1,this.circles=[],this.size={width:this.options.width,height:this.options.height},this.state=o.OR.HIDDEN,this._createCircles()}addClass(){this.node.addClass(o.i2+"-progress-loader")}_createCircles(){this.p='<span class="'+o.i2+'-pl-text-percent">%</span>',this.loaderElement.addClass(o.i2+"-pl-wrapper"),this.circleWrapper=n.Z.$new("div").addClass(o.i2+"-pl-circle-wrapper");const t=this.size.width,e=t/2;this.circles.push(a("circle",{class:o.i2+"-pl-pie",r:e-2,cx:e,cy:e})),this.circles.push(a("circle",{class:o.i2+"-pl-slice",r:e-2,cx:e,cy:e})),this.svg=a("svg",{class:o.i2+"-pl-indicator",viewBox:"0 0 "+t+" "+t}),this.circles[1].node.style.strokeDasharray=this.lineSize,this.circles[1].node.style.strokeDashoffset=this.lineSize,n.Z.$(this.circles[1]).addEvent("transitionend",(t=>{t.stop()})).setCssProp("transition","stroke-dashoffset .1s linear"),n.Z.$(this.svg).append(this.circles[0]),n.Z.$(this.svg).append(this.circles[1]),this.textWrapper=n.Z.$new("div").addClass(o.i2+"-pl-text-wrapper"),this.text=n.Z.$new("span").addClass(o.i2+"-pl-text"),this.text.changeContent(this.currentPersent+this.p),this.textWrapper.append(this.text),this.circleWrapper.append(this.svg),this.loaderElement.append(this.circleWrapper),this.loaderElement.append(this.textWrapper)}append(){this.progressState!==l&&super.append()}progress(t){var e,i;return void 0===t&&(t=1),this.progressState!==l&&(this.progressState=h,this.currentValue+=t,this.currentPersent=((t,e)=>Math.round(100/(t/e)))(this.options.max,this.currentValue),this.currentLineSize=(e=this.lineSize,i=this.currentPersent,e-e/100*i),this.circles[1].node.style.strokeDashoffset=this.currentLineSize,this.text.node.innerHTML=this.currentPersent+this.p,this.currentValue===this.options.max&&(this.progressState=l,this.hide())),this.currentValue}setMaxOpacity(t){!this.maxOpacityFlag&&this.loaderElement&&(this.maxOpacity=t,this.maxOpacityFlag=!0,this.loaderElement.setCssProp("opacity",t))}isEnded(){return this.currentValue===this.options.max}isStarted(){return this.currentValue>0}finishOff(){this.currentValue=this.options.max}isShow(){return this.state===o.OR.SHOWN}show(){this.state!==o.OR.SHOWN&&(this.state=o.OR.SHOWN,this.append(),this.loaderElement.render(),this.loaderElement.removeEvent("transitionend"),this.loaderElement.addEvent("transitionend",(t=>{t.stop()})),this.loaderElement.setCss({display:"block",opacity:this.maxOpacity,transform:"scale(1)"}))}hide(t){if(this.state===o.OR.HIDDEN&&!t||!this.inDoc)return;let e=0;this.state=o.OR.HIDDEN,clearTimeout(this.timer),this.timer=setTimeout((()=>{this.loaderElement.removeEvent("transitionend"),this.loaderElement.addEvent("transitionend",(t=>{t.stop(),e+=1,e<2||(this.loaderElement.removeEvent("transitionend"),this.loaderElement.setCssProp("display","none"))})),this.loaderElement.setCss({opacity:0,transform:"scale(0)"})}),t?0:400)}getProgressState(){return this.progressState}destroy(){this.hide(!0),clearTimeout(this.timer),this.currentPersent=0,this.currentValue=0,this.progressState=r,this.state=o.OR.HIDDEN,this.loaderElement.removeEvent("transitionend"),this.loaderElement.node.innerHTML="",this.loaderElement=null,this.circleWrapper=null,this.textWrapper=null,this.circles=[],this.svg=null,this.text=null,this.inDoc=!1,super.destroy()}}const m=d},8736:(t,e,i)=>{i.d(e,{Z:()=>o});var s=i(9913);const o=t=>{if(!t)return 0;if(s.Z.isString(t)){const e=parseInt(t,10);return isNaN(e)?0:e}return t}},5163:(t,e,i)=>{i.d(e,{Z:()=>n});var s=i(9913),o=i(4186);const n=class{constructor(t,e){this.parentNode=t,this.activeNode=e,this.activatedCurtain=s.Z.$new("div").addClass("spin-activated-curtain").setCss({top:0,left:0,width:"100%",height:"100%",position:"absolute","z-index":999999999}),this.state=0}show(){this.state&&(this.activatedCurtain.setCssProp("display","block"),this.activeNode.addClass(o.i2+"-activated"))}hide(){this.state&&(this.activatedCurtain.setCssProp("display","none"),this.activeNode.removeClass(o.i2+"-activated"))}activateCurtain(){this.state||(this.state=1,this.activeNode.addClass(o.i2+"-sleeping"),this.parentNode.append(this.activatedCurtain))}deactivateCurtain(){this.state&&(this.state=0,this.activeNode.removeClass(o.i2+"-sleeping"),this.activatedCurtain.remove())}addTapEvents(t){this.activatedCurtain.addEvent("tap",(e=>{this.state&&(e.action="activate",t(e))})),this.activeNode.addEvent("tap",(e=>{this.state&&(e.action="deactivate",t(e))}))}addPinchEvent(t){this.activeNode.addEvent("pinch",t)}removePinchEvent(t){this.activeNode.removeEvent("pinch",t)}destroy(){this.state=1,this.hide(),this.deactivateCurtain(),this.removePinchEvent(),this.activeNode.removeEvent("tap"),this.activatedCurtain.remove(),this.activatedCurtain.removeEvent("tap"),this.activatedCurtain=null}}},6345:(t,e,i)=>{i.a(t,(async(t,s)=>{try{i.r(e),i.d(e,{default:()=>P});var o=i(8379),n=i(4720),a=i(1537),r=i(8786),h=i(5496),l=i(5163),d=i(758),m=i(6031),c=i(6511),u=i(6476),p=i(7504),g=i(8736),f=i(6901),w=i(6450),v=i(917),S=i(6361),I=i(9913),C=i(932),y=i(4588),x=i(4186);let t=null;try{t=(await Promise.resolve().then((()=>{if(!i.m[6683]){var t=new Error("Module '6683' is not available (weak dependency)");throw t.code="MODULE_NOT_FOUND",t}return i(6683)}))).default}catch(t){}C.KF.addCssModule("Spin",o.Z+n.Z+a.Z);const z=1,b=x.i2+"-spin",E="https://sirv.com/about-spin/?utm_source=client&utm_medium=sirvembed&utm_content=typeofembed(spin)&utm_campaign=branding",Z=t=>(t.common||(t.common={}),t.common.common||(t.common.common={}),t.common.mobile||(t.common.mobile={}),t.local||(t.local={}),t.local.common||(t.local.common=""),t.local.mobile||(t.local.mobile=""),t),M=t=>{t.stopDefaults()};class R extends d.Z{constructor(e,i){super(e,i,r.ZP),this.type=x.mA.SPIN,this.canvas=null,this.canvasContainer=I.Z.$new("div").addClass("spin-canvas-container"),this.coreNode=I.Z.$new("div").addClass("sirv-spin"),this.instanceNode.append(this.coreNode),this.ctx=null,this.isSmoothing=!1,this.smoothingTimeout=null,this.minFrameSize=0,this.minRowSize=0,this.size={width:0,height:0},this.isDragMove=!1,this.longTapTimer=!1,this.imagesMap=null,this.isInited=!1,this.loader=null,this.hint=null,this.openedImg=null,this.scale=1,this.cssId=-1,this.boxBoundaries=null,this.hotspots=null,this.animationFX=null,this.loadedImages=[],this.currentSize={width:0,height:0},this.currentImageSize={width:0,height:0},this.standardSize={width:0,height:0},this.lastImg=null,this.startLoadingTime=null,this.isOver=!1,this.isSpinActivated=!I.Z.browser.mobile,this.firstImageLoaded=!1,this.firstImagesPartLoaded=!1,this.isInfoLoaded=!1,this.customActionWas=!1,this.isAutoplayPaused=!1,this.sizeMissing=!1,this.isManualInit="load"!==this.option("initialize"),this.removeManualInitEvent=()=>{},this.reflectDirection=!1,this.instanceUrl||(this.instanceUrl=this.instanceNode.attr("data-config")||""),this.configPath="/"+this.instanceUrl.replace(this.baseUrl.replace(/(^https?:\/\/[^/]*).*/,"$1/"),"");const s=this.instanceUrl.replace(/^http(s)?:\/\//,"");this.configHash=I.Z.getHashCode(s),this.sessionId=I.Z.getHashCode(s+document.location.href.replace(/^http(s)?:\/\//,"")+Date.now()),this.layers={},this.imageSettings={},this.fullscreenStartTime=0,this.meta={},this.infoSettings={},this.autospinResumeTimer=null,this.isHidden=!1,this.sessionStartTime=0,this.animationCloud=null,this.touchDragCloud=null,this.slideDragEventStart=!1,this.dppx=null,this.startTimeForZommEvent=null,this.resizeAnimationTimer=(0,m.Z)((()=>{this.animate("inactive")}),1e3),this.keyPressHandlerForShiftButton=null,this.firstUserInteraction=!1,this.userColumn=0,this.userRow=0,this.placeholder=I.Z.$(this.instanceNode.node.querySelector("img")),this.replaceTextParamURLFromMetadata(),this.trackUnload=()=>{this.sendStats("Page Unload",Date.now()-this.sessionStartTime,{message:"Stopped"},!0)},this.disableScrollOnMobile=()=>{const t=I.Z.$(document).fullSize,e=this.instanceNode.size;Math.abs(e.height-t.height)<=50?this.instanceNode.addEvent("touchmove",M):this.instanceNode.removeEvent("touchmove",M)},this.resizeWindowTimer=null,this.windowResizeCallback=()=>{clearTimeout(this.resizeWindowTimer),this.resizeWindowTimer=setTimeout((()=>{this.disableScrollOnMobile()}),10)},this.api=Object.assign(this.api,{isInitialized:()=>this.isInitialized(),play:(t,e)=>this.play(t,e),pause:()=>this.pause(),rotate:(t,e)=>this.rotateXY(t,e),rotateX:t=>this.rotateX(t),rotateY:t=>this.rotateY(t),jump:t=>this.jump(t),jumpRows:t=>this.jumpRows(t),jumpCols:t=>this.jumpCols(t),currentFrame:()=>this.currentFrame()}),this.createHotspotsClass(t),this.getInfo().then((()=>{I.Z.browser.mobile&&this.option("tappingFirst")?this.activatedCurtain=new l.Z(this.instanceNode,this.coreNode):this.isSpinActivated=!0,this.createMap(this.quality,this.hdQuality,this.isHDQualitySet)})).catch((t=>{}))}isInitialized(){return this.isInited}rotateXY(t,e){return!(!this.ready||this.isZoomed())&&this.rotate(t,e)}rotateX(t){return!(!this.ready||this.isZoomed())&&this.rotate(t,null)}rotateY(t){return!(!this.ready||this.isZoomed())&&this.rotate(null,t)}jump(t){return this.jumpRows(t)}jumpRows(t){return!(!this.ready||this.isZoomed())&&this.jumpTo(t,"row")}jumpCols(t){return!(!this.ready||this.isZoomed())&&this.jumpTo(t,"col")}currentFrame(){return this.ready?this.getCurrentFrame():null}isActive(){return this.isSpinActivated}canFullscreen(){return!("fullscreen"in this.infoSettings)||this.infoSettings.fullscreen}setOptions(t,e,i,s){if(t.fromJSON(e),this.infoSettings){const e=Object.assign({},this.infoSettings),i=new I.Z.Options(this.defaultSchema);(0,y.Z)(i,e,I.Z.browser.touchScreen&&I.Z.browser.mobile),Object.keys(i.options).forEach((e=>{i.isset(e)&&t.set(e,i.get(e))}))}return t.fromString(i),t.fromString(s),t}makeOptions(){return this._options.options=Z(this._options.options),super.makeOptions()}sendStats(t,e,i,s){const o={account:this.config.account,useBeacon:!!s,event:t,eventTime:e,sessionId:this.sessionId,origin:this.configPath};i&&(o.data=i),this.emit("stats",{data:o})}getInfo(){return this.gettingInfoPromise||(this.gettingInfoPromise=new Promise(((t,e)=>{this.waitGettingInfo.wait((()=>{const i="sirv_spin_info_v"+z+"_"+this.configHash,s=this.instanceUrl+(/\?/.test(this.instanceUrl)?"&":"?")+"info="+i;(0,u.Z)(s,i,this.referrerPolicy).then((i=>{this.destroyed||(i.layers?(this.config=i,this.layers=this.config.layers,this.meta=this.config._file.meta||null,this.infoSettings=this.config.settings,this.hotspotsData=this.config.settings.hotspots||[],this.imageSettings=this.config.settings.images.main,this.accountInfo={account:this.config.account,branded:this.config.branded},this.sessionStartTime=Date.now(),this.sendStats("sessionStart",this.sessionStartTime),I.Z.$(window).addEvent("beforeunload",this.trackUnload),t()):i.contentType&&/image/.test(i.contentType)||i._isplaceholder?e({error:"changeSpinToImage",isPlaceholder:i._isplaceholder,account:i.account}):e({error:{status:404}}))})).catch((t=>{this.destroyed||e({error:t})}))}))}))),this.gettingInfoPromise}replaceTextParamURLFromMetadata(){this.imageSettings.text&&this.imageSettings.text.text&&(this.imageSettings.text.text=this.imageSettings.text.text.replace(/\$\{spin\.(title|description)\}/g,((t,e)=>{const i=this.meta[e]||"";return I.Z.isString(i)?i:e})),""===this.imageSettings.text.text&&delete this.imageSettings.text)}getDPPX(t){const e=t.height>t.width?"height":"width",i={[e]:t[e]};this.dppx=(0,c.Z)(w.Z.roundImageSize(i)[e],this.infoSize[e],this.upscale)}showHint(){let t=!1;return this.hint&&(this.always&&![x.UW.OPENING,x.UW.OPENED].includes(this.fullscreenState)||this.option("autospin.enable")&&this.firstUserInteraction||(t=!0,this.hint.show())),t}onStartActions(){this.ready?this.animate("slideIn"):this.isStarted&&(this.firstImageLoaded&&!this.isManualInit?this.loadPrimaryImages():this.isInView&&(!this.isInited&&this.sizeMissing&&(this.boxBoundaries=this.coreNode.rect,this.currentSize=(0,f.Z)(this.coreNode.size,this.infoSize,this.standardSize),this.getDPPX(this.currentSize),this.setImageSize(),this.setCanvasSize()),this.loadFirstImage()))}onStopActions(){this.zoomOut(),this.stopSmoothing(),this.stopAnimation(),this.deactivateSpin(),this.setUserFrame(),this.customActionWas=!1,this.hint&&this.hint.hide(),super.onStopActions()}onInView(t){t?this.isInView||(this.ready?(this.isInView=!0,this.animate("inView")):(this.preload||this.isSlideShown)&&(this.isInView=!0,this.firstImageLoaded?this.isManualInit||this.loadPrimaryImages():this.loadFirstImage())):this.isInView&&this.ready&&(this.option("autospin.enable")?this.animationCloud.pause():(this.stopAnimation(),this.setUserFrame()),this.deactivateSpin())}startFullInit(t){this.isStartedFullInit||(super.startFullInit(t),this.getInfo().then((()=>{this.instanceOptions=this.makeOptions(),this.createOptionFunction(),this.normalizeOptions(),this.getId("spin-");const t=this.option;this.imagesMap.startFullInit({swapSides:t("swapSides"),startColumn:t("column.start"),startRow:t("row.start"),reverseColumn:t("column.reverse"),reverseRow:t("row.reverse"),loopColumn:t("column.loop"),loopRow:t("row.loop"),rowSpeed:t("row.sensitivity"),columnSpeed:t("column.sensitivity"),columnIncrement:t("column.increment"),rowIncrement:t("row.increment")}),this.loadedImages=this.imagesMap.map,this.loader=new v.Z(this.coreNode,{max:this.imagesMap.imageCount,class:"spin-loader"}),this.loader.parentClass=this,this.coreNode.addEvent(["btnclick","tap"],(t=>{t.stop()})),this.on("isSingleSlide",(t=>{t.stop(),this.activatedCurtain&&(t.data.isSingle?this.activatedCurtain.deactivateCurtain():this.activatedCurtain.activateCurtain())})),this.hotspots&&(this.hotspots.Options={columnsRevers:this.option("column.reverse"),rowsRevers:this.option("row.reverse"),rows:this.imagesMap.rowCount,columns:this.imagesMap.frameCount}),this.initAnimation()})).catch((()=>{})),I.Z.browser.touchScreen&&this.on("dragEvent",(t=>{"dragstart"===t.data.type?(this.slideDragEventStart=!0,this.touchDragCloud&&this.touchDragCloud.removeEvent()):"dragend"===t.data.type&&(this.slideDragEventStart=!1,this.touchDragCloud&&this.touchDragCloud.addEvent())})))}getThumbnailData(t){return this.imagesMap.getThumbnail(t)}setUserFrame(){this.jumpTo(this.userRow,"row"),this.jumpTo(this.userColumn,"col")}getSocialButtonData(t,e){return e?this.instanceNode.attr("data-src"):super.getSocialButtonData(t)}turnOnOff(){I.Z.browser.mobile&&this.activatedCurtain&&this.activatedCurtain.addTapEvents((t=>{"activate"===t.action?(this.isSpinActivated||(t.stop(),this.activateSpin()),this.hotspots&&this.hotspots.hideActiveHotspotBox(!0)):this.isSpinActivated&&(t.stop(),this.stopSmoothing(),this.stopAnimation(),this.hotspots&&this.hotspots.isHotspotActivated()?this.hotspots.hideActiveHotspotBox(!0):this.deactivateSpin())}))}activateSpin(){this.isSpinActivated||(this.isSpinActivated=!0,I.Z.browser.mobile&&(this.stopAnimation(),this.customActionWas=!0,this.hint&&this.hint.hide(),this.activatedCurtain&&this.activatedCurtain.hide()))}deactivateSpin(){this.isSpinActivated&&(this.isSpinActivated=!1,I.Z.browser.mobile&&(this.customActionWas||this.showHint(),this.activatedCurtain&&this.activatedCurtain.show()))}createPinchEvent(){let t,e,i,s,o,n,a,r,h;const l=()=>{o=1,n=1,i=this.zoom.baseScale.x,a=1,r=i,t=1-i};super.createPinchEvent(this.coreNode),this.pinchCloud.onPinchStart=t=>{[x.UW.OPENING,x.UW.CLOSING].includes(this.fullscreenState)||(this.pinchCloud.pinch=!0,clearTimeout(this.longTapTimer),this.stopSmoothing(),this.stopAnimation(),this.touchDragCloud&&this.touchDragCloud.removeEvent(),this.hotspots&&this.hotspots.hideActiveHotspotBox(!0),this.customActionWas=!0,h=!1,this.pinchCloud.scale=t.scale,s=1,this.openedImg&&(s=this.zoom.scale.x,i===I.Z.U&&l(),s/=i),this.sendEvent("pinchStart"))},this.pinchCloud.onPinchResize=t=>{this.pinchCloud.pinch&&!this.pinchCloud.block&&this.zoom&&this.fullscreenState===x.UW.OPENED&&this.openedImg&&(this.pinchCloud.scale=t.scale,this.zoom.basePercent=t.centerPoint)},this.pinchCloud.onPinchMove=d=>{this.pinchCloud.pinch&&!this.pinchCloud.block&&(this.fullscreenState!==x.UW.OPENED&&this.isFullscreenEnabled?d.scale>=2&&(this.pinchCloud.block=!0,this.sendEvent("fullscreenIn")):this.openedImg?this.zoom&&(h?(e=d.scale,e*=i,a<e&&(a=e,r=i,n=1,o=t/(a-i)),r>e&&(r=e,a=1,o=1,n=i/r),e*=s,e=(i+(e-i)*o)*n,this.zoom.setScale(e,d.centerPoint.x,d.centerPoint.y)):(h=!0,this.zoom.basePercent=d.centerPoint),this.pinchCloud.scale=d.scale):d.scale>1.1?(this.firstUserInteraction=!0,this.openLens(d.centerPoint.x,d.centerPoint.y,!1,"zero"),l(),s=1):d.scale<.2&&(this.pinchCloud.block=!0,this.sendEvent("fullscreenOut")))},this.pinchCloud.onPinchEnd=t=>{this.pinchCloud.pinch&&(this.pinchCloud.pinch=!1,this.openedImg&&this.activateSpin(),setTimeout((()=>{this.touchDragCloud&&this.touchDragCloud.addEvent()}),16),this.sendEvent("pinchEnd")),this.openedImg&&this.pinchCloud.removeEvent(),this.pinchCloud.block=!1,this.pinchCloud.scale=0}}onStopContext(){this.stopSmoothing(),this.stopAnimation(),this.hint&&this.hint.hide()}onSecondSelectorClick(){this.zoomOut()}setGlobalEvents(){this.on("zoomUp",(t=>{const e=t.data;t.stop(),this.ready&&this.zoom&&!this.isDragMove&&this.isFullscreenActionEnded()&&(this.firstUserInteraction=!0,this.openLens(e.x,e.y))})),this.on("zoomDown",(t=>{t.stop(),this.ready&&this.zoom&&this.isZoomed()&&this.zoom.hide()}))}normalizeOptions(){this.option("autospin.enable")||this.option("autospin.duration",0),this.option("swapSides")&&["start","loop","increment","reverse","sensitivity"].forEach((t=>{const e=this.option("row."+t);this.option("row."+t,this.option("column."+t)),this.option("column."+t,e)})),["onStart","onVisible","onInactive"].forEach((t=>{const e="hint."+t+".effect";"none"===this.option(e)&&this.option(e,!1)})),I.Z.browser.mobile&&"load"!==this.option("initialize")&&this.option("initialize","tap"),this.setDefaultZoomOptions(),this.option("zoom.enable")&&"max"!==this.option("zoom.ratio")&&this.option("zoom.ratio")<x.Jk&&this.option("zoom.enable",!1)}setDefaultZoomOptions(){super.setDefaultZoomOptions(),this.defaultZoomOptions=Object.assign(this.defaultZoomOptions,{tiles:this.option("zoom.tiles"),pan:this.option("zoom.pan"),trigger:I.Z.browser.mobile?"dblclick":"click",type:"inner",height:"auto"})}loadPrimaryImages(){this.firstImagesPartLoaded||(this.firstImagesPartLoaded=!0,this.startLoadingTime=Date.now(),this.imagesMap.loadPrimaryImages({width:this.currentImageSize.width,height:this.currentImageSize.height,dppx:this.dppx}),this.loader&&this.loader.show())}isThumbnailGif(){return"gif"===this.option("thumbnail.type")}manualInit(){const t=this.option("initialize");if("load"===t)return;const e={hover:"mouseover",click:"btnclick",tap:"tap"},i=t=>{t.stop(),this.removeManualInitEvent(),this.loadPrimaryImages()};this.coreNode.addEvent(e[t],i),this.activatedCurtain&&this.activatedCurtain.activatedCurtain.addEvent(e[t],i),this.removeManualInitEvent=()=>{this.coreNode.removeEvent(e[t],i),this.activatedCurtain&&this.activatedCurtain.activatedCurtain.removeEvent(e[t],i),this.removeManualInitEvent=()=>{}}}run(t,e,i){const s=super.run(t,e,i);return s&&(I.Z.$(window).addEvent("resize",this.windowResizeCallback),this.initCanvas(),this.startGettingInfo()),s}initCanvas(){this.canvas=I.Z.$new("canvas"),this.canvas.node.getContext&&(this.ctx=this.canvas.node.getContext("2d"));const t=this.rightAlt;t&&(this.canvas.attr("role","img"),this.canvas.attr("aria-label",t),this.canvas.attr("alt",t));let e=this.infoSize.width,i=this.infoSize.height;const s=this.coreNode.size;e<s.width&&(e=s.width),i<s.height&&(i=s.height),0===s.height&&(this.cssId=I.Z.addCSS("#"+this.id+" ."+b+":before",{"padding-top":this.infoSize.height/this.infoSize.width*100+"%"},this.id+"-css"),s.height=s.width*(this.infoSize.height/this.infoSize.width)),this.currentSize=(0,f.Z)(s,this.infoSize),this.getDPPX(this.currentSize),this.standardSize.width=this.currentSize.width,this.standardSize.height=this.currentSize.height,this.setImageSize(),this.canvas.setCss({top:"0",left:"0",zIndex:10,position:"absolute"}),this.setCanvasSize(),this.canvasContainer.append(this.canvas),this.coreNode.append(this.canvasContainer),this.isInView&&(this.preload||this.isSlideShown)&&this.loadFirstImage()}loadContent(){this.loadFirstImage()}loadFirstImage(){if(!this.firstImageLoaded&&this.isInfoLoaded){if(this.currentImageSize.width&&this.currentImageSize.height||(this.currentSize=(0,f.Z)(this.coreNode.size,this.infoSize),this.getDPPX(this.currentSize),this.currentSize.width&&this.currentSize.height&&(this.setImageSize(),this.isStarted&&this.currentImageSize.width&&this.currentImageSize.height&&(this.setCanvasSize(),this.draw()))),!this.currentImageSize.width||!this.currentImageSize.height)return void(this.sizeMissing=!0);this.waitToStart.start(),this.firstImageLoaded=!0,this.imagesMap.loadFirstImage({width:this.currentImageSize.width,height:this.currentImageSize.height,dppx:this.dppx}),!this.isManualInit&&this.isInView&&this.isSlideShown&&this.loadPrimaryImages()}}get rightAlt(){let t=null;return t=!this.dataAlt&&this.meta&&this.meta.description?this.meta.description:this.dataAlt,t}createMap(t,e,i){const s=this.option;let o=null;s("autospin.enable")?o=s("autospin.type"):s("hint.onStart.enable")&&s("hint.onStart.effect")&&(o=s("hint.onStart.effect")),this.imagesMap=new h.Z({url:this.baseUrl,imageSettings:this.imageSettings,layers:this.layers,swapSides:s("swapSides"),startColumn:s("column.start"),startRow:s("row.start"),reverseColumn:s("column.reverse"),reverseRow:s("row.reverse"),loopColumn:s("column.loop"),loopRow:s("row.loop"),rowSpeed:s("row.sensitivity"),columnSpeed:s("column.sensitivity"),columnIncrement:s("column.increment"),rowIncrement:s("row.increment"),loadingSchema:o,quality:t,hdQuality:e,isHDQualitySet:i,referrerPolicy:this.referrerPolicy}),this.imagesMap.parentClass=this,this.userColumn=this.imagesMap.startColumn,this.userRow=this.imagesMap.startRow,this.on("mapFirstImageLoaded",(t=>{if(t.stopAll(),this.placeholder&&this.placeholder.setCssProp("display","none"),this.draw(),this.loader&&this.loader.progress(),this.setCanvas(),this.manualInit(),!this.isManualInit&&this.isInView&&this.isSlideShown&&this.loadPrimaryImages(),this.isInited=!0,this.sendEvent("init"),this.hotspots){const t=this.imagesMap.getCurrentImage({width:this.currentSize.width,height:this.currentSize.height});this.hotspots.setFramePosition(t.row,t.col),this.hotspots.updateAndShow(),this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements()}})),this.on("mapImagesReady",(t=>{t.stopAll(),this.imagesMap.loadSecondaryImages({width:this.currentImageSize.width,height:this.currentImageSize.height,dppx:this.dppx}),this.calcMinSizeForDrag();const e=Date.now();this.sendStats("framesPreloaded",e-this.sessionStartTime,{duration:e-this.startLoadingTime}),this.done(),this.sendContentLoadedEvent()})),this.on("mapImageLoaded",(t=>{t.stopAll(),this.loader&&(this.loadedImages[t.data.row][t.data.col]||(this.loadedImages[t.data.row][t.data.col]=!0,this.loader.progress())),t.data.error||t.data.isCurrent&&(t.data.callbackData.lens?this.zoom&&(this.zoom.shown||this.zoom.showing)&&this.openedImg&&this.openedImg.col===t.data.col&&this.openedImg.row===t.data.row&&this.zoom.addLoadedImage(t.data):this.lastImg&&(this.lastImg.width!==t.data.width||this.lastImg.height!==t.data.height)&&this.firstImageLoaded&&this.draw())})),this.on("mapAllImagesLoaded",(t=>{t.stopAll();const e=Date.now();this.sendStats("framesLoaded",e-this.sessionStartTime,{duration:e-this.startLoadingTime}),this.loader&&2!==this.loader.getProgressState()&&this.loader.hide()})),this.on("frameChange",(t=>{t.stop(),this.ready&&this.sendEvent("frameChange",{row:t.data.row,column:t.data.column})})),this.imagesMap.loadImageInfo().then((t=>{this.isInfoLoaded=!0;const e=Object.assign({},t.size);this.infoSize=e,this.hotspots&&(this.hotspots.originImageSize=this.infoSize)})).catch((t=>{this.isInfoLoaded=!0}))}getSelectorImgUrl(t){return new Promise(((e,i)=>{this.getInfo().then((()=>{this.imagesMap.loadImageInfo().then((i=>{this.waitToStart.wait((()=>{const i=this.imagesMap.setImageSettings({dppx:this.dppx});i.src&&(t.src=i.src),t.srcset=i.srcset,"gif"===this.option("thumbnail.type")&&(t.originUrl=this.baseUrl,t.imageSettings={image:24},this.option("thumbnail.gifParams")&&(t.imageSettings=(0,p.Z)(this.option("thumbnail.gifParams")))),e(Object.assign(this.imagesMap.getThumbnail(t),{alt:this.rightAlt}))}))})).catch(i)})).catch(i)}))}getInfoSize(){return new Promise(((t,e)=>{this.getInfo().then((()=>{this.imagesMap.loadImageInfo().then(t).catch(e)})).catch(e)}))}onHotspotActivate(t){this.customActionWas=!0,this.stopAnimation(),super.onHotspotActivate(t)}onHotspotDeactivate(t){super.onHotspotDeactivate(t),this.animateWithDelay()}createHint(){if(!this.option("hint.message.enable"))return;let t='<div class="spin-hint-animation"></div>';const e=["spin-hint-horizontal-animation"],i=["spin-hint-vertical-animation"];let s=[];switch(t+="<span>",t+=this.option("hint.message.text"),t+="</span>",this.imagesMap.getHintType()){case"bidir":s=e.concat(i);break;case"row":s=e;break;case"col":s=i}const o={html:t,additionalClass:s};(I.Z.browser.mobile||this.option("autospin.enable"))&&(o.autohide=0),this.hint=new S.Z(this.coreNode,o),this.isSlideShown&&this.isInView&&"infinite"===this.option("autospin.type")&&this.showHint()}get imageClassContainer(){return this.imagesMap}createZoom(){let t=null;return!this.destroyed&&this.option("zoom.enable")&&(t=super.createZoom(this.coreNode,{}),this.zoomContainer&&(this.zoom.lensContainer=this.zoomContainer),this.coreNode.addEvent(["btnclick","dbltap"],(t=>{this.isFullscreenActionEnded()&&(this.firstUserInteraction=!0,this.openLens(t.x,t.y))})),I.Z.browser.mobile),t}onZoomGetImage(t){super.onZoomGetImage(t),this.checkImage(t.data,t.data.dontLoad)?this.zoom.addLoadedImage(this.imagesMap.getCurrentImage(t.data)):this.imagesMap.loadImage(t.data)}onZoomCancelLoadingOfTiles(t){super.onZoomGetImage(t),t.data.round=!1,this.imagesMap.cancelLoadingImage(t.data)}onZoomBeforeShow(t){this.canvas.addClass(this.zoomClassName),this.hotspots&&this.hotspots.hideAll()}onZoomShown(t){this.isSlideShown?(this.startTimeForZommEvent=Date.now(),this.openedImg&&this.sendStats("zoomIn",Date.now()-this.sessionStartTime,{frame:{row:this.openedImg.row,column:this.openedImg.col},clientX:t.data.clientPosition.x,clientY:t.data.clientPosition.y,pageX:t.data.pagePosition.x,pageY:t.data.pagePosition.y}),this.sendEvent("zoomIn")):this.zoom.hide(!0)}onZoomHidden(t){if(this.openedImg){this.canvas.removeClass(this.zoomClassName);const e=Date.now();this.sendStats("zoomOut",e-this.sessionStartTime,{duration:e-this.startTimeForZommEvent,frame:{row:this.openedImg.row,column:this.openedImg.col},clientX:t.data.clientPosition.x,clientY:t.data.clientPosition.y,pageX:t.data.pagePosition.x,pageY:t.data.pagePosition.y}),this.hotspots&&(this.hotspots.showAll(),this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements())}this.sendEvent("zoomOut"),this.isSlideShown&&this.animateWithDelay(),this.startTimeForZommEvent=null,this.openedImg=null,this.pinchCloud&&this.pinchCloud.addEvent()}setLongTapEvents(){const t=I.Z.$(window).node.navigator.pointerEnabled;let e=!1,i=!1,s=["touchstart"];t?s.push("pointerdown"):s.push("MSPointerDown"),this.coreNode.addEvent(s,(t=>{this.isDragMove||this.pinchCloud.pinch||!this.isFullscreenActionEnded()||(clearTimeout(this.longTapTimer),this.longTapTimer=setTimeout((()=>{t.stop(),e=!0,this.customActionWas=!0;const i=t.pageXY;this.touchDragCloud&&this.touchDragCloud.removeEvent(),this.firstUserInteraction=!0,this.openLens(i.x,i.y,!0)}),500),i=!0)})),s=["touchmove"],t?s.push("pointermove"):s.push("MSPointerMove"),this.coreNode.addEvent(s,(t=>{if(e&&this.isFullscreenActionEnded()){t.stop();const e=t.pageXY;this.zoom.customMove(e.x,e.y)}}),1),s=["touchend"],t?s.push("pointerup"):s.push("MSPointerUp"),this.coreNode.addEvent(s,(t=>{i&&(t.stop(),i=!1,clearTimeout(this.longTapTimer)),e&&this.isFullscreenActionEnded()&&(t.stop(),e=!1,this.zoom.hide(!0),this.touchDragCloud&&this.touchDragCloud.addEvent())}))}get zoomSize(){const t=this.option("zoom.ratio"),e=this.infoSize.width,i=this.infoSize.height;let s={width:e,height:i};return"max"!==t&&(s.width=this.currentImageSize.width*t,s.height=this.currentImageSize.height*t,s=w.Z.roundImageSize(s)),s.width=Math.min(e,s.width),s.height=Math.min(i,s.height),{width:s.width,height:s.height,originWidth:e,originHeight:i}}openLens(t,e,i,s){let o=!1;if(this.isZoomSizeExist()){const n=this.zoomSize;o=!0,this.stopSmoothing(),this.stopAnimation(),this.hint&&this.hint.hide(),this.hotspots&&this.hotspots.hideActiveHotspotBox(!0);let a,r,h=!1;this.isFullscreenActionEnded()&&this.imagesMap.isLoaded({width:this.currentImageSize.width,height:this.currentImageSize.height})?(a=this.currentImageSize.width,r=this.currentImageSize.height,h=!0):(a=this.lastImg.serverWidth,r=this.lastImg.serverHeight);const l=this.imagesMap.getCurrentImage({width:a,height:r,round:h});this.openedImg=l,o=void 0===t?this.zoom.showCenter(l.node,n):this.zoom.show(l.node,n,t,e,i,s)}return o}done(){const t=this.imagesMap.rowCount,e=this.imagesMap.frameCount;this.loader&&this.loader.setMaxOpacity(.5),this.setBrowserEvents(),this.createHint(),this.createZoom(),this.setZoomEvents(),t>1&&e>1?this.coreNode.setCssProp("touch-action","none"):t>1?this.coreNode.setCssProp("touch-action","pan-x"):this.coreNode.setCssProp("touch-action","pan-y"),this.boxBoundaries=this.coreNode.rect,this.animate("start"),this.accountInfo.branded&&C.KF.showSirvAd(this.instanceNode,this.instanceNode,E,"360-degree viewer by Sirv"),this.sendStats("viewerReady",Date.now()-this.sessionStartTime,{rows:this.imagesMap.rowCount,columns:this.imagesMap.frameCount,viewerSize:{width:this.currentSize.width,height:this.currentSize.height}}),this.isZoomSizeExist()&&this.coreNode.addClass(x.cY),this.coreNode.addEvent(["dblbtnclick","dbltap"],(t=>{t.stop(),this.emit("goToFullscreen")})),this.setGlobalEvents(),this.turnOnOff(),super.done(),this.hotspots&&(this.hotspots.instanceComponentNode=this.canvasContainer,this.hotspots.containerSize=this.canvasContainer.node.getBoundingClientRect())}setBrowserEvents(){this.setDrag(this.coreNode),this.setMouseWheel(this.coreNode)}setCanvas(){this.firstImageLoaded&&this.draw(),this.isInView&&this.isSlideShown&&this.canvas.render(),this.canvas.addClass(x.i2+"-shown")}clearCanvas(){this.ctx&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}draw(t){if(this.ctx){const e=t||this.currentImageSize,i={width:e.width,height:e.height,maxSize:!0,dppx:this.dppx},s=this.imagesMap.getCurrentImage(i);if(this.lastImg=s,!s)return;this.ctx.imageSmoothingQuality="high",this.hotspots&&this.hotspots.changeHotspotsPosition(s.row,s.col),this.clearCanvas(),this.canvas.node.width=s.node.node.width||s.width,this.canvas.node.height=s.node.node.height||s.height,this.ctx.drawImage(s.node.node,0,0,this.canvas.node.width,this.canvas.node.height)}}setCanvasSize(){const t=this.currentSize;this.canvas.setCss({width:t.width,height:t.height}),this.canvasContainer.setCss({width:t.width,height:t.height}),this.canvas.width=t.width,this.canvas.height=t.height}calcMinSizeForDrag(){const t=this.currentSize;this.minFrameSize=this.imagesMap.pixelPerFrame(t.width),this.minRowSize=this.imagesMap.pixelPerRow(t.height)}smoothing(t,e,i){if(!e)return;let s=t/e;const o=()=>{s*=.97,this.smoothingTimeout=setTimeout((()=>{this.imagesMap.prepareFutureImage(i),this.imagesMap.setPreparedFutureImage(),this.draw(),s>.3&&o()}),this.minFrameSize/s)};this.isSmoothing||(this.isSmoothing=!0,o())}stopSmoothing(){this.isSmoothing&&(this.isSmoothing=!1,clearTimeout(this.smoothingTimeout),this.smoothingTimeout=null,this.imagesMap.resetPreparedImage())}animateWithDelay(t){let e="inactive";t&&(e=t),this.option("autospin.enable")?(clearTimeout(this.autospinResumeTimer),this.autospinResumeTimer=setTimeout((()=>{this.animate(e)}),this.option("autospin.resume"))):this.animate(e)}setDrag(t){const e=this.imagesMap.rowCount,i=this.imagesMap.frameCount,s=e>1&&i>1,o={x:{minSize:this.minFrameSize,count:i},y:{minSize:this.minRowSize,count:e}},n=this.option("freeDrag");let a={x:0,y:0},r={x:0,y:0},h=null;s||(h=i>1?"x":"y");let l,d=null;const c={};let u,p,g={x:{next:0,prev:0},y:{up:0,down:0}},f=!1;const w=(0,m.Z)((()=>{f=!1}),50),v=65e-5,S={x:v*i*9.8,y:v*e*9.8},I={x:["prev","next"],y:["down","up"]};!s&&n&&(i>1?I.y=I.x:I.x=I.y);const C=t=>{clearTimeout(this.longTapTimer),c[t.state](t)},y=(t,e,i,s)=>{g[t][s]+=i},z=t=>{const e=g[t];let i;const s="x"===t?["next","prev"]:["up","down"];return i=e[s[0]]>e[s[1]]?{distance:e[s[0]],direction:s[0]}:{distance:e[s[1]],direction:s[1]},i},b=(t,e,i,s,o)=>{let n;return n=e*Math.pow(i/s,2)/(2*t),n=Math.floor(n/o),n},E=(t,e,i,s)=>e*(i/s)/t,Z=(t,e)=>I[e][t>=0?0:1];c.dragstart=t=>{this.firstUserInteraction=!0,this.isDragMove=!0,this.stopSmoothing(),this.stopAnimation(),this.hint&&this.hint.hide(),this.hotspots&&this.hotspots.hideNeededElements(!0),this.userColumn=this.imagesMap.startColumn,this.userRow=this.imagesMap.startRow,this.fullscreenState===x.UW.OPENED&&t.stop(),a.x=t.x,a.y=t.y,d=t.timeStamp,p=Date.now();const e=p-this.sessionStartTime;this.sendStats("dragStart",e,{clientX:t.x-this.boxBoundaries.left,clientY:t.y-this.boxBoundaries.top,pageX:t.x,pageY:t.y}),this.sendEvent("spinStart"),this.sendEvent("rotate"),this.sendStats("rotate",e,{}),this.pinchCloud&&this.pinchCloud.removeEvent()},c.dragend=t=>{let e,m,c,v,I;const C=[];if(this.isDragMove){t.stop(),this.isDragMove=!1,w.cancel(),f&&h===l||f&&(s||n)?(e=Date.now()-p,m=z(l),c=b(S[l],i,m.distance,e,o[l].minSize),v=E(S[l],i,m.distance,e),C.push({items:c,direction:m.direction}),s&&(m=z(u),c=b(S[u],i,m.distance,e,o[u].minSize),I=E(S[u],i,m.distance,e),I>v&&(v=I),C.push({items:c,direction:m.direction})),this.animateTo(v,C),this.pinchCloud&&this.pinchCloud.addEvent()):(this.hotspots&&this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements(),this.sendEvent("rotateEnd"),this.animateWithDelay());const y=Date.now();this.sendStats("dragEnd",y-this.sessionStartTime,{duration:y-p,clientX:t.x-this.boxBoundaries.left,clientY:t.y-this.boxBoundaries.top,pageX:t.x,pageY:t.y}),a={x:0,y:0},d=null,r={x:0,y:0},g={x:{next:0,prev:0},y:{up:0,down:0}},f=!1}};const M=(t,e)=>{let i=!1;if(r[t]>o[t].minSize){i=!0;const s=Math.floor(r[t]/o[t].minSize);r[t]=r[t]%o[t].minSize,this.imagesMap.prepareFutureImage(e,s),this.imagesMap.setPreparedFutureImage()}return i};c.dragmove=t=>{const o={},m={x:0,y:0},c={x:0,y:0};let p;this.isDragMove&&(f=!0,this.customActionWas=!0,m.x=t.x-a.x,m.y=t.y-a.y,c.x=Math.abs(m.x),c.y=Math.abs(m.y),p=t.timeStamp-d,d=t.timeStamp,l=c.x>=c.y?"x":"y",u="x"===l?"y":"x",(this.fullscreenState===x.UW.OPENED||s||n||"x"===l&&i>1||"y"===l&&e>1)&&t.stop(),o[l]=Z(m[l],l),o[u]=Z(m[u],u),y(l,0,c[l],o[l]),y(u,0,c[u],o[u]),s||n?(r.x+=c.x,r.y+=c.y):h&&(h===l&&"x"===h?r.x+=c.x:h===l&&"y"===h&&(r.y+=c.y)),M(l,o[l])&&n&&(r[u]=0),s&&M(u,o[u]),this.userColumn=this.imagesMap.currentColumn,this.userRow=this.imagesMap.currentRow,a.x=t.x,a.y=t.y,this.draw(),w())};const R={eventAdded:!1,addEvent:()=>{R.eventAdded||(R.eventAdded=!0,t.addEvent(["mousedrag","touchdrag"],C))},removeEvent:()=>{R.eventAdded&&(R.eventAdded=!1,t.removeEvent(["mousedrag","touchdrag"],C))}};this.touchDragCloud=R,this.slideDragEventStart||this.touchDragCloud.addEvent()}animateTo(t,e){const i=[],s=[],o={};clearTimeout(this.autospinResumeTimer),this.animationFX&&this.animationFX.stop();for(let t=0,n=e.length;t<n;t++)s.push(e[t].direction),i.push(0),o[e[t].direction]=[0,e[t].items];this.animationFX=new I.Z.FX(I.Z.$new("div"),{duration:Math.abs(t),transition:I.Z.FX.getTransition().cubicIn,onBeforeRender:I.Z.$(((t,e)=>{for(let s=0;s<t.length;s++){const o=Math.round(e[t[s]]);i[s]!==o&&(this.imagesMap.prepareFutureImage(t[s],o-i[s]),this.imagesMap.setPreparedFutureImage(),this.userColumn=this.imagesMap.currentColumn,this.userRow=this.imagesMap.currentRow,i[s]=o)}this.draw()})).bind(this,s),onComplete:()=>{this.sendEvent("rotateEnd"),this.stopAnimation(),this.animateWithDelay(),this.hotspots&&this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements()}}).start(o)}setMouseWheel(t){let e,i;let s=0,o=!1;const n=(0,m.Z)((t=>{o=!1,t?s=0:(this.sendEvent("rotateEnd"),this.animateWithDelay())}),200),a=this.imagesMap.rowCount,r=this.imagesMap.frameCount,h=a>1&&r>1,l=this.option("freeDrag");if(this.option("wheel")){let r=!1;this.keyPressHandlerForShiftButton=t=>{16===t.oe.keyCode&&(r="keydown"===t.type)},I.Z.$(window).addEvent(["keydown","keyup"],this.keyPressHandlerForShiftButton),t.addEvent("mousescroll",(t=>{this.firstUserInteraction=!0;const d=!!t.isMouse&&r,m=Math.abs(t.deltaY)<Math.abs(t.deltaX);(m||h||l)&&(this.customActionWas=!0,t.stop(),this.animationFX&&(this.animationFX.stop(),this.animationFX=null),this.stopSmoothing(),this.stopAnimation(),this.hotspots&&this.hotspots.hideActiveHotspotBox(),o||(o=!0,this.sendEvent("spinStart"),this.sendEvent("rotate"),this.sendStats("rotate",Date.now()-this.sessionStartTime,{})),m?(e=t.deltaX,i=e>=0?"next":"prev"):(e=t.deltaY,i=a>1&&!d?e>=0?"down":"up":e>=0?"next":"prev"),t.isMouse?(e=e/Math.abs(e)*3,s+=Math.abs(e),this.animateTo(200,[{direction:i,items:s}])):(e*=.14814814814814814,s+=e,Math.abs(s)>1&&(e=parseInt(s,10),s-=e,this.imagesMap.prepareFutureImage(i,Math.abs(e)),this.imagesMap.setPreparedFutureImage(),this.draw())),n(t.isMouse))}))}}animate(t,e,i,s){const o="autoplay"===t||this.option("autospin.enable");if(!this.isInView||!this.isSlideShown||this.animationCloud.isMoving()||this.isDragMove||this.openedImg||!o&&(this.customActionWas&&!s||this.animationCloud.isInited()))return;if(this.animationCloud.isPaused())return void this.animationCloud.resume();clearTimeout(this.animationCloud.hintTimer),clearTimeout(this.autospinResumeTimer);let n=!1,a=null;if(o){if(this.isAutoplayPaused)return;a="as-"+(i||this.option("autospin.type")),"start"!==t&&(n=!0)}else{let e;switch(t){case"start":e="onStart";break;case"inView":case"slideIn":e="onVisible";break;case"inactive":n=!0,e="onInactive";break;default:a=t}if(e&&this.option("hint."+e+".enable")){const t=this.option("hint."+e+".effect");t&&(a=t)}}this.animationCloud.start({speed:e,type:a,infinite:o,delay:n,userInteraction:s},(()=>{const t=this.showHint();s&&this.sendEvent("rotateEnd"),this.hotspots&&this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements(),this.option("hint.onInactive.enable")&&(t?this.animationCloud.hintTimer=setTimeout((()=>{this.animationCloud.hintTimer=null,this.animate("inactive")}),this.hint.movingTime):this.option("hint.onInactive.effect")&&this.animate("inactive"))}))}initAnimation(){let t,e;const i=this.option("swapSides")?this.imagesMap.rowCount:this.imagesMap.frameCount,s=Math.min(150*i,3600),o=t=>{let e=s;return this.instanceOptions.isset("speed")?0!==this.option("speed")&&(e=this.option("speed")):["as-row","as-sphere","as-full","as-helix"].includes(t)&&this.instanceOptions.isset("autospin.duration")&&0!==this.option("autospin.duration")&&(e=this.option("autospin.duration")),e},n={hintTimer:null,isInited:()=>!!e,isMoving:()=>{var t;return null==(t=e)?void 0:t.isPlaying()},isPaused:()=>{var t;return null==(t=e)?void 0:t.isPaused()},start:(s,n)=>{if(e||!this.imagesMap||!s.type)return void n();const a=this.imagesMap.createAnimation(s.type,this.reflectDirection);if(!a)return void n();if(s.userInteraction&&this.imagesMap.imagesBuffer&&this.imagesMap.imagesBuffer.length){const t=this.imagesMap.imagesBuffer[this.imagesMap.imagesBuffer.length-1];this.userColumn=t.col,this.userRow=t.row}s.infinite&&this.showHint();let r=null;var h;e=new I.Z.FX(I.Z.$new("div"),{duration:Math.floor((s.speed||o(s.type))/i*a),transition:(h=s.type,"momentum"===h?[.645,.045,.355,1]:I.Z.FX.getTransition().linear),cycles:s.infinite?"infinite":1,onBeforeRender:(t,e)=>{const i=Math.floor(t.value);r!==i&&(this.imagesMap.setNextAnimationFrame(i),this.imagesMap.setPreparedNextImage(),this.draw(),r=i)},onComplete:()=>{e=null,n()}});const l={value:[0,a-1]};s.delay&&!s.infinite?t=setTimeout((()=>{e.start(l)}),this.option("inactivity")):e.start(l)},resume:()=>{e&&e.resume()},pause:()=>{e&&(e.pause(),clearTimeout(n.hintTimer),clearTimeout(t))},stop:()=>{e&&(e.stop(),e=null,this.imagesMap.clearFramesQueue(),this.imagesMap.resetPreparedImage()),clearTimeout(t)}};this.animationCloud=n}stopAnimation(){this.animationFX&&(this.animationFX.stop(),this.animationFX=null),clearTimeout(this.autospinResumeTimer),this.animationCloud&&this.animationCloud.stop()}onBeforeFullscreenIn(t){this.stopSmoothing(),this.stopAnimation(),this.zoom&&this.zoom.hide(!0),this.deactivateSpin(),this.boxBoundaries=this.coreNode.rect,super.onBeforeFullscreenIn(t),this.hotspots&&this.hotspots.hideAll(),this.isInited&&this.isInView&&this.isSlideShown&&(this.isHidden=!0,this.canvas.setCss({opacity:0,visibility:"hidden"}))}onAfterFullscreenIn(t){this.infoSize&&(!this.isInited&&this.sizeMissing&&this.isInView&&this.isSlideShown?setTimeout((()=>{this.boxBoundaries=this.coreNode.rect,this.currentSize=(0,f.Z)(this.coreNode.size,this.infoSize,this.standardSize),this.getDPPX(this.currentSize),this.setImageSize(),this.setCanvasSize(),this.loadFirstImage()})):(this.currentSize=(0,f.Z)(this.coreNode.size,this.infoSize,this.standardSize),this.getDPPX(this.currentSize),this.setImageSize(),this.setCanvasSize(),this.ready&&(this.imagesMap.isImagesExist({width:this.currentImageSize.width,height:this.currentImageSize.height})||this.imagesMap.loadImages({width:this.currentImageSize.width,height:this.currentImageSize.height,dppx:this.dppx})),this.firstImageLoaded&&this.draw(),this.isHidden&&(this.isHidden=!1,setTimeout((()=>{this.canvas.setCss({opacity:"",visibility:""})}),0)),this.hotspots&&(this.hotspots.containerSize=this.canvasContainer.node.getBoundingClientRect(),this.hotspots.showAll(),this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements()),this.ready&&(this.animate("inactive"),I.Z.browser.mobile||this.showHint(),this.fullscreenStartTime=Date.now(),this.sendStats("fullscreenOpen",Date.now()-this.sessionStartTime))),super.onAfterFullscreenIn(t))}onBeforeFullscreenOut(t){this.stopSmoothing(),this.stopAnimation(),this.zoom&&this.zoom.hide(!0),this.deactivateSpin(),this.hint&&this.always&&this.hint.hide(),super.onBeforeFullscreenOut(t),this.isInited&&this.isInView&&this.isSlideShown&&(this.isHidden=!0,this.canvas.setCss({opacity:0,visibility:"hidden"}))}onAfterFullscreenOut(t){if(this.infoSize&&(this.currentSize=(0,f.Z)(this.coreNode.size,this.infoSize),this.getDPPX(this.currentSize),this.standardSize.width=this.currentSize.width,this.standardSize.height=this.currentSize.height,this.currentImageSize.width=this.currentSize.width,this.currentImageSize.height=this.currentSize.height,this.setCanvasSize(),this.ready&&(this.imagesMap.isImagesExist({width:this.currentSize.width,height:this.currentSize.height})||this.imagesMap.loadImages({width:this.currentSize.width,height:this.currentSize.height,dppx:this.dppx})),this.firstImageLoaded&&this.draw(),this.isHidden&&(this.isHidden=!1,setTimeout((()=>{this.destroyed||this.canvas.setCss({opacity:"",visibility:""})}),0)),super.onAfterFullscreenOut(t),this.ready)){this.animate("inactive"),I.Z.browser.mobile||this.showHint();const t=Date.now();this.sendStats("fullscreenClose",t-this.sessionStartTime,{duration:t-this.fullscreenStartTime})}}play(t,e){let i=!1;return this.ready&&!this.isZoomed()&&(this.isAutoplayPaused=!1,this.stopSmoothing(),this.stopAnimation(),this.instanceOptions.checkValue("autospin.duration",t)||this.instanceOptions.checkValue("speed",t)||(t=null),this.instanceOptions.checkValue("autospin.type",e)||(e=null),this.animate("autoplay",t,e),i=!0),i}pause(){let t=!1;return this.ready&&!this.isZoomed()&&(this.isAutoplayPaused=!0,this.stopSmoothing(),this.stopAnimation(),this.animateWithDelay(),t=!0),t}rotate(t,e){let i=!1;return this.ready&&(t=(0,g.Z)(t),e=(0,g.Z)(e),0===t&&0===e||(this.stopAnimation(),this.stopSmoothing(),this.isDragMove||(this.sendEvent("rotate"),this.sendStats("rotate",Date.now()-this.sessionStartTime,{}),this.animate({cols:t,rows:e},I.Z.U,I.Z.U,!0),i=!0))),i}jumpTo(t,e){let i=!1,s=null;return this.ready&&(I.Z.isString(t)&&(t=t.trim(),s=/^-/.test(t)?"prev":"next"),t=parseInt(t,10),isNaN(t)||(i=this.imagesMap.jump(e,t,s),i&&this.firstImageLoaded&&(this.sendEvent("rotate"),this.sendStats("rotate",Date.now()-this.sessionStartTime,{}),this.draw()))),i}zoomIn(){return!(!this.ready||!this.zoom||this.isDragMove||!this.isFullscreenActionEnded())&&this.openLens()}zoomOut(){return!(!this.ready||!this.zoom)&&this.zoom.hide()}getCurrentFrame(){if(this.ready){const t=this.imagesMap.getCurrentImage({width:this.currentSize.width,height:this.currentSize.height});return{row:t.row+1,column:t.col+1}}return!1}get originImageUrl(){return this.ready?this.imagesMap.originImageUrl:null}setCallback(t,e){return!!this.ready&&(this.option(t,e),!0)}setImageSize(){this.currentImageSize.width=this.currentSize.width,this.currentImageSize.height=this.currentSize.height}isZoomSizeExist(){let t=!1;if(this.option("zoom.enable")){const e=this.currentImageSize;this.zoomSize.originWidth-e.width>=100&&(t=!0)}return t}get orientation(){return this.imagesMap.getHintType()}onResize(){return!(this.fullscreenState===x.UW.OPENING||!this.isStarted)&&(this.stopSmoothing(),this.option("autospin.enable")?this.animationCloud.pause():this.stopAnimation(),this.boxBoundaries=this.coreNode.rect,this.currentSize=(0,f.Z)(I.Z.$(this.coreNode.node.parentNode).size,this.infoSize,this.standardSize),this.getDPPX(this.currentSize),this.standardSize.width=this.currentSize.width,this.standardSize.height=this.currentSize.height,this.setImageSize(),this.setCanvasSize(),this.calcMinSizeForDrag(),this.isZoomSizeExist()?this.coreNode.addClass(x.cY):this.coreNode.removeClass(x.cY),this.zoom&&this.zoom.onResize(),this.imagesMap.isImagesExist({width:this.currentSize.width,height:this.currentSize.height})||this.imagesMap.loadImages({width:this.currentSize.width,height:this.currentSize.height,dppx:this.dppx}),this.firstImageLoaded&&this.draw(),this.ready&&this.hotspots&&(this.hotspots.containerSize=this.canvasContainer.node.getBoundingClientRect(),this.hotspots.updateAndShow()),this.resizeAnimationTimer(),!0)}getContainerForBoundengClientRect(){return this.canvasContainer}destroy(){return this.instanceNode.removeEvent("touchmove",M),I.Z.$(window).removeEvent("resize",this.windowResizeCallback),clearTimeout(this.resizeWindowTimer),this.isInited&&this.sendStats("sessionEnd",Date.now()-this.sessionStartTime,{message:"Stopped"}),this.coreNode.removeEvent(["btnclick","tap"]),this.coreNode.del("instance"),this.resizeAnimationTimer.cancel(),this.resizeAnimationTimer=null,this.touchDragCloud&&(this.touchDragCloud.removeEvent(),this.touchDragCloud=null),this.placeholder&&this.placeholder.setCssProp("display",""),this.keyPressHandlerForShiftButton&&(I.Z.$(window).removeEvent(["keydown","keyup"],this.keyPressHandlerForShiftButton),this.keyPressHandlerForShiftButton=null),this.cssId>-1&&I.Z.removeCSS(this.id+"-css",this.cssId),this.cssId=-1,this.removeManualInitEvent(),this.activatedCurtain&&this.activatedCurtain.destroy(),this.stopSmoothing(),this.stopAnimation(),this.hint&&(this.hint.destroy(),this.hint=null),this.coreNode.removeEvent(["mousedrag","touchdrag","pinch"]),this.loader&&(this.loader.destroy(),this.loader=null),this.imagesMap&&(this.imagesMap.destroy(),this.imagesMap=null,this.off("mapFirstImageLoaded"),this.off("mapImagesReady"),this.off("mapImageLoaded"),this.off("mapAllImagesLoaded")),this.clearCanvas(),this.canvas&&(this.canvas.removeEvent("transform"),this.canvas.removeClass(this.zoomClassName),this.canvas.remove()),this.canvasContainer.removeEvent("transform"),this.canvasContainer.removeEvent("mouseover"),this.canvasContainer.removeEvent("mouseout"),this.canvasContainer.remove(),this.canvasContainer=null,this.ctx=null,this.canvas=null,this.loadedImages=[],this.off("isSingleSlide"),this.off("zoomUp"),this.off("zoomDown"),this.off("frameChange"),this.coreNode.remove(),this.infoSize=null,this.startLoadingTime=null,this.isInited=!1,this.openedImg=null,this.coreNode=null,this.firstUserInteraction=!1,this.animationCloud&&(clearTimeout(this.animationCloud.hintTimer),this.animationCloud=null),this.lastImg=null,this.hotspotsData=null,super.destroy(),!0}}const P=R;s()}catch(t){s(t)}}),1)},6901:(t,e,i)=>{i.d(e,{Z:()=>s});const s=(t,e,i)=>{let{width:s,height:o}=e;return s>t.width&&(o=Math.trunc(t.width*(o/s)),s=t.width),o>t.height&&(s=Math.trunc(t.height*(s/o)),o=t.height),!i&&e.width<s&&(s=e.width,o=e.height),{width:s,height:o}}},4588:(t,e,i)=>{i.d(e,{Z:()=>o});const s={startRow:"row.start",loopRow:"row.loop",startColumn:"column.start",loopColumn:"column.loop",swapRowsColumns:"swapSides",spinOnAnyDrag:"freeDrag",hint:"hint.message.enable"},o=(t,e,i)=>{if(delete e.images,delete e.hotspots,"speed"in e&&e.speed<101&&delete e.speed,t.fromJSON(e),Object.keys(s).forEach((i=>{i in e&&!t.isset(s[i])&&t.set(s[i],e[i])})),"reverseRotation"in e){const i=["row","column"];i.includes(e.reverseRotation)&&!t.isset(e.reverseRotation+".reverse")?t.set(e.reverseRotation+".reverse",!0):"both"===e.reverseRotation&&i.forEach((e=>{t.isset(e+".reverse")||t.set(e+".reverse",!0)}))}"zoom"in e&&(t.isset("zoom.enable")||0!==e.zoom||t.set("zoom.enable",!1),!t.isset("zoom.ratio")&&e.zoom>0&&t.set("zoom.ratio",e.zoom)),t.isset("speed")||"autospinSpeed"in e&&t.set("speed",e.autospinSpeed),t.isset("autospin.enable")||"infinite"!==(null==e?void 0:e.autospin)||t.set("autospin.enable",!0);const o=i?"mobileHintTsext":"hintText";o in e&&!t.isset("hint.message.text")&&t.set("hint.message.text",e[o]),"hint"in e&&!1===e.hint&&(t.isset("hint.onVisible.enable")||t.set("hint.onVisible.enable",!1),t.isset("hint.onInactive.enable")||t.set("hint.onInactive.enable",!1))}},5496:(t,e,i)=>{i.d(e,{Z:()=>T});var s=i(6450);class o extends s.Z{constructor(t,e,i,s){super(t,e),this.col=i,this.row=s}_createImageData(t,e){const i=super._createImageData(t,e);return i.col=this.col,i.row=this.row,i}getThumbnail(t){const e=super.getThumbnail(t);return e.col=this.col,e.row=this.row,e}}const n=o;var a=i(3315),r=i(2681),h=i(441);const l=(t,e,i,s,o)=>{const n=[];let a=!1,h=t;for(;h!==e||!a&&o;)a=!0,i?h+=1:h-=1,h=(0,r.Z)(h,s),n.push(h);return n},d=(t,e)=>{const i=null===e.row?"row":"col";return t.map((t=>({col:e.column,row:e.row,[i]:t})))},m=(t,e,i,s)=>{let o=[t],n=!0;return[t+e,t-e,t].forEach((t=>{const e=s?(0,r.Z)(t,i):(0,h.Z)(t,0,i-1);o=o.concat(l(o[o.length-1],e,n,i,s)),n=!n})),o},c=(t,e,i)=>i?l(t,(0,r.Z)(t+e,e),!0,e,i):m(t,e,e,!1),u=t=>{const e=(0,a.Z)({degree:30,swapSides:!1,accelerate:!1,isBackward:!1,firstLineOnly:!1,row:{length:1,loop:!1,current:1,jumpCount:0},column:{length:36,loop:!0,current:1,jumpCount:0},firstSide:"column",secondSide:"row"},t||{});return["row","column"].forEach((t=>{e[t].current>e[t].length-1&&(e[t].current=0)})),e.swapSides&&(e.secondSide=e.firstSide,e.firstSide="row"),e},p={lib:{getRightIndex:(t,e,i)=>i?(0,r.Z)(t,e):(0,h.Z)(t,0,e-1)},twitch:t=>{const e=u(t),i={column:0,row:0};let s=[];return[e.firstSide,e.secondSide].forEach((t=>{const o=t===e.firstSide?e.secondSide:e.firstSide;if(e[t].length>1&&(i[t]=Math.floor(e[t].length/360*e.degree)||1),i[t]){const n={[t]:null,[o]:e[o].current};s=s.concat(d(m(e[t].current,i[t],e[t].length,e[t].loop),n))}})),s},sphere:t=>{const e=u(t);let i=[];return(e.firstLineOnly?[e.firstSide]:[e.firstSide,e.secondSide]).forEach((t=>{if(1===e[t].length)return;const s=t===e.firstSide?e.secondSide:e.firstSide,o={[t]:null,[s]:e[s].current},n=d(c(e[t].current,e[t].length,e[t].loop),o);e.isBackward&&n.reverse(),i=i.concat(n)})),t.additionalFrame&&i.push(i[0]),i},intro:t=>{const e=u(t),i={swapSides:e.swapSides,firstLineOnly:!0,isBackward:e.isBackward,row:(0,a.Z)({},e.row),column:(0,a.Z)({},e.column)};return[].concat(p.sphere(i),p.twitch(i))},full:t=>{const e=u(t),i=e[e.secondSide].length,s=i>1?c(e[e.secondSide].current,i,e[e.secondSide].loop):[e[e.secondSide].current],o=(0,a.Z)({},e[e.firstSide]),n=(0,a.Z)({},e[e.secondSide]),r=s.reduce(((t,i)=>{n.current=i;const s={swapSides:e.swapSides,firstLineOnly:!0,[e.firstSide]:o,[e.secondSide]:n};return t.concat(p.sphere(s))}),[]);return e.isBackward&&r.reverse(),t.additionalFrame&&r.push(r[0]),r},custom:t=>{const e=u(t),i={x:e.column.current,y:e.row.current},s={x:e.column.current+e.column.jumpCount,y:e.row.current+e.row.jumpCount},o=((t,e)=>{const i={x:[],y:[]},s=(t,e,s,o)=>{const n=s-t;let a,r,h=o-e,l=1,d=e;for(h<0&&(l=-1,h=-h),r=2*h-n,a=t;a<=s;a++)i.x.push(a),i.y.push(d),r>0&&(d+=l,r-=2*n),r+=2*h},o=(t,e,s,o)=>{let n=s-t;const a=o-e;let r,h,l=1,d=t;for(n<0&&(l=-1,n=-n),h=2*n-a,d=t,r=e;r<=o;r++)i.x.push(d),i.y.push(r),h>0&&(d+=l,h-=2*a),h+=2*n};return Math.abs(e.y-t.y)<Math.abs(e.x-t.x)?t.x>e.x?s(e.x,e.y,t.x,t.y):s(t.x,t.y,e.x,e.y):t.y>e.y?o(e.x,e.y,t.x,t.y):o(t.x,t.y,e.x,e.y),i})(i,s);return(t=>{const e=[];t.x[0]!==i.x&&t.x.reverse(),t.y[0]!==i.y&&t.y.reverse();for(let i=0,s=t.x.length;i<s;i++)e.push({col:t.x[i],row:t.y[i]});return e})(o).map((t=>({col:p.lib.getRightIndex(t.col,e.column.length,e.column.loop),row:p.lib.getRightIndex(t.row,e.row.length,e.row.loop)})))}},g=p,f={getStep:t=>{let e=1;return t>24&&(e=Math.floor(t/24),e>3&&(e=3)),e},getIndexes:t=>{const e=[],i=[];let s=!0,o=f.getStep(t);do{const n=[];for(let e=0;e<t;e+=o)i[e]||(n.push(e),i[e]=1);1===o&&(s=!1),e.push(n),o=Math.ceil(o/2)}while(o>=1&&s);return e},getRightIndexes:(t,e,i,s)=>{t.forEach((t=>{const o=t+e,n=(0,r.Z)(o,i);(o<i||n<e)&&s(n)}))},getOptions:t=>{const e=(0,a.Z)({},t);return e.imageSchema=e.images.map((t=>t.map((t=>0)))),e.rowLength=e.images.length,e.colLength=e.images[e.startRow].length,e},all:(t,e,i)=>{const s=[];for(let o=0,n=t.length;o<n;o++)for(let n=0,a=t[o].length;n<a;n++)e[o][n]||(s.push([o,n]),e[o][n]=i+1);return s},getSideOpt:t=>{const e={length:t.colLength,start:t.startCol,otherLength:t.rowLength,otherStart:t.startRow};if(t.swapSides){let t=e.length;e.length=e.otherLength,e.otherLength=t,t=e.start,e.start=e.otherStart,e.otherStart=t}return e}},w={_:f,all:t=>{const e=[],i=f.getOptions(t),s=f.getIndexes(i.colLength),o=[];return i.images.forEach(((t,e)=>{const n=t.length;f.getRightIndexes(s[0],i.startCol,n,(t=>{const s=(0,r.Z)(e+i.startRow,i.rowLength);o.push([s,t]),i.imageSchema[s][t]=1}))})),e.push(o),e.push([].concat(f.all(i.images,i.imageSchema,1))),e},fastLine:t=>{const e=[],i=f.getOptions(t),s=f.getSideOpt(i),o=[];for(let t=0,e=s.length;t<e;t++){const e=(0,r.Z)(t+s.start,s.length);i.swapSides?(o.push([e,i.startCol]),i.imageSchema[e][i.startCol]=1):(o.push([i.startRow,e]),i.imageSchema[i.startRow][e]=1)}return e.push(o),e.push([].concat(f.all(i.images,i.imageSchema,1))),e},line:t=>{const e=[],i=f.getOptions(t),s=f.getSideOpt(i),o=f.getIndexes(s.length);let n=[],a=1;for(f.getRightIndexes(o[0],s.start,s.length,(t=>{i.swapSides?(n.push([t,i.startCol]),i.imageSchema[t][i.startCol]=1):(n.push([i.startRow,t]),i.imageSchema[i.startRow][t]=1)})),e.push(n),n=[];a<o.length;)o[a]&&f.getRightIndexes(o[a],s.start,s.length,(t=>{i.swapSides?(n.push([t,i.startCol]),i.imageSchema[t][i.startCol]=a+1):(n.push([i.startRow,t]),i.imageSchema[i.startRow][t]=a+1)})),a+=1;return e.push(n.concat(f.all(i.images,i.imageSchema,a))),e},sphere:t=>{const e=[],i=f.getOptions(t),s=f.getSideOpt(i),o=f.getIndexes(s.length),n=f.getIndexes(s.otherLength),a=Math.max(o.length,n.length);let r=[],h=1;for(f.getRightIndexes(o[0],s.start,s.length,(t=>{i.swapSides?(r.push([t,i.startCol]),i.imageSchema[t][i.startCol]=1):(r.push([i.startRow,t]),i.imageSchema[i.startRow][t]=1)})),f.getRightIndexes(n[0],s.otherStart,s.otherLength,(t=>{i.swapSides?i.imageSchema[i.startRow][t]||(r.push([i.startRow,t]),i.imageSchema[i.startRow][t]=1):i.imageSchema[t][i.startCol]||(r.push([t,i.startCol]),i.imageSchema[t][i.startCol]=1)})),e.push(r),r=[];h<a;)o[h]&&f.getRightIndexes(o[h],s.start,s.length,(t=>{i.swapSides?(r.push([t,i.startCol]),i.imageSchema[t][i.startCol]=h+1):(r.push([i.startRow,t]),i.imageSchema[i.startRow][t]=h+1)})),n[h]&&f.getRightIndexes(n[h],s.otherStart,s.otherLength,(t=>{i.swapSides?(r.push([i.startRow,t]),i.imageSchema[i.startRow][t]=h+1):(r.push([t,i.startCol]),i.imageSchema[t][i.startCol]=h+1)})),h+=1;return e.push(r.concat(f.all(i.images,i.imageSchema,h))),e}};var v=i(3089),S=i(9910);const I=(t,e,i,s,o)=>{let n;return i?"next"===i?(n=t+e,o?n=(0,r.Z)(n,s):n>=s&&(n=s-1)):(n=t-e,o?n=(0,r.Z)(n,s):n<0&&(n=0)):(n=e,o?n=(0,r.Z)(n,s):(n>=s&&(n=s-1),n<0&&(n=0))),n},C=(t,e)=>{let i=t;return e&&(i={},Object.entries(t).forEach((t=>{let[e,s]=t;Object.entries(s).forEach((t=>{let[s,o]=t;i[s]||(i[s]={}),i[s][e]=o}))}))),i};var y=i(9913);const x=(t,e)=>{let i=[],s=e-t.length;if(s>0){const e=t.length;for(let o=0;o<e-1;o++){const e=parseInt(t[o],10);let n=parseInt(t[o+1],10)-e-1;if(i.push(t[o]),n>0&&s>0)for(n>s&&(n=s);n>0;)n-=1,s-=1,i.push(t[o])}if(i.push(t[e-1]),s>0){let e=parseInt(t[0],10)-1;if(e>0)for(;e>0;)e-=1,s-=1,i.unshift(t[0]);if(s>0)for(;s>0;)s-=1,i.push(t[t.length-1])}}else i=JSON.parse(JSON.stringify(t));return i},z=(t,e)=>{const i={},s=x(Object.keys(t),e);return y.Z.$(s).forEach(((e,s)=>{i[s+1+""]=t[e]})),i},b=t=>{const e={},i=(t=>Math.max(0,...Object.values(t).map((t=>Object.keys(t).length))))(t);return Object.values(t).forEach(((t,s)=>{e[s+1+""]=z(t,i)})),e};var E=i(932);const Z=(t,e)=>t+"."+e,M=(t,e)=>t%e==0,R=(t,e,i)=>{let s;return s=/^\//.test(i)?t+i:e+"/"+i,s};class P extends v.Z{constructor(t){super(),this.options=t,this._startColumn=0,this._startRow=0,this._currentColumn=0,this._currentRow=0,this.nextColumn=0,this.nextRow=0,this.futureColumn=0,this.futureRow=0,this.imgMap=[],this.destroyed=!1,this.images=[],this.isStartedFullInit=!1,this.imageInfoPromise=null,this.loadingMap={queue:[]},this.url=this.options.url.replace(/(?:^https?:)?(.*)\/[^/]*$/,"$1"),this.absoluteURL=this.options.url.replace(/(^https?:\/\/[^/]*).*/,"$1"),this.infoImg=null,this.imageInfoId="img-"+(0,S.Z)(),this.addEvents()}createImageInfo(){const t=()=>{const t=Object.keys(this.options.layers)[0],e=Object.keys(this.options.layers[t])[0];return this.options.layers[t][e]};return this.infoImg||(this.infoImg=new n((0,E.kB)(R(this.absoluteURL,this.url,t())),{imageSettings:this.options.imageSettings,infoId:this.imageInfoId,round:!0,referrerPolicy:this.options.referrerPolicy},null,null),this.infoImg.parentClass=this),this.infoImg}loadImageInfo(){return this.imageInfoPromise||(this.imageInfoPromise=new Promise(((t,e)=>{this.createImageInfo(),this.infoImg.loadInfo().then((e=>{this.isStartedFullInit&&this.createQueue(),t({size:this.infoImg.originSize})})).catch((t=>{e({error:t})}))}))),this.imageInfoPromise}startFullInit(t){this.isStartedFullInit||(this.isStartedFullInit=!0,this.options=Object.assign(this.options,t),this.options.layers=b(this.options.layers),this.options.layers=C(this.options.layers,this.options.swapSides),this.imgMap=Object.values(this.options.layers).filter(((t,e)=>M(e,this.options.rowIncrement))).map((t=>Object.values(t).filter(((t,e)=>M(e,this.options.columnIncrement))).map((t=>(0,E.kB)(R(this.absoluteURL,this.url,t)))))),this.options.reverseColumn&&(this.imgMap=this.imgMap.map((t=>t.reverse()))),this.options.reverseRow&&this.imgMap.reverse(),this.createImages(this.imgMap),this.setFirstImage(),this.imageInfoPromise&&this.infoImg.loadInfo().then((t=>{this.loadingMap.queue.length||this.createQueue()})).catch((t=>{})))}setImageSettings(t){return void 0===t&&(t={}),t.imageSettings||(t.imageSettings={}),t.imageSettings.scale||(t.imageSettings.scale={}),t.callbackData||(t.callbackData={}),t.imageSettings.scale.option="fill",t.srcset||(t.srcset={}),null!==this.options.quality&&(t.src||(t.src={}),t.src.quality=this.options.quality),t.dppx>=1.5?t.srcset.quality=this.options.hdQuality:null!==this.options.quality&&(t.srcset.quality=this.options.quality),t}getImage(t,e){return null==t?this.images[this._currentRow][this._currentColumn]:this.images[t][e]}getThumbnail(t){return this.getImage(this._startRow,this._startColumn).getThumbnail(t)}get map(){return this.imgMap.map((t=>t.map((t=>!1))))}addEvents(){let t=!1,e=!1,i=!1;const s=s=>{t&&e&&i||s.lens||(t||s.col!==this._currentColumn||s.row!==this._currentRow||(t=!0,this.emit("mapFirstImageLoaded",{data:s})),!e&&this.loadingMap.checkImageQueue(s.row,s.col,0)&&(e=!0,this.emit("mapImagesReady")),this.destroyed||i||!this.loadingMap.checkImageQueue(s.row,s.col,1)||(i=!0),t&&e&&i&&this.emit("mapAllImagesLoaded"))};this.on("imageOnload",(t=>{t.stopAll();const e=Object.assign({isCurrent:this.isCurrent(t.data)},t.data);this.emit("mapImageLoaded",{data:e}),s(e)})),this.on("imageOnerror",(t=>{t.stopAll(),t.data.error=!0,this.emit("mapImageLoaded",{data:t.data}),s(t.data)}))}getHintType(){const t=this.rowCount,e=this.frameCount;return t>1&&e>1?"bidir":t>1?"col":"row"}isLoaded(t){const e=this.getImage();return t=this.setImageSettings(t),e.isLoaded(t)}isExist(t){const e=this.getImage();return t=this.setImageSettings(t),e.isExist(t)}isCurrent(t){return t.row===this._currentRow&&t.col===this._currentColumn}get imageCount(){return this.frameCount*this.rowCount}get frameCount(){return this.images[0].length}get rowCount(){return this.images.length}pixelPerFrame(t){let e=t;const i=this.frameCount;return i>1?(this.options.loopColumn||(e/=2),e/=i):e/=this.rowCount,e/=Math.pow(this.options.columnSpeed/50,2),e}pixelPerRow(t){let e=t;const i=this.rowCount;return i>1?(this.options.loopRow||(e/=2),e/=i):e/=this.frameCount,e/=Math.pow(this.options.rowSpeed/50,2),e}createImages(t){for(let e=0,i=t.length;e<i;e++){const i=[];for(let s=0,o=t[e].length;s<o;s++){const o=new n((0,E.$n)(t[e][s]),{imageSettings:this.options.imageSettings,infoId:this.imageInfoId,round:!0,referrerPolicy:this.options.referrerPolicy},s,e);o.parentClass=this,i.push(o)}this.images.push(i)}}setFirstImage(){let t=this.options.startRow,e=this.options.startColumn;t>this.images.length&&(t=1),e>this.images[0].length&&(e=1),this.options.reverseRow&&(t=this.images.length+1-t),this.options.reverseColumn&&(e=this.images[0].length+1-e),this._currentRow=t-1,this._currentColumn=e-1,this._currentRow>this.images.length-1&&(this._currentRow=0),this._currentColumn>this.images[0].length-1&&(this._currentColumn=0),this._startColumn=this.futureColumn=this.nextColumn=this._currentColumn,this._startRow=this.futureRow=this.nextRow=this._currentRow}loadImage(t,e,i){const s=this.getImage(e,i);t=this.setImageSettings(t),s.getImage(t)}loadFirstImage(t){if(!this.loadingMap.queue.length)return;const e=this.loadingMap.queue[0].shift();this.loadImage(t,e[0],e[1])}loadPrimaryImages(t){this.loadingMap.queue.length&&this.loadingMap.queue[0].forEach((e=>{this.loadImage(t,e[0],e[1])}))}loadSecondaryImages(t){!this.destroyed&&this.loadingMap.queue.length&&(t=this.setImageSettings(t),this.loadingMap.queue[1].forEach((e=>{this.loadImage(t,e[0],e[1])})))}loadImages(t){this.destroyed||(t=this.setImageSettings(t),this.options.swapSides?this.images.forEach((e=>{const i=e[this._currentColumn];i.isExist(t)?i.sendLoad(t):i.getImage(t)})):this.images.forEach((e=>{e.forEach((e=>{e.isExist(t)?e.sendLoad(t):e.getImage(t)}))})))}isImagesExist(t){return t=this.setImageSettings(t),!this.images.some((e=>e.some((e=>!e.isExist(t)))))}createQueue(){let t;switch(this.options.loadingSchema){case"momentum":t="fastLine";break;case"full":default:t="all";break;case"row":case"spin":t="line";break;case"sphere":case"intro":case"twitch":t="sphere"}this.loadingMap.queue=w[t]({swapSides:this.options.swapSides,images:this.images,startRow:this._currentRow,startCol:this._currentColumn}),this.loadingMap.checkImageQueue=(()=>{const t=t=>this.loadingMap.queue[t].map((t=>Z(t[0],t[1]))),e=t(0),i=t(1);return e.shift(),(t,s,o)=>{const n=o?i:e;if(n.length){const e=n.indexOf(Z(t,s));e>=0&&n.splice(e,1)}return 0===n.length}})()}prepareFutureImage(t,e){let i;void 0===e&&(e=1),["next","prev"].includes(t)?(i=this.futureColumn+("next"===t?1:-1)*e,this.futureColumn=g.lib.getRightIndex(i,this.frameCount,this.options.loopColumn)):(i=this.futureRow+("down"===t?1:-1)*e,this.futureRow=g.lib.getRightIndex(i,this.rowCount,this.options.loopRow))}setPreparedNextImage(){this.futureColumn=this._currentColumn=this.nextColumn,this.futureRow=this._currentRow=this.nextRow,this.emit("frameChange",{data:{column:this._currentColumn,row:this._currentRow}})}setPreparedFutureImage(){const t=this.getImage(this.futureRow,this.futureColumn);t&&t.ready&&(this._currentColumn=this.futureColumn,this._currentRow=this.futureRow,this.emit("frameChange",{data:{column:this._currentColumn,row:this._currentRow}}))}resetPreparedImage(){this.futureColumn=this.nextColumn=this._currentColumn,this.futureRow=this.nextRow=this._currentRow}getCurrentImage(t){return t=this.setImageSettings(t),this.getImage(this._currentRow,this._currentColumn).getImage(t)}get originImageUrl(){return this.getImage(this._currentRow,this._currentColumn).originUrl}jump(t,e,i){let s,o;const n=(t,e)=>!!this.getImage(t,e).ready&&(this.nextRow=t,this.nextColumn=o,this.setPreparedNextImage(),!0);switch(t){case"row":return s=I(this._currentRow,e,i,this.rowCount,this.options.loopRow),o=this._currentColumn,n(s,o);case"col":return o=I(this._currentColumn,e,i,this.frameCount,this.options.loopColumn),s=this._currentRow,n(s,o)}return!1}setNextAnimationFrame(t){const e=this._imagesBuffer[t],i=this.getImage(e.row,e.col);i&&i.ready&&(this.nextColumn=e.col,this.nextRow=e.row)}getNextBufferIndex(t){const e=t=>{const e=this.getImage(t.row,t.col);return e&&e.ready};let i,s=0;const o=this._imagesBuffer.length;do{s+=1,(t+=1)>=o?s=0:i=this._imagesBuffer[t]}while(s>0&&(!i||!e(i)));return s}createAnimation(t,e){let i=!1,s=0,o=0,n=!1;switch(t){case"as-row":t="sphere",i=!0,n=!0;break;case"as-sphere":case"as-helix":t="sphere",n=!0;break;case"as-full":t="full",n=!0;break;case"intro":t="intro",i=!0;break;case"twitch":t="twitch";break;case"spin":case"momentum":t="sphere",i=!0;break;case"sphere":t="sphere";break;default:s=t.cols,o=t.rows,t="custom"}return this._imagesBuffer=g[t]({firstLineOnly:i,swapSides:this.options.swapSides,isBackward:e,count:t,additionalFrame:n,row:{length:this.rowCount,loop:this.options.loopRow,current:this._currentRow,jumpCount:o},column:{length:this.frameCount,loop:this.options.loopColumn,current:this._currentColumn,jumpCount:s}}),this._imagesBuffer.length}clearFramesQueue(){this._imagesBuffer=[]}cancelLoadingImage(t){const e=this.getImage();e&&(t=this.setImageSettings(t),e.cancelLoadingImage(t))}get startRow(){return this._startRow}get startColumn(){return this._startColumn}get currentRow(){return this._currentRow}get currentColumn(){return this._currentColumn}get imagesBuffer(){return this._imagesBuffer}destroy(t){this.destroyed=!0,this.resetPreparedImage(),this.clearFramesQueue(),this.images.forEach((t=>{t.forEach((t=>{t.destroy()}))})),this.off("imageOnload"),this.off("imageOnerror"),this.loadingMap={queue:[]},this.imgMap=[],this.images=[],this._currentColumn=0,this._currentRow=0,super.destroy()}}const T=P},8786:(t,e,i)=>{i.d(e,{ZP:()=>s});const s={swapSides:{type:"boolean",default:!1},wheel:{type:"boolean",default:!1},initialize:{type:"string",enum:["load","hover","click","tap"],default:"load"},freeDrag:{type:"boolean",default:!1},tappingFirst:{type:"boolean",default:!1},speed:{type:"number",minimum:0,default:0},thumbnail:{type:{type:"string",enum:["image","gif"],default:"image"},gifParams:{type:"string",default:""}},zoom:{enable:{type:"boolean",default:!0},ratio:{oneOf:[{type:"number",minimum:0},{type:"string",enum:["max"]}],default:2.5},tiles:{type:"boolean",default:!1},pan:{type:"boolean",default:!0}},inactivity:{type:"number",minimum:1e3,default:3e3},autospin:{enable:{type:"boolean",default:!1},type:{type:"string",enum:["row","sphere","full","helix"],default:"sphere"},resume:{type:"number",minimum:0,default:3e3},duration:{type:"number",minimum:0,default:3600}},hint:{message:{enable:{type:"boolean",default:!0},text:{type:"string",default:"Drag to spin"}},onStart:{enable:{type:"boolean",default:!0},effect:{oneOf:[{type:"string",enum:["intro","twitch","spin","momentum","sphere","none"]},{type:"boolean",enum:[!1]}],default:"intro"}},onVisible:{enable:{type:"boolean",default:!0},effect:{oneOf:[{type:"string",enum:["intro","twitch","spin","momentum","sphere","none"]},{type:"boolean",enum:[!1]}],default:"twitch"}},onInactive:{enable:{type:"boolean",default:!0},effect:{oneOf:[{type:"string",enum:["intro","twitch","spin","momentum","sphere","none"]},{type:"boolean",enum:[!1]}],default:"twitch"}}},row:{start:{type:"number",minimum:1,default:1},loop:{type:"boolean",default:!1},increment:{type:"number",minimum:1,default:1},reverse:{type:"boolean",default:!1},sensitivity:{type:"number",minimum:1,maximum:100,default:50}},column:{start:{type:"number",minimum:1,default:1},loop:{type:"boolean",default:!0},increment:{type:"number",minimum:1,default:1},reverse:{type:"boolean",default:!1},sensitivity:{type:"number",minimum:1,maximum:100,default:50}}}},1537:(t,e,i)=>{i.d(e,{Z:()=>s});const s=".smv-progress-loader{bottom:0;left:0;margin-bottom:5px;margin-left:5px}"},4720:(t,e,i)=>{i.d(e,{Z:()=>s});const s='.sirv-hint .spin-hint-animation{display:none;height:40px;margin-right:10px;perspective:200px;position:relative;transform-style:preserve-3d;vertical-align:middle;width:40px}.sirv-hint .sirv-hint-message .spin-hint-animation:before{border:1px solid #fff;bottom:0;box-shadow:inset 0 0 1px 1px #ffffff80;box-sizing:border-box;content:"";display:inline-block;height:30%;left:0;margin:auto;position:absolute;right:0;top:0;transform-origin:50% 50% -15px;width:40%}.sirv-hint.spin-hint-horizontal-animation .sirv-hint-message .spin-hint-animation:before{animation:sirv-spin-hint-horizontal-rotate 3s linear infinite;transform:translateZ(0) rotateY(0deg)}@keyframes sirv-spin-hint-horizontal-rotate{0%{transform:translateZ(0) rotateY(0deg)}5%{transform:translateZ(100px) rotateY(0deg)}7%{transform:translateZ(75px) rotateY(0deg)}20%{transform:translateZ(75px) rotateY(0deg)}30%{transform:translateZ(75px) rotateY(45deg)}40%{transform:translateZ(75px) rotateY(0deg)}50%{transform:translateZ(75px) rotateY(-45deg)}60%{transform:translateZ(75px) rotateY(0deg)}63%{transform:translateZ(75px) rotateY(0deg)}68%{transform:translateZ(-25px) rotateY(0deg)}70%{transform:translateZ(0) rotateY(0deg)}80%{transform:translateZ(0) rotateY(0deg)}to{transform:translateZ(0) rotateY(0deg)}}.sirv-hint.spin-hint-vertical-animation .spin-hint-message .spin-hint-animation:before{animation:sirv-spin-hint-vertical-rotate 3s linear infinite;transform:translateZ(0) rotateX(0deg)}@keyframes sirv-spin-hint-vertical-rotate{0%{transform:translateZ(0) rotateX(0deg)}5%{transform:translateZ(100px) rotateX(0deg)}7%{transform:translateZ(75px) rotateX(0deg)}20%{transform:translateZ(75px) rotateX(0deg)}30%{transform:translateZ(75px) rotateX(45deg)}40%{transform:translateZ(75px) rotateX(0deg)}50%{transform:translateZ(75px) rotateX(-45deg)}60%{transform:translateZ(75px) rotateX(0deg)}63%{transform:translateZ(75px) rotateX(0deg)}68%{transform:translateZ(-25px) rotateX(0deg)}70%{transform:translateZ(0) rotateX(0deg)}80%{transform:translateZ(0) rotateX(0deg)}to{transform:translateZ(0) rotateX(0deg)}}.sirv-hint.spin-hint-horizontal-animation.spin-hint-vertical-animation .sirv-hint-message .spin-hint-animation:before{animation:sirv-spin-hint-double-rotate 5s linear infinite;transform:translateZ(0) rotateX(0deg) rotateY(0deg)}@keyframes sirv-spin-hint-double-rotate{0%{transform:translateZ(0) rotateX(0deg) rotateY(0deg)}4%{transform:translateZ(100px) rotateX(0deg) rotateY(0deg)}5%{transform:translateZ(75px) rotateX(0deg) rotateY(0deg)}10%{transform:translateZ(75px) rotateX(0deg) rotateY(0deg)}19%{transform:translateZ(75px) rotateX(0deg) rotateY(45deg)}28%{transform:translateZ(75px) rotateX(0deg) rotateY(0deg)}37%{transform:translateZ(75px) rotateX(0deg) rotateY(-45deg)}45%{transform:translateZ(75px) rotateX(0deg) rotateY(0deg)}54%{transform:translateZ(75px) rotateX(45deg) rotateY(0deg)}63%{transform:translateZ(75px) rotateX(0deg) rotateY(0deg)}72%{transform:translateZ(75px) rotateX(-45deg) rotateY(0deg)}81%{transform:translateZ(75px) rotateX(0deg) rotateY(0deg)}85%{transform:translateZ(-25px) rotateX(0deg) rotateY(0deg)}86%{transform:translateZ(0) rotateX(0deg) rotateY(0deg)}90%{transform:translateZ(0) rotateX(0deg) rotateY(0deg)}to{transform:translateZ(0) rotateX(0deg) rotateY(0deg)}}'},8379:(t,e,i)=>{i.d(e,{Z:()=>s});const s='.sirv-spin{-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none!important;backface-visibility:hidden;color:#000;display:inline-block;font-size:0!important;height:100%;line-height:100%!important;max-width:100%;outline:none;outline:0!important;overflow:hidden;padding:0!important;position:relative;text-decoration:none;transform:translateZ(0);-webkit-user-select:none!important;user-select:none!important;user-select:none;vertical-align:middle;visibility:visible;width:100%}.sirv-spin:before{content:"";display:inline-block;height:0;vertical-align:top}.sirv-spin .spin-canvas-container{position:absolute}.sirv-spin .spin-canvas-container,.sirv-spin canvas{bottom:0;left:0;margin:auto;right:0;top:0}.sirv-spin canvas{opacity:0;transition:opacity 1s linear,filter 2s linear;z-index:1}.sirv-spin canvas.smv-shown{opacity:1!important}.sirv-spin canvas.smv-zoomed-in{visibility:hidden!important}.sirv-spin-message{background-color:#fff;background-image:none;border:1px solid #aaa;border-collapse:initial;border-radius:15px;box-shadow:0 0 10px #000;color:#000;display:block;font-size:10px;left:33%;overflow:hidden;padding:6px;position:absolute;text-align:center;top:50%;width:33%;z-index:100}'}},t=>{t.O(0,[121,181,179],(()=>{return e=6345,t(t.s=e);var e}));t.O()}]);"use strict";(globalThis.sirvViewerChunks=globalThis.sirvViewerChunks||[]).push([[791],{6577:(i,t,e)=>{e.r(t),e.d(t,{default:()=>P});var s=e(866),o=e(6031),n=e(9910),r=e(6476),l=e(4878),a=e(4186),h=e(932),d=e(9913);h.KF.addCssModule("Video",'.smv-sirv-video .js-focus-visible .vjs-menu li.vjs-menu-item:hover,.smv-sirv-video .js-focus-visible .vjs-menu li.vjs-selected:hover,.smv-sirv-video .vjs-menu li.vjs-menu-item:focus,.smv-sirv-video .vjs-menu li.vjs-menu-item:hover,.smv-sirv-video .vjs-menu li.vjs-selected,.smv-sirv-video .vjs-menu li.vjs-selected:focus,.smv-sirv-video .vjs-menu li.vjs-selected:hover{background-color:initial;color:inherit}.smv-sirv-video .vjs-playback-rate .vjs-playback-rate-value{font-size:1.2em;line-height:2.5em;pointer-events:none}.smv-sirv-video.video-js .vjs-big-play-button,.smv-sirv-video.video-js .vjs-control-bar,.smv-sirv-video.video-js .vjs-menu-button .vjs-menu-content,.smv-sirv-video.video-js .vjs-volume-vertical{background-color:#373a3ccc}.smv-sirv-video{height:100%!important;left:0;position:relative;top:0;width:100%!important}.smv-sirv-video :focus{outline:none}.smv-sirv-video .vjs-poster{background-color:initial}.smv-sirv-video.smv-controls-right .vjs-control-bar{justify-content:flex-end}.smv-sirv-video .vjs-button{appearance:none;background:0 0;border:0!important;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-decoration:none;text-transform:none;transition:none}.smv-sirv-video .vjs-big-play-button{border:.04em solid #0000;border-radius:1em;box-shadow:none;color:inherit!important;font-size:5em;height:1.2em;left:50%;letter-spacing:0!important;line-height:1.2em;margin-left:-.6em;margin-top:-.6em;top:50%;width:1.2em}.smv-sirv-video:hover .vjs-big-play-button{border-color:#0000}.smv-sirv-video.vjs-controls-disabled .vjs-big-play-button,.smv-sirv-video.vjs-has-started .vjs-big-play-button{display:block;transition:opacity .25s}.smv-sirv-video.vjs-has-started.vjs-playing .vjs-big-play-button{opacity:0;pointer-events:none}.smv-sirv-video.vjs-has-started.vjs-paused .vjs-big-play-button{opacity:1}.smv-sirv-video.video-js{background-color:initial;color:#fff;font-size:10px}.smv-sirv-video.video-js:not(.vjs-has-started) .vjs-tech{opacity:.001}.smv-sirv-video.video-js .vjs-control-bar :last-child .vjs-menu{left:100%;transform:translateX(-100%)}.smv-sirv-video.video-js .vjs-control-bar .vjs-control{box-shadow:none;color:inherit!important}.smv-sirv-video.video-js .vjs-control-bar .vjs-control .vjs-icon-placeholder{font-family:VideoJS;font-style:normal;font-weight:400;line-height:1}.smv-sirv-video.video-js.vjs-has-started .vjs-control-bar{transition:visibility .2s,opacity .2s}.smv-sirv-video.video-js .vjs-menu-button{padding:0}.smv-sirv-video.video-js .vjs-slider{background-color:#fff3}.smv-sirv-video.video-js .vjs-progress-control .vjs-progress-holder{font-size:1.6666666667em;transform:scaleY(.6);transition:transform .1s cubic-bezier(.4,0,1,1)}.smv-sirv-video.video-js .vjs-progress-control .vjs-play-progress:before{transform:scale(0);transition:transform .1s cubic-bezier(.4,0,1,1)}.smv-sirv-video.video-js .vjs-progress-control:hover .vjs-play-progress:before,.smv-sirv-video.video-js .vjs-progress-control:hover .vjs-progress-holder{transform:none}.smv-sirv-video.video-js .vjs-load-progress{background-color:initial}.smv-sirv-video.video-js .vjs-load-progress div{background:#fff6}.smv-sirv-video.video-js .vjs-menu{left:50%;transform:translateX(-50%);width:8em}.smv-sirv-video.video-js .vjs-menu .vjs-menu-item{font-size:1.2em;padding:.6em .6em .3em;text-align:left;text-transform:none}.smv-sirv-video.video-js .vjs-menu .vjs-menu-item~.vjs-menu-item{padding-top:.3em}.smv-sirv-video.video-js .vjs-menu .vjs-menu-item:before{content:"\\f111";font-family:VideoJS;font-size:.66em;opacity:0;padding:0 1em}.smv-sirv-video.video-js .vjs-menu .vjs-menu-item.vjs-selected:before{opacity:1}.smv-sirv-video.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}:root:not(.mobile-magic) .smv-sirv-video.video-js.vjs-has-started:not(:hover) .vjs-control-bar{opacity:0}.smv-disabled-action .vjs-poster,.smv-disabled-action .vjs-tech{pointer-events:none!important}');const c="v3.14.5-f1c058fc".replace(/^v/,""),p=a.i2+"-disabled-action",v=50*d.Z.DPPX,u=0,m=1,y=2,g=4,b=5,f=6,S={"3gp":"video/3gpp",flv:"video/flv",mp4:"video/mp4",ogv:"video/ogg",webm:"video/webm"},j=i=>a.Cc+"vjs/sirv.videojs."+i+"?v="+c;class w extends l.Z{constructor(i,t){super(i,t,s.Z),this.type=a.mA.VIDEO,this.info=null,this.HLS=[],this.currentSize={width:0,height:0},this.videoNode=null,this.sourcesAdded=!1,this.player=null,this.thumbnail=this.option("thumbnail"),this.currentTime=0,this.isVideoPaused=!1,this.fps=30,this.pluginResizeDebounce=null,this.playPromise=null,this.posterSize=null,this.lastAction=u,this.isPlayed=!1,this.isEnded=!1,this.seoElement=null,this.playingState=a.pX.NONE,this.url=this.baseUrl,this.queryParams&&(this.url+="?"+this.queryParams),this.videoHost=new URL(this.baseUrl).hostname.endsWith(".sirv.localhost")?"//video.sirv.localhost":"https://video.sirv.com",this.disableAction(),this.isLoadeddata=!1,this.controlsFullscreen=this.option("controls.fullscreen"),this.getInfo()}normalizeOptions(){const i=this.option("quality.min");i>this.option("quality.max")&&this.option("quality.max",i),this.option("background")&&(this.option("controls.enable",!1),this.option("autoplay",!0),this.option("loop",!0),this.option("volume",0),this.option("controls.playButton",!1))}hidePlaybar(){this.player.controlBar.playToggle.hide(),this.player.controlBar.remainingTimeDisplay.hide(),this.player.controlBar.progressControl.hide()}getSelectorImgUrl(i){return new Promise(((t,e)=>{const s=i.width||i.height;let o=this.baseUrl+"?thumbnail="+s;d.Z.DPPX>1&&(o=this.baseUrl+"?thumbnail="+s*d.Z.DPPX+"&quality=60"),this.thumbnail&&(o=isNaN(parseFloat(this.thumbnail))?this.thumbnail:this.getThumbnailPoster(o));const n={src:o,callbackData:i.callbackData};d.Z.DPPX>1&&(n.srcset=o),this.getInfo().then((()=>{t(n)})).catch(e)}))}disableAction(){this.always&&[a.UW.CLOSED,a.UW.CLOSING].includes(this.fullscreenState)&&this.instanceNode.addClass(p)}enableAction(){this.always&&this.instanceNode.removeClass(p)}getInfo(){return this.gettingInfoPromise||(this.gettingInfoPromise=new Promise(((i,t)=>{this.waitGettingInfo.wait((()=>{const e=d.Z.getHashCode(this.baseUrl.replace(/^http(s)?:\/\//,"")),s=this.baseUrl+(/\?/.test(this.baseUrl)?"&":"?")+"info=sirv_video_info_"+e+"_main";(0,r.Z)(s,"video_info_"+(0,n.Z)(),this.referrerPolicy).then((t=>{this.destroyed||(this.info=t,this.info.QuickTime&&this.info.QuickTime.VideoFrameRate&&(this.fps=this.info.QuickTime.VideoFrameRate),this.HLS=this.info.original.HLS||[],this.HLS.sort(((i,t)=>i.width-t.width||i.height-t.height)),this.infoSize={width:this.info.original.width,height:this.info.original.height},this.option("seo")&&this.createSEO(),i(this.infoSize))})).catch((i=>{this.destroyed||t(i)}))}))}))),this.gettingInfoPromise}createSEO(){const i={"@type":"VideoObject","@context":"http://schema.org/","@id":this.url,name:this.instanceNode.attr("data-title")||this.info.original.title,description:this.instanceNode.attr("data-description")||this.info.original.description,thumbnailUrl:this.baseUrl+"?thumbnail="+(this.isHLS()?this.HLS[this.HLS.length-1].width:this.info.width||this.info.original.width),contentUrl:this.url,uploadDate:this.info.original.ctime};this.info.original.duration&&(i.duration=(i=>{i=Math.floor(i);const t=Math.floor(i/3600),e=Math.floor(i%3600/60),s=Math.floor(i%3600%60);let o="PT";return t>0&&(o+=t+"H"),e>0&&(o+=e+"M"),s>0&&(o+=s+"S"),"PT"===o&&(o+="0S"),o})(this.info.original.duration)),this.seoElement=d.Z.$new("script").attr("type","application/ld+json"),this.seoElement.node.textContent=JSON.stringify(i),this.seoElement.appendTo(document.head)}getInfoSize(){return new Promise(((i,t)=>{this.getInfo().then((()=>{i({size:this.infoSize})})).catch((i=>{t({error:i})}))}))}addSources(){Promise.all([h.KF.addStyle(this.instanceNode,j("css")),h.KF.addJavaScript(document,j("js"))]).finally((()=>{this.sourcesAdded=!0,this.isStarted&&this.isInView&&(this.preload||this.isSlideShown)&&this.createVideoNode()}))}onStartActions(i){this.ready?this.player&&this.isInView&&(this.fullscreenState===a.UW.OPENED&&this.always&&(this.option("controls.playButton")&&this.showBigPlayButton(),this.option("controls.enable")&&this.showControlBar()),!this.option("autoplay")||!this.player.paused()||this.fullscreenState!==a.UW.OPENED&&this.always||(this.player.muted(!0),this.isPlayed?this.lastAction=g:i===a.oc.USER&&(this.lastAction=m),this.play())):this.isStarted&&this.isInView&&this.isSlideShown&&!this.preload&&this.sourcesAdded&&this.createVideoNode()}onStopActions(){this.player&&!this.player.paused()&&this.playingState===a.pX.PLAYING&&(this.lastAction=f,this.pause())}onInView(i){i?this.ready?this.player&&this.isSlideShown&&i&&(this.option("autoplay")||this.playingState!==a.pX.NONE&&!this.isVideoPaused)&&(this.lastAction=y,this.play()):this.isStarted&&!this.isInView&&(this.preload||this.isSlideShown)&&this.sourcesAdded&&(this.isInView=!0,this.createVideoNode()):this.player&&(this.isVideoPaused=this.playingState===a.pX.PAUSE,this.player.paused()||this.playingState!==a.pX.PLAYING||(this.lastAction=b,this.pause()))}startFullInit(i){this.isStartedFullInit||(super.startFullInit(i),this.normalizeOptions(),this.thumbnail=this.option("thumbnail"),this.getId("video-"),this.instanceNode.addClass("sirv-video").addEvent("mousedown",(i=>{i.stop()})))}canFullscreen(){return!1}onBeforeFullscreenIn(i){this.controlsFullscreen=!1,this.player&&(this.isVideoPaused=this.playingState===a.pX.PAUSE,this.toggleFullscreenButton())}onAfterFullscreenIn(i){this.enableAction(),this.isSlideShown&&this.isInView&&this.player&&this.player.paused()&&(this.always&&(this.option("controls.playButton")&&this.showBigPlayButton(),this.option("controls.enable")&&this.showControlBar()),this.option("autoplay")&&!this.isVideoPaused&&(this.player.currentTime(this.currentTime),this.playingState=a.pX.PLAY,this.player.play_()))}onBeforeFullscreenOut(i){this.disableAction(),this.controlsFullscreen=this.option("controls.fullscreen"),this.player&&(this.isVideoPaused=this.playingState===a.pX.PAUSE,this.toggleFullscreenButton())}onAfterFullscreenOut(i){this.isSlideShown&&this.isInView&&this.player&&(this.always&&(this.player.controlBar.hide(),this.player.bigPlayButton.hide()),this.option("autoplay")&&!this.isVideoPaused&&(this.lastAction=m,this.play()))}onSecondSelectorClick(){this.player&&this.isSlideShown&&this.isInView&&(this.fullscreenState===a.UW.OPENED||!this.always)&&(this.player.paused()?(this.lastAction=m,this.play()):this.playingState===a.pX.PLAYING&&this.isLoadeddata&&this.pause())}createVideoNode(){this.videoNode||(this.videoNode=d.Z.$new("video").addClass([a.i2+"-sirv-video","video-js"]).attr("preload","none"),this.option("controls.playbar")||this.videoNode.addClass(a.i2+"-controls-right"),this.instanceNode.append(this.videoNode),this.waitToStart.start(),this.done())}play(){this.player&&!this.playPromise&&(this.playingState=a.pX.PLAY,this.playPromise=this.player.play())}pause(){this.player&&(this.playPromise||new Promise((i=>i(null)))).finally((()=>{this.player.pause(),this.playPromise=null}))}loadContent(){this.createVideoNode()}run(i,t,e){const s=super.run(i,t,e);return s&&(this.calcContainerSize(),this.isInView&&(this.preload||this.isSlideShown)&&this.sourcesAdded&&this.createVideoNode(),this.startGettingInfo()),s}createMasterManifest(){const i=["#EXTM3U"],t=this.option("motionFactor"),e=this.option("dynamicAdaptiveStreaming");return this.HLS.forEach((s=>{let o="#EXT-X-STREAM-INF:PROGRAM-ID=1,";var n,r,l;e&&(o+="BANDWIDTH="+(n=s,r=this.fps,l=t,Math.trunc(n.width*n.height*r*l*.07)+",")),o+="RESOLUTION="+s.width+"x"+s.height,i.push(o),i.push(this.videoHost+encodeURI(s.index))})),i.join("\n")}toggleFullscreenButton(){const i=this.player.controlBar.getChild("FullscreenToggle"),t=this.player.options_.userActions;this.controlsFullscreen?(t.doubleClick=!0,i.show()):(t.doubleClick=!1,i.hide())}isHLS(){return this.HLS.length>0}getThumbnailSize(){const i=this.isHLS()?this.HLS[this.HLS.length-1].height:this.info.height||this.info.original.height||140;let t=i;return this.currentSize.height<t&&(t=this.currentSize.height),t*=d.Z.DPPX,t>i&&(t=i),t}get posterUrl(){return this.getThumbnailPoster(this.baseUrl+"?thumbnail="+this.posterSize)}done(){if(this.ready)return;this.posterSize=this.getThumbnailSize();const i=this.posterUrl,t=!1!==this.option("controls.volume")&&{inline:!1},e={nativeTextTracks:!1,nativeAudioTracks:!1,nativeVideoTracks:!1},s=this.isHLS(),n={overrideNative:s&&"safari"!==d.Z.browser.uaName};e.smoothQualityChange=!0,e.vhs=n;const r={controls:!this.option("background"),fluid:!1,muted:0===this.option("volume")||this.option("autoplay"),loop:this.option("loop"),autoplay:this.option("autoplay")&&this.isSlideShown,preload:this.option("autoplay")||this.option("preload")?"auto":"none",playbackRates:[.5,1,1.5,2],textTrackSettings:!1,controlBar:{fullscreenToggle:!0,volumePanel:t,muteToggle:!1,playbackRateMenuButton:this.option("controls.speed"),children:["playToggle","currentTimeDisplay","timeDivider","durationDisplay","progressControl","remainingTimeDisplay","volumePanel","customControlSpacer","playbackRateMenuButton","fullscreenToggle"]},poster:i,playsinline:!0,html5:e,userActions:{doubleClick:!0},qualityLevels:{}};if(s){if(this.player=window.videojs(this.videoNode.node,r),"safari"!==d.Z.browser.uaName){const i=new TextEncoder;this.player.src({src:URL.createObjectURL(new Blob([i.encode(this.createMasterManifest())])),type:"application/x-mpegURL"})}this.player.hlsQualitySelectorAutoMode({visibility:this.option("controls.quality"),hls:this.HLS,host:this.videoHost,max:this.option("quality.max"),min:this.option("quality.min"),width:this.info.original.width,height:this.info.original.height}),this.pluginResizeDebounce=(0,o.Z)((()=>{this.player.hlsQualitySelectorAutoMode.recalc()}),600)}else{r.src=this.url;const i=function(i){void 0===i&&(i="");const t=i.split("?")[0].split(".").pop().toLowerCase();return S[t]||""}(this.url);this.videoNode.append(d.Z.$new("source",{src:this.url,type:i})),this.player=window.videojs(this.videoNode.node,r)}this.player.volume(this.option("volume")/100),this.toggleFullscreenButton(),this.player.on("loadeddata",(()=>{s&&"safari"!==d.Z.browser.uaName&&URL.revokeObjectURL(this.player.src()),this.isLoadeddata=!0})),this.player.on("play",(()=>{if(this.isVideoPaused=!1,this.playingState=a.pX.PLAYING,this.isSlideShown&&this.isInView){let i="user";this.lastAction===y?i="viewport":this.lastAction===m?i="autoplay":this.lastAction===g&&(i="itemchange"),this.lastAction=u,this.isPlayed?this.sendEvent("resume",{event:{reason:i,playbackTime:this.player.currentTime()}}):(this.isPlayed=!0,this.sendEvent("play",{event:{reason:i}}))}else this.lastAction=b,this.pause()})),this.player.on("pause",(()=>{if(this.player.currentTime()===this.player.duration())return;this.playingState=a.pX.PAUSE;let i="user";this.lastAction===b?i="viewport":this.lastAction===f&&(i="itemchange"),this.lastAction=u,this.always&&this.fullscreenState===a.UW.OPENED&&(this.option("controls.playButton")&&this.showBigPlayButton(),this.option("controls.enable")&&this.showControlBar()),this.sendEvent("pause",{event:{reason:i,playbackTime:this.player.currentTime()}})})),this.player.on("ended",(()=>{this.isPlayed=!1,this.isEnded=!0,this.playingState=a.pX.PAUSE,this.playPromise=null,this.sendEvent("end")})),this.player.on("fullscreenchange",(()=>{const i=this.player.isFullscreen()?"fullscreenIn":"fullscreenOut";this.sendEvent(i,{event:{playbackTime:this.player.currentTime()}})}));let l=null,h=0,c=0;if(this.player.on("timeupdate",(()=>{h=c,c=this.player.currentTime()})),this.player.on("seeking",(()=>{null===l&&(l=h)})),this.player.on("seeked",(()=>{this.isEnded?this.isEnded=!1:this.sendEvent("seek",{event:{seekStart:l,seekEnd:this.player.currentTime()}}),l=null})),this.player.on("error",(i=>{console.log("error",i)})),d.Z.browser.touchScreen&&d.Z.browser.mobile&&!this.option("background")){let i=!1;this.player.on("touchmove",(()=>{i=!0})),this.player.on("touchend",(t=>{if(i)return void(i=!1);const e=!this.option("controls.enable")||this.player.userActive();"video"===d.Z.$(t.target).tagName&&e&&(this.player.paused()?(this.lastAction=m,this.play()):this.pause())}))}this.player.on("ready",(()=>{this.option("controls.fullscreen")||this.player.off(this.player.tech_,"dblclick",this.player.handleTechDoubleClick_),this.fullscreenState!==a.UW.OPENED&&this.always&&(this.player.controlBar.hide(),this.player.bigPlayButton.hide()),this.isSlideShown&&this.isInView&&this.option("autoplay")&&(this.fullscreenState===a.UW.OPENED||!this.always)&&(this.player.muted(!0),this.lastAction=m,this.play(),this.player.muted(!0)),super.done(),this.sendContentLoadedEvent()})),this.option("controls.playButton")||this.player.bigPlayButton.hide(),this.option("controls.enable")||this.player.controlBar.hide(),this.option("controls.playbar")||this.hidePlaybar()}showBigPlayButton(){this.player.bigPlayButton.show()}showControlBar(){this.player.controlBar.show()}getThumbnailPoster(i){if(void 0===i&&(i=""),this.thumbnail||0===this.thumbnail){const t="&video.thumbPos=",e=parseFloat(this.thumbnail);if(!isNaN(e)&&e<this.info.original.duration)return i+t+this.thumbnail;if(/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/i.test(this.thumbnail))return this.thumbnail}return i}calcContainerSize(){const i=this.instanceNode.size;if(i.height&&i.width)this.currentSize=i;else{const t={width:0,height:0};t.width=this.info.original.width,t.height=this.info.original.height,i.height?(this.currentSize.height=i.height,this.currentSize.width=t.width/t.height*i.height):(this.currentSize.width=i.width,this.currentSize.height=t.height/t.width*i.width)}}createPinchEvent(){super.createPinchEvent(this.instanceNode),this.pinchCloud.onPinchStart=i=>{[a.UW.OPENING,a.UW.CLOSING].includes(this.fullscreenState)||(this.pinchCloud.pinch=!0,this.pinchCloud.scale=i.scale,this.sendEvent("pinchStart"))},this.pinchCloud.onPinchMove=i=>{if(this.pinchCloud.pinch&&!this.pinchCloud.block){const t=i.scale-this.pinchCloud.scale;this.fullscreenState===a.UW.OPENED?t<-.08&&(this.pinchCloud.block=!0,this.sendEvent("fullscreenOut")):i.scale>=.11&&(this.pinchCloud.block=!0,this.sendEvent("fullscreenIn"))}}}onResize(){if(!this.player)return!1;if(this.isSlideShown&&this.isInView||this.player.paused()||this.playingState!==a.pX.PLAYING||this.pause(),this.pluginResizeDebounce&&this.pluginResizeDebounce(),this.playingState===a.pX.NONE){this.calcContainerSize();const i=this.getThumbnailSize();i>this.posterSize&&i-this.posterSize>=v&&(this.posterSize=i,this.player.poster(this.posterUrl))}return!0}destroy(){return this.seoElement&&(this.seoElement.remove(),this.seoElement=null),this.player&&(this.player.dispose(),this.player=null),this.videoNode&&(this.videoNode.remove(),this.videoNode=null),this.pluginResizeDebounce&&(this.pluginResizeDebounce.cancel(),this.pluginResizeDebounce=null),this.instanceNode.clearEvents(),this.instanceNode.removeClass("sirv-video"),this.instanceNode.removeClass(p),this.playPromise=null,this.HLS=[],super.destroy(),!0}}const P=w}},i=>{i.O(0,[121,179],(()=>{return t=6577,i(i.s=t);var t}));i.O()}]);"use strict";(globalThis.sirvViewerChunks=globalThis.sirvViewerChunks||[]).push([[121],{7244:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(4878),n=i(9913);const o=(t,e)=>{console.warn("sirv.js: The "+t+" method is deprecated and will be removed. \r\n           Use "+e+" instead.")};class r extends s.Z{constructor(t,e,i){super(t,e,i),this.hotspots=null,this.hotspotsData=null,this.api=Object.assign(this.api,{addHotspot:t=>{this.hotspots&&(o(".addHotspot()",".hotspots.add()"),this.hotspots.api.add(t),this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements())},removeHotspot:t=>{this.hotspots&&(o(".removeHotspot()",".hotspots.remove()"),this.hotspots.api.remove(t))},removeAllHotspots:()=>{this.hotspots&&(o(".removeAllHotspots()",".hotspots.removeAll()"),this.hotspots.api.removeAll())},getHotspots:()=>this.hotspots?(o(".getHotspots()",".hotspots.list()"),this.hotspots.api.list()):[]})}createHotspotsClass(t,e){if(!t)return;this.hotspots=new t(e),this.hotspots.parentClass=this,this.on("hotspotActivate",(t=>{t.stopAll(),this.onHotspotActivate(t.data),this.sendEvent("hotspotOpened")})),this.on("hotspotDeactivate",(t=>{t.stopAll(),this.onHotspotDeactivate(t.data),this.sendEvent("hotspotClosed")})),this.api=Object.assign(this.api,{hotspots:this.hotspots.api});const i=this;this.api.hotspots.add=t=>{if(t){let e=null;if(!i.hotspots.api.list().length){const t=this.getParentContainer();e=i.hotspots.getRightBoundengClientRect(this.getContainerForBoundengClientRect()),i.hotspots.appendTo(t)}i.hotspots.addHotspot(t),i.hotspots.containerSize=e,i.hotspots.showAll(),i.isInView&&i.isSlideShown&&i.hotspots.showNeededElements()}}}getContainerForBoundengClientRect(){return this.getParentContainer()}done(){if(!this.ready&&!this.destroyed&&this.hotspots){let t=this.instanceNode;"img"===t.tagName&&(t=n.Z.$(t.node.parentNode)),this.hotspotsData&&this.hotspotsData.length&&(this.hotspots.appendTo(t),this.hotspots.createHotspots(this.hotspotsData)),this.nativeFullscreen&&this.hotspots.changeBoxContainerParent(!0),this.hotspots.showAll()}super.done()}getParentContainer(){let t=this.instanceNode;return"img"===t.tagName&&(t=n.Z.$(t.node.parentNode)),t}onHotspotActivate(t){}onHotspotDeactivate(t){}onStartActions(){this.hotspots&&this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements(),super.onStartActions()}onStopActions(){this.hotspots&&this.hotspots.hideActiveHotspotBox(!0),super.onStopActions()}onBeforeFullscreenIn(t){this.hotspots&&(this.hotspots.hideActiveHotspotBox(),this.nativeFullscreen&&this.hotspots.changeBoxContainerParent(!0))}onBeforeFullscreenOut(t){this.hotspots&&(this.hotspots.hideActiveHotspotBox(),this.nativeFullscreen&&this.hotspots.changeBoxContainerParent())}onAfterFullscreenOut(t){this.hotspots&&this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements()}destroy(){this.hotspots&&this.hotspots.destroy(),this.hotspots=null,this.off("hotspotActivate"),this.off("hotspotDeactivate"),super.destroy()}}const a=r},4878:(t,e,i)=>{i.d(e,{Z:()=>d});var s=i(5040);const n=class{constructor(){this.started=!1,this.callbacks=[]}wait(t){this.started?t():this.callbacks.push(t)}start(){this.started||(this.started=!0,this.callbacks.forEach((t=>t())))}destroy(){this.callbacks=[]}};var o=i(9913),r=i(4186),a=i(932);const l=t=>new Error("This method '"+t+"' is not implemented.");class h extends s.Z{constructor(t,e,i){super(t,e,i),this.type=r.mA.NONE,this.always=e.always,this.quality=e.quality,this.hdQuality=e.hdQuality,this.isHDQualitySet=e.isHDQualitySet,this.isFullscreenEnabled=e.isFullscreen,this.goToFullscreen=e.goToFullscreen,this.nativeFullscreen=e.nativeFullscreen,this.layout=e.layout,this.aspectratio=e.aspectratio,this.dataAlt=null,this.isSlideShown=!1,this.isInView=!1,this.preload=!1,this.firstSlideAhead=!1,this.infoSize=null,this.pinchCloud=null,this.onLoad=!1,this.waitToStart=new n,this.waitGettingInfo=new n,this.gettingInfoPromise=null,this.fullscreenState=r.UW.CLOSED,this.baseUrl=(0,a.kB)(this.instanceUrl.replace(r.oQ,"$1")),this.queryParams=this.instanceUrl.replace(r.oQ,"$2"),this.on("stats",(t=>{t.data.component=r.HB[this.type]}))}sendEvent(t,e){e||(e={}),e.event||(e.event={}),e.id=this.id,e.url=this.instanceUrl,e.event.timestamp=Date.now(),e.event.type=r.HB[this.type]+":"+t,this.emit("componentEvent",{data:{type:t,data:e}})}canFullscreen(){return!0}onBeforeStartActions(){}onStartActions(){}onStopActions(){}onAfterStopActions(){}onInView(t){}onBeforeFullscreenIn(t){}onAfterFullscreenIn(t){}onBeforeFullscreenOut(t){}onAfterFullscreenOut(t){}onMouseAction(t){}onSecondSelectorClick(){}onStopContext(){}loadContent(){return!0}getSelectorProportion(){return Promise.resolve({size:{width:500,height:500}})}loadThumbnail(){return!this.destroyed&&(this.waitToStart.start(),!0)}startGettingInfo(){return!this.destroyed&&(this.waitGettingInfo.start(),!0)}startFullInit(t){this.isStartedFullInit||(super.startFullInit(t),t&&(this.always=t.always),this.dataAlt=this.instanceNode.attr("data-alt"),this.on("beforeStartActions",(t=>{t.stop(),this.onBeforeStartActions()})),this.on("startActions",(t=>{t.stop(),this.isSlideShown=!0,this.onStartActions(t.who)})),this.on("stopActions",(t=>{t.stop(),this.isSlideShown=!1,this.onStopActions()})),this.on("afterStopActions",(t=>{t.stop(),this.onAfterStopActions()})),this.on("inView",(t=>{t.stop();const e=t.data;this.onInView(e),this.isInView=e})),this.setEvents())}isFullscreenActionEnded(){return[r.UW.CLOSED,r.UW.OPENED].includes(this.fullscreenState)}setEvents(){this.on("beforeFullscreenIn",(t=>{t.stop(),this.fullscreenState===r.UW.OPENED||this.destroyed||(this.fullscreenState=r.UW.OPENING,this.onBeforeFullscreenIn(t.data))})),this.on("afterFullscreenIn",(t=>{t.stop(),this.destroyed||(this.fullscreenState=r.UW.OPENED,this.onAfterFullscreenIn(t.data))})),this.on("beforeFullscreenOut",(t=>{t.stop(),this.fullscreenState===r.UW.CLOSED||this.destroyed||(this.fullscreenState=r.UW.CLOSING,this.onBeforeFullscreenOut(t.data))})),this.on("afterFullscreenOut",(t=>{t.stop(),this.destroyed||(this.fullscreenState=r.UW.CLOSED,this.onAfterFullscreenOut(t.data))}))}getSelectorImgUrl(t){return Promise.reject(l("getSelectorImgUrl"))}getInfoSize(){return Promise.reject(l("getInfoSize"))}run(t,e,i){const s=super.run();return s&&(this.isSlideShown=t,this.preload=e,this.firstSlideAhead=i,this.firstSlideAhead||this.waitToStart.start()),s}getThumbnailData(){return{src:null}}getSocialButtonData(t){const e=t;(this.infoSize.width<t.width||this.infoSize.height<t.height)&&(e.width=this.infoSize.width,e.height=this.infoSize.height);return this.getThumbnailData(e).src}createPinchEvent(t){const e={isAdded:!1,pinch:!1,scale:0,block:!1,onPinchStart:t=>{},onPinchResize:t=>{},onPinchMove:t=>{},onPinchEnd:t=>{e.pinch&&(e.pinch=!1,this.sendEvent("pinchEnd")),e.block=!1},handler:t=>{switch(t.state){case"pinchstart":e.onPinchStart(t);break;case"pinchresize":e.onPinchResize(t);break;case"pinchmove":e.onPinchMove(t);break;case"pinchend":e.onPinchEnd(t)}e.pinch&&t.stop()},addEvent:()=>{!e.isAdded&&o.Z.browser.touchScreen&&(t.addEvent("pinch",e.handler),e.isAdded=!0)},removeEvent:()=>{e.isAdded&&(t.removeEvent("pinch",e.handler),e.isAdded=!1,e.block=!1,e.pinch=!1)}};e.addEvent(),this.pinchCloud=e}done(){super.done(),this.createPinchEvent(),this.on("resize",(t=>{t.stop(),this.onResize()})),this.on("stopContext",(t=>{t.stop(),this.onStopContext()})),this.on("secondSelectorClick",(t=>{t.stopAll(),this.onSecondSelectorClick()})),this.on("mouseAction",(t=>{t.stop(),this.onMouseAction(t.data.type)})),this.on("dragEvent",(t=>{t.stop(),this.pinchCloud&&("dragstart"===t.data.type?this.pinchCloud.removeEvent():"dragend"===t.data.type&&this.pinchCloud.addEvent())})),this.sendEvent("ready")}sendContentLoadedEvent(){this.onLoad||(this.onLoad=!0,this.sendEvent("contentLoaded"))}destroy(){this.off("stats"),this.off("beforeStartActions"),this.off("startActions"),this.off("stopActions"),this.off("afterStopActions"),this.off("inView"),this.off("resize"),this.off("stopContext"),this.off("secondSelectorClick"),this.off("mouseAction"),this.off("dragEvent"),this.off("beforeFullscreenIn"),this.off("afterFullscreenIn"),this.off("beforeFullscreenOut"),this.off("afterFullscreenOut"),this.pinchCloud=null,this.isSlideShown=!1,super.destroy(),this.waitGettingInfo.destroy(),this.waitGettingInfo=null,this.waitToStart.destroy(),this.waitToStart=null,this.gettingInfoPromise=null}}const d=h},2679:(t,e,i)=>{i.d(e,{Z:()=>n});var s=i(9913);const n=class{constructor(t,e){this.target=t,this.conext=null,this.overlay=null,this.items={},this.data=e,this.active=!1,this.showBind=null,this.hideBind=null,this.hideOnScrollBind=null,this.context=null,this._position={top:null,left:null},this._fullScreenBox=null,this.setup(e||[])}get position(){return{top:this._position.top,left:this._position.left}}isExist(t){return!!this.items[t]}setup(t){this.context=s.Z.$new("ul").addClass("sirv-contextmenu").addEvent(["contextmenu","dragstart","selectstart"],(t=>{t.stop()})),t.forEach((t=>{this.addItem(t)})),this.hideFX=new s.Z.FX(this.context,{duration:200,onComplete:()=>{this.context.remove()}}),this.overlay=s.Z.$new("div").addClass("sirv-contextmenu-overlay").addEvent(["click","contextmenu"],this.hide.bind(this)).addEvent("mousescroll",(t=>{t.stop(),t.events[0].stop().stopQueue()})),this.hideBind=s.Z.$((t=>{this.active&&(t.stop(),27===t.originEvent.keyCode&&this.hide())})).bind(this),s.Z.$(window).addEvent("keydown",this.hideBind,1),this.hideOnScrollBind=s.Z.$((t=>{this.active&&this.hide()})).bind(this),s.Z.$(window).addEvent("scroll",this.hideOnScrollBind)}addItem(t){const e=this,i=s.Z.$new("li").appendTo(this.context);t.separator?i.addClass("menu-separator"):t.label&&(i.append(document.createTextNode(t.label)),"function"===s.Z.typeOf(t.action)&&i.addEvent("btnclick",(s=>{s.stop(),i.attr("disabled")||(e.hide(),t.action.call(t.action,e.position))})));const n=t.id||"item-"+Math.floor(Math.random()*Date.now());this.items[n]=i}buildMenu(){let t=!1;return this.data.forEach((e=>{if("function"==typeof e.hidden?e.hidden():e.hidden)this.hideItem(e.id);else{this.showItem(e.id);("function"==typeof e.disabled?e.disabled():e.disabled)?this.disableItem(e.id):this.enableItem(e.id),t=!0}})),t}hideItem(t){s.Z.$(this.items[t]).setCss({display:"none"})}showItem(t){s.Z.$(this.items[t]).setCss({display:""})}disableItem(t){s.Z.$(this.items[t]).attr("disabled",!0)}enableItem(t){s.Z.$(this.items[t]).removeAttr("disabled")}show(t){let e=document.body;this.hideFX.stop(),s.Z.browser.fullScreen.enabled()&&this._fullScreenBox&&(e=this._fullScreenBox),this.overlay.appendTo(e),this.context.setCss({top:-1e4}).appendTo(e);const i=t.clientXY;let n=i.x,o=i.y;const r=t.pageXY;this._position.top=r.y,this._position.left=r.x;const a=(t=>{const e=s.Z.$(window).size,i=s.Z.$(window).scroll;return{left:t=t||0,right:e.width-t,top:t,bottom:e.height-t,x:i.x,y:i.y}})(5),l=this.context.size;a.right<n+l.width&&(n-=l.width),a.bottom<o+l.height&&(o=a.bottom-l.height),this.context.setCss({top:o,left:n,display:"block",opacity:1}),this.active=!0}hide(t){if(this.active&&(this.overlay.remove(),this.hideFX.start({opacity:[1,0]}),this.active=!1,t&&(t.stopDefaults(),"contextmenu"===t.type))){const e=t.pageXY,i=this.target.rect;i.left<=e.x&&i.right>=e.x&&i.top<=e.y&&i.bottom>=e.y&&this.show(t)}}set fullScreenBox(t){this._fullScreenBox=t}destroy(){s.Z.$(window).removeEvent("keydown",this.hideBind).removeEvent("scroll",this.hideOnScrollBind);try{this.context.kill()}catch(t){}try{this.overlay.kill()}catch(t){}}}},7456:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(6394),n=i(9913),o=i(4186);class r extends s.Z{constructor(t,e){super(t,e=(t=>(t||(t={}),t.width||(t.width="100%"),t.height||(t.height="100%"),t))(e)),this.type="component",this.loaderElement.addClass(o.i2+"-bounce-wrapper").append(n.Z.$new("div").addClass(o.i2+"-bounce1")).append(n.Z.$new("div").addClass(o.i2+"-bounce2"))}addClass(){this.node.addClass(o.i2+"-component-loader")}destroy(){this.loaderElement.removeClass(o.i2+"-bounce-wrapper"),this.loaderElement.node.innerHTML="",super.destroy()}}const a=r},4930:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(3089),n=i(9913),o=i(4186);class r extends s.Z{constructor(t,e){super(),this.parentNode=n.Z.$(t),this.options=Object.assign({width:null,height:null,class:null},e||{}),this.node=n.Z.$new("div").addClass(o.i2+"-loader"),this.type="simple",this.inDoc=!1,this.options.class&&this.node.addClass(this.options.class),this.options.width&&this.node.setCssProp("width",this.options.width),this.options.height&&this.node.setCssProp("height",this.options.height)}append(){this.inDoc||(this.inDoc=!0,this.parentNode.append(this.node))}show(){this.append(),this.node.setCss({display:"",visibility:"visible"})}hide(){this.node.setCss({display:"none",visibility:"hidden"})}destroy(){this.hide(),this.node.remove(),this.node=null,this.inDoc=!1,super.destroy()}}const a=r},6394:(t,e,i)=>{i.d(e,{Z:()=>l});var s=i(4930),n=i(4186),o=i(9913);i(932).KF.addCssModule("RoundLoader",'.smv-round-loader{height:44px;line-height:100%;opacity:0;transition:opacity .3s linear;width:44px}.smv-round-loader.smv-show{opacity:.7}.smv-round-loader>div{animation:smv-round-loader 1.5s linear infinite;background-color:#000000b3;border-radius:100%;display:block;height:100%;left:0;position:relative;top:0;width:100%}.smv-round-loader>div:before{border:2px solid #fff;border-radius:50%;border-right-color:#0000;box-sizing:border-box;content:"";display:inline-block;height:77%;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:77%}@keyframes smv-round-loader{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}');const r=n.i2+"-show";class a extends s.Z{constructor(t,e){super(t,e),this.type="round",this.state=n.OR.HIDDEN,this.timer=null,this.loaderElement=o.Z.$new("div"),this.addClass(),this.node.append(this.loaderElement)}addClass(){this.node.addClass(n.i2+"-round-loader")}isHiding(){return this.state===n.OR.HIDING}show(){[n.OR.SHOWING,n.OR.SHOWN].includes(this.state)||(this.state=n.OR.SHOWING,this.timer=setTimeout((()=>{this.timer=null,this.append(),this.node.removeEvent("transitionend"),this.node.addEvent("transitionend",(t=>{t.stop(),this.state=n.OR.SHOWN})),this.node.render(),this.node.addClass(r)}),250))}hide(t){(this.state!==n.OR.HIDDEN||t)&&(clearTimeout(this.timer),this.node.removeEvent("transitionend"),this.state!==n.OR.SHOWN&&(t=!0),this.state=n.OR.HIDING,t?(this.node.remove(),this.inDoc=!1,this.state=n.OR.HIDDEN):this.node.addEvent("transitionend",(t=>{t.stop(),this.node.remove(),this.inDoc=!1,this.state=n.OR.HIDDEN})),this.node.removeClass(r))}destroy(){this.hide(!0),this.state=n.OR.HIDDEN,this.node.innerHTML="",super.destroy()}}const l=a},2022:(t,e,i)=>{i.d(e,{Z:()=>o});var s=i(9913);const n=t=>{const e=t.attr("data-src");e&&t.attr("src",e)},o=t=>{t=s.Z.$(t),n(t),Array.from(t.node.children).forEach((t=>{(t=s.Z.$(t))&&"source"===t.tagName&&n(t)}))}},7987:(t,e,i)=>{i.d(e,{Z:()=>s});const s=(t,e,i)=>{Object.defineProperty(t,e,{value:i,writable:!1})}},2681:(t,e,i)=>{i.d(e,{Z:()=>s});const s=(t,e)=>((t%=e)<0&&(t+=e),t)},4274:(t,e,i)=>{i.d(e,{Z:()=>h});var s=i(9913),n=i(4186);const o=t=>!!t&&/\.spin$/.test(new URL(t,document.baseURI).pathname);var r=i(159),a=i(1048),l=i(3561);const h=t=>{const e=s.Z.$(t),i=e.attr("data-type")||e.attr("data-effect")||"",h=e.fetch("view-content");let d,c,u=null;if((0,l.Z)(i)||"static"===i){const t=e.attr("data-src")||"";if((0,l.Z)(t)){const t=e.attr("src")||"";(0,l.Z)(t)||"img"!==e.tagName||(c=t,d=n.mA.IMAGE)}else o(t)&&"img"!==e.tagName||h===n.mA.SPIN?d=n.mA.SPIN:(0,a.Z)(t)&&"img"!==e.tagName?d=n.mA.MODEL:(0,r.Z)(t)?d=n.mA.VIDEO:(d=n.mA.IMAGE,h&&(d=h)),c=t}else{const t=n.HB.indexOf(i);d=t>=0?t:n.mA.ZOOM;const o=e.attr("data-src")||"";if((0,l.Z)(o)){const t=s.Z.$(e.node.getElementsByTagName("img")[0]);t.attr&&(c=t.attr("src")||t.attr("data-src"))}else c=o}return d&&(u={type:d,imgSrc:c}),u}},1048:(t,e,i)=>{i.d(e,{Z:()=>s});const s=t=>t&&/\.(glb|gltf)$/.test(new URL(t,document.baseURI).pathname)},3561:(t,e,i)=>{i.d(e,{Z:()=>n});var s=i(9913);const n=t=>s.Z.isString(t)&&""===t.trim()},159:(t,e,i)=>{i.d(e,{Z:()=>s});const s=t=>!!t&&/\.(mp4|mov|qt|avi|m4v|mkv|webm|wmv|ogv|ogg|mpg|mpeg)$/i.test(new URL(t,document.baseURI).pathname)},6168:(t,e,i)=>{i.d(e,{Z:()=>n});var s=i(8196);const n=(t,e)=>{try{const i="https://stats.sirv.com/"+Date.now();if(!0===e&&navigator.sendBeacon)return void navigator.sendBeacon(i,(0,s.Z)(t));const n=new XMLHttpRequest;n.open("POST",i),void 0!==n.responseType&&(n.responseType="text"),n.send((0,s.Z)(t))}catch(t){}}},1930:(t,e,i)=>{i.d(e,{Z:()=>n});var s=i(4186);const n=(t,e)=>{const i=t.slice(),n=[];if(e&&e.length)for(let t=0,o=Math.min(e.length,i.length);t<o;t++)for(let o=0,r=i.length;o<r;o++)if(s.HB.indexOf(e[t])===i[o].type&&i[o].enabled){n.push(i[o]),i.splice(o,1);break}return i.forEach((t=>{n.push(t)})),n}},5956:(t,e,i)=>{i.d(e,{Z:()=>O});var s=i(9913),n=i(2022);const o="https://player.vimeo.com/api/player.js";let r=null,a=null;const l={},h="default.jpg",d="0.jpg",c=9/16,u=t=>fetch(t,{method:"GET"}).then((t=>{if(200===t.status)return t.json();throw new Error("Viewer: can't get vimeo json",{cause:t})})).then((t=>Promise.resolve(t[0]))).catch((t=>{throw t})),p=t=>(t=s.Z.$(t))&&"video"===t.tagName,m=t=>void 0!==(t=t.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]&&(t=t[2].split(/[^0-9a-z_\-]/i)).length&&t[0]?t[0]:null,f=t=>{try{return t.match(/(?:https?:\/\/)?(?:www.)?(?:player.)?vimeo.com\/(?:[a-z]*\/)*([0-9]{6,11})[?]?.*/)[1]}catch(t){return null}},y=t=>t.attr("src")||t.attr("data-src"),v=t=>{let e;if(s.Z.isString(t))e=t;else if((t=s.Z.$(t))&&"element"===s.Z.typeOf(t.node))if(["iframe","div"].includes(t.tagName))e=y(t);else if(p(t)&&(e=y(t),!e)){const i=Array.from(t.node.children);let n;do{n=s.Z.$(i.shift()),n&&"element"===s.Z.typeOf(n.node)&&"source"===n.tagName&&(e=y(t))}while(!e&&n)}return e},g=t=>{if(p(t))return"video";if(t=v(t)){if(/^(https?:)?\/\/((www\.)?youtube\.com|youtu\.be)\//.test(t))return"youtube";if(/^(https?:)?\/\/((www|player)\.)?vimeo\.com\//.test(t))return"vimeo"}return null},S=t=>"https://vimeo.com/api/v2/video/"+t+".json",b=t=>!!p(t)||(t=v(t))&&["youtube","vimeo"].includes(g(t)),w=t=>{if(!b(t))return null;switch(t=v(t),g(t)){case"youtube":return m(t);case"vimeo":return f(t);default:return null}},C=(t,e)=>{const i=m(t);if(!i)return Promise.resolve(null);l[t]||(l[t]={}),l[t].aspectratio=c;const s=(t=>"https://img.youtube.com/vi/"+t+"/")(i);return e?(l[t].all={thumbnail:{url:s+h,width:120,height:90},medium:{url:s+d,width:480,height:360}},Promise.resolve(l[t].all)):(l[t].url=s+h,Promise.resolve(l[t].url))},I={},E=(t,e)=>{const i=f(t);i||Promise.resolve(null);const s=i+"-"+!!e;return I[s]||(I[s]=u(S(i)).then((i=>i?(l[t]||(l[t]={}),e?(l[t].all={thumbnail:{url:i.thumbnail_small,width:100,height:75},medium:{url:i.thumbnail_medium,width:200,height:150}},l[t].all):(l[t].url=i.thumbnail_small,l[t].url)):null))),I[s]},x=(t,e,i)=>new Promise(((o,r)=>{let a=null;if(i)if((i=s.Z.$(i.node.cloneNode(!0))).attr&&(a=i.attr("poster")),a&&""!==a.trim())l[t]||(l[t]={}),l[t].aspectratio=c,e?(l[t].all={thumbnail:{url:a,width:200,height:150},medium:{url:a,width:200,height:150}},o(l[t].all)):(l[t].url=a,o(a));else{const h=0,d=s.Z.$new("canvas"),u=d.node.getContext("2d"),p=()=>{i.removeEvent(["loadedmetadata","loadeddata","abort","error","stalled"]),i.remove()};(0,n.Z)(i),i.setCss({top:-1e5,left:-1e5,width:200,height:150,position:"absolute"}),i.muted=!0,i.addEvent("loadedmetadata",(t=>{let e=i.size;e.width&&e.height||(e={width:200,height:150}),i.setCss(e),d.node.width=e.width,d.node.height=e.height,h<i.node.duration&&(i.node.currentTime=h)})),i.addEvent("loadeddata",(t=>{i.currentTime=h})),i.addEvent(["abort","error","stalled"],(t=>{p(),r(null)})),i.addEvent("seeked",(s=>{u.drawImage(i.node,0,0,d.node.width,d.node.height),p();try{a=d.node.toDataURL()}catch(t){}return a?(l[t]||(l[t]={}),l[t].aspectratio=c,e?(l[t].all={thumbnail:{url:a,width:200,height:150},medium:{url:a,width:200,height:150}},o(l[t].all)):(l[t].url=a,o(a))):o(a)})),i.appendTo(document.body),i.node.load()}else o(a)})),P=(t,e)=>new Promise(((i,n)=>{let o;if(t&&s.Z.$(t)&&"element"===s.Z.typeOf(s.Z.$(t).node)&&(o=t),!(t=v(t)))return i(null);if(l[t])if(e){if(l[t].all)return i(l[t].all)}else{if(l[t].url)return i(l[t].url);if(l[t].all)return i(l[t].all.thumbnail.url)}const r={youtube:C,vimeo:E,video:x},a=g(o||t);return a?r[a](t,e,o).then(i).catch(n):i(null)})),O={aspectratio:c,getAspectRatio:t=>new Promise(((e,i)=>{(t=v(t))&&l[t]&&e(l[t].aspectratio);if("vimeo"===g(t)){const s=f(t);s?u(S(s)).then((t=>{e(t?t.height/t.width:c)})).catch((t=>{i(t)})):e(c)}else e(c)})),getId:w,isVideo:b,getType:g,getImageSrc:P,getSrc:v,getAPI:t=>{if(!b(t))return Promise.reject(!0);switch(g(t)){case"video":return Promise.resolve();case"vimeo":return r||(r=new Promise(((t,e)=>{if(window.Vimeo)t(window.Vimeo);else if("function"==typeof window.define&&window.define.amd&&"function"==typeof window.require)window.require([o],(e=>{t({Player:e})}),e);else{const i=s.Z.$new("script");i.attr("src",o),s.Z.$(i).addEvent("load",(()=>{t(window.Vimeo)})),s.Z.$(i).addEvent("error",e),i.appendTo(document.body)}}))),r;case"youtube":return a||(a=window.YT?Promise.resolve(window.YT):new Promise(((t,e)=>{const i=window.onYouTubeIframeAPIReady||(()=>{});window.onYouTubeIframeAPIReady=()=>{i(),t(window.YT)},document.querySelector('script[src$="youtube.com/iframe_api"]')||s.Z.$new("script",{src:"https://www.youtube.com/iframe_api"}).appendTo(document.body)}))),a;default:return Promise.reject(!0)}},isVideoExisting:t=>{switch(g(t)){case"video":return Promise.resolve();case"vimeo":return P(t);case"youtube":return new Promise(((e,i)=>{const s=w(t);if(!s)return i();const n="https://www.youtube.com/oembed?"+new URLSearchParams({format:"json",url:"https://youtu.be/"+s});return fetch(n,{method:"GET"}).then((t=>[200,401].includes(t.status)?e():i())).catch(i)}));default:return Promise.reject()}}}},866:(t,e,i)=>{i.d(e,{Z:()=>s});const s={autoplay:{type:"boolean",default:!1},loop:{type:"boolean",default:!1},volume:{type:"number",minimum:0,maximum:100,default:100},seo:{type:"boolean",default:!0},preload:{type:"boolean",default:!0},thumbnail:{oneOf:[{type:"url"},{type:"boolean",enum:[!1]},{type:"number",minimum:0}],default:!1},motionFactor:{type:"number",minimum:1,maximum:4,default:3},dynamicAdaptiveStreaming:{type:"boolean",default:!0},quality:{min:{type:"number",enum:[360,480,720,1080],default:360},max:{type:"number",enum:[360,480,720,1080],default:1080}},background:{type:"boolean",default:!1},controls:{enable:{type:"boolean",default:!0},volume:{type:"boolean",default:!0},speed:{type:"boolean",default:!1},quality:{type:"boolean",default:!1},fullscreen:{type:"boolean",default:!0},playButton:{type:"boolean",default:!0},playbar:{type:"boolean",default:!0}}}},9456:(t,e,i)=>{i.d(e,{Z:()=>l});var s=i(3315),n=i(6476),o=i(9913),r=i(4186),a=i(932);const l=class{constructor(t,e){this.mainNode=o.Z.$(e),this.sirvOptions=(0,s.Z)({},t||{}),this.nodes=[],this.configURL=null,this.dataJSON=null,this.configHash=null,this.attrbMainNode=null,this.cfCallbackName=null,this.urlParams=null,this.componentsList=[],this.referrerPolicy=this.mainNode.attr("data-referrerpolicy")||this.mainNode.attr("referrerpolicy")||"no-referrer-when-downgrade"}getOptions(){return new Promise(((t,e)=>{var i,s;this.checkNode()?(this.buildCallBackName(),(0,n.Z)((i=this.configURL,s=this.cfCallbackName,i+(/\?/.test(i)?"&":"?")+"nometa&info="+s),this.cfCallbackName,this.referrerPolicy).then((e=>{if(e&&e.assets)this.dataJSON=e,this.buildOptions(),t({dataOptions:this.sirvOptions});else{const i=e.layers?r.mA.SPIN:r.mA.IMAGE;t({content:i,dataOptions:this.sirvOptions})}})).catch((t=>{this.configURL,e({error:this.configURL,dataOptions:this.sirvOptions})}))):t({dataOptions:this.sirvOptions})}))}buildViewer(){return new Promise((t=>{if(this.dataJSON){const t=/(^https?:\/\/[^/]*)([^#?]*)\/.*$/.exec(this.configURL),e=this.dataJSON.dirname||t[2];this.prepareListComponents(this.dataJSON.assets,t[1],e),this.generateComponents(),this.addAllComponents()}t({mainNode:this.mainNode})}))}prepareListComponents(t,e,i){t.forEach((t=>{let s,n="div";const o=[],l=r.HB.indexOf(t.type);/^(https?:)?\/\/[^/]/.test(t.name)?(s=t.name,l===r.mA.IMAGE&&(n="img",o.push(["data-type","static"]))):"link"===t.type?(s=t.url,l===r.mA.IMAGE&&(n="img",o.push(["data-type","static"]))):s=/^\//.test(t.name)?(0,a.kB)(e+t.name):(0,a.kB)(e+i+"/"+t.name),t.title&&o.push(["title",t.title]),l===r.mA.IMAGE&&"img"!==n&&o.push(["data-type","zoom"]),this.componentsList.push({path:s,type:l,tag:n,attrs:o})}))}checkNode(){const t=/([^#?]+)\/?([^#?]+\.view)(\?([^#]*))?(#(.*))?$/;return!!(this.mainNode&&(this.attrbMainNode=this.mainNode.attr("data-src"),this.attrbMainNode&&t.test(this.attrbMainNode)))}buildOptions(){this.sirvOptions.common=(0,s.Z)(this.sirvOptions.common,this.dataJSON.settings||{}),this.sirvOptions.mobile=(0,s.Z)(this.sirvOptions.mobile,this.dataJSON.settings||{})}buildCallBackName(){this.configURL=(0,a.kB)(this.attrbMainNode.replace(r.oQ,"$1")),this.urlParams=this.attrbMainNode.replace(r.oQ,"$2"),this.urlParams&&(this.configURL+="?"+this.urlParams),this.configHash=o.Z.getHashCode(this.configURL.replace(/^http(s)?:\/\//,"")),this.cfCallbackName="view-1_"+this.configHash}generateComponents(){this.componentsList.forEach((t=>{const e=o.Z.$new(t.tag);t.attrs.forEach((t=>e.attr(t[0],t[1])));let i=t.path;this.urlParams&&(i+="?"+this.urlParams),e.attr("data-src",i),this.nodes.push(e)}))}addAllComponents(){this.mainNode.node.innerHTML="",this.nodes.forEach((t=>{this.mainNode.node.appendChild(t.node)}))}destroy(){this.mainNode=null,this.sirvOptions=null,this.nodes=[],this.configURL=null,this.dataJSON=null,this.configHash=null,this.cfCallbackName=null,this.componentsList=[]}}},5395:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(9913),n=i(3089),o=i(4186);class r extends n.Z{constructor(t){var e;super(),this.options=Object.assign({orientation:"horizontal",customClass:""},t||{}),this.arrows=(this.options.orientation,e=this.options.customClass,["prev","next"].map((t=>{const i=s.Z.$new("div").addClass([o.i2+"-arrow-control",o.i2+"-arrow-control-"+t]),n=s.Z.$new("div").addClass([o.i2+"-button",o.i2+"-arrow",o.i2+"-arrow-"+t]);return e&&""!==e&&n.addClass(o.i2+"-arrow-"+e),i.append(n),i}))),this.arrows.forEach(((t,e)=>{const i=e?"next":"prev",n=s.Z.$(t.node.firstChild);t.store("arrowType",i),n.append(s.Z.$new("div").addClass(o.i2+"-icon")),n.addEvent(["btnclick","tap"],s.Z.$(((e,i)=>{i.stop(),t.fetch("disabled")||this.emit("arrowAction",{data:{type:e}})})).bind(this,i))})),this.isShow=!0}get nodes(){return[this.arrows[0],this.arrows[1]]}show(){this.isShow||(this.arrows.forEach((t=>{t.removeClass(o.i2+"-hidden")})),this.isShow=!0)}hide(){this.isShow&&(this.isShow=!1,this.arrows.forEach((t=>{t.addClass(o.i2+"-hidden")})))}disable(t){if(t&&this.isShow){const e="forward"===t?1:0;this.arrows[e].store("disabled",!0),s.Z.$(this.arrows[e].node.firstChild).attr("disabled","")}else this.arrows.forEach((t=>{s.Z.$(t.node.firstChild).removeAttr("disabled"),t.store("disabled",!1)}))}destroy(){this.arrows.forEach((t=>{s.Z.$(t.node.firstChild).removeEvent(["btnclick","tap"]),t.del("arrowType"),t.del("disabled"),t.remove()})),this.arrows=[],this.isShow=!1,super.destroy()}}const a=r},827:(t,e,i)=>{i.d(e,{Z:()=>u});var s=i(3089),n=i(9913);class o extends s.Z{constructor(t,e,i){super(),this.name="blank",this.elements=[t,e],this.elements[0].node=n.Z.$(this.elements[0].node),this.elements[1].node=n.Z.$(this.elements[1].node),this.options=Object.assign({},i||{}),this.states={NOT_STARTED:0,MOVING:1,ENDED:2},this.state=this.states.NOT_STARTED,this.isDestroyed=!1}_show(t){this.elements[t].node.setCss({opacity:1,visibility:"visible"})}_hide(t){this.elements[t].node.setCss({opacity:0,visibility:"hidden"})}_start(){this.emit("effectStart",{name:this.name,indexes:[this.elements[0].index,this.elements[1].index]}),this._show(0),this.elements[0].node.setCssProp("z-index",9),this._show(1),this.elements[1].node.setCssProp("z-index",7)}_move(t){t()}_end(){this.state!==this.states.ENDED&&(this.state=this.states.ENDED,this._hide(0),this.emit("effectEnd",{name:this.name,indexes:[this.elements[0].index,this.elements[1].index]}))}_clear(){this.elements.forEach((t=>{t.node.setCss({zIndex:"",opacity:"",visibility:""})}))}make(){this.state===this.states.NOT_STARTED&&(this.state=this.states.MOVING,this._start(),this._move((()=>{this._end(),this._clear()})))}destroy(){this.isDestroyed||(this.isDestroyed=!0,this._end(),this._clear(),this.state=this.states.ENDED,super.destroy(this))}}const r=o,a=t=>t.map((t=>(t=>t+"%")(t)));const l=class extends r{constructor(t,e,i){super(t,e,i),this.options=Object.assign(this.options,Object.assign({direction:"left",time:600,easing:"ease-in-out"},i||{})),this.name="slide",this.from=[0,-100],this.to=[100,0],["right","bottom"].includes(this.options.direction)&&(this.from[1]*=-1,this.to[0]*=-1),this.from=a(this.from),this.to=a(this.to)}_show(t){const e=this.elements[t].node;["left","right"].includes(this.options.direction)?(this.from[t]=this.from[t]+", 0%",this.to[t]=this.to[t]+", 0%"):(this.from[t]="0%, "+this.from[t],this.to[t]="0%, "+this.to[t]),e.setCssProp("transform","translate3d("+this.from[t]+", 0px)"),super._show(t)}_move(t){const e=this.options;this.elements[1].node.addEvent("transitionend",(e=>{this.elements[1].node.node===e.target&&(e.stop(),super._move(t))})),this.elements.forEach(((t,i)=>{t.node.render(),t.node.setCssProp("transition","transform "+e.time+"ms "+e.easing),t.node.setCssProp("transform","translate3d("+this.to[i]+", 0px)")}))}_clear(){this.elements.forEach((t=>{t.node.removeEvent("transitionend"),t.node.setCss({transform:"",transition:""})})),super._clear(this)}};const h={Blank:r,Slide:l,Fade:class extends r{constructor(t,e,i){super(t,e,i),this.options=Object.assign(this.options,Object.assign({time:600,easing:"linear"},i||{})),this.name="fade",this.from=[1,0],this.to=[0,1]}_show(t){super._show(t);this.elements[t].node.setCssProp("opacity",this.from[t])}_move(t){const e=this.options;this.elements[1].node.addEvent("transitionend",(e=>{this.elements[1].node.node===e.target&&(e.stop(),super._move(t))})),this.elements.forEach(((t,i)=>{t.node.render(),t.node.setCssProp("transition","opacity "+e.time+"ms "+e.easing),t.node.setCssProp("opacity",this.to[i])}))}_clear(){this.elements.forEach((t=>{t.node.removeEvent("transitionend"),t.node.setCss({opacity:"",transition:""})})),super._clear()}}},d=(t,e)=>{let i;return i="horizontal"===e?"next"===t?"right":"left":"next"===t?"bottom":"top",i};class c extends s.Z{constructor(t){super(),this.options=Object.assign({effect:"blank",orientation:"horizontal",time:600,easing:"ease-in-out"},t),this.isMove=!1,this.callbackData=null,this.effectName="blank",this.effect=null,this.addEvents()}addEvents(){this.on("effectStart",(t=>{t.data={callbackData:this.callbackData},this.isMove=!0})),this.on("effectEnd",(t=>{t.data={callbackData:this.callbackData},this.isMove=!1,this.effect.destroy(),this.effect=null}))}make(t,e,i,s){const o=Object.assign(this.options,i||{});this.stop();let r=(a=o.effect,n.Z.camelize("-"+a));var a;Object.prototype.hasOwnProperty.call(h,r)||(r="Blank"),this.effect=new h[r](t,e,{time:o.time,easing:o.easing,direction:d(o.direction,o.orientation)}),this.effect.parentClass=this,this.callbackData=s,this.effect.make()}stop(){this.effect&&(this.effect.destroy(),this.effect=null),this.callbackData=null}destroy(){this.stop(),this.off("effectStart"),this.off("effectEnd"),this.isMove=!1,super.destroy()}}const u=c},6272:(t,e,i)=>{i.d(e,{PJ:()=>n,lW:()=>o});var s=i(4186);const n=s.i2+"-thumbnail",o=s.i2+"-selector"},9806:(t,e,i)=>{i.a(t,(async(t,s)=>{try{i.r(e),i.d(e,{default:()=>y});var n=i(9913),o=i(3089),r=i(9456),a=i(6272),l=i(7011),h=i(773),d=t([h]);h=(d.then?(await d)():d)[0];const c=t=>(Object.entries(t).forEach((e=>{let[i,s]=e;s=n.Z.$(s.split(";")),s.length&&(""===s[s.length-1]&&s.splice(s.length-1,1),s=s.map((t=>t.replace(new RegExp("^"+i+"\\."),""))),t[i]=s.join(";"))})),t),u=(t,e)=>{let i=null;if(n.Z.isString(e))i=t[e];else if(Array.isArray(e)){const s=e.shift();t[s]&&(i=e.length?u(t[s],e):t[s])}return i},p=(t,e,i)=>({common:u(t.common,e)||i,mobile:u(t.mobile,e)||i}),m=t=>{const e=t=>{["spin","zoom","image","video"].forEach((e=>{t[e]&&delete t[e]}))};e(t.common),e(t.mobile)};class f extends o.Z{constructor(t,e,i,s){super(),this.node=t,this.slider=null,this.lazyInit=s,this.options={},this.spinOptions={},this.zoomOptions={},this.imageOptions={},this.videoOptions={},this.sliderBuilder=new r.Z(e,this.node),this.parseOptions(e),this.privateOptions={common:{},mobile:{}},this.toolOptions=null,this.inViewTimer=null,this.isRun=!1,this.api={isReady:this.isReady.bind(this),items:this.items.bind(this),disableItem:this.disableItem.bind(this),enableItem:this.enableItem.bind(this),enableGroup:this.enableGroup.bind(this),disableGroup:this.disableGroup.bind(this),switchGroup:this.switchGroup.bind(this),insertItem:this.insertItem.bind(this),removeItem:this.removeItem.bind(this),removeAllItems:this.removeAllItems.bind(this),jump:this.jump.bind(this),itemsCount:this.itemsCount.bind(this),next:this.next.bind(this),prev:this.prev.bind(this),isFullscreen:this.isFullscreen.bind(this),fullscreen:this.fullscreen.bind(this),child:this.child.bind(this),play:this.play.bind(this),pause:this.pause.bind(this),sortItems:this.sortItems.bind(this)},this.on("viewerPublicEvent",(t=>{Object.assign(t.data.slider,this.api),t.data.slide&&(t.data.slide.parent=()=>this.api,t.data.slide[t.data.slide.component]&&(t.data.slide[t.data.slide.component].parent=()=>t.data.slide))})),this.makeOptions();const n=this.toolOptions.get("autostart");(n&&"off"!==n||i)&&this.run()}parseOptions(t){const e="viewer",i="spin",s="zoom",n="image",o="video",r="model",a=t.common,l=t.mobile;this.options=p(t,e,{}),this.spinOptions={common:u(a,[e,i])||u(a,i)||{},mobile:u(l,[e,i])||u(l,i)||{}},this.zoomOptions={common:u(a,[e,s])||u(a,s)||{},mobile:u(l,[e,s])||u(l,s)||{}},this.imageOptions={common:u(a,[e,n])||u(a,n)||{},mobile:u(l,[e,n])||u(l,n)||{}},this.videoOptions={common:u(a,[e,o])||u(a,o)||{},mobile:u(l,[e,o])||u(l,o)||{}},this.modelOptions={common:u(a,[e,r])||u(a,r)||{},mobile:u(l,[e,r])||u(l,r)||{}},m(this.options)}getSlideOptions(){const t=p(this.privateOptions,"spin",""),e=p(this.privateOptions,"zoom",""),i=p(this.privateOptions,"image",""),s=p(this.privateOptions,"video",""),n=p(this.privateOptions,"model","");return{spin:{common:this.spinOptions,local:t},zoom:{common:this.zoomOptions,local:e},image:{common:this.imageOptions,local:i},video:{common:this.videoOptions,local:s},model:{common:this.modelOptions,local:n}}}makeOptions(){const t={spin:/^spin/,zoom:/^zoom/,image:/^image/,video:/^video/,model:/^model/};this.toolOptions=new n.Z.Options(l.Z),this.toolOptions.fromJSON(this.options.common),this.privateOptions.common=c(this.toolOptions.fromString(this.node.attr("data-options")||"",t)),n.Z.browser.touchScreen&&n.Z.browser.mobile&&(this.toolOptions.fromJSON(this.options.mobile),this.privateOptions.mobile=c(this.toolOptions.fromString(this.node.attr("data-mobile-options")||"",t)))}createSlider(t){this.slider=new h.Z(this.node,{options:this.toolOptions,slideOptions:this.getSlideOptions(),lazyInit:this.lazyInit,viewerFileContent:t}),this.slider.parentClass=this,this.api.id=this.slider.id}run(t){return this.isRun=!0,this.sliderBuilder.getOptions().then((e=>{this.parseOptions(e.dataOptions),t&&this.makeOptions(),e.content?this.createSlider(e.content):this.sliderBuilder.buildViewer().then((t=>{this.node=t.mainNode,this.createSlider()}))})).catch((t=>{console.log("Sirv: cannot get view from "+t.error)})),!0}isReady(){var t;return!(null==this||null==(t=this.slider)||!t.isReady)}isFullscreen(){return this.isReady()&&2===this.slider.isFullscreen}startFullInit(t,e,i){if(this.slider){this.lazyInit=i,this.parseOptions(t),this.makeOptions();const s=this.toolOptions.get("autostart");(s&&"off"!==s||e)&&this.slider.startFullInit({options:this.toolOptions,slideOptions:this.getSlideOptions(),lazyInit:this.lazyInit})}}start(){return!this.slider&&this.run(!0)}stop(){return!!this.slider&&(this.slider.destroy(),this.slider=null,this.off("viewerPublicEvent"),this.isRun=!1,this.sliderBuilder.destroy(),this.sliderBuilder=null,this.destroy(),!0)}insertItem(t,e){if(!this.isReady())return!1;if(n.Z.isString(t)){const e=n.Z.$new("div");e.node.innerHTML=t.trim(),!(t=e.node.firstChild)||3!==t.nodeType&&8!==t.nodeType&&["div","img",a.PJ].includes(n.Z.$(t).tagName)||(t=null)}else if(n.Z.$(t).tagName===a.PJ){const e=n.Z.$new("div");e.append(t),t=e.node}return this.slider.insertSlide(e,t)}removeItem(t){return!!this.isReady()&&this.slider.removeSlide(t)}removeAllItems(){if(!this.isReady())return!1;let t=!0;for(let e=this.itemsCount()-1;e>=0;e--){const i=this.slider.removeSlide(e);t&&(t=i)}return t}itemsCount(t){var e;return this.isReady()&&(null==(e=this.items(t))?void 0:e.length)||0}items(t){return this.isReady()?this.slider.getItems(t).map((t=>(t.parent=()=>this.api,t))):null}disableItem(t){return!!this.isReady()&&this.slider.disableSlide(t)}enableItem(t){return!!this.isReady()&&this.slider.enableSlide(t)}enableGroup(t){return!!this.isReady()&&this.slider.enableSlideGroup(t)}disableGroup(t){return!!this.isReady()&&this.slider.disableSlideGroup(t)}switchGroup(t){return!!this.isReady()&&this.slider.switchGroup(t)}jump(t){return!!this.isReady()&&this.slider.jump(t)}next(){return!!this.isReady()&&this.slider.jump("next")}prev(){return!!this.isReady()&&this.slider.jump("prev")}fullscreen(){return!!this.isReady()&&(this.isFullscreen()?this.slider.exitFullScreen():this.slider.enterFullScreen())}child(t){let e=null;return this.isReady()&&(t="number"===n.Z.typeOf(t)||n.Z.isString(t)?t:null,e=this.slider.getSlide(t),e&&(e.parent=()=>this.api)),e}play(t){return!!this.isReady()&&this.slider.play(t)}pause(){return!!this.isReady()&&this.slider.pause()}sortItems(t){this.isReady()&&this.slider.sortItems(t)}isEqual(t){return t===this.node}checkReadiness(t,e){return!!this.isReady()&&this.slider.checkReadiness(t,e)}sendEvent(t,e){this.isReady()&&this.slider.sendReadyEvent(t,e)}}const y=f;s()}catch(t){s(t)}}))},9552:(t,e,i)=>{i.d(e,{Z:()=>u});var s=i(4186),n=i(9913);const o="fullscreen",r=s.i2+"-button-"+o+"-open",a=s.i2+"-button-"+o+"-close",l=s.i2+"-button-hidden",h=0,d=1,c=2;const u=class{constructor(t){this.button=n.Z.$new("div").addClass(s.i2+"-button").addClass(s.i2+"-button-"+o).addClass(r),this.button.append(n.Z.$new("div").addClass(s.i2+"-icon")),this.state=s.UW.CLOSED,this.placement=(t=>{switch(t){case"standard":return d;case"fullscreen":return c;default:return h}})(t)}static get FULLSCREEN(){return"fullscreen"}static get STANDARD(){return"standard"}get node(){return this.button}onClick(t){this.button.addEvent(["btnclick","tap"],(e=>{e.stop(),t()}))}show(){(this.placement===h||this.placement===c&&this.state===s.UW.OPENED||this.placement===d&&this.state===s.UW.CLOSED)&&this.button.removeClass(l)}hide(){this.button.addClass(l)}enable(){(this.placement===h||this.placement===c&&this.state===s.UW.OPENED||this.placement===d&&this.state===s.UW.CLOSED)&&this.button.removeAttr("disabled")}disable(){this.button.attr("disabled","disabled")}toFullscreen(){this.state=s.UW.OPENED,this.button.removeClass(r).addClass(a)}toStandard(){this.state=s.UW.CLOSED,this.button.removeClass(a).addClass(r)}destroy(){this.button.clearEvents().remove(),this.button=null}}},6943:(t,e,i)=>{i.d(e,{Z:()=>o});var s=i(9913),n=i(2681);const o=(t,e,i,o)=>{let r=null;if(s.Z.isString(t))switch(t){case"next":t=e+1;break;case"prev":t=e-1}return"number"===s.Z.typeOf(t)&&(r=t,r<0?r=o?(0,n.Z)(r,i):0:t>=i&&(r=o?(0,n.Z)(r,i):i-1)),r}},450:(t,e,i)=>{i.d(e,{Z:()=>n});var s=i(9913);const n=t=>s.Z.isString(t)&&t.trim()||null},7011:(t,e,i)=>{i.d(e,{Z:()=>s});const s={orientation:{type:"string",enum:["horizontal","vertical"],default:"horizontal"},arrows:{type:"boolean",default:!0},loop:{type:"boolean",default:!0},quality:{type:"number",minimum:0,maximum:100,default:80},hdQuality:{type:"number",minimum:0,maximum:100,default:60},itemsOrder:{type:"array",default:[]},autostart:{oneOf:[{type:"string",enum:["created","visible","off"]},{type:"boolean",enum:[!1]}],default:"visible"},threshold:{type:"number",minimum:0,default:0},layout:{type:{type:"string",enum:["slider","grid"],default:"slider"},aspectRatio:{oneOf:[{type:"string",enum:["auto"]},{type:"number"}],default:"auto"},grid:{columns:{type:"number",minimum:1,default:2},gap:{type:"number",minimum:0,default:20}}},slide:{first:{type:"number",minimum:0,default:0},delay:{type:"number",minimum:9,default:3e3},preload:{type:"boolean",default:!0},autoplay:{type:"boolean",default:!1},animation:{type:{oneOf:[{type:"string",enum:["off","slide","fade"]},{type:"boolean",enum:[!1]}],default:"fade"},duration:{type:"number",minimum:9,default:200}},socialbuttons:{enable:{type:"boolean",default:!1},types:{facebook:{type:"boolean",default:!0},twitter:{type:"boolean",default:!0},linkedin:{type:"boolean",default:!0},reddit:{type:"boolean",default:!0},tumblr:{type:"boolean",default:!0},pinterest:{type:"boolean",default:!0},telegram:{type:"boolean",default:!0}}}},thumbnails:{enable:{type:"boolean",default:!0},size:{type:"number",minimum:5,default:70},position:{type:"string",enum:["top","left","right","bottom"],default:"bottom"},type:{type:"string",enum:["square","auto","bullets","grid","crop"],default:"square"},always:{type:"boolean",default:!1},target:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],default:!1},watermark:{type:"boolean",default:!0}},fullscreen:{enable:{type:"boolean",default:!0},always:{type:"boolean",default:!1},native:{type:"boolean",default:!1},history:{type:"boolean",default:!0},thumbnails:{enable:{type:"boolean",default:!0},size:{oneOf:[{type:"string",enum:["auto"]},{type:"number",minimum:5}],default:"auto"},position:{type:"string",enum:["top","left","right","bottom"],default:"bottom"},type:{type:"string",enum:["square","auto","bullets","grid","crop"],default:"square"},always:{type:"boolean",default:!1},autohide:{type:"boolean",default:!1},watermark:{type:"boolean",default:!0}}},contextmenu:{enable:{type:"boolean",default:!1},text:{zoom:{in:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],default:"Zoom In"},out:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],default:"Zoom Out"}},fullscreen:{enter:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],default:"Enter Full Screen"},exit:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],default:"Exit Full Screen"}},download:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],default:"Download Image"}}},productdetail:{enable:{type:"boolean",default:!1},position:{type:"string",enum:["top","right","bottom","left"],default:"top"}}}},4759:(t,e,i)=>{i.d(e,{Z:()=>N});var s=i(6031),n=i(9913);const o=t=>{let e=null,i=n.Z.$(t).getCss("transform")+"";const s=(t,e)=>{const i={},s=["x","y","z"];return t.forEach((function(t,n){var o;i[s[n]]=(o=e[t],parseFloat(o.trim()))})),i};if("none"!==i){e={},i=i.split("(")[1],i=i.split(")")[0],i=i.split(",");const t=i.length>6;e.transform=s(t?[12,13,14]:[4,5],i),e.scale=s(t?[0,5,10]:[0,3],i)}return e};var r=i(932),a=i(4186),l=i(3089),h=i(5395),d=i(3315),c=i(9680);const u={width:560,height:315};var p=i(6272);class m extends l.Z{constructor(t,e,i,s){super(),this.node=n.Z.$(t),this.type=e,this.size=i,this.orientation=s,this.getPlaceholderSizePromise=null,this.destroyed=!1,this.loaded=!1,this.content=null,this.node.tagName===p.PJ&&(this.content=Array.from(this.node.node.childNodes))}isLoaded(){return this.loaded}setCssSize(){this.node.setCss(this.selectorSize)}get selectorSize(){const t={};return["square","crop"].includes(this.type)?(t.width=this.size,t.height=this.size):"horizontal"===this.orientation?t.height=this.size:t.width=this.size,t}get placeholderSize(){return this.getPlaceholderSizePromise||(this.getPlaceholderSizePromise=new Promise((t=>{const e=this.selectorSize;if(e.width&&e.height)t(e);else if(this.destroyed)t({width:0,height:0});else{let i;this.proportion.then((t=>{i=t})).finally((()=>{e.width?e.height=i.height/i.width*e.width:e.width=i.width/i.height*e.height,t(e)}))}}))),this.getPlaceholderSizePromise}get proportion(){return Promise.resolve(u)}complete(){return this.node.setCss({width:"",height:""}),this.setCssSize(),Promise.resolve()}appendTo(t){this.content?this.content.forEach((e=>{t.append(e)})):t.append(this.node)}destroy(){this.destroyed=!0,this.node=null,this.getPlaceholderSizePromise=null,super.destroy()}}const f=m;const y=class extends f{constructor(t,e,i,s,n){super(t,e,i,s),this.imageOrientation="horizontal",this.isSirv=!1,this.watermark=n,this.src=null,this.srcset=null,this._imageSize={width:0,height:0},this.getProportionPromise=null,this.getUrlPromise=null,this.loadImagePromise=null}setCssSize(){["square","crop"].includes(this.type)?this.customSquare():this.removeCustomSquare(),super.setCssSize()}get proportion(){return this.getProportionPromise||(this.getProportionPromise=new Promise(((t,e)=>{this.destroyed?t({width:0,height:0}):this.emit("getSelectorProportion",{data:{resultingCallback:e=>{let i=e.size;this.isSirv=e.isSirv,i?(i.width||(i=u),t(i)):t(u)}}})}))),this.getProportionPromise}setImageUrl(t,e,i,s){this.src=t,this.srcset=e,this.node&&((this.src||this.srcset)&&(s&&this.node.attr("referrerpolicy",s),this.srcset&&this.node.attr("srcset",this.srcset+" 2x"),this.node.attr("src",this.src),n.Z.browser.mobile||this.node.addEvent("mousedown",(t=>{t.stopDefaults()}))),i&&this.node.attr("alt",i))}get url(){return this.getUrlPromise||(this.getUrlPromise=new Promise(((t,e)=>{this.destroyed?t(this):this.emit("getSelectorImgUrl",{data:{crop:"crop"===this.type,type:this.type,watermark:this.watermark,size:this.selectorSize,resultingCallback:i=>{i?(this.setImageUrl(i.src,i.srcset,i.alt,i.referrerpolicy),t(this)):e(this)}}})}))),this.getUrlPromise}set imageSize(t){this._imageSize=t,this.imageOrientation=this._imageSize.width>=this._imageSize.height?"horizontal":"vertical"}loadImage(){return this.loadImagePromise||(this.loadImagePromise=new Promise(((t,e)=>{this.node?(0,c.Z)(this.isSirv?this.node.node:this.node.node.src).then((e=>{this.loaded=!0,this.imageSize=e.size,this.setCssSize(),t(this)})).catch((i=>{this.destroyed?t(this):e(this)})):t(this)}))),this.loadImagePromise}customSquare(){if("div"!==this.node.tagName){const t=n.Z.$new("div").setCss({overflow:"hidden",position:"relative"});this.node.attr("data-image-orientation",this.imageOrientation),t.append(this.node),this.node.setCss({width:"",height:"",maxWidth:"none"}),"crop"===this.type?"horizontal"===this.imageOrientation?this.node.setCssProp("height",this.size):this.node.setCssProp("width",this.size):"vertical"===this.imageOrientation?this.node.setCssProp("height",this.size):this.node.setCssProp("width",this.size),this.node=t}}removeCustomSquare(){this.node&&"div"===this.node.tagName&&(this.node.removeEvent(["touchstart","selectstart","contextmenu"]),this.node.remove(),this.node=n.Z.$(this.node.node.firstChild),this.node.setCss({width:"",height:"",maxWidth:""}),this.node.removeAttr("data-image-orientation"))}complete(){return this.url.then((()=>this.loadImage()))}destroy(){this.node&&this.node.removeEvent("mousedown"),this.getProportionPromise=null,this.getUrlPromise=null,this.loadImagePromise=null,super.destroy()}},v={NONE:0,STANDARD:1,FULLSCREEN:2},g=(t,e)=>!Object.entries(t).some((t=>{let[i,s]=t;return s!==e[i]}));class S extends l.Z{constructor(t,e,i,s,o,r){super(),this.UUID=s,this.options=(0,d.Z)({standard:{type:"square",size:70,orientation:"horizontal",watermark:!0},fullscreen:{type:"square",size:70,orientation:"horizontal",watermark:!0},activeClass:a.i2+"-active",placeholderClass:a.i2+"-thumbnail-placeholder",selectorContent:null,disabled:!1},o||{}),this.parentContainer=n.Z.$(t),this._index=e,this.selector=n.Z.$(i)||n.Z.$new("div"),this._container=n.Z.$new("div").addClass(a.i2+"-item").setCss({display:"inline-block"}),this.placeholder=n.Z.$new("div").addClass(this.options.placeholderClass),this._size={width:0,height:0},this.currentObject=null,this.actived=!1,this._disabled=!1,this._destroyed=!1,this._container.append(this.selector),this.parentContainer.append(this._container),this.options.disabled&&this.disable(),this.infoPromise=r||Promise.resolve(!1),this.state=v.NONE,this.initPromise=null,this.init()}init(){return this.initPromise||(this.initPromise=this.infoPromise.then((()=>{if(this._destroyed)return;this.standard=this.createContent(this.options.standard),this.standard&&this.standard instanceof y&&g(this.options.standard,this.options.fullscreen)?this.fullscreen=this.standard:this.fullscreen=this.createContent(this.options.fullscreen,!0),this.selector.append(this.placeholder);this.selector.attr("data-type")||this.selector.setCssProp("font-size",0),this.addEvents(),this.addCustomClick()}))),this.initPromise}createContent(t,e){let i;if("bullets"!==t.type){if(this.options.selectorContent)i=new f(this.options.selectorContent,t.type,t.size,t.orientation);else{const e=n.Z.$(new Image);i=new y(e,t.type,t.size,t.orientation,t.watermark)}i.parentClass=this}return i}get proportion(){let t=Promise.resolve();return this._disabled||(this.state===v.FULLSCREEN&&this.fullscreen?t=this.fullscreen.proportion:this.standard&&(t=this.standard.proportion)),new Promise(((e,i)=>{this.init().then((()=>{t.then(e).catch(i)}))}))}get canActivate(){return this.options.activated}addEvents(){this.on("getSelectorProportion",(t=>{t.data.UUID=this.UUID})),this.on("getSelectorImgUrl",(t=>{t.data.UUID=this.UUID}))}addPlaceholder(t,e){this._container.attr("data-selector-type",t),this.selector.append(this.placeholder),this.placeholder.setCss(e)}toggle(t){return new Promise(((e,i)=>{this.init().then((()=>{let s;const n=Promise.resolve();if(this.state!==t)if(this.state=t,this._disabled)s=n;else{let e=this.standard,i=this.options.standard.type;t===v.FULLSCREEN&&(e=this.fullscreen,i=this.options.fullscreen.type),"bullets"===i?(this.selector.node.innerHTML="",this.currentObject=i,this._container.attr("data-selector-type",i),this.emit("resize"),s=n):(e instanceof y||this._container.attr("data-selector-type",i),s=new Promise(((s,n)=>{e?e.placeholderSize.then((n=>{if(this.state!==t||this._destroyed)s();else{if(!e.isLoaded()&&!this.options.selectorContent){for(;this.selector.node.firstChild;)this.selector.node.removeChild(this.selector.node.firstChild);this.addPlaceholder(i,n)}s(),e.complete().then((()=>{if(this.state===t&&!this._destroyed){for(this._container.attr("data-selector-type",i),this.placeholder.remove();this.selector.node.firstChild;)this.selector.node.removeChild(this.selector.node.firstChild);e.appendTo(this.selector),this.currentObject=e,this.emit("resize")}})).catch((()=>{}))}})):s()})))}else s=n;s.then(e).catch(i)}))}))}addClick(){this._container.addEvent(["btnclick","tap"],(t=>{t.stop(),this.emit("selectorAction",{data:this.UUID})}))}addCustomClick(){if(this.options.selectorContent&&n.Z.$(this.options.selectorContent).tagName===p.PJ){const t=n.Z.$(this.options.selectorContent).node.querySelectorAll("a");Array.from(t).forEach((t=>{n.Z.$(t).addEvent(["btnclick","tap"],(e=>{e.stop(),"#"===n.Z.$(t).attr("href")[0]?(n.Z.W.node.location.hash="",n.Z.W.node.location.hash=n.Z.$(t).attr("href")):n.Z.W.node.open(n.Z.$(t).attr("href"))}))}))}}activate(){this.actived||(this.actived=!0,this._container.addClass(this.options.activeClass))}get activated(){return this.actived}deactivate(){this.actived&&(this.actived=!1,this._container.removeClass(this.options.activeClass))}get size(){return this._size=this._container.size,this._size}disable(){this._disabled||(this._disabled=!0,this._container.attr("disabled","true"),this._container.setCssProp("display","none"),this.deactivate(),this.emit("resize"))}_toggleForEnable(){let t,e;if(this.state!==v.NONE&&(t=this.state===v.STANDARD?this.standard||"bullets":this.fullscreen||"bullets"),t!==this.currentObject){const t=this.state;this.state=v.NONE,e=this.toggle(t)}else e=Promise.resolve();return e}enable(){this._disabled&&(this._disabled=!1,this._toggleForEnable().then((()=>{this._disabled||(this._container.removeAttr("disabled"),this._container.setCssProp("display",""),this.emit("resize"))})))}set index(t){this._index=t}get index(){return this._index}get container(){return this._container}get pinnedPosition(){return this.options.pinned}get destroyed(){return this._destroyed}get disabled(){return this._disabled}destroy(){this._destroyed=!0,this.placeholder.remove(),this.off("getSelectorProportion"),this.off("getSelectorImgUrl"),this.standard&&(this.standard.destroy(),this.standard=null),this.fullscreen&&(this.fullscreen.destroy(),this.fullscreen=null),this._container.removeEvent(["btnclick","tap"]),this._container.remove(),this._container=null,this.parentContainer=null,this.selector=null,super.destroy()}}const b=S,w="vertical",C="horizontal",I={left:w,right:w,top:C,bottom:C},E=t=>I[t],x="selectors",P=(t,e)=>(e?t+="px, 0":t="0, "+t+"px",t);class O extends l.Z{constructor(t,e){super(),this.options=Object.assign({isStandardGrid:!1,standardStyle:"square",standardSize:70,standardPosition:"bottom",standardWatermark:!0,isFullscreenGrid:!1,fullscreenStyle:"square",fullscreenSize:70,fullscreenPosition:"bottom",fullscreenAutohide:!1,fullscreenWatermark:!0,arrows:!0,activeClass:a.i2+"-active"},e||{}),this.instanceNode=n.Z.$new("div").addClass(a.i2+"-"+x).setCss({opacity:0,visibility:"hidden",transition:""}),this.selectorsContainer=n.Z.$new("div").addClass(a.i2+"-ss"),this.selectorsScroll=n.Z.$new("div").addClass(a.i2+"-scroll").setCss({transform:"translate3d(0, 0, 0)"}),this.controlButton=n.Z.$new("div").addClass(a.i2+"-"+x+"-toggle-switch"),this.selectorsScrollContainer=n.Z.$new("div").addClass(a.i2+"-selectors-scroll-container"),this.startPinnedNode=null,this.endPinnedNode=null,this.baseSelectorsList=[],this.pinnedStartList=[],this.pinnedEndList=[],this.isMove=!1,this.currentPosition=0,this.containerSize={width:0,height:0},this.halfContainerSize=0,this.scrollSize={width:0,height:0},this.halfScrollSize=0,this.currentActiveItem=null,this.isShown=!1,this.isControlShown=!0,this.isControlInDoc=!1,this.controlDebounce=null,this.isReady=!1,this.resizeTimeout=null,this.isActionsEnabled=!0,this.isDone=!1,this.isInView=!1,this.state=v.STANDARD,this.arrows=null,this._currentStylePosition=this.options.standardPosition,this.longSide=null,this._shortSide=null,this.currentAxis="x",this.isStarted=!1,this.isDestroyed=!1,t.some((t=>!!t.pinned))&&this.initPinnedBlocks(),this.selectors=t.map(((t,e)=>this.createSelector(t,e))),this.sortPinnedSelectors(),this.identifyVariables(),this.setContainerCss()}findSelector(t){var e;return null!=(e=this.selectors.find((e=>e.UUID===t)))?e:null}get hasPinnedSelector(){return!(!this.pinnedStartList.length&&!this.pinnedEndList.length)}insertBefore(t,e){let i=this.selectors,s=this.selectorsScroll;if(this.hasPinnedSelector){var o,r;if("start"===e.pinnedPosition)i=this.pinnedStartList,s=n.Z.$(null!=(o=null==(r=this.startPinnedNode)?void 0:r.node.firstChild.firstChild)?o:null);else if("end"===e.pinnedPosition){var a,l;i=this.pinnedEndList,s=n.Z.$(null!=(a=null==(l=this.endPinnedNode)?void 0:l.node.firstChild.firstChild)?a:null)}else i=this.baseSelectorsList;t=i.indexOf(e)}let h=null;t+1<i.length&&(h=i[t+1].container),this.hide(),s.node.insertBefore(e.container.node,h?h.node:h)}insert(t,e){e.pinned&&(this.initPinnedBlocks(),this.appendPinnedBlocks());const i=this.createSelector(e,t);this.isDone&&i.addClick(),this.hide(),this.selectors.splice(t,0,i),this.selectors.forEach(((t,e)=>{t.index=e})),this.sortPinnedSelectors(),this.insertBefore(t,i),i.toggle(this.state)}disable(t){const e=this.findSelector(t);e&&(this.currentActiveItem&&this.currentActiveItem===e&&(this.currentActiveItem=null),this.hide(),e.disable())}enable(t){const e=this.findSelector(t);e&&(this.hide(),e.enable())}pickOut(t){const e=this.findSelector(t);e&&(e.destroy(),this.selectors.splice(e.index,1),this.selectors.forEach(((t,e)=>{t.index=e})),this.sortPinnedSelectors())}createSelector(t,e){let i=this.selectorsScroll;var s,n;if("start"===t.pinned)i=null!=(s=null==(n=this.startPinnedNode)?void 0:n.node.firstChild.firstChild)?s:null;else if("end"===t.pinned){var o,r;i=null!=(o=null==(r=this.endPinnedNode)?void 0:r.node.firstChild.firstChild)?o:null}const a=new b(i,e,t.node,t.UUID,{standard:{type:this.options.standardStyle,size:this.options.standardSize,orientation:E(this.options.standardPosition),watermark:this.options.standardWatermark},fullscreen:{type:this.options.fullscreenStyle,size:this.options.fullscreenSize,orientation:E(this.options.fullscreenPosition),watermark:this.options.fullscreenWatermark},activeClass:this.options.activeClass,selectorContent:t.selectorContent,disabled:t.disabled,pinned:t.pinned,activated:t.activated},t.infoPromise);return a.parentClass=this,a}addEventsFromSelectors(){let t;this.on("selectorAction",(t=>{t.stopAll(),this.emit("changeSlide",{data:{UUID:t.data}});const e=this.selectors.find((e=>e.UUID===t.data));e!==n.Z.U&&this.activateItem(e)})),this.on("resize",(e=>{e.stopAll(),clearTimeout(t),t=setTimeout((()=>{this.onResize()}),16)}))}initPinnedBlocks(){if(!this.pinnedBlocksInited){const t=t=>n.Z.$new("div").addClass(a.i2+t).append(n.Z.$new("div").addClass(a.i2+"-ss").append(n.Z.$new("div").addClass(a.i2+"-scroll").setCss({transform:"translate3d(0, 0, 0)"})));this.startPinnedNode=t("-selectors-pinned-start"),this.endPinnedNode=t("-selectors-pinned-end")}}get pinnedBlocksInited(){return!!this.startPinnedNode&&!!this.endPinnedNode}appendPinnedBlocks(){this.pinnedBlocksInited&&(this.instanceNode.append(this.startPinnedNode),this.instanceNode.append(this.endPinnedNode))}sortPinnedSelectors(){this.pinnedStartList=this.selectors.filter((t=>"start"===t.pinnedPosition)),this.pinnedEndList=this.selectors.filter((t=>"end"===t.pinnedPosition)),this.baseSelectorsList=this.selectors.filter((t=>!t.pinnedPosition))}init(){if(this.createArrows(),this.selectorsScrollContainer.append(this.selectorsContainer).appendTo(this.instanceNode),this.appendPinnedBlocks(),this.arrows){this.arrows.hide();const t=this.arrows.nodes;this.selectorsScrollContainer.append(t[0]),this.selectorsScrollContainer.append(t[1])}this.selectorsContainer.append(this.selectorsScroll),this.isShown=!0,this.hide(),this.identifyVariables(),this.addEventsFromSelectors(),this._currentStylePosition||(this.instanceNode.setCssProp("display","none"),n.Z.$(this.instanceNode.node.parentNode).setCssProp("display","none")),Promise.all(this.selectors.map((t=>t.proportion))).finally((()=>{this.isReady=!0,this.emit("selectorsReady")}))}identifyVariables(){if(this._currentStylePosition){const t="horizontal"===E(this._currentStylePosition);this.longSide=t?"width":"height",this._shortSide="width"===this.longSide?"height":"width",this.currentAxis=t?"x":"y"}else this.longSide=null,this._shortSide=null}changeSelectors(t){return Promise.all(this.selectors.map((e=>e.toggle(t))))}getSelectorsSize(){return this.selectors.filter((t=>!t.destroyed)).map((t=>t.size))}enableActions(){this.isActionsEnabled||(this.isActionsEnabled=!0,this.show(),this.options.fullscreenAutohide&&(this.selectorsState=!0))}disableActions(){this.isActionsEnabled&&(this.isActionsEnabled=!1,this.hide(),this.controlDebounce&&this.controlDebounce.cancel())}show(t){if(!this.isShown&&this.isActionsEnabled&&!this.isDestroyed){const e=t?"":"opacity 400ms linear";this.isShown=!0,this.selectorsScroll.setCss({display:"inline-flex"}),this.getSizes(),this.jump(this.activatedItem,!0),this.instanceNode.setCss({opacity:1,visibility:"visible",transition:e})}}get activatedItem(){return this.currentActiveItem?this.currentActiveItem.index:0}activateCurrentItemByUUID(t){const e=this.findSelector(t);e&&!this.currentActiveItem&&(this.currentActiveItem=e)}hide(){this.isShown&&(this.isShown=!1,this.instanceNode.setCss({opacity:0,visibility:"hidden",transition:""}))}start(t){!this.isStarted&&this.isInView&&(this.isStarted=!0,this._currentStylePosition?this.changeSelectors(1).then((()=>r.KF.addMainStyle(t))).then((()=>{this.isDestroyed||(this.getSelectorsSize(),this.done(),this.show())})):this.done())}addControl(){this.isControlInDoc||(this.instanceNode.addEvent(["mouseover","mouseout"],(t=>{let e=t.related;for(e&&(e=n.Z.$(e));e&&e.node!==this.instanceNode.node&&e.node!==n.Z.D.node.body;)e=e.node.parentNode,e&&(e=n.Z.$(e));e&&e.node===this.instanceNode.node||this.setControlTimeout("mouseover"===t.type)})),this.controlButton.addEvent(["btnclick","tap"],(t=>{this.setControlTimeout(!0),this.selectorsState=!this.isControlShown})),n.Z.$(this.instanceNode.node.parentNode).append(this.controlButton),this.controlDebounce=(0,s.Z)((()=>{this.selectorsState=!1}),3e3),this.isControlInDoc=!0)}removeControl(){this.isControlInDoc&&(this.instanceNode.removeEvent(["mouseover","mouseout"]),this.controlDebounce.cancel(),this.isControlShown=!0,this.controlButton.removeEvent(["btnclick","tap"]),this.controlButton.remove(),this.isControlInDoc=!1)}set selectorsState(t){this.isControlShown=t,this.setControlTimeout(),this.emit("visibility",{action:this.isControlShown?"show":"hide"})}setControlTimeout(t){this.isControlInDoc&&(this.controlDebounce.cancel(),this.isControlShown&&!t&&this.controlDebounce())}get node(){return this.instanceNode}get horizontal(){return"horizontal"===E(this._currentStylePosition)}inView(t,e){this.isInView=t,this.start(e)}done(){this.isDone||this.isDestroyed||(this.isDone=!0,this.getSizes(),this.selectors.forEach((t=>{t.addClick()})),this.onResize(),this.setDrag(),this.emit("selectorsDone"))}activateItem(t){const e=this.selectors[t];e&&(this.currentActiveItem&&this.currentActiveItem.deactivate(),!e.disabled&&e.canActivate&&(e.activate(),this.currentActiveItem=e),!e.activated&&this.currentActiveItem&&this.currentActiveItem.activate())}createArrows(){!this.options.arrows||"grid"===this.options.standardStyle&&"grid"===this.options.standardStyle||(this.arrows=new h.Z({orientation:E(this.currentPosition||this.options.fullscreenPosition),customClass:"thumbnails"}),this.arrows.parentClass=this,this.on("arrowAction",(t=>{t.stopAll(),this.jump(t.data.type)})))}isGrid(){return this.state===v.FULLSCREEN?this.options.isFullscreenGrid:this.options.isStandardGrid}calculateContainerScroll(){if(this.hasPinnedSelector||this.pinnedBlocksInited){const t=this.instanceNode.size;this.arrows&&this.arrows.hide();let e=t[this.longSide]-(this.startPinnedNode.size[this.longSide]+this.endPinnedNode.size[this.longSide]);e<0&&(e=0),this.scrollSize[this.longSide]<e&&(e=this.scrollSize[this.longSide]),this.selectorsScrollContainer.setCssProp("max-"+this.longSide,e),this.getSizes()}}normalizePositionValue(t){const e=this.containerSize[this.longSide]-this.scrollSize[this.longSide];return this.arrows&&(this.arrows.disable(),e>=0||this.isGrid()?(this.arrows.hide(),this.getSizes()):this.arrows.isShow||(this.arrows.show(),this.getSizes())),0===e?0:(this.halfScrollSize<=this.halfContainerSize?t=this.halfContainerSize-this.halfScrollSize:(t>=0&&(t=0,this.arrows&&this.arrows.disable("backward")),t<=e&&(t=e,this.arrows&&this.arrows.disable("forward"))),t)}findItemPosition(t){if(!this.selectors[t]||this.selectors[t].pinnedPosition)return null;if(t=((t,e)=>(t<0?t=0:t>e-1&&(t=e-1),t))(t,this.selectors.length),this.hasPinnedSelector){const e=this.baseSelectorsList.indexOf(this.selectors[t]);e>=0&&(t=e)}const e=this.selectors[t].size[this.longSide]/2;let i=0,s=0;for(;s<t;)this.selectors[s]&&(i+=this.selectors[s].size[this.longSide]),s+=1;const n=this.halfContainerSize-(i+e);return this.normalizePositionValue(n)}stopMoving(){if(this.isMove){let t=o(this.selectorsScroll);t&&(t=t.transform[this.currentAxis],this.currentPosition=t),this.clearAnimation(),this.selectorsScroll.setCssProp("transform","translate3d("+P(this.currentPosition,this.horizontal)+", 0)")}}clearAnimation(){this.selectorsScroll&&(this.selectorsScroll.removeEvent("transitionend"),this.selectorsScroll.setCssProp("transition","")),this.isMove=!1}jump(t,e){let i=this.currentPosition;if(this.stopMoving(),n.Z.isString(t))"next"===t?i-=this.containerSize[this.longSide]:i+=this.containerSize[this.longSide],i=this.normalizePositionValue(i);else{if("number"!==n.Z.typeOf(t))return;i=this.findItemPosition(t)}null!==i&&this.move(i,null,e)}move(t,e,i){if(e||(e=400),this.currentPosition===t)return;this.selectorsScroll.removeEvent("transitionend");const s={};i||(this.isMove=!0,this.selectorsScroll.addEvent("transitionend",(t=>{t.stop(),this.clearAnimation()})),s.transition="transform "+((t,e,i)=>{let s=t;const n=Math.trunc(t/3);return s=Math.trunc(Math.abs(i)/e*t),s<n?s=n:s>t&&(s=t),s})(e,this.containerSize[this.longSide],Math.abs(t)-Math.abs(this.currentPosition))+"ms ease"),s.transform="translate3d("+P(t,this.horizontal)+", 0)",this.selectorsScroll.setCss(s),this.currentPosition=t}getSizes(){this.containerSize=this.selectorsContainer.size,this.halfContainerSize=this.containerSize[this.longSide]/2,this.scrollSize=this.selectorsScroll.size,this.halfScrollSize=this.scrollSize[this.longSide]/2}setDrag(){const t={};let e,i,s,n,o,r,a,l,h,d={x:null,y:null},c=!1,u=0;const p=(t,i)=>({x:t-e.left,y:i-e.top});t.dragstart=t=>{o=this.currentAxis,r="x"===o?"y":"x",a=this.longSide,d={x:t.x,y:t.y},this.containerSize[a]<this.scrollSize[a]&&(c=!0),e=this.selectorsContainer.position,this.stopMoving(),i=p(t.x,t.y)[o],s=this.containerSize[a]-this.scrollSize[a],n=0,h=t.timeStamp},t.dragend=t=>{let e,i;var o;c&&(c=!1,t.stop(),i=t.timeStamp-h,e=this.currentPosition-((o=n)+o/2),(e>0||e<s)&&(e=e>0?0:s),e=this.normalizePositionValue(e),this.move(e),l=null),u=0},t.dragmove=t=>{let e,s,a;var h,m;u||(u=Math.abs(d[o]-t[o])>Math.abs(d[r]-t[r])?1:2),c&&1===u&&(e=p(t.x,t.y),e[o]>e[r]&&(t.stop(),s=i-e[o],this.currentPosition-=s,h=i,m=e[o],a=h>m?"next":"prev",l&&a===l||(n=0),n+=s,i=e[o],l=a),this.selectorsScroll.setCssProp("transform","translate3d("+P(this.currentPosition,this.horizontal)+", 0)")),d={x:t.x,y:t.y}},this.selectorsContainer.addEvent(["mousedrag","touchdrag"],(e=>{t[e.state](e)}))}setContainerCss(){const t={};let e=this.options.standardSize;this.state===v.FULLSCREEN&&(e=this.options.fullscreenSize),t["min-"+this._shortSide]=e+"px",t[this._shortSide]="100%",this.instanceNode.setCss(t)}beforeEnterFullscreen(){this.hide(),this.state=v.FULLSCREEN,this._currentStylePosition=this.options.fullscreenPosition,this._currentStylePosition||(this.instanceNode.setCssProp("display","none"),n.Z.$(this.instanceNode.node.parentNode).setCssProp("display","none")),this.identifyVariables()}afterEnterFullscreen(){this._currentStylePosition&&(this.instanceNode.setCssProp("display",""),n.Z.$(this.instanceNode.node.parentNode).setCssProp("display",""),this.setContainerCss(),this.options.fullscreenAutohide&&(this.addControl(),this.isActionsEnabled&&(this.selectorsState=!0)),this.changeSelectors(2).then((()=>{this.getSelectorsSize(),setTimeout((()=>{this.show()}),150),this._currentStylePosition&&this.isActionsEnabled&&setTimeout((()=>{this.selectorsState=!0}),1e3)})))}beforeExitFullscreen(){this.hide(),this.state=v.STANDARD,this._currentStylePosition=this.options.standardPosition,this.options.fullscreenAutohide&&this.removeControl(),this._currentStylePosition||(this.instanceNode.setCssProp("display","none"),n.Z.$(this.instanceNode.node.parentNode).setCssProp("display","none")),this.identifyVariables()}afterExitFullscreen(){this._currentStylePosition&&(this.instanceNode.setCssProp("display",""),n.Z.$(this.instanceNode.node.parentNode).setCssProp("display",""),this.setContainerCss(),this.changeSelectors(1).then((()=>{this.getSelectorsSize(),this.show()})))}get currentStylePosition(){return this.state===v.FULLSCREEN?this.options.fullscreenPosition:this.options.standardPosition}isSelectorsActionEnabled(){return this.isActionsEnabled}get shortSide(){return this._shortSide}sortSelectors(t,e){this.selectors=t.map((t=>this.selectors.find((e=>e.UUID===t)))),this.selectors.forEach(((t,e)=>{t.index=e}));for(let t=e-1;t>=0;t--)this.selectorsScroll.node.insertBefore(this.selectors[t].container.node,this.selectorsScroll.node.firstChild)}onResize(){this.isDone&&this._currentStylePosition&&!this.isDestroyed&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout((()=>{const t=this.activatedItem;this.clearAnimation(),this.getSizes(),this.calculateContainerScroll(),this.activateItem(t),this.normalizePositionValue(),this.jump(t,!0),this.show()}),100))}destroy(){this.isDestroyed=!0,clearTimeout(this.resizeTimeout),this.instanceNode.removeEvent("transitionend"),this.removeControl(),this.controlButton=null,this.off("selectorAction"),this.off("resize"),this.clearAnimation(),this.arrows&&(this.arrows.destroy(),this.arrows=null,this.off("arrowAction")),this.selectors.forEach((t=>{t.destroy()})),this.selectorsScroll.remove(),this.selectorsScroll=null,this.selectorsContainer.remove(),this.selectorsContainer=null,this.instanceNode.remove(),this.instanceNode=null,this.currentActiveItem=null,this.pinnedBlocksInited&&(this.baseSelectorsList=[],this.pinnedStartList=[],this.pinnedEndList=[],this.endPinnedNode=null,this.startPinnedNode=null,this.selectorsScrollContainer=null,this.pinnedStartList=null,this.pinnedEndList=null),super.destroy()}}const N=O},3423:(t,e,i)=>{i.a(t,(async(t,s)=>{try{i.d(e,{Z:()=>f});var n=i(3089),o=i(4274),r=i(9913),a=i(4186),l=i(3181),h=t([l]);l=(h.then?(await h)():h)[0];let d=null;try{d=(await Promise.resolve().then((()=>{if(!i.m[9840]){var t=new Error("Module '9840' is not available (weak dependency)");throw t.code="MODULE_NOT_FOUND",t}return i(9840)}))).default}catch(t){}let c=null;try{c=(await Promise.resolve().then((()=>{if(!i.m[6345]){var t=new Error("Module '6345' is not available (weak dependency)");throw t.code="MODULE_NOT_FOUND",t}return i(6345)}))).default}catch(t){}let u=null;try{u=(await Promise.resolve().then((()=>{if(!i.m[6577]){var t=new Error("Module '6577' is not available (weak dependency)");throw t.code="MODULE_NOT_FOUND",t}return i(6577)}))).default}catch(t){}let p=null;try{p=(await Promise.resolve().then((()=>{if(!i.m[3052]){var t=new Error("Module '3052' is not available (weak dependency)");throw t.code="MODULE_NOT_FOUND",t}return i(3052)}))).default}catch(t){}class m extends n.Z{constructor(t,e,i){super(),this.node=r.Z.$(t),this.options=e,this._type=a.mA.NONE,this.imgSrc=null,this.effect=null,this.additionalEffects=[],this.isStarted=!1,this.isPrepared=!1,this.toolOptions={},this.api={},this.isActive=!1,this.additionalOptions=i,this.parse(),this.setEvents()}static isExist(t){const e=(0,o.Z)(t),i={image:l.Z,spin:c,zoom:d,video:u,model:p},s=a.HB[e.type];return e&&!!i[s]&&("model"!==s||p.support())}createAPI(){var t=this;if(this.effect){this.api=this.effect.api;let e=[];const i=a.mA;switch(this._type){case i.SPIN:e=["play","rotate","rotateX","rotateY","zoomIn","zoomOut"];break;case i.ZOOM:this.api.zoomIn&&(e=["zoomIn","zoomOut"])}e.forEach((e=>{const i=this.api[e];this.api[e]=function(){let e=!1;const s=i;if(t.isActive){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];e=s.apply(t,o)}return e}}))}}setEvents(){this.on("stats",(t=>{t.stopEmptyEvent(),t.data.component=a.HB[this._type]})),this.on("componentEvent",(t=>{t.stopEmptyEvent(),t.data.component=a.HB[this._type],"ready"===t.data.type&&(this._type===a.mA.IMAGE&&null!==t.data.data.imageIndex&&t.stopAll(),this.toolOptions=this.effect.options)}))}parse(){const t=(0,o.Z)(this.node.node);t&&(this._type=t.type,this.imgSrc=t.imgSrc)}push(t){if(l.Z){const e=new l.Z(t,{options:this.options.image,isFullscreen:this.additionalOptions.isFullscreen,imageIndex:this.additionalEffects.length});e.parentClass=this,this.additionalEffects.push({node:t,src:r.Z.$(t).attr("src"),datasrc:r.Z.$(t).attr("data-src"),effect:e})}}sendEvent(t){this.effect&&this.effect.sendEvent&&this.effect.sendEvent(t)}resize(){this.broadcast("resize")}startFullInit(t){this.effect&&(this.effect.startFullInit(t?t[this._type]:null),this.additionalEffects.length&&this.additionalEffects.forEach((e=>{e.effect&&e.effect.startFullInit(t?t[this._type]:null)})))}getSelectorImgUrl(t){return this.effect.getSelectorImgUrl(t)}getInfoSize(){let t=null;return t=this._type===a.mA.IMAGE?new Promise(((t,e)=>{Promise.all([this.effect.getInfoSize()].concat(this.additionalEffects.map((t=>t.effect.getInfoSize())))).then((e=>{t(e[0])})).catch(e)})):this.effect.getInfoSize(),t}start(){if(this.isPrepared)return;this.isPrepared=!0;const t={isFullscreen:this.additionalOptions.isFullscreen,quality:this.additionalOptions.quality,hdQuality:this.additionalOptions.hdQuality,isHDQualitySet:this.additionalOptions.isHDQualitySet,always:this.additionalOptions.always,nativeFullscreen:this.additionalOptions.nativeFullscreen,goToFullscreen:this.additionalOptions.goToFullscreen,layout:this.additionalOptions.layout,aspectratio:this.additionalOptions.aspectratio},e=a.mA;switch(this._type){case e.IMAGE:l.Z&&(this.effect=new l.Z(this.node.node,Object.assign(t,{options:this.options.image,imageIndex:null})),this.effect.parentClass=this);break;case e.PANZOOM:case e.ZOOM:d&&(this.effect=new d(this.node.node,Object.assign(t,{options:this.options.zoom})),this.effect.parentClass=this);break;case e.SPIN:c&&(this.node.setCss({width:"100%",height:"100%"}),this.effect=new c(this.node.node,Object.assign(t,{options:this.options.spin})),this.effect.parentClass=this);break;case e.VIDEO:u&&(this.effect=new u(this.node.node,Object.assign(t,{options:this.options.video,nativeFullscreen:this.additionalOptions.nativeFullscreen})),this.effect.parentClass=this);break;case e.MODEL:p&&(this.effect=new p(this.node.node,Object.assign(t,{options:this.options.model})),this.effect.parentClass=this)}this.createAPI()}isThumbnailGif(){return!(!this.effect||this._type!==a.mA.SPIN)&&this.effect.isThumbnailGif()}isZoomSizeExist(){const t=a.mA;return!(!this.effect||![t.SPIN,t.PANZOOM,t.ZOOM].includes(this._type))&&this.effect.isZoomSizeExist()}startGettingInfo(){this.effect&&this.effect.startGettingInfo()}startTool(t,e,i){!this.isStarted&&this.effect&&(this.isStarted=!0,this.effect.run(t,e,i),this.additionalEffects.length&&this.additionalEffects.forEach((s=>{s.effect&&s.effect.run(t,e,i)})))}loadContent(){this.isStarted&&this.effect.loadContent()}loadThumbnail(){this.isStarted&&this.effect.loadThumbnail()}get type(){return this._type}getData(){let t={};return this.effect&&(t=Object.assign(t,this.api),delete t.start,delete t.stop,delete t.refresh),t}get originImageUrl(){return this.effect?this.effect.originImageUrl:null}getZoomData(){return[a.mA.SPIN,a.mA.ZOOM].includes(this._type)?{isZoomed:this.effect.isZoomed(),zoom:this.effect.getZoomData()}:null}getSpinOrientation(){return this._type===a.mA.SPIN?this.effect.orientation:null}getSocialButtonData(t,e){let i=null;return this.isStarted&&(i=this._type===a.mA.SPIN?this.effect.getSocialButtonData(t,e):this.effect.getSocialButtonData(t)),i}canFullscreen(){return this.effect.canFullscreen()}getSelectorProportion(){return this.effect.getSelectorProportion()}loadSources(){this.effect&&this.effect.addSources()}isEffectActive(){return!(!this.effect||"spin"!==this._type)&&this.effect.isActive()}activate(){this.isActive||(this.isActive=!0)}deactivate(){this.isActive=!1}getToolOptions(){return this.toolOptions}destroy(){this.effect&&(this.effect.destroy(),this.additionalEffects.length&&this.additionalEffects.forEach((t=>{t.effect?t.effect.destroy():!t.src&&t.datasrc&&t.node.removeAttribute("src")}))),this.toolOptions={},this.api={},this.isActive=!1,this.isStarted=!1,this.isPrepared=!1,this.off("stats"),this.off("componentEvent"),super.destroy()}}const f=m;s()}catch(t){s(t)}}),1)},558:(t,e,i)=>{i.a(t,(async(t,s)=>{try{i.d(e,{Z:()=>E});var n=i(4274),o=i(9680),r=i(5956),a=i(9913),l=i(3089),h=i(7456),d=i(6450),c=i(4186),u=i(5503),p=i(3423),m=i(450),f=i(9552),y=i(6272),v=t([p]);p=(v.then?(await v)():v)[0];const g=c.i2+"-can-zoom",S={top:0,left:0,width:"100%",height:"100%"},b=(t,e)=>new Promise((i=>{if(t=a.Z.$(t),void 0===e&&(e=10),e>0){const s=t.size;s.width&&s.height?i(s):setTimeout((()=>{b(t,e-=1).then(i)}),32)}else i(null)})),w=t=>{const e={type:"node",data:null};if(r.Z.isVideo(t))e.type=r.Z.getType(t),e.type||(e.data=a.Z.$new("div"));else{let i,s;if("img"===a.Z.$(t).tagName)i=t;else try{i=t.getElementsByTagName("img")[0]}catch(t){}i&&(s=(0,m.Z)(a.Z.$(i).attr("src"))||(0,m.Z)(a.Z.$(i).attr("data-src"))),s?(e.type="img",e.data=s):(i=t.cloneNode?t.cloneNode(!0):a.Z.$new("div"),e.data=i)}return e},C=t=>{let e=a.Z.$(t.node.querySelector(y.PJ));return e||(t.tagName===y.PJ?t:null)};class I extends l.Z{constructor(t,e,i,s){super(),this.$J_UUID=a.Z.$uuid(this),this.groups=(a.Z.$(t).attr("data-group")||"").split(/\s*(?:,|$)\s*/);const n=I.parse(t);this.id=n.id,this._enabled=n.enabled,this.type=n.type,this.url=n.url,this.slideContent=a.Z.$(t),this._index=e,this.isCustomAdded=s||!1,this._options={},this.options=i,this.instanceNode=a.Z.$new("div").addClass(c.i2+"-slide").setCss({position:"absolute"}),this.instanceNode.setCss(S),this.contentWrapper=a.Z.$new("div").addClass(c.i2+"-content"),this.contentWrapper.setCss(S),this.fullscreenOnlyNode=null,this.selector={UUID:this.$J_UUID,isCustom:!1,node:C(this.slideContent),isSirv:!1,isVideo:!1,selectorContent:null,size:{width:0,height:0},src:null,srcset:null,pinned:null,activated:!0,infoPromise:null,isStatic:!1},this.selector.isStatic=I.checkNonSirv(this.selector.node),this.selector.pinned=I.findPinnedSelectorSide(this.slideContent.node.querySelector(y.PJ)||this.slideContent.node),this.selector.isCustom=!!this.selector.node,this.thumbnailReferrerPolicy=this.getSelectorReferrerPolicy(),this.availableSlide=!0,this.fsButton=null,this.isStartedFullInit=!1,this.fullscreenState=c.UW.CLOSED,this.isStarted=!1,this.sirvService=null,this.componentSize=null,this.inView=!1,this.isActive=!1,this.isReady=!1,this.video=null,this.isVideoPaused=!1,this.isVideoReady=!1,this.slideShownBy=c.oc.NONE,this.componentLoader=null,this.infoSize=null,this.sizePromise=null,this.isInDom=0,this.multiImages=[],this.lastOriginNode=null,this.dataThumbnailImage=this.getThumbnailImage(),this.dataThumbnailHtml=this.slideContent.attr("data-thumbnail-html"),this.dataHiddenSelector=this.slideContent.hasAttribute("data-hidden-selector"),this.swipeDisabled=this.slideContent.hasAttribute("data-swipe-disabled"),this.spinWasInited=!1,this.socialbuttons=null,this.getVideoThumbnailPromise=null,this.isPlaceholder=!1,this.customThumbnailImageClassPromise=null;const o=this;this._api={get index(){return o.index},get component(){return o.sirvService?c.HB[o.sirvService.type]:"unknown"},get groups(){return o.groups},get thumbnail(){var t,e;return null!=(t=null==(e=o.selector.node)?void 0:e.node)?t:null},isDisabled:()=>!o.enabled,isActive:()=>o.isActive,getSelector(){return this.thumbnail}},this.sendEventCloseFullscreenByClick=t=>{t.stop(),this.emit("goToFullscreenOut")},this.beforeParseSlide(),this.parseSlide()}static findPinnedSelectorSide(t){if(t.hasAttribute("data-pinned")){const e=a.Z.$(t).attr("data-pinned");return"start"!==e?"end":e}return null}static parse(t){const e={node:(t=a.Z.$(t)).node,id:t.attr("data-id"),type:c.mA.HTML,url:null,enabled:!0};if(I.isSirvComponent(t)){const i=(0,n.Z)(t);e.type=i.type,e.url=i.imgSrc}else r.Z.isVideo(t)?(e.type=c.mA.VIDEO,e.url=r.Z.getSrc(t)):("img"===t.tagName||"div"===t.tagName&&t.attr("data-src"))&&(e.type=c.mA.IMAGE,e.url=t.attr("data-src")||t.attr("src"));const i=t.node.getAttribute("data-disabled");return(i&&"false"!==i||""===i)&&(e.enabled=!1),e}static checkNonSirv(t){return!(!t||"static"!==a.Z.$(t).attr("data-type"))}static isSirvComponent(t){const e=(t=a.Z.$(t)).attr("data-src"),i=t.attr("src"),s=I.checkNonSirv(t),n=t.tagName,o=t.fetch("view-content");return!(s||!(o||"div"===n&&!["youtube","vimeo"].includes(r.Z.getType(e))&&e||"img"===n&&(e||i)))}static hasComponent(t){return p.Z.isExist(t)}set aspectratio(t){this.instanceNode.node.style.setProperty("--"+c.i2+"-aspect-ratio",t)}setAspectratio(){var t,e;"grid"===this._options.layout&&"auto"===this._options.aspectratio&&(null!=(t=this.infoSize)&&t.width&&null!=(e=this.infoSize)&&e.height?this.aspectratio=this.infoSize.width/this.infoSize.height:this.aspectratio=1)}createFullscreenButton(){this.videoSlide||(this.fsButton=new f.Z(f.Z.STANDARD),this.instanceNode.append(this.fsButton.node),this.fsButton.onClick((()=>this.emit("goToFullscreen",{data:{UUID:this.$J_UUID,index:this._index}}))))}setZeroFont(t){var e;(null==(e=this.sirvService)?void 0:e.type)===c.mA.IMAGE&&this.contentWrapper.setCssProp("font-size",t?0:"")}isSwipeDisabled(){return this.swipeDisabled}getThumbnailImage(){let t=this.slideContent.attr("data-thumbnail-image");if(!t&&this.selector.isCustom&&(t=this.selector.node.attr("data-src"),!t)){const e=this.selector.node.node.children;1===e.length&&"img"===a.Z.$(e[0]).tagName&&(t=a.Z.$(e[0]).attr("data-src")||a.Z.$(e[0]).attr("src"))}return t}startGettingInfo(){this.sirv&&this.sirvService.startGettingInfo()}loadContent(){this.sirv&&this.getSlideSize().then((t=>{this.isInDom&&this.sirvService.loadContent()})).catch((t=>{}))}loadThumbnail(){this.sirv&&this.getSlideSize().then((t=>{this.isInDom&&this.sirvService.loadThumbnail()})).catch((t=>{}))}get videoSlide(){return this.sirv?this.sirvService.type===c.mA.VIDEO:this.video}belongsTo(t){return!!t&&(a.Z.isString(t)&&(t=[t]),t.some((t=>this.groups.includes(t))))}get customSelector(){return this.selector.isCustom}single(t){this.sirv&&this.broadcast("isSingleSlide",{data:{isSingle:t}})}set index(t){this._index=t}get index(){return this._index}canFullscreen(){return this.sirv?this.sirvService.canFullscreen():!this.video}checkReadiness(t,e){return!(!this.sirv||c.HB[this.sirvService.type]!==e)&&("init"===t?this.spinWasInited:this.isReady)}sendReadyEvent(t,e){this.sirv&&c.HB[this.sirvService.type]===e&&this.sirvService.sendEvent(t)}createFullscreenOnlyScreen(){this._options.fullscreenOnly&&(this.fullscreenOnlyNode=a.Z.$new("div").addClass(c.i2+"-fullscreen-always"),this.fullscreenOnlyNode.addEvent(["btnclick","tap"],(t=>{t.stop(),this.emit("goToFullscreen",{data:{UUID:this.$J_UUID,index:this._index}})})),this.createPinchEvent(this.fullscreenOnlyNode),this.instanceNode.append(this.fullscreenOnlyNode,"top"))}createPinchEvent(t){if(!a.Z.browser.touchScreen)return;t.addEvent("pinch",(t=>{t.stop(),"pinchend"===t.state&&0===this.fullscreenState&&t.scale>=2&&this.emit("goToFullscreen")}))}get enabled(){return this._enabled}disable(){this._enabled=!1,this.video&&this.video.pause(),this.componentLoader&&this.componentLoader.hide(!0)}enable(){this._enabled=!0}get blokedTouchdrag(){return!!this.sirv&&(!![c.mA.SPIN,c.mA.MODEL].includes(this.sirvService.type)||this.sirvService.isEffectActive())}set options(t){this._options=Object.assign({spin:{},zoom:{},image:{},video:{},model:{},fullscreenOnly:!1},t||{})}dragEvent(t){this.sirvService&&this.broadcast("dragEvent",{data:{type:t}})}startFullInit(t){this.isStartedFullInit||(this.isStartedFullInit=!0,t&&(this.options=t),this.setAspectratio(),"grid"===this._options.layout&&this._options.isFullscreen&&this.createFullscreenButton(),this.sirvService&&this.sirvService.startFullInit(t?this._options:null),this.hide(),this.instanceNode.append(this.contentWrapper),this.sirv||this.appendToDOM())}createComponentLoader(){this.componentLoader||(this.componentLoader=new h.Z(this.instanceNode),this.componentLoader.show())}get slideAvailable(){return this.availableSlide}get selectorPinned(){return["start","end"].includes(this.selector.pinned)}get pinnedSelectorSide(){return this.selector.pinned}setFullscreenEvents(){this.on("beforeFullscreenIn",(t=>{var e,i;this.fullscreenState===c.UW.OPENING?t.stopPropagation():(this.aspectratio="",this.fullscreenState=c.UW.OPENING,this.video&&(this.isVideoPaused=this.video.paused,this.video.onBeforeFullscreenIn())),null==(e=this.fsButton)||e.disable(),null==(i=this.fsButton)||i.hide(),this.fullscreenOnlyNode&&this.fullscreenOnlyNode.setCssProp("display","none"),this.addEventCloseFullscreenByClick()})),this.on("afterFullscreenIn",(t=>{this.socialbuttons&&this.socialbuttons.closeButtons(),this.fullscreenState===c.UW.OPENED?t.stopPropagation():(this.fullscreenState=c.UW.OPENED,this.sirv&&this.componentLoader.isHiding()&&this.componentLoader.hide(!0),this.video&&(this.video.onAfterFullscreenIn(),!this.video.autoplay&&this.video.preStart||this.playVideo()))})),this.on("beforeFullscreenOut",(t=>{this.socialbuttons&&this.socialbuttons.closeButtons(),this.fullscreenState===c.UW.CLOSING?t.stopPropagation():(this.fullscreenState=c.UW.CLOSING,this.setAspectratio(),this.video&&(this.isVideoPaused=this.video.paused,this.video.onBeforeFullscreenOut())),this.fullscreenOnlyNode&&this.fullscreenOnlyNode.setCssProp("display","")})),this.on("afterFullscreenOut",(t=>{var e,i;this.fullscreenState===c.UW.CLOSED?t.stopPropagation():(this.fullscreenState=c.UW.CLOSED,this.video&&(this.video.onAfterFullscreenOut(),!this.video.autoplay&&this.video.preStart||this.playVideo())),null==(e=this.fsButton)||e.enable(),null==(i=this.fsButton)||i.show(),this.removeEventCloseFullscreeByClick()})),this.on("inView",(t=>{this.inView=t.data,this.video&&(this.inView?(!this.isVideoPaused&&!this.video.preStart||this.video.autoplay)&&this.playVideo():(this.isVideoPaused=this.video.paused,this.video.getCurrentTime(),this.video.pause()))}))}addEventCloseFullscreenByClick(){this._options.fullscreenOnly&&this.type===c.mA.IMAGE&&(this.contentWrapper.addEvent(["btnclick","tap"],this.sendEventCloseFullscreenByClick),this.slideContent.addEvent(["btnclick","tap"],this.sendEventCloseFullscreenByClick))}removeEventCloseFullscreeByClick(){this._options.fullscreenOnly&&this.type===c.mA.IMAGE&&(this.contentWrapper.removeEvent(["btnclick","tap"],this.sendEventCloseFullscreenByClick),this.slideContent.removeEvent(["btnclick","tap"],this.sendEventCloseFullscreenByClick))}get sirv(){return!!this.sirvService}get node(){return this.instanceNode}get originNode(){return this.lastOriginNode||this.slideContent}get originImageUrl(){return this.sirv?this.sirvService.originImageUrl:null}zoomIn(t,e){this.broadcast("zoomUp",{data:{x:t,y:e}})}zoomOut(t,e){this.broadcast("zoomDown",{data:{x:t,y:e}})}mouseAction(t,e){this.sirv&&this.broadcast("mouseAction",{data:{type:t,originEvent:e}})}get zoomData(){return this.sirv?this.sirvService.getZoomData():null}get slideType(){return this.sirv?this.sirvService.type:null}get options(){return this.sirv?this.sirvService.getToolOptions():{}}createSlideApi(){this.sirv&&!this.isStarted&&(this.isStarted=!0,this.api[c.HB[this.sirvService.type]]=this.sirvService.getData())}beforeShow(){this.isActive=!0,this.show(),this.sirv&&(this.sirvService.activate(),this.broadcast("beforeStartActions")),this.createSlideApi()}afterShow(t){this.slideShownBy=t||c.oc.NONE,this.broadcast("startActions",{who:this.slideShownBy}),this.video&&this.video.autoplay&&this.playVideo()}beforeHide(){this.video?this.video.pause():this.broadcast("stopActions")}afterHide(){this.slideShownBy=c.oc.NONE,this.isActive=!1,this.hide(),this.sirv&&(this.sirvService.deactivate(),this.broadcast("afterStopActions")),this.socialbuttons&&this.socialbuttons.closeButtons()}show(){this.instanceNode.removeClass(c.i2+"-hidden"),this.instanceNode.addClass(c.i2+"-shown")}hide(){this.instanceNode.removeClass(c.i2+"-shown"),this.instanceNode.addClass(c.i2+"-hidden")}get zoomSizeExist(){return!!this.sirv&&this.sirvService.isZoomSizeExist()}startTool(t,e,i){this.getSlideSize().then((s=>{const n={data:{slide:{index:this._index}}};this.sirv&&this.isInDom&&this.sirvService?(this.sirvService.startTool(t||this.isActive,e,i),this.setZeroFont(!1)):this.emit("contentLoaded",n)})).catch((t=>{}))}getSlideSize(){return this.sizePromise||(this.sizePromise=new Promise(((t,e)=>{if(this.sirv){const i={UUID:this.$J_UUID};this.sirvService.getInfoSize().then((e=>{!this.infoSize&&e.size&&(this.infoSize=e.size,this.setAspectratio()),i.size=this.infoSize,t(i)})).catch((s=>{if(i.error=!0,this.sirvService){const n=this.sirvService.type;if(this.removeSirvService(),s&&s.error&&s.error.status&&404===s.error.status)i.error=s.error,e(i);else if(s&&("changeSpinToImage"===s.error||n===c.mA.IMAGE||s.isPlaceholder)){if(this.isPlaceholder=s.isPlaceholder,n===c.mA.IMAGE){this.isInDom=0,this.appendToDOM();const t=w(this.slideContent.node);this.selector.isCustom||(this.selector.src=t?t.data:null,this.selector.isSirv=!1)}else this.changeSpinToImage();const i=this.sizePromise;this.sizePromise=null;const o=this.getSlideSize();this.sizePromise=i,o.then(t).catch(e)}else i.error={status:404},e(i)}else i.error={status:404},e(i)})).finally((()=>{this.isCustomAdded&&this.emit("infoReady",{data:{index:this._index}})}))}else{let i,s;if("img"===this.slideContent.tagName)i=this.slideContent.node;else try{i=this.slideContent.node.getElementsByTagName("img")[0]}catch(t){}i&&(s=(0,m.Z)(a.Z.$(i).attr("src"))||(0,m.Z)(a.Z.$(i).attr("data-src"))),s?(0,o.Z)(s).then((e=>{this.infoSize=e.size,this.setAspectratio(),t({size:this.infoSize,UUID:this.$J_UUID})})).catch((t=>{e({size:this.infoSize,UUID:this.$J_UUID,error:{status:404}})})):this.video?this.video.getSize().then((e=>{this.infoSize=e||{width:0,height:0},this.setAspectratio(),t({size:this.infoSize,UUID:this.$J_UUID})})).catch((t=>{e({size:this.infoSize,UUID:this.$J_UUID,error:t})})):b(this.slideContent.node).then((e=>{this.infoSize=e||{width:0,height:0},this.setAspectratio(),t({size:this.infoSize,UUID:this.$J_UUID})})).catch((t=>{e({size:this.infoSize,UUID:this.$J_UUID,error:t})}))}}))),this.sizePromise}get api(){return this._api}removeSirvService(){this.infoSize=null,this.slideContent&&this.slideContent.remove(),this.selector.node&&this.selector.node.removeAttr("data-type"),this.sirvService&&(this.sirvService.destroy(),this.sirvService=null),this.selector.isSirv=!1,this.off("stats"),this.off("componentEvent"),this.off("beforeFullscreenIn"),this.off("afterFullscreenIn"),this.off("beforeFullscreenOut"),this.off("afterFullscreenOut"),this.componentLoader&&(this.componentLoader.hide(!0),this.componentLoader.destroy(),this.componentLoader=null),this.fullscreenOnlyNode&&(this.fullscreenOnlyNode.kill(),this.fullscreenOnlyNode=null)}changeSpinToImage(){if(this.slideContent.removeClass(c.i2+"-component"),this.contentWrapper.removeClass(c.i2+"-content-"+c.HB[this.slideType]),this.lastOriginNode=this.slideContent,this.slideContent=a.Z.$new("img",{"data-src":this.slideContent.attr("data-src")}),this.slideContent.addClass(c.i2+"-component"),this.parseSlide(),this.isInDom=0,this.appendToDOM(),this.isPlaceholder){const t=w(this.slideContent);this.selector.isCustom||(this.selector.src=t?t.data:null)}this.selector.node&&!this.selector.isCustom&&this.selector.node.attr("data-type",c.HB[this.slideType]),this.isStartedFullInit&&(this.isStartedFullInit=!1,this.startFullInit())}scrollIntoView(){this.instanceNode.node.scrollIntoView({behavior:"smooth"})}setSirvEvents(){this.on("stats",(t=>{t.stopEmptyEvent(),t.data.index=this._index})),this.on("error",(t=>{t.stopEmptyEvent(),t.data.UUID=this.$J_UUID})),this.on("goToFullscreen",(t=>{t.stopEmptyEvent(),t.data||(t.data={}),t.data.UUID=this.$J_UUID,t.data.index=this._index})),this.on("componentEvent",(t=>{t.stopEmptyEvent();const e=t.data.data;var i,s;(e.type=t.data.type,e.node=this.slideContent,"ready"===t.data.type)&&(this.isReady=!0,null==(i=this.fsButton)||i.enable(),null==(s=this.fsButton)||s.show());if(t.data.slide=this.api,t.data.componentEventData=e,[c.HB[c.mA.SPIN],c.HB[c.mA.MODEL]].includes(t.data.component)){if("init"===t.data.type&&(this.componentLoader.hide(),t.data.component===c.HB[c.mA.SPIN])){this.spinWasInited=!0;const t={row:"x",col:"y",bidir:"xy"};this.selector.node&&this.selector.node.addClass(t[this.sirvService.getSpinOrientation()]||"")}}else"ready"===t.data.type&&this.componentLoader.hide();"ready"===t.data.type&&["spin","zoom"].includes(t.data.component)&&this.sirvService.isZoomSizeExist()&&this.contentWrapper.addClass(g)}))}getLinkSocialButton(t,e,i){return i?this.sirv?this.sirvService.getSocialButtonData(t,this.api.component===c.HB[c.mA.SPIN]):"iframe"===this.slideContent.tagName?this.video.node.attr("data-src"):this.slideContent.attr("data-src"):null}searchImagesInHtmlContent(){const t=Array.from(this.slideContent.node.querySelectorAll("img"));t.length&&(this.multiImages=t.map(((t,e)=>{const i=!I.checkNonSirv(t);if(i)if(this.sirvService)this.sirvService.push(t);else{this.setSirvEvents(),this.selector.isSirv=!0;const{quality:e,hdQuality:i,isHDQualitySet:s,isFullscreen:n,nativeFullscreen:o,fullscreenOnly:r,goToFullscreen:a,layout:l,aspectratio:h}=this._options;this.sirvService=new p.Z(t,this._options,{quality:e,hdQuality:i,isHDQualitySet:s,always:r,isFullscreen:n,nativeFullscreen:o,goToFullscreen:a,layout:l,aspectratio:h}),this.sirvService.parentClass=this,this.sirvService.start(),this.createSlideApi()}return{isSirv:i,node:t,src:a.Z.$(t).attr("src"),datasrc:a.Z.$(t).attr("data-src")}})))}isCustomSlideEmpty(){if(this.customSelector){const t=this.slideContent.node.querySelector(y.PJ);if(t){a.Z.$(t).remove();const e=Array.from(this.slideContent.node.children).length;if(this.slideContent.append(t),I.isSirvComponent(this.slideContent)&&I.hasComponent(this.slideContent)&&!this.isPlaceholder||e||r.Z.isVideo(this.slideContent))return!1}}return!0}beforeParseSlide(){this.customSelector&&(this.isCustomSlideEmpty()&&(this.availableSlide=!1,this.selector.activated=!1),this.selector.node.remove())}createImgFromDiv(){if("div"===this.slideContent.tagName&&this.type===c.mA.IMAGE){const t=this.slideContent;this.slideContent=a.Z.$new("img"),this.slideContent.attr("data-src",this.url);let e=t.attr("alt");e&&this.slideContent.attr("alt",e),e=t.attr("title"),e&&this.slideContent.attr("title",e),e=t.attr("data-alt"),e&&this.slideContent.attr("data-alt",e),e=t.attr("data-referrerpolicy"),e&&this.slideContent.attr("data-referrerpolicy",e)}}parseSlide(){if(I.isSirvComponent(this.slideContent)&&I.hasComponent(this.slideContent)&&!this.isPlaceholder){this.setSirvEvents(),this.createImgFromDiv();const{quality:t,hdQuality:e,isHDQualitySet:i,isFullscreen:s,nativeFullscreen:n,fullscreenOnly:o,goToFullscreen:r,layout:a,aspectratio:l}=this._options;this.sirvService=new p.Z(this.slideContent.node,this._options,{quality:t,hdQuality:e,isHDQualitySet:i,always:o,isFullscreen:s,nativeFullscreen:n,goToFullscreen:r,layout:a,aspectratio:l}),this.sirvService.parentClass=this,this.selector.isSirv=!0,this.sirvService.start(),this.createSlideApi(),this.selector.isVideo=this.sirvService.type===c.mA.VIDEO,this.contentWrapper.addClass(c.i2+"-content-"+c.HB[this.slideType])}else this.createImgFromDiv(),this.searchImagesInHtmlContent(),r.Z.isVideo(this.slideContent)&&(this.selector.isVideo=!0,this.initVideo(),this.contentWrapper.addClass(c.i2+"-content-video")),this.setZeroFont(!0);(this.dataThumbnailImage||this.dataThumbnailHtml)&&(this.selector.isSirv=!1)}appendToDOM(){this.isInDom||(this.isInDom=1,this.createFullscreenOnlyScreen(),this.sirv||this.video?(this.createComponentLoader(),this.video?this.contentWrapper.append(this.video.node):this.contentWrapper.append(this.slideContent)):("img"===this.slideContent.tagName&&(this.contentWrapper.addClass(c.i2+"-slide-img"),(0,m.Z)(this.slideContent.attr("src"))||this.slideContent.attr("src",this.slideContent.attr("data-src"))),this.multiImages.forEach((t=>{!t.src&&t.datasrc&&a.Z.$(t.node).attr("src",t.datasrc)})),this.contentWrapper.append(this.slideContent)),this.setFullscreenEvents())}afterAddingDom(){this.video&&this.video.init(),this.sirv&&[c.mA.VIDEO,c.mA.MODEL].includes(this.sirvService.type)&&this.sirvService.loadSources()}secondSelectorClick(){this.sirv?this.broadcast("secondSelectorClick",{data:{slideIndex:this._index}}):this.video&&this.video.pause()}isSirvSelector(){return!this.selector.isCustom&&(this.sirv&&this.sirvService.type!==c.mA.VIDEO)}getSelectorProportion(){return this.dataThumbnailImage?new Promise(((t,e)=>{this.getResponsiveImage().then((()=>t(Object.assign({},this.selector)))).catch((i=>{(0,o.Z)(this.dataThumbnailImage).then((e=>{this.selector.size=e.size,t(Object.assign({},this.selector))})).catch((t=>{e(t)}))}))})):this.video?this.getNonSirvVideoThumbnail():this.sirv&&this.sirvService.type===c.mA.MODEL?this.sirvService.getSelectorProportion():this.getSlideSize()}getSelectorReferrerPolicy(){const t="no-referrer-when-downgrade";if(this.selector.isCustom){if(this.selector.node.hasAttribute("data-referrerpolicy"))return this.selector.node.attr("data-referrerpolicy");const e=Array.from(this.selector.node.node.children).filter((t=>"img"===a.Z.$(t).tagName));if(1===e.length)return a.Z.$(e[0]).attr("referrerpolicy")||t}return this.slideContent.attr("data-referrerpolicy")||this.slideContent.attr("referrerpolicy")||t}getResponsiveImage(){return this.customThumbnailImageClassPromise||(this.customThumbnailImageClassPromise=new Promise(((t,e)=>{const i=new d.Z(this.dataThumbnailImage);i.loadInfo().then((e=>{this.selector.isSirv=!0,this.selector.size=i.originSize,t(i)})).catch(e)}))),this.customThumbnailImageClassPromise}getSirvThumbnailForCustomSelector(t){return new Promise(((e,i)=>{this.getResponsiveImage().then((i=>{const s=i.getThumbnail(t);s.referrerpolicy=this.thumbnailReferrerPolicy,e(s)})).catch(i)}))}getSelectorImgUrl(t,e,i,s){const n={crop:i,watermark:s};e.width&&(n.width=e.width),e.height&&(n.height=e.height);const o=t=>(t.src&&(this.selector.src=t.src),t.srcset&&(this.selector.srcset=t.srcset),Object.assign({},t,this.selector));return new Promise(((t,e)=>{const i=()=>{this.selector.isCustom&&this.dataThumbnailImage?this.selector.isStatic?t(Object.assign({},this.selector)):this.getSirvThumbnailForCustomSelector(n).then((e=>t(o(e)))).catch((()=>t(Object.assign({},this.selector)))):"img"===this.slideContent.tagName||this.multiImages.length?t(Object.assign({},this.selector)):this.video&&this.getNonSirvVideoThumbnail().then(t).catch(e)};this.sirv?this.sirvService.getInfoSize().then((i=>{this.selector.isCustom?this.selector.isStatic?t(Object.assign({},this.selector)):this.getSirvThumbnailForCustomSelector(n).then((e=>t(o(e)))).catch((()=>t(Object.assign({},this.selector)))):this.sirvService.getSelectorImgUrl(n).then((e=>{e.referrerpolicy=this.thumbnailReferrerPolicy,t(o(e))})).catch(e)})).catch((()=>{this.selector.isCustom?i():e()})):i()}))}getNonSirvVideoThumbnail(){return this.getVideoThumbnailPromise||(this.getVideoThumbnailPromise=new Promise(((t,e)=>{r.Z.getImageSrc(this.slideContent,!0).then((e=>{this.selector.isCustom||(this.selector.src=e.thumbnail.url,this.selector.size={width:e.thumbnail.width,height:e.thumbnail.height}),t(Object.assign({},this.selector))})).catch((t=>{t&&!0!==t?t.UUID=this.$J_UUID:t={UUID:this.$J_UUID},e(t)}))}))),this.getVideoThumbnailPromise}get spinInited(){return this.spinWasInited}get slideReady(){return this.isReady}get selectorData(){if(this.dataHiddenSelector)return null;if(this.selector.node||(this.selector.node=a.Z.$new(y.PJ).addClass(y.lW)),this.dataThumbnailImage){const t=this.slideType;null!==t&&this.selector.node.attr("data-type",c.HB[t]),this.selector.src=this.dataThumbnailImage,this.selector.isStatic||(this.selector.infoPromise=new Promise((t=>{this.getResponsiveImage().catch((t=>{})).finally((()=>{t(this.selector.isSirv,this.selector.size)}))})))}else if(this.dataThumbnailHtml)this.selector.selectorContent=a.Z.$new("div").changeContent(this.dataThumbnailHtml).node.firstChild,this.selector.node.attr("data-type","html");else if(this.selector.isCustom)this.selector.node.attr("data-type","html"),this.selector.selectorContent=this.selector.node;else if(this.sirv){const t=this.slideType;this.selector.node.attr("data-type",c.HB[t]),t===c.mA.SPIN&&this.sirvService.isThumbnailGif()&&this.selector.node.addClass("spin-thumbnail-gif")}else{const t=w(this.slideContent.node);["youtube","vimeo","video"].includes(t.type)?this.selector.node.attr("data-type",t.type):"img"===t.type?this.selector.src=t.data:(this.selector.selectorContent=t.data,this.selector.node.attr("data-type","html"))}return this.selector.isCustom&&this.selector.node.addClass(c.i2+"-custom-thumbnail"),this.selector.disabled=!this._enabled,this.selector}get UUID(){return this.$J_UUID}get slideActive(){return this.isActive}playVideo(){this.isActive&&this.inView&&this.video&&(this.fullscreenState===c.UW.OPENED||[c.oc.AUTOPLAY,c.oc.USER,c.oc.INIT].includes(this.slideShownBy))&&this.video.play()}initVideo(){this.on("slideVideoReady",(t=>{var e,i;(t.stop(),this.isVideoReady)||(this.isVideoReady=!0,this.isReady=!0,this.video.show(),this.componentLoader.hide(),null==(e=this.fsButton)||e.enable(),null==(i=this.fsButton)||i.show());!this.video.autoplay&&this.video.preStart||this.playVideo()})),this.on("slideVideoPlay",(t=>{t.data.slide=this.api,this.isVideoPaused&&!this.video.autoplay&&this.video.pause(),this.isVideoPaused=!1})),this.on("slideVideoPause",(t=>{t.data.slide=this.api})),this.on("slideVideoEnd",(t=>{t.data.slide=this.api})),this.on("slideVideoError",(t=>{t.data.UUID=this.$J_UUID}));const t=this._options.video;switch(r.Z.getType(this.slideContent)){case"youtube":this.video=new u.Z.YouTubeVideo(this.slideContent,t);break;case"vimeo":this.video=new u.Z.VimeoVideo(this.slideContent,t);break;case"video":this.video=new u.Z.HTMLVideo(this.slideContent,t)}this.video.parentClass=this}resize(){if(this._enabled&&this.sirvService){this.sirvService.resize();const t=c.mA;this.isReady&&[t.SPIN,t.ZOOM].includes(this.slideType)&&(this.sirvService.isZoomSizeExist()?this.contentWrapper.addClass(g):this.contentWrapper.removeClass(g))}}destroy(){var t;this.sirvService?(this.sirvService.destroy(),this.sirvService=null,this.off("stats"),this.off("error"),this.off("goToFullscreen"),this.off("componentEvent")):this.multiImages.forEach((t=>{!t.src&&t.datasrc&&t.node.removeAttribute("src")})),null==(t=this.fsButton)||t.destroy(),this.fsButton=null,this.slideContent.del("view-content"),this.removeEventCloseFullscreeByClick(),this.sendEventCloseFullscreenByClick=null,this.lastOriginNode&&(this.slideContent.remove(),this.slideContent=this.lastOriginNode,this.lastOriginNode=null),this.fullscreenOnlyNode&&(this.fullscreenOnlyNode.kill(),this.fullscreenOnlyNode=null),this.off("beforeFullscreenIn"),this.off("afterFullscreenIn"),this.off("beforeFullscreenOut"),this.off("afterFullscreenOut"),this.off("inView"),this.video&&(this.off("slideVideoReady"),this.off("slideVideoPlay"),this.off("slideVideoPause"),this.off("slideVideoEnd"),this.off("slideVideoError"),this.video.destroy()),this.video=null,this.componentLoader&&(this.componentLoader.destroy(),this.componentLoader=null),this.socialbuttons&&this.socialbuttons.destroy(),this.sizePromise=null,this.componentSize=null,this.contentWrapper.remove(),this.contentWrapper=null,this.instanceNode.remove(),this.instanceNode=null,this.slideContent=null,this.isReady=!1,this.availableSlide=null,super.destroy()}}const E=I;s()}catch(t){s(t)}}))},5503:(t,e,i)=>{i.d(e,{Z:()=>p});var s=i(6031),n=i(9910),o=i(5956),r=i(9913),a=i(866),l=i(3089),h=i(4186),d=i(2022);const c=t=>{const e=(t=r.Z.$(t)).attr("data-src");return e?(t.attr("data-src",e.split("?")[0]),t.removeAttr("src")):t.node.src=t.node.src.split("?")[0],t};class u extends l.Z{constructor(t,e){var i;super(),i=this,this._node=r.Z.$(t),this.instanceOptions=((t,e)=>{const i=new r.Z.Options(a.Z);return i.fromJSON(e.common.common),i.fromString(e.local.common),i.fromString(t.attr("data-options")||""),r.Z.browser.touchScreen&&r.Z.browser.mobile&&(i.fromJSON(e.common.mobile),i.fromString(e.local.mobile),i.fromString(t.attr("data-mobile-options")||"")),i})(this._node,e),this.option=function(){return arguments.length>1?i.instanceOptions.set(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]):i.instanceOptions.get(arguments.length<=0?void 0:arguments[0])},this.type="video",this.player=null,this.state=h.pX.NONE,this.isReady=!1,this.isShown=!1,this.id=null,this.playDebounce=null,this.currentTime=0,this.videoNode=r.Z.$new("div"),this.videoWrapper=r.Z.$new("div").addClass(h.i2+"-video").setCss({transition:"opacity .3 linear"}),Array.from(this._node.node.attributes).forEach((t=>{["class","style"].includes(t.name)||this.videoWrapper.attr(t.name,t.value)})),this.videoWrapper.attr("data-video-type",this.type),this.fullscreen=this.option("controls.fullscreen"),this.hide()}get autoplay(){return this.option("autoplay")}setBackground(){this.option("controls.enable",!1),this.option("loop",!0),this.option("autoplay",!0)}onBeforeFullscreenIn(){this.getCurrentTime(),this.fullscreen=!1}onAfterFullscreenIn(){}onBeforeFullscreenOut(){this.getCurrentTime(),this.fullscreen=this.option("controls.fullscreen")}onAfterFullscreenOut(){}getSize(){return new Promise((t=>{const e=this.videoWrapper.size;e.width&&e.height?t(e):o.Z.getAspectRatio(this._node).then((i=>{e.width?e.height=e.width*i:e.width=e.height/i,t(e)})).catch((()=>{t(null)}))}))}createPlayer(t){return this.player={ready:!0,play:()=>{this.playDebounce()},pause:()=>{this.player.player.node.pause()},player:this._node},this.playDebounce=(0,s.Z)((()=>{this.player.player.node.play()}),100),this.option("loop")?this.player.player.attr("loop","loop"):this.player.player.removeAttr("loop"),this.player.player.attr("playsinline","playsinline"),this.option("controls.enable")?this.player.player.attr("controls","controls"):this.player.player.removeAttr("controls"),this.autoplay?(this.player.player.volume=0,this.player.player.attr("muted","muted")):this.player.player.volume=this.option("volume")/100,this.player.player.attr("preload",this.option("preload")?"auto":"none"),this.addEvents(),this.emit("slideVideoReady",{data:{type:this.type,error:null}}),Promise.resolve()}get node(){return this.videoWrapper}init(){"video"===this.type&&((0,d.Z)(this._node),"gecko"===r.Z.browser.engine&&Array.from(this._node.node.children).forEach((t=>{(t=r.Z.$(t))&&"source"===t.tagName&&t.node.parentNode.load()})),this.videoNode=this._node),this.id=this.type+"-"+(0,n.Z)(),this.videoNode.attr("id",this.id),this.videoWrapper.append(this.videoNode);const t={type:this.type,error:null};o.Z.getAPI(this._node).then((e=>{this.createPlayer(e).then((()=>{t.error=!1})).catch((e=>{t.error=!!e})).finally((()=>{this.isReady=!0}))})).catch((e=>{t.error=!0,this.emit("slideVideoReady",{data:t})}))}addEvents(){this.player.player.addEvent("play",(t=>{t.stop(),this.state=h.pX.PLAY,this.emit("slideVideoPlay",{data:{type:this.type}})})),this.player.player.addEvent("pause",(t=>{t.stop(),this.state=h.pX.PAUSE,this.emit("slideVideoPause",{data:{type:this.type}})})),this.player.player.addEvent("ended",(t=>{t.stop(),this.state=h.pX.PAUSE,this.emit("slideVideoEnd",{data:{type:this.type}})})),this.player.player.addEvent("error",(t=>{t.stop(),this.emit("slideVideoError",{data:{type:this.type,error:t.oe}})}))}play(){this.player&&this.player.ready&&(this.setCurrentTime(),this.player.play())}pause(){this.player&&this.player.ready&&this.player.pause()}getCurrentTime(){this.player&&this.player.player&&(this.currentTime=this.player.player.currentTime)}setCurrentTime(){this.player&&this.player.ready&&(this.player.player.currentTime=this.currentTime)}get preStart(){return this.state===h.pX.NONE}get paused(){return this.state===h.pX.PAUSE}show(){this.isShown=!0,this.videoWrapper.setCssProp("opacity",1)}hide(){this.isShown=!1,this.videoWrapper.setCssProp("opacity",0)}destroy(){this.playDebounce&&(this.playDebounce.cancel(),this.playDebounce=null),this.pause(),this.videoWrapper.remove(),this._node=c(this._node),"video"===this.type&&Array.from(this._node.node.children).forEach((t=>{"source"===r.Z.$(t).tagName&&c(t)})),super.destroy()}}const p={HTMLVideo:u,YouTubeVideo:class extends u{constructor(t,e){super(t,e),this.type="youtube",this.playerState=-1,this.videoWrapper.attr("data-video-type",this.type),this.apiPlayer=null,this.option("background")&&(super.setBackground(),this.videoWrapper.setCss({"pointer-events":"none"}))}setCurrentTime(){this.player&&this.player.ready&&this.player.player.seekTo(this.currentTime)}getCurrentTime(){this.player&&this.player.player&&(this.player.player.getCurrentTime?this.currentTime=this.player.player.getCurrentTime():this.currentTime=0)}destroyVideoPlayer(){this.getCurrentTime(),this.player&&this.player.player&&(this.player.ready=!1,this.player.player.destroy()),this.playerState=-1}onBeforeFullscreenIn(){this.fullscreen=!1,this.destroyVideoPlayer()}onAfterFullscreenIn(){this.createPlayer(this.apiPlayer)}onBeforeFullscreenOut(){this.fullscreen=this.option("controls.fullscreen"),this.destroyVideoPlayer()}onAfterFullscreenOut(){this.createPlayer(this.apiPlayer)}createPlayer(t){return this.apiPlayer=t,new Promise(((e,i)=>{var s;const n=o.Z.getId(this._node);this.player={ready:!1,play:()=>{this.player.player.playVideo()},pause:()=>{this.player.player.pauseVideo()},player:new t.Player(this.id,{videoId:n,host:"https://www.youtube.com",playerVars:{playlist:n,fs:this.fullscreen?1:0,rel:0,loop:this.option("loop")?1:0,autoplay:0,mute:this.autoplay?1:0,playsinline:1,controls:this.option("controls.enable")?1:0,disablekb:this.option("background")?1:0,origin:window.location.origin},events:{onReady:()=>{this.playerState=-1,this.player.ready=!0,this.player.player.setVolume(this.option("volume")),this.emit("slideVideoReady",{data:{type:this.type,error:null}}),e()},onError:t=>{100===t.data&&(this.player=null),i(!0)},onStateChange:this.addEvents.bind(this)}})},null!=(s=this.player.player.h.attributes)&&s.sandbox&&(this.player.player.h.attributes.sandbox.value="allow-same-origin allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation")}))}addEvents(t){const e=(t.target||t.target).getPlayerState();switch(this.playerState=e,this.state===h.pX.PLAY&&(this.state=h.pX.PAUSE),e){case-1:break;case 0:this.option("loop")||this.player.pause(),this.emit("slideVideoEnd",{data:{type:this.type}});break;case 1:this.state=h.pX.PLAY,this.emit("slideVideoPlay",{data:{type:this.type}});break;case 2:this.state=h.pX.PAUSE,this.emit("slideVideoPause",{data:{type:this.type}})}}destroy(){super.destroy(),this.player&&this.player.player&&(this.player.player.destroy(),this.player.player=null)}},VimeoVideo:class extends u{constructor(t,e){super(t,e),this.type="vimeo",this.apiPlayer=null,this.videoWrapper.attr("data-video-type",this.type),this.option("background")&&super.setBackground()}createPlayer(t){return this.apiPlayer=t,new Promise(((e,i)=>{if(this.videoNode.attr("data-vimeo-id",o.Z.getId(this._node)),t.Player){const i=this.videoNode.attr("data-src");i&&this.videoNode.attr("src",i);const s={id:o.Z.getId(this._node),loop:this.option("loop"),controls:this.option("controls.enable"),speed:this.option("controls.speed"),keyboard:!this.option("background")};this.player={ready:!1,play:()=>{this.state===h.pX.NONE&&this.player.player.setVolume(0),this.player.player.play()},pause:()=>{this.player.player.pause()},player:new t.Player(this.videoNode.node,s)},this.addEvents(e)}else i(!0)}))}destroyVideoPlayer(){this.player&&this.player.player&&(this.player.ready=!1,this.player.player.destroy())}play(){this.player&&this.player.ready&&(this.setCurrentTime(),this.player.play())}onBeforeFullscreenIn(){this.destroyVideoPlayer()}onAfterFullscreenIn(){this.createPlayer(this.apiPlayer)}onBeforeFullscreenOut(){this.destroyVideoPlayer()}onAfterFullscreenOut(){this.createPlayer(this.apiPlayer)}getCurrentTime(){}setCurrentTime(){this.player&&this.player.ready&&this.player.player.setCurrentTime(this.currentTime)}addEvents(t){this.player.player.on("play",(()=>{this.state=h.pX.PLAY,this.emit("slideVideoPlay",{data:{type:this.type}})})),this.player.player.on("pause",(()=>{this.state=h.pX.PAUSE,this.emit("slideVideoPause",{data:{type:this.type}})})),this.player.player.on("ended",(()=>{this.state=h.pX.PAUSE,this.emit("slideVideoEnd",{data:{type:this.type}})})),this.player.player.on("loaded",(()=>{})),this.player.player.on("timeupdate",(t=>{this.currentTime=t.seconds})),this.player.player?this.player.player.ready().then((()=>{this.player.ready=!0,this.state===h.pX.PLAY&&(this.state=h.pX.PAUSE),this.player.player.setVolume(this.option("volume")/100),this.emit("slideVideoReady",{data:{type:this.type,error:null}}),t()})):this.emit("slideVideoReady",{data:{type:this.type,error:new Error("Player does not exist.")}})}destroy(){super.destroy(),this.videoNode.remove(),this.videoNode=null,this.videoWrapper.remove(),this.videoWrapper=null,this.player&&this.player.player&&(this.player.player.destroy(),this.player.player=null),this._node=null}}}},773:(t,e,i)=>{i.a(t,(async(t,s)=>{try{i.d(e,{Z:()=>L});var n=i(9913),o=i(7987),r=i(6031),a=i(9910),l=i(2681),h=i(159),d=i(6168),c=i(1930),u=i(6943),p=i(3089),m=i(2679),f=i(4186),y=i(932),v=i(558),g=i(4759),S=i(5395),b=i(827),w=i(3561),C=i(6476),I=i(5956),E=i(1048),x=i(6272),P=i(9552),O=t([v]);v=(O.then?(await O)():O)[0];let N=null,A=null;const Z="fullscreen",z=n.Z.camelize("-"+Z),D=f.i2+"-grid-gallery",F=f.i2+"-pseudo-"+Z,T={width:"100%",height:"100%"},U={width:"100%"},k=1e3,B=8,_=t=>((t=t.split("-")).splice(t.length-1,1),(t=t.join("-"))===f.i2),$=t=>"bullets"===t?t:"thumbnails",R=t=>{const e=[];let i=0,s=0;for(let o=0,r=t.length;o<r;o++){let r=t[o];r.querySelector(x.PJ)&&(r=r.querySelector(x.PJ));const a=n.Z.$(r).attr("data-pinned"),l=r.hasAttribute("data-pinned");s>=3&&"start"===a||i>=3&&(l&&a&&("end"===a||"end"!==a&&"start"!==a)||l&&!a)||(s<3&&"start"===a&&s++,(i<3&&l&&a&&("end"===a||"end"!==a&&"start"!==a)||l&&!a)&&i++,e.push(t[o]))}return e},W=t=>{const e=t.attr("data-src");return e&&e.endsWith(".url")?(0,C.Z)(e,"url_data_"+(0,a.Z)()).then((e=>(e.url&&t.attr("data-src",e.url),e.title&&t.attr("title",e.title),t))).catch((()=>null)):Promise.resolve(t)};class V extends p.Z{constructor(t,e){var i;super(),i=this,this.instanceNode=n.Z.$(t),this.instanceOptions=e.options,this.viewerFileContent=e.viewerFileContent,this.option=function(){return arguments.length>1?i.instanceOptions.set(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]):i.instanceOptions.get(arguments.length<=0?void 0:arguments[0])},this.slideOptions=this.makeSlideOptions(e.slideOptions),this.id=this.instanceNode.attr("id"),this.id||(this.id=f.i2+"-"+(0,a.Z)(),this.instanceNode.attr("id",this.id)),this.lazyInit=e.lazyInit,this.movingContainer=n.Z.$new("div").addClass(f.i2),this.fakeMovingContainer=n.Z.$new("div"),this.slideWrapper=n.Z.$new("div").addClass(f.i2+"-slides-box"),this.slidesContainer=n.Z.$new("div").addClass(f.i2+"-slides"),this.selectorsWrapper=n.Z.$new("div").addClass(f.i2+"-selectors-box"),this.fullScreenBox=n.Z.$new("div").addClass(f.i2+"-"+Z+"-box"),this.controlsWrapper=n.Z.$new("div").addClass(f.i2+"-controls"),this.producDetailsText=this.instanceNode.attr("data-product-detail"),this.productDetail=null,this.fullScreenBox.addEvent(["mousescroll","touchstart"],(t=>{t.stopDistribution()})),this.isReady=!1,this.isMoving=!1,this.isSelectorsReady=!1,this.isToolStarted=!1,this.isInitialized=!1,this.isStartedFullInit=!1,this.intersectionObserver=null,this.isInView=!1,this.firstSlideAhead=!1,this.rootMargin=0,this.fsButton=null,this.doSetSize=!1,this.heightProportion=null,this.slides=[],this.enabledSlideIndexes=[],this.selectors=null,this.arrows=null,this.contextMenu=null,this.countOfSizes=[],this.isFullscreen=f.UW.CLOSED,this.fullscreenStartTime=null,this.index=this.option("slide.first"),this.movingContainerId=f.i2+"-"+(0,a.Z)(),this.cssRulesId="sirv_css_rules-"+(0,a.Z)(),this.isComponentPinching=!1,this.isZoomIn=!1,this.hasSize=!1,this.isPseudo=!1,this.isAutoplay=this.option("slide.autoplay"),this.autoplayDelay=this.option("slide.delay"),this.remainingAutoplayTime=this.autoplayDelay,this.sliderNodes=[],this.destroyed=!1,this.autoplayTimer=null,this.timerRemove=null,this.onResizeDebounce=(0,r.Z)((()=>{this.onResizeWithoutSelectors()}),16),this.selectorsDebounce=null,this.option(Z+".history")&&(this.fullscreenViewId=Math.floor(Math.random()*Date.now()),f.vd.push(this.fullscreenViewId)),this.controlsWrapperAdded=!1,this.isStandardGrid=!1,this.isFullscreenGrid=!1,this.clearingTouchdragFunction=null,this.classes={standard:{movingContainerClasses:[],selectorsWrapperClasses:[]},fullscreen:{movingContainerClasses:[],selectorsWrapperClasses:[]}},this.externalContainer=null,n.Z.browser.mobile&&this.movingContainer.addClass(f.i2+"-mobile"),this.onResizeHandler=this.onResize.bind(this),this.onScrollHandler=null,this.pseudoFSEvent=t=>{27===t.oe.keyCode&&(n.Z.$(document).removeEvent("keydown",this.pseudoFSEvent),this.exitFullScreen())},this.keyBoardArrowsCallback=t=>{let e;const i=t.oe.keyCode;this.isReady&&[37,39].includes(i)&&(t.stop(),e=37===i?"prev":"next",this.jump(e,2))},this.onHistoryStateChange=t=>{try{t.oe.state&&"Sirv.viewer"===t.oe.state.name?(f.vd.indexOf(t.oe.state.hash)<0&&(f.vd.splice(f.vd.indexOf(this.fullscreenViewId),1),this.fullscreenViewId=t.oe.state.hash,f.vd.push(this.fullscreenViewId)),t.oe.state.hash===this.fullscreenViewId&&this.enterFullScreen()):this.isFullscreenState()&&this.exitFullScreen()}catch(t){}},this.addComponentsCSS=(0,r.Z)((()=>{y.KF.appendCss(this.instanceNode.node)}),100),y.KF.appendCss(this.instanceNode.node),this.getSlides().then((t=>{this.destroyed||(this.setComponentsEvents(),this.createSlides(t),(n.Z.browser.ready||"loading"!==document.readyState)&&this.startFullInit())}))}isGridLayout(){return"grid"===this.option("layout.type")&&this.isFullscreen===f.UW.CLOSED}isFullscreenState(){return[f.UW.OPENING,f.UW.OPENED].includes(this.isFullscreen)}setRootMargin(){let t=parseInt(this.option("threshold"),10);n.Z.isString(this.option("threshold"))&&(t=(window.innerHeight||document.documentElement.clientHeight)/100*t),this.rootMargin=t}makeSlideOptions(t){return Object.assign(t,{quality:this.instanceOptions.isset("quality")?this.option("quality"):null,hdQuality:this.option("hdQuality"),isHDQualitySet:this.instanceOptions.isset("hdQuality"),fullscreenOnly:this.option(Z+".always"),isFullscreen:this.option(Z+".enable"),nativeFullscreen:this.option(Z+".native"),goToFullscreen:this.option(Z+".enable"),layout:this.option("layout.type"),aspectratio:this.option("layout.aspectRatio"),sbEnable:this.option("slide.socialbuttons.enable"),sbFacebook:this.option("slide.socialbuttons.types.facebook"),sbTwitter:this.option("slide.socialbuttons.types.twitter"),sbLinkedin:this.option("slide.socialbuttons.types.linkedin"),sbReddit:this.option("slide.socialbuttons.types.reddit"),sbTumblr:this.option("slide.socialbuttons.types.tumblr"),sbPinterest:this.option("slide.socialbuttons.types.pinterest"),sbTelegram:this.option("slide.socialbuttons.types.telegram")})}startFullInit(t){var e=this;if(this.isStartedFullInit||!this.slides.length)return;if(this.isStartedFullInit=!0,this.isHiddenSlides())return;t&&(this.instanceOptions=t.options,this.option=function(){return arguments.length>1?e.instanceOptions.set(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]):e.instanceOptions.get(arguments.length<=0?void 0:arguments[0])},this.slideOptions=this.makeSlideOptions(t.slideOptions),this.slideOptions.autoplay=this.option("video.autoplay"),this.lazyInit=t.lazyInit,this.isAutoplay=this.option("slide.autoplay"),this.autoplayDelay=this.option("slide.delay"),this.remainingAutoplayTime=this.autoplayDelay),this.option(Z+".always")&&this.movingContainer.addClass(f.i2+"-fullsreen-always"),null===N&&(N=n.Z.browser.mobile&&window.matchMedia&&window.matchMedia("(max-device-width: 767px), (max-device-height: 767px)").matches),N&&"ios"===n.Z.browser.platform&&(A=n.Z.$new("div").setCss({position:"fixed",top:0,width:0,height:"100vh"})),this.normalizeOptions(),"grid"===this.option("layout.type")&&("auto"!==this.option("layout.aspectRatio")&&this.movingContainer.node.style.setProperty("--"+f.i2+"-aspect-ratio",this.option("layout.aspectRatio")),this.movingContainer.addClass(D),this.movingContainer.node.style.setProperty("--"+f.i2+"-grid-gap",this.option("layout.grid.gap")),this.movingContainer.node.style.setProperty("--"+f.i2+"-grid-columns",this.option("layout.grid.columns"))),this.setRootMargin(),this.slideWrapper.addClass(f.i2+"-"+("horizontal"===this.option("orientation")?"h":"v")),this.index=this.option("slide.first");const i=this.slides.length;if(this.index>i-1&&(this.index=0),i>0&&(!this.slides[this.index].enabled||!this.slides[this.index].slideAvailable)){let t=null;for(let e=0;e<i;e++){const s=(0,u.Z)("next",this.index+e,i,!0);if(this.slides[s].enabled&&this.slides[s].slideAvailable){t=s;break}}if(null===t)return console.warn("Sirv Media Viewer: All items are disabled.",this.instanceNode.node),void this.emit("destroy",{data:{id:this.id,node:this.instanceNode.node}});this.index=t}this.createContextMenu(),this.setInViewAction(),this.option("thumbnails.enable")&&this.option("thumbnails.target")&&(this.externalContainer=n.Z.$(document.querySelector(this.option("thumbnails.target")))||null);const s=document.createDocumentFragment();s.appendChild(this.movingContainer.node),this.movingContainer.setCssProp("font-size",0),"grid"===this.option("layout.type")?this.movingContainer.setCss(U):this.movingContainer.setCss(T),this.movingContainer.append(this.slideWrapper),this.slides.forEach((e=>{e.startFullInit(t?this.slideOptions:null)})),this.appendSelectors(!0),this.createClasses(),this.setClasses(),this.instanceNode.append(s),this.instanceNode.setCssProp("font-size",0),this.slideWrapper.append(this.slidesContainer),this.slidesContainer.setCss(T),this.instanceNode.render(),this.movingContainer.render(),this.selectorsWrapper.render(),this.slideWrapper.render();const o=this.instanceNode.size.height>0;this.createSelectors(),this.selectors&&this.isStandardGrid&&this.selectorsWrapper.setCss({flexBasis:this.option("thumbnails.size")+"px"});const r=()=>{var t;this.instanceNode.setCssProp("font-size",""),this.slides.forEach((t=>{t.slideAvailable&&this.slidesContainer.append(t.node),t.appendToDOM(),t.afterAddingDom()})),this.setClasses(),this.findProportions(),null==(t=this.selectors)||t.init(),this.postInitialization()};let a=10;const l=()=>{if(this.destroyed)return;let t=this.slidesContainer.node.getBoundingClientRect();t.height||(t=this.slideWrapper.node.getBoundingClientRect()),a-=1,a>0&&(!t.width&&!t.height||o&&!t.height)?setTimeout(l,16):(t.width&&t.height||(this.doSetSize=!0),"auto"!==this.option("layout.aspectRatio")&&(this.heightProportion={width:this.option("layout.aspectRatio"),height:1},this.hasSize=!0),r())};this.firstSlideAhead&&this.broadcast("inView",{data:this.isInView}),"slider"===this.option("layout.type")?setTimeout(l,16):r()}visibleSlides(){return this.slides.filter((t=>t.slideAvailable&&t.enabled)).length}findProportions(){const t=this.slides.length,e=()=>{const t=!this.firstSlideAhead&&this.option("slide.preload"),{width:e,height:i}=this.movingContainer.size;this.hasSize=!(!e&&!i),this.setContainerSize(),this.intersectionObserver&&"edge"===n.Z.browser.uaName&&this.intersectionObserver.takeRecords(),this.slides.forEach(((e,i)=>{e.startTool(this.index===i,t,this.firstSlideAhead)})),this.createEffect(),this.isToolStarted=!0,this.checkSingleSlide(),"grid"===this.option("layout.type")?this.enabledSlideIndexes.forEach((t=>{this.slides[t].beforeShow(),this.slides[t].afterShow(f.oc.INIT)})):(this.slides[this.index].beforeShow(),this.slides[this.index].afterShow(f.oc.INIT)),this.postInitialization()},i=(e,s)=>new Promise(((n,o)=>{const r=this.slides[e],a=this.slides.length;if(s.push(e),r){const h=()=>{let o=(0,l.Z)(e+1,t);if(a!==this.slides.length&&o>e&&(o=e),s.includes(o)){const t=this.slidesContainer.size;t.width||(t.width=500),t.height||(t.height=.5625*t.width),this.heightProportion=t,n()}else i(o,s).then(n)};r.getSlideSize().then((t=>{const e=t.size;e&&e.width&&e.height?(this.heightProportion=e,n()):h()})).catch((t=>{let e=this.slides.length;t&&t.error&&404===t.error.status&&(e-=1,this.pullSlide(t.UUID)),e>0?h():o()}))}}));this.doSetSize&&"grid"!==this.option("layout.type")&&"auto"===this.option("layout.aspectRatio")?i(this.index,[]).then((()=>{e()})).catch((()=>{})):e()}initTouchDrag(){const t="vertical"===this.option("orientation"),e=t?["y","top","height"]:["x","left","width"],i=t?"x":"y";let s,n,o,r,a=!1,l=null,h=null,d=null;const c=this.option("loop");let u=null,p=null,m=!0,y=null,v=0,g={x:null,y:null},S=!1;const b=t=>t/r*100,w=(t,i)=>{t&&t.node.setCssProp("transform",(t=>{const i={x:0,y:0};return i[e[0]]=t,"translate3d("+i.x+"%, "+i.y+"%, 0px)"})(i))},C=t=>new Promise(((e,i)=>{let s,n=100,r=0;const a=Math.abs(o),c=a>1;(a<25||2===v||"next"===t&&o<0||"prev"===t&&o>0)&&(m=!1),m||(t=o<0?"prev":"next"),y="next"===t?l:d;const u="next"===t?d:l;var p,f;("next"!==t&&(n*=-1),u&&(u.node.setCssProp("transform",""),u.afterHide()),m?(h.beforeHide(),this.sendEvent("beforeSlideIn",{slide:y.api}),this.sendEvent("beforeSlideOut",{slide:h.api}),this.index=y.index):(s=n,n=r,r=s,r*=-1),c)&&(h.node.addEvent("transitionend",(t=>{t.stop(),e()})),y&&y.node.setCssProp("transition","transform, .3s"),h.node.setCssProp("transition","transform, .3s"),y&&y.node.render(),h.node.render(),null==(p=this.selectors)||p.activateItem(this.index),null==(f=this.selectors)||f.jump(this.index));y&&w(y,r),w(h,n),c||e()})),I=()=>{if(a){var t;const e={transform:"",transition:""};h.node.removeEvent("transitionend"),y&&(m?(this.checkLoop(this.index),y.afterShow(f.oc.USER),h.afterHide(),this.sendEvent("afterSlideIn",{slide:y.api}),this.sendEvent("afterSlideOut",{slide:h.api})):y.afterHide(),y.node.setCss(e)),h.node.setCss(e),m=!0,y=null,null==(t=this.fsButton)||t.enable(),this.autoplay(),a=!1,this.isMoving=!1,u=null,p=null,l=null,h=null,d=null,S=!1}},E=(t,e)=>{const i=null!=e?e:this.index,s=this.getNextIndex(t,i,this.slides.length,c);if(null!==s){const e=this.slides[s];if(e.index!==this.index)return e.enabled?e:E(t,e.index)}return null},x=t=>{var i;S||(I(),this.effect.stop(),null!==this.index&&(h=this.slides[this.index],h.isSwipeDisabled()||(a=!0,this.isMoving=!0,s=this.slidesContainer.position[e[1]],r=this.slidesContainer.size[e[2]],p=t[e[0]]-s,n=b(p),o=n,l=E("prev"),d=E("next"),l&&d&&(l.index===d.index?l.index<h.index?d=null:l=null:l.index!==h.index&&h.index!==d.index||(l.index===h.index?l=null:d=null)),l&&(w(l,-100),l.beforeShow()),d&&(w(d,100),d.beforeShow()),null==(i=this.fsButton)||i.disable())))},P=t=>{let i,r;var c;a&&!S&&(a=!0,t.stop(),r=t[e[0]]-s,r<p?i="prev":r>p&&(i="next"),i||(i=o>0?"next":"prev"),p=r,u=i,o=b(p)-n,!d&&o<-10&&(o=-10),!l&&o>10&&(o=10),w(l,(c=o)-100),w(h,c),w(d,c+100))};this.clearingTouchdragFunction=I,this.slidesContainer.addEvent("touchdrag",(t=>{this.isComponentPinching||this.isZoomIn||this.slides[this.index].blokedTouchdrag||this.option(Z+".always")&&this.isFullscreen!==f.UW.OPENED||this.isGridLayout()||("dragstart"===t.state?(g={x:t.x,y:t.y},x(t),h.dragEvent(t.state)):"dragmove"===t.state?(v||(v=Math.abs(g[e[0]]-t[e[0]])>Math.abs(g[i]-t[i])?1:2),1===v&&P(t),g={x:t.x,y:t.y}):"dragend"===t.state&&((t=>{a&&!S&&(1===v&&t.stop(),h.dragEvent(t.state),S=!0,C(u).finally((()=>{S=!1,I()})))})(t),v=0,g={x:null,y:null}))}))}appendSelectors(t){let e=this.movingContainer;this.externalContainer&&(this.isFullscreenState()?this.selectorsWrapper.removeClass(f.i2+"-external"):(e=this.externalContainer,this.selectorsWrapper.addClass(f.i2+"-external"))),(t||this.externalContainer)&&e.append(this.selectorsWrapper)}createClasses(){["standard","fullscreen"].forEach((t=>{const e="standard"===t;if(!(e?this.option("thumbnails.enable"):this.option("fullscreen.thumbnails.enable")))return;const i=e?this.option("thumbnails.position"):this.option("fullscreen.thumbnails.position"),s=$(e?this.option("thumbnails.type"):this.option("fullscreen.thumbnails.type")),n=e?this.isStandardGrid:this.isFullscreenGrid;e&&this.externalContainer||this.classes[t].movingContainerClasses.push(f.i2+"-selectors-"+i),this.classes[t].selectorsWrapperClasses.push(f.i2+"-"+s,f.i2+"-"+(["left","right"].includes(i)?"v":"h")),n&&this.classes[t].selectorsWrapperClasses.push(f.i2+"-grid"),this.option("fullscreen.thumbnails.autohide")&&!e&&this.classes[t].movingContainerClasses.push(f.i2+"-autohide",f.i2+"-selectors-closed")}))}changeClasses(t,e){const i=e?"removeClass":"addClass";t.movingContainerClasses.forEach((t=>{this.movingContainer[i](t)})),t.selectorsWrapperClasses.forEach((t=>{this.selectorsWrapper[i](t)}))}setClasses(){this.isFullscreenState()?(this.changeClasses(this.classes.standard,!0),this.changeClasses(this.classes.fullscreen)):(this.changeClasses(this.classes.fullscreen,!0),this.changeClasses(this.classes.standard))}setInViewAction(){"visible"===this.option("autostart")?(this.intersectionObserver=new IntersectionObserver((t=>{t.forEach((t=>{const e=this.isInView;let i=t.isIntersecting||t.intersectionRatio>0;this.isFullscreenState()&&!i&&(i=!0),e!==i&&(this.isInView=i,this.postInitialization(),this.broadcast("inView",{data:i}),this.isInView?this.autoplay():this.pauseAutoplay())}))}),{rootMargin:this.rootMargin+"px 0px"}),this.intersectionObserver.observe(this.instanceNode.node)):this.isInView=!0}sendEvent(t,e){void 0===e&&(e={}),e.node=this.instanceNode,e.slider||(e.slider={type:t}),this.emit("viewerPublicEvent",{data:e})}checkReadiness(t,e){return!!["init","ready"].includes(t)&&("viewer"===e?"ready"===t&&this.isReady:this.slides.some((i=>i.checkReadiness(t,e))))}sendReadyEvent(t,e){"viewer"===e?this.sendEvent("ready"):this.slides.forEach((i=>{i.sendReadyEvent(t,e)}))}sendStats(t,e){let i,s;if(void 0===e&&(e={}),e.slider=this.id,t&&(e.data={event:t}),"spin"===e.component)i={account:e.account,event:{type:e.component,name:e.event,data:e.data||{},sessionId:e.sessionId,origin:e.origin}},i.event["sessionStart"===e.event?"ts":"time"]=e.eventTime,s=JSON.parse(JSON.stringify(i)),s.event=JSON.stringify(s.event);i&&(!0===e.useBeacon?(0,d.Z)(s,!0):setTimeout((()=>{(0,d.Z)(s)}),1),this.sendEvent("sendStats",JSON.parse(JSON.stringify(i))))}canSlideFullscreen(t){const e=this.slides[t];return!e||(e.slideType===f.mA.SPIN&&this.slides.length>1||e.canFullscreen())}setComponentsEvents(){const t=t=>{if(this.firstSlideAhead&&t===this.index){const t=this.option("slide.preload");this.enabledSlideIndexes.forEach((e=>{this.slides[e].startGettingInfo(),t?this.slides[e].loadContent():this.slides[e].loadThumbnail()}))}},e=t=>{this.index===t&&this.autoplay()},i=t=>{this.index===t&&this.pauseAutoplay()};this.on("stats",(t=>{t.stopAll();const e=document,i=window,s=screen;"sessionStart"===t.data.event&&(t.data.data||(t.data.data={}),t.data.data.screen={width:s.width,height:s.height,availWidth:s.availWidth,availHeight:s.availHeight,colorDepth:s.colorDepth,pixelDepth:s.pixelDepth},t.data.data.browser={width:i.innerWidth||e.documentElement.clientWidth||e.body.clientWidth||0,height:i.innerHeight||e.documentElement.clientWidth||e.body.clientWidth||0}),this.sendStats(null,t.data)})),this.on("slideVideoPlay",(t=>{t.stopAll(),i(t.data.slide.index)})),this.on("slideVideoPause",(t=>{t.stopAll()})),this.on("slideVideoEnd",(t=>{t.stopAll(),e(t.data.slide.index)})),this.on("slideVideoError",(t=>{t.stopAll(),this.pullSlide(t.data.UUID)})),this.on("contentLoaded",(e=>{e.stopAll(),t(e.data.slide.index)})),this.on("error",(t=>{t.stopAll(),this.pullSlide(t.data.UUID)})),this.on("componentEvent",(s=>{var n;switch(s.stopAll(),s.data.type){case"init":var o,r;if(this.index===s.data.slide.index&&this.canSlideFullscreen(this.index)&&null!=(n=this.slides[this.index])&&n.spinInited)this.addControllWrapper(),null==(o=this.fsButton)||o.enable(),null==(r=this.fsButton)||r.show();this.sendEvent("componentEvent",s.data);break;case"ready":var a,l;if(this.index===s.data.slide.index&&"spin"!==s.data.component&&(this.canSlideFullscreen(s.data.slide.index)||this.isFullscreenState()))this.addControllWrapper(),null==(a=this.fsButton)||a.enable(),null==(l=this.fsButton)||l.show();this.sendEvent("componentEvent",s.data);break;case"rotate":case"seek":case"loop":case"finished":this.sendEvent("componentEvent",s.data);break;case"fullscreenIn":"video"===s.data.component?this.sendEvent("componentEvent",s.data):this.option(Z+".enable")&&this.isFullscreen===f.UW.CLOSED&&this.enterFullScreen();break;case"fullscreenOut":"video"===s.data.component?this.sendEvent("componentEvent",s.data):this.exitFullScreen();break;case"pinchStart":this.isComponentPinching=!0;break;case"pinchEnd":this.isComponentPinching=!1;break;case"zoomIn":this.isZoomIn=!0,i(s.data.slide.index),this.sendEvent("componentEvent",s.data);break;case"zoomOut":this.isZoomIn=!1,e(s.data.slide.index),this.sendEvent("componentEvent",s.data);break;case"hotspotOpened":case"spinStart":case"arStart":i(s.data.slide.index);break;case"hotspotClosed":case"arStop":e(s.data.slide.index);break;case"rotateEnd":e(s.data.slide.index),this.sendEvent("componentEvent",s.data);break;case"play":["video","model"].includes(s.data.component)&&("video"===s.data.component&&i(s.data.slide.index),this.sendEvent("componentEvent",s.data));break;case"resume":"video"===s.data.component&&(i(s.data.slide.index),this.sendEvent("componentEvent",s.data));break;case"pause":["video","model"].includes(s.data.component)&&this.sendEvent("componentEvent",s.data);break;case"end":"video"===s.data.component&&(e(s.data.slide.index),this.sendEvent("componentEvent",s.data));break;case"contentLoaded":t(s.data.slide.index)}})),this.on("goTo"+z,(t=>{var e;(t.stopAll(),t.data&&t.data.hasOwnProperty("index")&&this.slides[t.data.index].enabled&&this.index!==t.data.index)&&(this.index=t.data.index,null==(e=this.selectors)||e.activateItem(this.index));this.option(Z+".enable")&&this.isFullscreen===f.UW.CLOSED&&this.canSlideFullscreen(this.index)&&this.enterFullScreen()})),this.on("goTo"+z+"Out",(t=>{t.stopAll(),this.exitFullScreen()})),this.on("infoReady",(t=>{if(t.stop(),this.isFullscreen===f.UW.OPENED){const e=this.slides[t.data.index];e.broadcast("before"+z+"In",{data:{pseudo:this.isPseudo}}),e.broadcast("after"+z+"In",{data:{pseudo:this.isPseudo}})}})),this.on((t=>{t.stopAll()}))}normalizeOptions(){const t=["contextmenu.text.zoom.in","contextmenu.text.zoom.out","contextmenu."+Z+".enter","contextmenu."+Z+".exit","contextmenu.text.download"];n.Z.browser.mobile&&"grid"===this.option("layout.type")&&window.matchMedia("(max-device-width: 767px), (max-device-height: 767px)").matches&&this.option("layout.type","slider"),"grid"===this.option("layout.type")&&(this.option("slide.preload",!0),this.option("thumbnails.enable")&&(this.option("layout.grid.columns")>1||["top","bottom"].includes(this.option("thumbnails.position")))&&this.option("thumbnails.enable",!1)),"auto"===this.option("fullscreen.thumbnails.size")&&this.option("fullscreen.thumbnails.size",this.option("thumbnails.size")),"off"===this.option("slide.animation.type")&&this.option("slide.animation.type",!1),"grid"===this.option("thumbnails.type")&&(this.isStandardGrid=!0,this.option("thumbnails.type","square")),"grid"===this.option("fullscreen.thumbnails.type")&&(this.isFullscreenGrid=!1,this.option("fullscreen.thumbnails.type","square")),t.forEach((t=>{(0,w.Z)(this.option(t))&&this.option(t,!1)})),this.option("thumbnails.enable")&&this.option("thumbnails.target")&&""===this.option("thumbnails.target").trim()&&this.option("thumbnails.target",!1);this.option("slide.socialbuttons.enable")&&!["facebook","twitter","linkedin","reddit","tumblr","pinterest","telegram"].some((t=>this.option("slide.socialbuttons.types."+t)))&&this.option("slide.socialbuttons.enable",!1),this.slideOptions.sbEnable=this.option("slide.socialbuttons.enable"),window.parent!==window.window&&n.Z.browser.fullScreen.capable&&this.option("fullscreen.native",!0)}addControllWrapper(){!this.controlsWrapperAdded&&this.controlsWrapper.node.childNodes.length&&(this.controlsWrapperAdded=!0,this.slideWrapper.append(this.controlsWrapper))}postInitialization(){if(!this.isInitialized&&this.isInView&&this.isSelectorsReady&&this.isToolStarted&&this.isStartedFullInit){var t,e;if(this.isInitialized=!0,this.hasSize||this.setContainerSize(),this.broadcast("inView",{data:this.isInView}),this.createArrows(),null==(t=this.selectors)||t.inView(this.isInView,this.instanceNode),null==(e=this.selectors)||e.activateItem(this.index),!n.Z.browser.mobile){const t="edge"===n.Z.browser.uaName?"pointerout":"mouseout";this.movingContainer.addEvent(t,(t=>{if(t.pointerType&&"mouse"!==t.pointerType)return;let e=t.related;for(;e&&e!==this.movingContainer.node;)e=e.parentNode;this.movingContainer.node!==e&&null!==this.index&&this.slides[this.index].mouseAction("mouseout",t)}))}this.slides.length>1&&this.initTouchDrag(),n.Z.$(window).addEvent("resize",this.onResizeHandler),"grid"===this.option("layout.type")&&this.option("thumbnails.enable")&&(this.onScrollHandler=this.changeActiveSlideOnScroll.bind(this),n.Z.$(window).addEvent("scroll",this.onScrollHandler,10,{capture:!0})),this.showHideArrows(),this.showHideSelectors(),this.option(Z+".always")&&this.slideWrapper.addClass(f.lh),this.movingContainer.attr("id",this.movingContainerId),this.createFullscreenButton(),this.addControllWrapper(),this.fsButton&&this.slides[this.index]&&(this.canSlideFullscreen(this.index)||this.isFullscreenState())&&(this.fsButton.enable(),this.fsButton.show()),this.changeActiveSlideOnScroll(),this.checkLoop(this.index),this.movingContainer.setCssProp("font-size",""),this.option(Z+".history")&&n.Z.$(window).addEvent("popstate",this.onHistoryStateChange),this.autoplay(),this.isReady=!0,this.sendEvent("ready")}}changeActiveSlideOnScroll(){if(this.isFullscreen!==f.UW.CLOSED||!this.onScrollHandler)return;const t=this.enabledSlideIndexes.length;for(let s=0;s<t;s++){const t=this.enabledSlideIndexes[s],n=this.slides[t].node.node.getBoundingClientRect(),o=n.height-n.height/2;if(n.y+o>0){var e,i;this.index=t,null==(e=this.selectors)||e.activateItem(t),null==(i=this.selectors)||i.jump(t);break}}}addHistory(){if(this.option(Z+".history")){const t="#sirv-viewer-"+this.fullscreenViewId;if(window.location.hash!==t){const e={name:"Sirv.viewer",hash:this.fullscreenViewId},i=document.body.title||"Sirv viewer";try{window.history.state&&"Sirv.viewer"===window.history.state.name&&window.history.replaceState(null,i,""),window.history.pushState(e,i,t)}catch(t){}}}}setContainerSize(){const t=this.selectors?this.selectorsWrapper.size[this.selectors.shortSide]:0;let{width:e,height:i}=this.movingContainer.size;if(!e&&!i)return;const s=this.option("thumbnails.position"),n=this.option("thumbnails.enable")&&this.canShowSelectors(this.slides.length)&&t>0&&!this.externalContainer;this.isFullscreen===f.UW.OPENED?(this.movingContainer.setCssProp("height",""),this.slideWrapper.setCssProp("height","")):this.doSetSize&&this.heightProportion&&(n&&["left","right"].includes(s)&&(e-=t),i=e*(this.heightProportion.height/this.heightProportion.width),i>this.heightProportion.height&&"auto"===this.option("layout.aspectRatio")&&(i=this.heightProportion.height),!n||["left","right"].includes(s)&&!this.isStandardGrid?this.movingContainer.setCssProp("height",i):this.slideWrapper.setCssProp("height",i))}findSlideIndex(t){var e;const i=this.slides.find((e=>e.id&&e.id===t));return null!=(e=null==i?void 0:i.index)?e:-1}getItems(t){let e=null,i=this.slides;t&&(null!=t.enabled&&(e=t.enabled),t.group&&(i=this.getSlidesByGroup(t.group)));return("boolean"===n.Z.typeOf(e)?i.filter((t=>t.enabled===e)):i).map((t=>t.api))}controlEnabledSlides(t,e){e?this.enabledSlideIndexes.splice(this.enabledSlideIndexes.indexOf(t),1):(this.enabledSlideIndexes.push(t),this.enabledSlideIndexes.sort(((t,e)=>t<e?-1:t>e?1:0)))}disableSlide(t,e){var i,s;if(n.Z.isString(t)&&(t=this.findSlideIndex(t)),!0!==(null==(i=this.slides[t])?void 0:i.enabled))return!1;const o=this.slides[t].$J_UUID;this.effect&&this.effect.stop();let r="next";const a=this.slides.length;return this.slides[t].isActive&&(this.index===a-1&&this.option("loop")&&(r=0),this.jump(r,4,!0)||(this.slides[t].beforeHide(),this.slides[t].afterHide(),this.isGridLayout()&&(this.index=(0,u.Z)(r,this.index,this.slides.length,this.option("loop"))))),this.slides[t].enabled&&this.controlEnabledSlides(t,!0),this.slides[t].disable(),this.checkLoop(this.index),this.enabledSlideIndexes.length||(this.index=null),null==(s=this.selectors)||s.disable(o),this.changeActiveSlideOnScroll(),e||this.sendEvent("disableItem",{slide:this.slides[t].api}),this.checkSingleSlide(),this.showHideArrows(),this.showHideSelectors(),!0}enableSlide(t){var e,i;if(n.Z.isString(t)&&(t=this.findSlideIndex(t)),null!=(e=this.slides[t])&&e.enabled)return!1;this.slides[t].startGettingInfo(),this.slides[t].loadThumbnail(),this.slides[t].enable(),this.slides[t].resize();const s=this.enabledSlideIndexes.filter((t=>this.slides[t].slideAvailable));this.enabledSlideIndexes.length||(this.index=t);const o=this.slides[t].slideAvailable&&!s.length;var r;((o||this.isGridLayout())&&(o&&(this.index=t),this.slides[t].loadContent(),this.slides[t].beforeShow(),this.slides[t].resize(),this.slides[t].afterShow(f.oc.ENABLE)),this.controlEnabledSlides(t),this.checkLoop(this.index),null==(i=this.selectors)||i.enable(this.slides[t].UUID),this.slides[t].slideAvailable)&&(null==(r=this.selectors)||r.activateCurrentItemByUUID(this.slides[t].UUID));return this.changeActiveSlideOnScroll(),this.sendEvent("enableItem",{slide:this.slides[t].api}),this.checkSingleSlide(),this.showHideArrows(),this.showHideSelectors(),!0}getSlidesByGroup(t){return t?this.slides.filter((e=>e.belongsTo(t))):[]}enableSlideGroup(t){const e=this.getSlidesByGroup(t);return e.forEach((t=>this.enableSlide(t.index))),!!e.length}disableSlideGroup(t){const e=this.getSlidesByGroup(t);return e.forEach((t=>this.disableSlide(t.index))),!!e.length}switchGroup(t){if(!t)return!1;return this.getItems({enabled:!0}).forEach((e=>{this.slides[e.index].belongsTo(t)||this.disableSlide(e.index)})),this.enableSlideGroup(t)}jump(t,e,i,s){if(!this.effect||!this.enabledSlideIndexes.length||null===this.index||this.isGridLayout()&&this.option("layout.grid.columns")>1)return!1;const n=["next","prev"].includes(t),o=null!=s?s:this.index;if(!n){const e=this.findSlideIndex(t);e>=0&&(t=e)}const r=(0,u.Z)(t,o,this.slides.length,this.option("loop"));if(null===r)return!1;if(this.index!==r){if(!this.slides[r].enabled||!this.slides[r].slideAvailable)return!!n&&this.jump(t,e,i,r);if(clearTimeout(this.autoplayTimer),n||(t=r>this.index?"next":"prev"),this.checkLoop(r),this.isGridLayout()){var a;if(i)null==(a=this.selectors)||a.activateItem(r);else this.slides[r].scrollIntoView()}else{var l,h;let s=this.option("slide.animation.type");s&&!i||(s="blank"),null==(l=this.selectors)||l.activateItem(r),null==(h=this.selectors)||h.jump(r),this.effect.make({index:this.index,node:this.slides[this.index].node},{index:r,node:this.slides[r].node},{effect:s,direction:t},{whoUse:e})}return this.index=r,!0}return this.slides[r].secondSelectorClick(),this.index=r,!1}checkLoop(t){if(!this.arrows)return;const e=this.enabledSlideIndexes.filter((t=>!this.slides[t].selectorPinned&&this.slides[t].slideAvailable)).length;if(e<2)this.arrows.disable("backward"),this.arrows.disable("forward");else if(this.option("loop"))this.arrows.disable();else{const i=this.enabledSlideIndexes.indexOf(t);this.arrows.disable(),0!==i&&1!==e||this.arrows.disable("backward"),i!==e-1&&1!==e||this.arrows.disable("forward")}}createFullscreenButton(){if(!this.option(Z+".enable")||this.fsButton)return;let t="grid"===this.option("layout.type")?P.Z.FULLSCREEN:null;this.fsButton=new P.Z(t),this.slides[this.index].spinInited&&this.canSlideFullscreen(this.index)?(this.fsButton.enable(),this.fsButton.show()):(this.fsButton.disable(),this.fsButton.hide()),this.fsButton.onClick((()=>{this.isFullscreen!==f.UW.CLOSED&&this.isFullscreen!==f.UW.OPENED||(this.fsButton.disable(),this.fsButton.hide(),this.isFullscreen===f.UW.CLOSED?this.enterFullScreen():this.exitFullScreen())})),this.controlsWrapper.append(this.fsButton.node),this.slides[this.index].slideReady&&setTimeout((()=>{(this.canSlideFullscreen(this.index)||this.isFullscreenState())&&(this.fsButton.enable(),this.fsButton.show())}),0)}createEffect(){this.effect=new b.Z({time:this.option("slide.animation.duration"),orientation:this.option("orientation")}),this.effect.parentClass=this,this.on("effectStart",(t=>{var e,i;(t.stopAll(),this.isMoving=!0,null==(e=this.fsButton)||e.disable(),this.isFullscreen===f.UW.OPENED||this.canSlideFullscreen(t.indexes[1]))||(null==(i=this.fsButton)||i.hide());this.slides[t.indexes[0]].beforeHide(),this.slides[t.indexes[1]].beforeShow(),4!==t.data.callbackData.whoUse&&(this.sendEvent("beforeSlideIn",{slide:this.slides[t.indexes[1]].api}),this.sendEvent("beforeSlideOut",{slide:this.slides[t.indexes[0]].api}))})),this.on("effectEnd",(t=>{t.stopAll(),this.fsButton&&(this.canSlideFullscreen(t.indexes[1])||this.isFullscreen===f.UW.OPENED)&&(this.fsButton.enable(),this.fsButton.show()),this.slides[t.indexes[0]].afterHide(),this.slides[t.indexes[1]].afterShow(t.data.callbackData.whoUse),4!==t.data.callbackData.whoUse&&(this.sendEvent("afterSlideIn",{slide:this.slides[t.indexes[1]].api}),this.sendEvent("afterSlideOut",{slide:this.slides[t.indexes[0]].api})),this.autoplay(),this.isMoving=!1,this.remainingAutoplayTime=this.autoplayDelay}))}createArrows(){this.option("arrows")&&(this.arrows=new S.Z({orientation:this.option("orientation")}),this.arrows.hide(),this.arrows.parentClass=this,this.on("arrowAction",(t=>{t.stopAll();const e=this.getNextIndex(t.data.type,this.index,this.slides.length,this.option("loop"));this.jump(e,2)})),this.arrows.nodes.forEach((t=>this.controlsWrapper.append(t))))}getNextIndex(t,e,i,s){const n=(0,u.Z)(t,e,i,s);let o=n;return null===n||n===this.index||!this.slides[n].selectorPinned&&this.slides[n].slideAvailable&&this.slides[n].enabled||(o=this.getNextIndex(t,n,i,s)),o}isHiddenSlides(){return!this.slides.some((t=>!t.customSelector||t.customSelector&&t.slideAvailable))}createSelectors(){const t=this.option;t("thumbnails.enable")||t("fullscreen.thumbnails.enable")?(this.selectors=new g.Z(this.slides.filter((t=>t.selectorData)).map((t=>t.selectorData)),{isStandardGrid:this.isStandardGrid,standardStyle:t("thumbnails.type"),standardSize:t("thumbnails.size"),standardPosition:!!t("thumbnails.enable")&&t("thumbnails.position"),standardWatermark:t("thumbnails.watermark"),isFullscreenGrid:this.isFullscreenGrid,fullscreenStyle:t("fullscreen.thumbnails.type"),fullscreenSize:t("fullscreen.thumbnails.size"),fullscreenPosition:!!t("fullscreen.thumbnails.enable")&&t("fullscreen.thumbnails.position"),fullscreenAutohide:t("fullscreen.thumbnails.autohide"),fullscreenWatermark:t("fullscreen.thumbnails.watermark"),arrows:t("arrows")}),this.selectors.parentClass=this,this.on("selectorsReady",(t=>{t.stopAll(),this.isSelectorsReady=!0,this.postInitialization()})),this.on("getSelectorProportion",(t=>{t.stopAll();const e=this.getSlideIndexByUUID(t.data.UUID);if(e>=0){const i=this.slides[e];if(i){const e={size:null,isSirv:!0};i.getSelectorProportion().then((s=>{e.isSirv=i.isSirvSelector(),e.size=s.size,t.data.resultingCallback(e)})).catch((s=>{e.isSirv=i.isSirvSelector(),this.pullSlide(s.UUID),t.data.resultingCallback(e)}))}else t.data.resultingCallback(null)}else t.data.resultingCallback(null)})),this.on("getSelectorImgUrl",(t=>{t.stopAll();const e=this.getSlideIndexByUUID(t.data.UUID);if(e>=0){const i=this.slides[e];i?i.getSelectorImgUrl(t.data.type,t.data.size,t.data.crop,t.data.watermark).then((e=>{const{src:i,srcset:s,size:n,alt:o,referrerpolicy:r}=e;t.data.resultingCallback({src:i,srcset:s,size:n,alt:o,referrerpolicy:r})})).catch((e=>{t.data.resultingCallback(null)})):t.data.resultingCallback(null)}else t.data.resultingCallback(null)})),this.on("changeSlide",(t=>{t.stopAll();const e=this.getSlideIndexByUUID(t.data.UUID);if(e>=0){const t=this.option(Z+".enable")&&this.option(Z+".always");this.slides[e].customSelector&&this.sendEvent("thumbnailClick",{slide:this.slides[e].api}),this.jump(e,2,t),t&&this.enterFullScreen()}})),this.on("visibility",(t=>{switch(t.stop(),t.action){case"show":this.movingContainer.removeClass(f.i2+"-selectors-closed");break;case"hide":this.movingContainer.addClass(f.i2+"-selectors-closed")}})),this.on("selectorsDone",(t=>{t.stopAll(),["left","right"].includes(this.selectors.currentStylePosition)&&this.onResize()})),this.selectorsWrapper.append(this.selectors.node),this.slides.forEach((t=>{t.enabled||this.selectors.disable(t.UUID)})),this.showHideSelectors(!0)):this.isSelectorsReady=!0}findSlide(){let t,e=this.instanceNode.attr("data-src");if(e){let i;try{i=this.viewerFileContent?this.viewerFileContent:e.split("?")[0].split(".").pop()}catch(t){}if("view"===i)return[];"spin"===i||(0,h.Z)(e)||(0,E.Z)(e)?(t=n.Z.$new("div",{"data-src":e}),i="spin"===i?f.mA.SPIN:(0,h.Z)(e)?f.mA.VIDEO:f.mA.MODEL):[this.instanceNode.attr("data-type"),this.instanceNode.attr("data-effect")].includes("zoom")?(i=f.mA.ZOOM,t=n.Z.$new("div",{"data-type":"zoom","data-src":e})):"url"===i?t=n.Z.$new("div",{"data-src":e}):(i=f.mA.IMAGE,t=n.Z.$new("img",{"data-src":e})),this.viewerFileContent&&t.store("view-content",i),this.instanceNode.append(t)}else e=this.instanceNode.attr("data-bg-src"),e&&(t=n.Z.$new("img",{"data-src":e}),this.instanceNode.append(t));return t?[t.node]:[]}canPinSlide(t){const e=v.Z.findPinnedSelectorSide(t);return this.slides.filter((t=>t.pinnedSelectorSide===e)).length<3}getSlideIndexByUUID(t){return this.slides.findIndex((e=>e.UUID===t))}pullSlide(t){const e=this.getSlideIndexByUUID(t);e<0||(this.removeSlide(e),this.slides.length?(this.slides.length<2&&(this.option("thumbnails.enable")||this.option("fullscreen.thumbnails.enable"))&&(this.changeClasses(this.classes.standard,!0),this.setContainerSize()),this.isToolStarted||this.findProportions(),this.postInitialization()):this.emit("destroy",{data:{id:this.id,node:this.instanceNode.node}}))}getSlides(){return new Promise((t=>{let e=Array.from(this.instanceNode.node.childNodes).filter((t=>{let e=!1;return this.sliderNodes.push(t.cloneNode(!0)),t.tagName&&["div","img","iframe","figure","video","picture",x.PJ].includes(n.Z.$(t).tagName)&&(e=!0),t.remove(),e}));e=R(e),e.length||(e=this.findSlide()),Promise.all(e.map((t=>W(n.Z.$(t))))).then((t=>{let e=t.filter((t=>t)).map((t=>v.Z.parse(t)));return(0,y.o9)().forEach((t=>{const i=e.map((t=>{const e={};return Object.entries(t).forEach((t=>{"type"===t[0]&&(t[1]=f.HB[t[1]]),(0,o.Z)(e,...t)})),e})),s=t(this.id,i);Array.isArray(s)&&(e=s.map((t=>{for(let i=0,s=e.length;i<s;i++)if(t.node===e[i].node)return e.splice(i,1)[0];return t})))})),(0,c.Z)(e,this.option("itemsOrder"))})).then((t=>Promise.all(t.map((t=>W(n.Z.$(t.node)).then((e=>e?t:null))))).then((t=>t.filter((t=>t)))))).then((e=>Promise.all(e.map((t=>v.Z.parse(t.node).type!==f.mA.VIDEO||v.Z.isSirvComponent(t.node)?Promise.resolve(t):I.Z.isVideoExisting(t.node).then((()=>t)).catch((()=>Promise.resolve(null)))))).then((e=>t(e.filter((t=>t)))))))}))}createSlides(t){let e=0;t.forEach((t=>{if(!v.Z.isSirvComponent(t.node)||v.Z.hasComponent(t.node)){if((t=n.Z.$(t.node)).tagName===x.PJ){const e=n.Z.$new("div");t.attr("data-id")&&e.attr("data-id",t.attr("data-id")),t.attr("data-group")&&e.attr("data-group",t.attr("data-group")),e.append(t),t=e}t.addClass(f.i2+"-component");const i=new v.Z(t.node,e,this.slideOptions);i.parentClass=this,this.slides.push(i),i.enabled&&i.slideAvailable&&this.enabledSlideIndexes.push(e),e+=1}})),this.firstSlideAhead=this.enabledSlideIndexes.length>B,this.enabledSlideIndexes.forEach(((t,e)=>{(!this.firstSlideAhead||e<B||e===this.index||"grid"===this.option("layout.type"))&&this.slides[t].startGettingInfo()})),this.index>this.slides.length-1&&(this.index=0),this.postInitialization()}checkSingleSlide(){const t=1===this.enabledSlideIndexes.length;this.enabledSlideIndexes.forEach((e=>{this.slides[e].single(t)}))}showHideArrows(){if(this.arrows){const t=this.visibleSlides();t<2||this.option(Z+".always")&&!this.isFullscreenState()?this.arrows.hide():t>1&&(!this.option(Z+".always")||this.isFullscreenState())&&this.arrows.show()}}canShowSelectors(t){const e=this.isFullscreen===f.UW.OPENED?"fullscreen.thumbnails.always":"thumbnails.always";return this.option(e)||t>1}showHideSelectors(t){this.selectors&&(this.selectorsDebounce||(this.selectorsDebounce=(0,r.Z)((()=>{if(this.selectors){this.canShowSelectors(this.enabledSlideIndexes.length)?this.selectors.isSelectorsActionEnabled()||(this.movingContainer.setCssProp("height","100%"),this.selectorsWrapper.removeClass(f.i2+"-hide-selectors"),this.selectors.enableActions(),this.onResize()):this.selectors.isSelectorsActionEnabled()&&(this.selectorsWrapper.addClass(f.i2+"-hide-selectors"),this.selectors.disableActions(),this.onResize())}}),t?0:32)),this.selectorsDebounce())}getAvailableSlideIndex(t){return t!==this.slides.length-1||this.slides[t].slideAvailable?this.slides[t+1].slideAvailable?t+1:this.getAvailableSlideIndex(t+1):-1}addAvailableSlideNode(t,e){const i=t.node,s=this.slides.length;if(t.slideAvailable)if(s>1&&e!==s-1)if(this.slides[e+1].slideAvailable)this.slidesContainer.node.insertBefore(i.node,this.slides[e+1].node.node);else{const t=this.getAvailableSlideIndex(e);t<0?this.slidesContainer.append(i):this.slidesContainer.node.insertBefore(i.node,this.slides[t].node.node)}else this.slidesContainer.append(i)}sortItems(t){var e;if(Array.isArray(t)||(t=this.option("itemsOrder")),t.length){this.slides=(0,c.Z)(this.slides,t),null==(e=this.selectors)||e.sortSelectors(this.slides.map((t=>t.UUID)),t.length),this.slides.forEach(((t,e)=>{t.index=e}));for(let t=0,e=this.slides.length;t<e;t++)if(this.slides[t].slideActive){this.index=this.slides[t].index;break}}}insertSlide(t,e){const i=e.querySelector(x.PJ)||e;if(v.Z.findPinnedSelectorSide(i)&&!this.canPinSlide(i))return!1;if(null==t&&(t=this.slides.length+1),"number"===n.Z.typeOf(t)&&t>=0&&e&&(!v.Z.isSirvComponent(e)||v.Z.hasComponent(e))){var s;n.Z.$(e).addClass(f.i2+"-component"),t>this.slides.length&&(t=this.slides.length),clearTimeout(this.timerRemove);const i=new v.Z(e,t,this.slideOptions,!0);i.parentClass=this,this.slides.splice(t,0,i);let r=null===this.index;var o;if(null===this.index?i.enabled&&i.slideAvailable?this.index=t:r=!1:t<=this.index&&(this.index+=1),this.enabledSlideIndexes=[],this.slides.forEach(((t,e)=>{t.index=e,t.enabled&&this.controlEnabledSlides(e)})),this.addAvailableSlideNode(i,t),this.addComponentsCSS(),i.appendToDOM(),i.afterAddingDom(),i.startGettingInfo(),i.loadThumbnail(),i.startFullInit(null),i.startTool(this.index===t,!this.firstSlideAhead&&this.option("slide.preload"),this.firstSlideAhead),i.broadcast("inView",{data:this.isInView}),(this.index===t||this.isGridLayout())&&(i.loadContent(),i.beforeShow(),i.afterShow(f.oc.INIT)),this.isFullscreen!==f.UW.OPENED||i.sirv||(i.broadcast("before"+z+"In",{data:{pseudo:this.isPseudo}}),i.broadcast("after"+z+"In",{data:{pseudo:this.isPseudo}})),this.checkLoop(this.index),null==(s=this.selectors)||s.insert(t,i.selectorData),r)null==(o=this.selectors)||o.activateItem(this.index);return this.changeActiveSlideOnScroll(),this.checkSingleSlide(),this.showHideSelectors(),this.showHideArrows(),!0}return!1}removeSlide(t){let e=!1;if(n.Z.isString(t)&&(t=this.findSlideIndex(t)),"number"===n.Z.typeOf(t)&&t>=0&&t<this.slides.length){var i;const s=this.slides[t].$J_UUID;return this.slides[t].enabled?this.disableSlide(t,!0):e=!0,this.slides[t].destroy(),this.slides.splice(t,1),this.enabledSlideIndexes=[],this.slides.forEach(((t,e)=>{t.index=e,t.enabled&&this.controlEnabledSlides(e)})),null==(i=this.selectors)||i.pickOut(s),null!==this.index&&t<=this.index&&0!==this.index&&(this.index-=1),e&&this.checkSingleSlide(),this.isHiddenSlides()&&(this.timerRemove=setTimeout((()=>{this.instanceNode&&this.emit("destroy",{data:{id:this.id,node:this.instanceNode.node}})}),100)),this.changeActiveSlideOnScroll(),!0}return!1}createContextMenu(){if(!this.option("contextmenu.enable"))return void this.movingContainer.addEvent("contextmenu",(t=>{t.stop()}));const t=[];let e=!1;const i=()=>{const t=this.slides[this.index],e=f.mA;return t.slideType===e.SPIN||t.slideType===e.ZOOM&&"deep"===t.options.mode};this.option("contextmenu.text.zoom.in")&&(t.push({id:"zoomin",label:this.option("contextmenu.text.zoom.in"),disabled:()=>this.slides[this.index].zoomData.isZoomed&&1===this.slides[this.index].zoomData.zoom,hidden:()=>!(i()&&this.slides[this.index].zoomSizeExist),action:t=>{this.slides[this.index].zoomIn(t.left,t.top)}}),e=!0),this.option("contextmenu.text.zoom.out")&&(t.push({id:"zoomout",label:this.option("contextmenu.text.zoom.out"),disabled:()=>!this.slides[this.index].zoomData.isZoomed,hidden:()=>!(i()&&this.slides[this.index].zoomSizeExist),action:t=>{this.slides[this.index].zoomOut(t.left,t.top)}}),e=!0);const s=()=>!(!i()||!e)&&this.slides[this.index].zoomData.isZoomed;this.option("contextmenu.text."+Z+".enter")&&t.push({id:"enter"+Z,label:this.option("contextmenu.text."+Z+".enter"),disabled:()=>s(),hidden:()=>!(this.option(Z+".enable")&&!this.isFullscreenState()),action:()=>{this.enterFullScreen()}}),this.option("contextmenu.text."+Z+".exit")&&t.push({id:"exit"+Z,label:this.option("contextmenu.text."+Z+".exit"),disabled:()=>s(),hidden:()=>!(this.option(Z+".enable")&&this.isFullscreenState()),action:()=>{this.exitFullScreen()}}),this.option("contextmenu.text.download")&&(t.length&&t.push({id:"sirv-separator",disabled:!1,hidden:()=>t.filter((t=>{if("sirv-separator"!==t.id){return!("function"==typeof t.hidden?t.hidden():t.hidden)}})).length<2,separator:!0}),t.push({id:"download",label:this.option("contextmenu.text.download"),disabled:!1,hidden:!1,action:()=>{let t;const e=this.slides[this.index].originImageUrl;e&&(t=n.Z.$new("iframe").setCss({width:0,height:0,display:"none"}).appendTo(document.body),t.node.src=e+"?format=original&dl")}})),this.movingContainer.addEvent("contextmenu",(t=>{if(t.stopDefaults(),this.contextMenu&&!this.isMoving&&this.enabledSlideIndexes.length){const e=this.slides[this.index],i=e.slideType!==f.mA.VIDEO;this.isReady&&e.isReady&&e.sirv&&i&&this.contextMenu.buildMenu()&&(this.broadcast("stopContext"),this.contextMenu.show(t))}})),t.length&&!n.Z.browser.mobile&&(this.contextMenu=new m.Z(this.movingContainer,t),this.option("fullscreen.enable")&&(this.contextMenu.fullScreenBox=this.fullScreenBox))}enterFullScreen(){var t,e;if(this.isFullscreen!==f.UW.CLOSED)return!1;this.addHistory(),this.isFullscreen=f.UW.OPENING,this.fullscreenStartTime=Date.now();const i=!this.option("fullscreen.native")||!n.Z.browser.fullScreen.capable||!n.Z.browser.fullScreen.enabled();return A&&A.appendTo(document.body),null==(t=this.fsButton)||t.disable(),null==(e=this.fsButton)||e.hide(),this.selectors&&(this.setClasses(),this.option("fullscreen.thumbnails.enable")&&(this.appendSelectors(),this.isStandardGrid&&this.selectorsWrapper.setCss({flexBasis:""})),this.selectors.beforeEnterFullscreen()),this.slideWrapper.removeClass(f.lh),this.fullScreenBox.setCss({position:"fixed",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:99999999999}),this.boxSize=this.instanceNode.size,this.boxBoundaries=this.instanceNode.rect,this.fakeMovingContainer.setCss(this.movingContainer.size),"grid"===this.option("layout.type")?this.movingContainer.removeClass(D):this.slideWrapper.setCss({aspectRatio:""}),this.instanceNode.append(this.fakeMovingContainer),this.fullScreenBox.append(this.movingContainer),document.body.appendChild(this.fullScreenBox.node),this.movingContainer.setCssProp("height","100%"),this.broadcast("before"+z+"In",{data:{pseudo:i}}),this.slideWrapper.setCssProp("height",""),this.productDetail&&this.productDetail.open(),"grid"===this.option("layout.type")&&this.enabledSlideIndexes.forEach((t=>{this.index!==t&&(this.slides[t].beforeHide(),this.slides[t].afterHide())})),n.Z.browser.fullScreen.request(this.fullScreenBox,{windowFullscreen:!this.option("fullscreen.native"),onEnter:this.onEnteredFullScreen.bind(this),onExit:()=>{[f.UW.CLOSED,f.UW.OPENING].includes(this.isFullscreen)||(this.isFullscreen=f.UW.CLOSING,this._beforeExitFullscreen(),this.broadcast("before"+z+"Out",{data:{pseudo:!1}}),this.onExitFullScreen())},fallback:()=>{n.Z.$(document.documentElement).addClass(F),n.Z.$(document.body).render(),setTimeout((()=>this.onEnteredFullScreen(!0)),64)}}),!0}onEnteredFullScreen(t){var e,i;if(this.isFullscreen!==f.UW.OPENING)return;this.isPseudo=t,clearTimeout(this.autoplayTimer),this.autoplayTimer=null,this.remainingAutoplayTime=this.autoplayDelay,t&&this.isFullscreen===f.UW.OPENING&&(this.fullScreenBox.setCss({top:A?Math.abs(A.node.getBoundingClientRect().top):0,left:0,right:0,bottom:0,width:"auto",height:A?window.innerHeight:"auto",display:this.productDetail?"flex":"block",position:"fixed"}),n.Z.$(document).addEvent("keydown",this.pseudoFSEvent)),this.isFullscreen=f.UW.OPENED,null==(e=this.fsButton)||e.toFullscreen(),this.slides[this.index]&&!this.canSlideFullscreen(this.index)&&this.isFullscreen!==f.UW.OPENED||setTimeout((()=>{var t,e;null==(t=this.fsButton)||t.enable(),null==(e=this.fsButton)||e.show()}),1),null==(i=this.selectors)||i.afterEnterFullscreen(),this.slides.length>1&&n.Z.$(document).addEvent("keyup",this.keyBoardArrowsCallback),this.showHideArrows(),this.showHideSelectors(),this.broadcast("after"+z+"In",{data:{pseudo:t}}),this.onResize(),this.autoplay();let s={};this.enabledSlideIndexes.length&&(s={slide:this.slides[this.index].api}),this.sendEvent(Z+"In",s)}_beforeExitFullscreen(){var t,e;null==(t=this.fsButton)||t.disable(),null==(e=this.fsButton)||e.hide(),clearTimeout(this.autoplayTimer),this.autoplayTimer=null,this.remainingAutoplayTime=this.autoplayDelay,this.option(Z+".always")&&this.slideWrapper.addClass(f.lh),this.selectors&&(this.option("fullscreen.thumbnails.enable")&&(this.appendSelectors(),this.isStandardGrid&&this.selectorsWrapper.setCss({flexBasis:this.option("thumbnails.size")+"px"})),this.setClasses(),this.selectors.beforeExitFullscreen()),this.productDetail&&this.productDetail.close(),"grid"===this.option("layout.type")&&this.enabledSlideIndexes.forEach((t=>{this.index!==t&&(this.slides[t].beforeShow(),this.slides[t].afterShow(f.oc.INIT))}))}exitFullScreen(){return this.isFullscreen===f.UW.OPENED&&(this.isFullscreen=f.UW.CLOSING,this._beforeExitFullscreen(),A&&A.remove(),n.Z.browser.fullScreen.capable&&n.Z.browser.fullScreen.enabled()&&this.option("fullscreen.native")?(this.broadcast("before"+z+"Out",{data:{pseudo:!1}}),n.Z.browser.fullScreen.cancel.call(document)):(n.Z.$(document.documentElement).removeClass(F),this.broadcast("before"+z+"Out",{data:{pseudo:!0}}),this.onExitFullScreen(!0)),!0)}onExitFullScreen(t){var e,i;if([f.UW.CLOSED,f.UW.OPENING].includes(this.isFullscreen))return;if(n.Z.$(document).removeEvent("keyup",this.keyBoardArrowsCallback),this.showHideArrows(),this.showHideSelectors(),this.fakeMovingContainer.remove(),this.instanceNode.append(this.movingContainer),this.fullScreenBox.remove(),"grid"===this.option("layout.type")&&(this.movingContainer.addClass(D),this.movingContainer.setCssProp("height","")),null==(e=this.fsButton)||e.toStandard(),this.slides[this.index]&&!this.canSlideFullscreen(this.index)&&this.isFullscreen!==f.UW.OPENED||setTimeout((()=>{var t,e;null==(t=this.fsButton)||t.enable(),null==(e=this.fsButton)||e.show()}),1),this.option(Z+".history")){const t="#sirv-viewer-"+this.fullscreenViewId;try{window.location.hash===t&&window.history.back()}catch(t){}}this.isFullscreen=f.UW.CLOSED,this.isPseudo=!1,null==(i=this.selectors)||i.afterExitFullscreen(),this.setContainerSize(),"grid"===this.option("layout.type")&&this.enabledSlideIndexes.forEach((t=>{this.slides[t].resize()})),this.fullscreenStartTime=null,this.autoplay(),this.broadcast("after"+z+"Out",{data:{pseudo:t}});let s={};this.enabledSlideIndexes.length&&(s={slide:this.slides[this.index].api}),this.sendEvent(Z+"Out",s),this.onResize()}getSlide(t){var e;return(null===t||"number"===n.Z.typeOf(t)&&t>=this.slides.length)&&(t=this.index),n.Z.isString(t)&&(t=this.findSlideIndex(t)),null==(e=this.slides[t])?void 0:e.api}onResizeWithoutSelectors(){this.destroyed||(A&&this.isFullscreen===f.UW.OPENED&&this.fullScreenBox.setCss({height:window.innerHeight,top:Math.abs(A.node.getBoundingClientRect().top)}),this.setRootMargin(),this.setContainerSize(),this.slides.forEach((t=>{t.resize()})))}onResize(){var t;this.destroyed||(null==(t=this.selectors)||t.onResize(),this.onResizeDebounce())}play(t){let e=!1,i=this.option("slide.delay");return"number"===n.Z.typeOf(t)&&t>9&&(i=t),(null===this.autoplayTimer&&!this.isAutoplay||i!==this.autoplayDelay)&&(this.autoplayDelay=i,this.isAutoplay=!0,this.remainingAutoplayTime=this.autoplayDelay,this.autoplay(),e=!0),e}pause(){const t=this.autoplayTimer;return this.isAutoplay=!1,clearTimeout(this.autoplayTimer),this.autoplayTimer=null,this.remainingAutoplayTime=this.autoplayDelay,null===t}pauseAutoplay(){clearTimeout(this.autoplayTimer),this.autoplayTimer=null,this.remainingAutoplayTime-=Date.now()-this.currentAutoplayTime}autoplay(){if(this.isAutoplay&&!this.isGridLayout()){this.currentAutoplayTime=Date.now();let t=this.autoplayDelay;this.remainingAutoplayTime!==t&&(t=this.remainingAutoplayTime<k?k:this.remainingAutoplayTime),clearTimeout(this.autoplayTimer),this.autoplayTimer=setTimeout((()=>{this.destroyed||this.jump("next",f.oc.AUTOPLAY)}),t)}}destroy(){var t,e;this.destroyed=!0,this.onResizeDebounce.cancel(),this.onResizeDebounce=null,this.instanceNode.removeClass(D),clearTimeout(this.autoplayTimer),this.autoplayTimer=null,this.selectorsDebounce&&(this.selectorsDebounce.cancel(),this.selectorsDebounce=null),n.Z.$(window).removeEvent("resize",this.onResizeHandler),this.onResizeHandler=null,this.onScrollHandler&&(n.Z.$(window).addEvent("scroll",this.onScrollHandler),this.onScrollHandler=null),n.Z.$(document).removeEvent("keyup",this.keyBoardArrowsCallback),this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null),this.option(Z+".history")&&(n.Z.$(window).removeEvent("popstate",this.onHistoryStateChange),f.vd.splice(f.vd.indexOf(this.fullscreenViewId),1)),this.movingContainer.removeEvent("mouseout"),this.slideWrapper.removeClass(f.lh),this.clearingTouchdragFunction&&this.clearingTouchdragFunction(),this.slidesContainer.removeEvent("touchdrag"),_(this.id)&&this.instanceNode.removeAttr("id"),this.contextMenu&&(this.movingContainer.removeEvent("contextmenu"),this.contextMenu.destroy(),this.contextMenu=null),this.productDetail&&(this.productDetail.destroy(),this.productDetail=null),null==(t=this.fsButton)||t.destroy(),this.fsButton=null,this.effect&&(this.effect.destroy(),this.effect=null,this.on("effectStart"),this.on("effectEnd")),this.arrows&&(this.arrows.destroy(),this.arrows=null,this.off("arrowAction")),null==(e=this.selectors)||e.destroy(),this.selectors=null,this.off("visibility"),this.off("changeSlide"),this.off("selectorsReady"),this.off("getSelectorImgUrl"),this.off("selectorsDone"),this.off("getSelectorProportion"),this.off("componentEvent"),this.off("goTo"+z),this.off("goTo"+z+"Out"),this.off("infoReady"),this.off("slideVideoPlay"),this.off("slideVideoPause"),this.off("slideVideoEnd"),this.off("slideVideoError"),this.slides.forEach((t=>{const e=t.originNode;n.Z.$(e).removeClass(f.i2+"-component"),t.destroy()})),this.slides=[],this.off("stats"),this.off("error"),this.sliderNodes.forEach((t=>this.instanceNode.append(t))),this.sliderNodes=[],n.Z.$(document).removeEvent("keydown",this.pseudoFSEvent),this.pseudoFSEvent=null,n.Z.$(document).removeEvent("keyup",this.keyBoardArrowsCallback),this.keyBoardArrowsCallback=null,this.fullScreenBox.remove(),this.fullScreenBox=null,this.controlsWrapper.remove(),this.controlsWrapper=null,this.slidesContainer.remove(),this.slidesContainer=null,this.selectorsWrapper.remove(),this.selectorsWrapper=null,this.slideWrapper.remove(),this.slideWrapper=null,this.movingContainer.remove(),this.movingContainer=null,this.isReady=!1,this.doSetSize=!1,this.instanceNode=null,this.externalContainer=null,super.destroy()}}const L=V;s()}catch(t){s(t)}}))},3181:(t,e,i)=>{i.a(t,(async(t,s)=>{try{i.d(e,{Z:()=>g});var n=i(6031),o=i(9764),r=i(9680),a=i(7504),l=i(6450),h=i(9913),d=i(932),c=i(4186),u=i(7244),p=i(3331),m=i(6479),f=i(1737);let t=null;try{t=(await Promise.resolve().then((()=>{if(!i.m[8574]){var t=new Error("Module '8574' is not available (weak dependency)");throw t.code="MODULE_NOT_FOUND",t}return i(8574)}))).default}catch(t){}const y="https://sirv.com/about-image/?utm_source=client&utm_medium=sirvembed&utm_content=typeofembed(image)&utm_campaign=branding";class v extends u.Z{constructor(e,i){super(e,i,{}),this.type=c.mA.IMAGE,this.instanceNode.attr("referrerpolicy",this.referrerPolicy),this.image=null,this.isInfoLoaded=!1,this.getImageInfoPromise=null,this.loadStaticImagePromise=null,this.imageShowPromise=null,this.srcWasSetted=!1,this.lastImageSize={width:0,height:0},this.imageIndex=i.imageIndex,this.dppx=1,this.upscale=!1,this.size={width:0,height:0},this.dontLoad=!0,this.accountInfo={},this.attemptsNumber=1,this.infoAlt=null,this.originAlt=this.instanceNode.attr("alt"),this.originTitle=this.instanceNode.attr("title"),this.src=this.instanceNode.attr("src"),this.srcset=this.instanceNode.attr("srcset"),this.startedSrc=this.src,this.dataSrc=this.instanceNode.attr("data-src"),this.isStaticImage=this.src&&!this.dataSrc,this.imageUrl=this.dataSrc||this.src,this.getImageTimer=(0,n.Z)((()=>{this.getImage()}),32),this.firstSlideAhead=!1,this.src=(0,d.kB)(this.imageUrl.replace(c.oQ,"$1")),this.queryParamsQuality=null,this.queryParams=(0,a.Z)(this.imageUrl.replace(c.oQ,"$2")),this.getQueryParams(),this.isNotSirv=(0,o.Z)(this.imageUrl),this.createHotspotsClass(t),this.createSirvImage()}sendEvent(t,e){e||(e={}),e.imageIndex=this.imageIndex,super.sendEvent(t,e)}getInfo(){return this.gettingInfoPromise||(this.gettingInfoPromise=new Promise(((t,e)=>{this.waitGettingInfo.wait((()=>{this.image.loadInfo().then((e=>{this.destroyed||(this.isInfoLoaded=!0,this.infoAlt=this.image.description,this.infoSize=this.image.originSize,this.accountInfo=this.image.accountInfo,this.hotspotsData=e.hotspots,this.hotspots&&(this.hotspots.originImageSize=this.infoSize),t())})).catch((t=>{this.destroyed||(this.isInfoLoaded=!0,t.status&&404===t.status||(this.isNotSirv=!0),e(t))}))}))}))),this.gettingInfoPromise}getQueryParams(){if(this.imageUrl){if(this.queryParams){const t=parseInt(this.queryParams.quality,10);isNaN(t)?delete this.queryParams.quality:this.queryParams.quality=t}this.queryParamsQuality=this.queryParams.quality||null}}getImageCreateSettings(){let t={src:{},srcset:{}};null!==this.quality&&null===this.queryParamsQuality&&(t.src.quality=this.quality);const e=this.hdQuality;return(null===this.queryParamsQuality||this.isHDQualitySet&&e<this.queryParamsQuality)&&(t.srcset={quality:e}),t.width=this.size.width,this.size.height&&(t.height=this.size.height),t=(0,f.Z)(t,this.infoSize),this.infoSize.width!==t.width&&this.infoSize.height!==t.height||(t.round=!1),h.Z.DPPX>1&&(t.dppx=this.dppx),t}setHDQuality(t){return t.dppx>1&&t.dppx<1.5&&(null===this.queryParamsQuality&&null!==this.quality?t.srcset.quality=this.quality:t.srcset&&delete t.srcset.quality),t}replaceSrc(){let t;if(this.isNotSirv){if(this.srcWasSetted)return;this.srcWasSetted=!0,t={src:this.imageUrl}}else{let e=this.getImageCreateSettings();e.dppx>1&&e.dppx<1.5&&delete e.srcset.quality,e=this.setHDQuality(e),t=this.image.getImage(e),this.lastImageSize.width=t.width||t.serverWidth,this.lastImageSize.height=t.height||t.serverHeight}t.srcset?!this.isNotSirv&&this.dppx>1&&this.instanceNode.attr("srcset",t.srcset+" "+this.dppx+"x"):this.instanceNode.removeAttr("srcset"),this.instanceNode.attr("src",t.src)}showImage(){return this.imageShowPromise||(this.imageShowPromise=new Promise(((t,e)=>{this.isStaticImage?(this.instanceNode.setCssProp("opacity",""),t()):this.isInView&&this.isSlideShown?(this.instanceNode.addEvent("transitionend",(e=>{"opacity"===e.propertyName&&(e.stop(),this.instanceNode.removeEvent("transitionend"),this.instanceNode.setCss({opacity:"",transition:""}),t())})),this.instanceNode.render(),this.instanceNode.setCss({opacity:1,transition:"opacity 0.3s linear"})):(this.instanceNode.setCssProp("opacity",""),t())}))),this.imageShowPromise}createSirvImage(){this.imageUrl&&!this.isNotSirv&&(this.on("imageOnload",(t=>{t.stopAll(),this.replaceSrc(),this.ready||(t.data.node?this.showImage().finally((()=>{this.done()})):(0,r.Z)(this.instanceNode).finally((()=>{this.showImage().finally((()=>{this.done(),this.sendContentLoadedEvent()}))})))})),this.on("imageOnerror",(t=>{t.stopAll(),console.log("image error")})),this.image=new l.Z(this.imageUrl,{imageSettings:this.queryParams,round:!0,dontLoad:this.dontLoad,referrerPolicy:this.referrerPolicy}),this.image.parentClass=this,this.getInfo())}getInfoSize(){return this.getImageInfoPromise||(this.getImageInfoPromise=new Promise(((t,e)=>{this.image?this.getInfo().then((()=>{t({size:this.infoSize,imageIndex:this.imageIndex})})).catch((t=>{e({error:t,isPlaceholder:t._isplaceholder,imageIndex:this.imageIndex})})):e({error:"nonsirv",isPlaceholder:!1,imageIndex:this.imageIndex})}))),this.getImageInfoPromise}startFullInit(t){this.isStartedFullInit||(super.startFullInit(t),this.getId("responsive-image-"),this.isStaticImage||this.instanceNode.setCssProp("opacity",0))}run(t,e,i,s){this.firstSlideAhead=i;let n=super.run(t,e,i);if(n)if(this.destroyed)n=!1;else{this.instanceNode.removeAttr("alt"),this.instanceNode.removeAttr("title"),this.instanceNode.setCss({display:"inline-flex"}).render(),this.instanceNode.setCss({display:""}).render();let t=null;(0,p.Z)(this.instanceNode.node.parentNode).then((e=>{t=e})).finally((()=>{this.destroyed||(t.width&&t.height<=20&&(t.height=0),this.size=(0,m.Z)(t,this.infoSize),(this.originAlt||this.infoAlt)&&h.Z.$(this.instanceNode).attr("alt",this.originAlt||this.infoAlt),this.originTitle&&h.Z.$(this.instanceNode).attr("title",this.originTitle),this.isStaticImage?this.loadStaticImage().finally((()=>{this.isInfoLoaded&&this.done()})):(this.originAlt&&h.Z.$(this.instanceNode).attr("alt",this.originAlt),this.isInView&&(this.isSlideShown||this.preload||s)&&this.getImage()),this.dataAlt&&h.Z.$(this.instanceNode).attr("alt",this.dataAlt))})),this.startGettingInfo()}return n}loadContent(){this.getImage(!0)}loadStaticImage(){return this.loadStaticImagePromise||(this.loadStaticImagePromise=new Promise(((t,e)=>{this.isStaticImage?this.instanceNode.node.complete?t():(this.instanceNode.addEvent("load",(e=>{this.sendContentLoadedEvent(),t()})),this.instanceNode.addEvent("error",(t=>{e()}))):t()}))),this.loadStaticImagePromise}getImage(t){this.isStaticImage||(this.isNotSirv||this.ready||this.size.width||this.size.height?(this.waitToStart.start(),this.isNotSirv?this.replaceSrc():this.getSirvImg()):this.attemptsNumber<100&&setTimeout((()=>{this.attemptsNumber+=1,this.isStarted=!1,this.run(this.isSlideShown,this.preload,this.firstSlideAhead,t)}),16*this.attemptsNumber))}get imageClassContainer(){return this.image}getSirvImg(){let t=this.getImageCreateSettings();if(h.Z.DPPX>1){const{width:e,height:i}=this.image.originSize;this.dppx=l.Z.getDPPX(t.width,t.height,e,i,t.round,this.upscale),t.dppx=this.dppx}t=this.setHDQuality(t),this.checkImage(t,this.dontLoad)?this.replaceSrc():this.image.getImage(t)}get originImageUrl(){return this.src}done(){if(!this.ready){if(this.accountInfo.branded){let t=this.instanceNode;"img"===t.tagName&&(t=t.node.parentNode),d.KF.showSirvAd(t,t,y,"Image viewer by Sirv")}this.goToFullscreen&&this.instanceNode.addClass(c.cY).addEvent("click",(t=>{this.fullscreenState===c.UW.CLOSED&&(t.stop(),this.emit("goToFullscreen"))})),super.done(),this.hotspots&&(this.hotspots.containerSize=this.instanceNode.node.getBoundingClientRect()),this.isFullscreenEnabled||(this.pinchCloud.removeEvent(),this.pinchCloud=null)}}getSelectorImgUrl(t){return new Promise(((e,i)=>{const s=this.getImageCreateSettings();s.src&&(t.src=s.src),t.srcset=s.srcset,this.isInfoLoaded?this.waitToStart.wait((()=>{e(Object.assign(this.image.getThumbnail(t),{imageIndex:this.imageIndex,alt:this.dataAlt||this.originAlt||this.infoAlt,referrerpolicy:this.instanceNode.attr("referrerpolicy")}))})):this.getInfo().then((()=>{this.waitToStart.wait((()=>{e(Object.assign(this.image.getThumbnail(t),{imageIndex:this.imageIndex,alt:this.dataAlt||this.originAlt||this.infoAlt,referrerpolicy:this.instanceNode.attr("referrerpolicy")}))}))})).catch(i)}))}getThumbnailData(t){return this.image.getThumbnail(t)}createPinchEvent(){super.createPinchEvent(this.instanceNode),this.pinchCloud.onPinchStart=t=>{[c.UW.OPENING,c.UW.CLOSING].includes(this.fullscreenState)||(this.pinchCloud.pinch=!0,this.pinchCloud.scale=t.scale,this.sendEvent("pinchStart"))},this.pinchCloud.onPinchMove=t=>{this.pinchCloud.pinch&&!this.pinchCloud.block&&(this.fullscreenState===c.UW.OPENED?t.scale<.2&&(this.pinchCloud.block=!0,this.sendEvent("fullscreenOut")):t.scale>=2&&(this.pinchCloud.block=!0,this.sendEvent("fullscreenIn")))}}onStartActions(){this.ready||this.isInView&&this.isStarted&&(this.fullscreenState===c.UW.OPENED&&this.onResize(),this.always?this.getImageTimer():this.getImage()),super.onStartActions()}onStopActions(){super.onStopActions()}onInView(t){t&&!this.isStaticImage&&(this.ready||this.isInView||this.isStarted&&(this.isInView=!0,this.isInfoLoaded&&(this.preload||this.isSlideShown)&&this.getImage()))}onBeforeFullscreenIn(t){this.getImageTimer.cancel(),this.ready&&!this.isStaticImage&&this.instanceNode.setCssProp("visibility","hidden"),super.onBeforeFullscreenIn(t),this.hotspots&&this.hotspots.disableAll()}onAfterFullscreenIn(t){this.instanceNode.removeClass(c.cY),this.always&&!this.ready&&this.isInView&&this.isStarted&&(this.onResize(),this.getImage()),this.hotspots&&setTimeout((()=>{this.fullscreenState===c.UW.OPENED&&(this.hotspots.enableAll(),this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements())}),100)}onBeforeFullscreenOut(t){this.instanceNode.setCss({width:"",height:"",visibility:""}),super.onBeforeFullscreenOut(t)}onAfterFullscreenOut(t){this.goToFullscreen&&this.instanceNode.addClass(c.cY),super.onAfterFullscreenOut(t)}onResize(){if(!this.isStarted||this.isStaticImage||this.isNotSirv)return!1;if(this.isFullscreenActionEnded()){let t=h.Z.$(this.instanceNode.node.parentNode).size;if(t=(0,m.Z)(t,this.infoSize),this.fullscreenState===c.UW.OPENED&&(this.instanceNode.setCss({width:t.width+"px",height:t.height+"px"}),this.instanceNode.setCssProp("visibility","")),this.size.width=t.width,this.size.height&&(this.size.height=t.height),this.ready){const t=50;(this.size.width-this.lastImageSize.width>t||this.size.height-this.lastImageSize.height>t)&&this.getImage(),this.hotspots&&(this.hotspots.containerSize=this.instanceNode.node.getBoundingClientRect(),this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements())}return!0}return!1}destroy(){if(this.image&&(this.off("imageOnload"),this.off("imageOnerror"),this.image.destroy(),this.image=null),this.getImageTimer.cancel(),this.getImageTimer=null,this.instanceNode.removeClass(c.cY).setCssProp("opacity",""),this.hotspot&&h.Z.$(this.instanceNode.node.parentNode).removeEvent("tap"),this.instanceNode.node.hasAttribute("src"))try{this.instanceNode.removeAttr("src"),this.isStaticImage&&this.instanceNode.attr("src",this.imageUrl)}catch(t){}if(this.isStaticImage?this.instanceNode.attr("src",this.src):this.instanceNode.removeAttr("src"),this.srcset)this.instanceNode.attr("srcset",this.srcset);else try{this.instanceNode.removeAttr("srcset")}catch(t){}return this.srcset=null,this.originAlt||!this.infoAlt&&!this.dataAlt||this.instanceNode.removeAttr("alt"),this.instanceNode.removeEvent("load"),this.hotspotsData=null,super.destroy(),!0}}const g=v;s()}catch(t){s(t)}}),1)}},t=>{var e=e=>t(t.s=e);t.O(0,[179],(()=>(e(866),e(4878),e(7244),e(4930),e(9806),e(3181),e(2681),e(4274),e(5956))));t.O()}]);"use strict";(globalThis.sirvViewerChunks=globalThis.sirvViewerChunks||[]).push([[9],{4592:(t,i,e)=>{e.r(i),e.d(i,{default:()=>w});var s=e(9913);const h=class{constructor(t){this.node=s.Z.$(t),this.state=0,this.states=["sirv-image-loading","sirv-image-loaded"]}setState(t){this.state!==t&&(this.state-1>=0&&this.node.removeClass(this.states[this.state-1]),this.state=t,this.node.addClass(this.states[t-1]))}destroy(){this.state=0,this.states.forEach((t=>{this.node.removeClass(t)})),this.node=null}},a={resize:{type:"boolean",default:!0},threshold:{type:"number",minimum:0,default:0},fit:{type:"string",enum:["contain","cover","crop","none"],default:"contain"},quality:{type:"number",minimum:0,maximum:100,default:80},hdQuality:{type:"number",minimum:0,maximum:100,default:60},autostart:{oneOf:[{type:"string",enum:["created","visible","off"]},{type:"boolean",enum:[!1]}],default:"visible"},onReady:{type:"function",default:()=>{}}};var n=e(5040),r=e(6450),o=e(6031),d=e(1068),c=e(9764),l=e(9680),g=e(7504);const m=t=>t&&/px$/.test(t)?parseInt(t,10):null,u=t=>{let i=null,e=s.Z.$(t).getCss("background-size");if(e){e=e.split(",")[0].split(" ");const t=m((e[0]||"").trim()),s=m((e[1]||"").trim());null!==t&&(i={width:t}),null!==s&&(i||(i={}),i.height=s)}return i},S=(t,i)=>{const e={width:i.width,height:i.height};return t.width&&i.width>t.width&&(e.width=t.width,e.height=t.width*i.height/i.width),t.height&&i.height>t.height&&(e.height=t.height,e.width=t.height*i.width/i.height),e};var p=e(3331),f=e(6479),y=e(1737),I=e(932),z=e(4186);const N=t=>{const i=t.getBoundingClientRect();return!(0===i.top&&0===i.right&&0===i.bottom&&0===i.left&&0===i.width&&0===i.height)};class v extends n.Z{constructor(t,i,e){i.options={common:{common:i.options.common,mobile:{}},local:{common:"",mobile:""}},super(t,i,a),this.node=this.instanceNode,this.type=z.mA.IMAGE,this.isLazy="visible"===this.option("autostart"),this.image=null,this.isInfoLoaded=!1,this.infoSize={width:0,height:0},this.isNotSirv=!1,this.isInView=!1,this.isStaticImage=!1,this.dppx=1,this.getImageInfoPromise=null,this.loadStaticImagePromise=null,this.upscale=!1,this.size={width:0,height:0},this.maxSize={},this.lastImageSize={width:0,height:0},this.srcWasSetted=!1,this.originAlt=null,this.infoAlt=null,this.originTitle=null,this.src=null,this.srcset=null,this.startedSrc=null,this.dataSrc=null,this.imageUrl=null,this.dontLoad=!0,this.appearanceState=null,this.dataBgSrc=null,this.intersectionObserver=null,this.rootMargin=0,this.fitSize=null,this.backgroundNodeSize=null,this.isMaxWidthSet=!1,this.cropPosition={x:null,y:null},this.cssBackgroundSize=null,this.isPlaceholder=!1,this.isRun=!1,this.inited=!1,this.resizeDebounce=(0,o.Z)((()=>{this._setRootMargin(),this.onResize()}),50),this.resizeHandler=t=>{this.resizeDebounce()};const s=this.instanceOptions.get("autostart");(s&&"off"!==s||e)&&this.preInit()}preInit(){this.isRun=!0,this.intersectionObserver=new IntersectionObserver((t=>{t.forEach((t=>{const i=t.isIntersecting||t.intersectionRatio>0;this.isInView!==i&&(this.inited?this.inViewCallback(i):(this.isInView=i,(i||N(this.instanceNode.node))&&this.init()))}))}),{rootMargin:this.rootMargin+"px 0px"}),this.intersectionObserver.observe(this.instanceNode.node),N(this.instanceNode.node)&&this.init()}init(){this.inited=!0;try{this.maxWidth=this.instanceNode.node.style.maxWidth}catch(t){}this._getBaseData(),this.imageUrl&&(s.Z.browser.ready||"loading"!==s.Z.D.node.readyState)&&this.startFullInit(),this.createSirvImage()}stop(){return this.destroy(),!0}getOptionsForStartFullInit(t){t&&(t={common:{common:t.common.lazyImage||{},mobile:t.mobile.lazyImage||{}},local:{common:"",mobile:""}}),super.getOptionsForStartFullInit(t)}checkReadiness(t,i){return"onLoad"===t&&this.ready}_setRootMargin(){let t=parseInt(this.option("threshold"),10);s.Z.isString(this.option("threshold"))&&(t=(s.Z.W.node.innerHeight||s.Z.D.node.documentElement.clientHeight)/100*t),this.rootMargin=t}_getQueryParams(){if(this.imageUrl){if(this.queryParams=(0,g.Z)(this.imageUrl.replace(z.oQ,"$2")),this.queryParams){const t=parseInt(this.queryParams.quality,10);isNaN(t)?delete this.queryParams.quality:this.queryParams.quality=t}this.queryParamsQuality=this.queryParams.quality||null}}_getBaseData(){this.originAlt=this.instanceNode.attr("alt"),this.originTitle=this.instanceNode.attr("title"),this.src=this.instanceNode.attr("src"),this.srcset=this.instanceNode.attr("srcset"),this.startedSrc=this.src,this.dataSrc=this.instanceNode.attr("data-src"),this.isStaticImage=this.src&&!this.dataSrc,this.imageUrl=this.dataSrc||this.src,((0,c.Z)(this.imageUrl)||"static"===this.instanceNode.attr("data-type"))&&(this.isNotSirv=!0),this.dataBgSrc=this.instanceNode.attr("data-bg-src"),this.isStaticImage=this.isStaticImage&&!this.dataBgSrc,this.imageUrl=this.dataBgSrc||this.imageUrl,"img"===this.instanceNode.tagName&&(this.instanceNode.attr("referrerpolicy",this.referrerPolicy),this.dataBgSrc&&(this.dataSrc||(this.dataSrc=this.dataBgSrc),this.dataBgSrc=null)),this.dataBgSrc&&(this.dontLoad=!1),this.imageUrl&&(this.src=(0,I.kB)(this.imageUrl.replace(z.oQ,"$1"))),this._getQueryParams(),this.startedSrc&&this.dataSrc&&this.startedSrc!==this.dataSrc&&(this.isPlaceholder=this.instanceNode.attr("src"))}createSirvImage(){this.imageUrl&&!this.isNotSirv&&(this.on("imageOnload",(t=>{if(t.stopAll(),this.replaceSrc(),!this.ready)if(this.isStaticImage)this.done();else{const i=()=>{this.appearanceState&&(this.appearanceState.setState(2),this.done())};t.data.node?i():(0,l.Z)(this.instanceNode).finally((()=>{i()}))}})),this.on("imageOnerror",(t=>{t.stopAll(),console.log("image error")})),this.image=new r.Z(this.imageUrl,{imageSettings:this.queryParams,round:!0,dontLoad:this.dontLoad,convertSmallerSideToZero:"crop"!==this.option("fit"),referrerPolicy:this.referrerPolicy}),this.image.parentClass=this,this.getInfoSize().catch((t=>{t._isplaceholder&&(this.infoSize=t,this.isNotSirv=!0)})).finally((()=>{"loading"!==s.Z.D.node.readyState&&this.isStartedFullInit&&this.run()})))}getInfoSize(){return this.getImageInfoPromise||(this.getImageInfoPromise=new Promise(((t,i)=>{this.image?this.image.loadInfo().then((i=>{this.isInfoLoaded=!0,this.infoAlt=this.image.description,this.infoSize=this.image.originSize,this.cropPosition=this.image.getCropPosition(),t(i)})).catch((t=>{this.isInfoLoaded=!0,t.status&&404===t.status||(this.isNotSirv=!0),i(t)})):i()}))),this.getImageInfoPromise}getId(t,i){this.id=this.instanceNode.attr("id"),this.id||this.isStaticImage||super.getId(t,i)}startFullInit(t,i){if(this.isStartedFullInit||!this.inited)return;this.getOptionsForStartFullInit(t);const e=this.option("autostart");if(!this.inited&&!(e&&"off"!==e||i))return;if(super.startFullInit(t),t&&(this.isLazy="visible"===this.option("autostart")),this.getId("responsive-image-"," "),this.dataBgSrc&&(this.cssBackgroundSize=u(this.instanceNode),this.cssBackgroundSize&&this.option("fit","none"),this.instanceNode.addClass(z.i2+"-bg-image"),"none"!==this.option("fit")&&"none"!==this.option("fit"))){const t="contain"===this.option("fit")?"-bg-contain":"-bg-cover";this.instanceNode.addClass(z.i2+t)}this._setRootMargin(),this.isStaticImage?this.isLazy=!1:(this.appearanceState=new h(this.instanceNode),this.isPlaceholder||this.appearanceState.setState(1));const a="img"===this.instanceNode.tagName;this.isLazy&&a&&this.instanceNode.attr("loading","lazy"),this.isLazy&&!a||(this.isInView=!0,this.intersectionObserver.disconnect(),this.intersectionObserver=null),(this.isInfoLoaded||this.isNotSirv)&&"loading"!==s.Z.D.node.readyState&&this.run(),s.Z.W.addEvent("resize",this.resizeHandler)}fixHeight(t){if(0!==t){(t===parseInt(this.instanceNode.getCss("block-size"),10)||t<=16)&&(t=0)}return t}run(){const t=super.run();if(t){this.instanceNode.removeAttr("alt"),this.instanceNode.removeAttr("title"),this.instanceNode.setCss({display:"inline-flex"}).render(),this.instanceNode.setCss({display:""}).render();let t=null;(0,p.Z)(this.instanceNode).then((i=>{t=i})).finally((()=>{if(!this.destroyed){if(t=(0,d.Z)(this.instanceNode,t),0===t.width&&0===t.height&&(this.instanceNode.setCss({width:"100%"}),t.width=this.instanceNode.size.width),0===t.width&&0===t.height&&(t.width=s.Z.W.node.innerWidth),"contain"===this.option("fit")?this.fitSize={width:"contain",height:"contain"}:this.fitSize={width:"cover",height:"cover"},"none"===this.option("fit")?this.cssBackgroundSize?this.size=S(this.cssBackgroundSize,this.infoSize):this.size=this.infoSize:this.size=(0,f.Z)(t,this.infoSize,this.fitSize),!this.dataBgSrc){const t=this.instanceNode.getCss("objectFit");this.maxWidth||!(this.infoSize.width>0)||t&&"fill"!==t||this.instanceNode.attr("width")||(this.isMaxWidthSet=!0,this.instanceNode.setCss({maxWidth:this.infoSize.width}))}(this.originAlt||this.infoAlt)&&this.instanceNode.attr("alt",this.originAlt||this.infoAlt),this.originTitle&&this.instanceNode.attr("title",this.originTitle),this.isStaticImage?this.loadStaticImage().finally((()=>{this.isInfoLoaded&&this.done()})):this.isLazy&&!this.isInView||this.getImage()}}))}return t}_setSrc(t,i){this.dataBgSrc?this.instanceNode.setCss({backgroundImage:'url("'+(i||t)+'")'}):(i?!this.isNotSirv&&this.dppx>1&&this.instanceNode.attr("srcset",i+" "+this.dppx+"x"):this.instanceNode.removeAttr("srcset"),this.instanceNode.attr("src",t))}_setHDQuality(t){if(t.dppx>1&&t.dppx<1.5){const i=this.instanceOptions.isset("quality")?this.option("quality"):null;null===this.queryParamsQuality&&null!==i?t.srcset.quality=i:t.srcset&&delete t.srcset.quality}return t}replaceSrc(){let t;if(this.isNotSirv){if(this.srcWasSetted)return;this.srcWasSetted=!0,t={src:this.imageUrl}}else{let i=this._getImageCreateSettings();i.dppx>1&&i.dppx<1.5&&delete i.srcset.quality,i=this._setHDQuality(i),t=this.image.getImage(i),this.lastImageSize.width=t.width||t.serverWidth,this.lastImageSize.height=t.height||t.serverHeight}this._setSrc(t.src,t.srcset)}loadStaticImage(){return this.loadStaticImagePromise||(this.loadStaticImagePromise=new Promise(((t,i)=>{this.isStaticImage?this.instanceNode.node.complete?t():(this.instanceNode.addEvent("load",(i=>{t()})),this.instanceNode.addEvent("error",(t=>{i()}))):t()}))),this.loadStaticImagePromise}_getImageCreateSettings(){let t={src:{},srcset:{}};const i=this.instanceOptions.isset("quality")?this.option("quality"):null;null!==i&&null===this.queryParamsQuality&&(t.src.quality=i);const e=this.option("hdQuality");return(null===this.queryParamsQuality||this.instanceOptions.isset("hdQuality")&&e<this.queryParamsQuality)&&(t.srcset={quality:e}),t.width=this.size.width,this.size.height&&(t.height=this.size.height),t=(0,y.Z)(t,this.infoSize),this.infoSize.width!==t.width&&this.infoSize.height!==t.height||(t.round=!1),s.Z.DPPX>1&&(t.dppx=this.dppx),"crop"===this.option("fit")&&(t.round=!1),t=this.setCrop(t),t}setCrop(t){if("crop"===this.option("fit")){const i=s.Z.$(this.instanceNode.node).getInnerSize(!!this.dataBgSrc);t.imageSettings||(t.imageSettings={}),t.imageSettings.crop||(t.imageSettings.crop={}),t.imageSettings.crop={x:this.cropPosition.x||"center",y:this.cropPosition.y||"center",width:i.width,height:i.height}}return t}getImage(){this.isStaticImage||(this.isNotSirv?this.getNonSirvImg():this.getSirvImg())}getNonSirvImg(){this.isPlaceholder?(0,l.Z)(this.dataSrc).finally((()=>{this.replaceSrc(),this.appearanceState.setState(2),this.done()})):(this.replaceSrc(),this.appearanceState.setState(2),this.done())}get imageClassContainer(){return this.image}getSirvImg(){let t=this._getImageCreateSettings();if(t.width&&(this.maxSize.width=t.width),t.height&&(this.maxSize.height=t.height),s.Z.DPPX>1){const i=this.image.originSize;this.dppx=r.Z.getDPPX(t.width,t.height,i.width,i.height,t.round,this.upscale),t.dppx=this.dppx}t=this._setHDQuality(t),this.checkImage(t)?this.replaceSrc():this.image.getImage(t)}checkSize(t){const i=this.infoSize.width,e=this.infoSize.height;return(t.width>i||t.height>e)&&(t.width=i,t.height&&(t.height=e),t.round=!1),t}done(){super.done(),this.option("onReady")(this.id),this.sendEvent("ready")}inViewCallback(t){t&&!this.isStaticImage&&(this.ready||this.isInView||this.isStarted&&(this.isInView=!0,this.isNotSirv?this.srcWasSetted||this.getImage():this.isInfoLoaded&&this.getImage())),this.isInView=t}sendEvent(t,i){i||(i={}),i.image||(i.image={}),i.image.event||(i.image.event={}),"ready"===t&&(t="onLoad"),i.type=t,i.image.id=this.id,i.image.url=this.instanceUrl,i.image=Object.assign(i.image,this.api),i.node=this.instanceNode,i.image.node=this.instanceNode.node,i.image.event.timestamp=Date.now(),i.image.event.type="lazyimage:"+t,this.emit("imagePublicEvent",{data:i})}get originImageUrl(){return this.src}onResize(){if(!this.isStarted||this.isStaticImage||!this.option("resize")||this.isNotSirv)return!1;let t;if(["crop","cover"].includes(this.option("fit"))?t=s.Z.$(this.instanceNode.node.parentNode).size:(t=this.instanceNode.size,t.height=this.fixHeight(t.height)),t=(0,f.Z)(t,this.infoSize,this.fitSize),this.size.width=t.width,this.size.height&&(this.size.height=t.height),this.ready&&!this.isNotSirv){const t=50;"crop"===this.option("fit")?(Math.abs(this.size.width-this.lastImageSize.width)>t||Math.abs(this.size.height-this.lastImageSize.height)>t)&&this.getImage():(this.size.width-this.lastImageSize.width>t||this.size.height-this.lastImageSize.height>t)&&this.getImage()}return!0}destroy(){if(this.dataBgSrc&&(this.instanceNode.removeClass(z.i2+"-bg-image"),this.instanceNode.setCssProp("background-image","")),this.isMaxWidthSet&&(this.isMaxWidthSet=!1,this.instanceNode.setCss({maxWidth:""})),this.appearanceState&&this.appearanceState.destroy(),this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null),s.Z.W.removeEvent("resize",this.resizeHandler),this.resizeDebounce.cancel(),this.resizeDebounce=null,this.image&&(this.off("imageOnload"),this.off("imageOnerror"),this.image.destroy(),this.image=null),this.instanceNode.node.hasAttribute("src"))try{this.instanceNode.removeAttr("src"),this.isStaticImage&&this.instanceNode.attr("src",this.imageUrl)}catch(t){}if(this.isStaticImage?this.instanceNode.attr("src",this.src):this.instanceNode.removeAttr("src"),this.srcset)this.instanceNode.attr("srcset",this.srcset);else try{this.instanceNode.removeAttr("srcset")}catch(t){}this.srcset=null,!this.originAlt&&this.infoAlt&&this.instanceNode.removeAttr("alt"),this.instanceNode.removeEvent("load"),this.isPlaceholder&&(this.instanceNode.attr("src",this.isPlaceholder),this.isPlaceholder=!1),super.destroy()}}const w=v}},t=>{t.O(0,[179],(()=>{return i=4592,t(t.s=i);var i}));t.O()}]);"use strict";(globalThis.sirvViewerChunks=globalThis.sirvViewerChunks||[]).push([[179],{8410:(t,e,i)=>{i.d(e,{Z:()=>bt});var s=i(9858),n=i(7410),r=i(9725),o=i(6818),a=i(6248),h=i(9346);const c=class{constructor(t){this.$J_TYPE="event.custom",this.magicEvent="event"===t.$J_TYPE?t:t.magicEvent,this.type=this.magicEvent.type,this._target=null,this.x=this.magicEvent.oe.x,this.y=this.magicEvent.oe.y,this.timeStamp=this.magicEvent.oe.timeStamp,this.relatedTarget=this.magicEvent.related,this.isQueueStopped=this.magicEvent.isQueueStopped,this.events=[]}get originEvent(){return this.magicEvent.originEvent}pushToEvents(t){const e=t;this.events.push(e)}stop(){return this.stopDistribution().stopDefaults()}stopDistribution(){return this.events.forEach((t=>{try{t.stopDistribution()}catch(t){}})),this}stopDefaults(){return this.events.forEach((t=>{try{t.stopDefaults()}catch(t){}})),this}stopQueue(){return this.isQueueStopped=()=>!0,this.magicEvent.stopQueue(),this}get clientXY(){return{x:this.clientX||this.magicEvent.oe.clientX,y:this.clientY||this.magicEvent.oe.clientY}}get pageXY(){return{x:this.x,y:this.y}}get target(){return this._target||this.magicEvent.oe.target}get related(){return this.relatedTarget}get button(){return this.magicEvent.button}get originalTarget(){if(this.events.length>0)return this.events[0].target}isTouchEvent(){return this.magicEvent.isTouchEvent()}isPrimaryTouch(){return this.magicEvent.isPrimaryTouch()}get primaryTouch(){return this.magicEvent.primaryTouch}get primaryTouchId(){return this.magicEvent.primaryTouchId}};class d extends c{constructor(t,e){super(t),({x:this.x,y:this.y}=t.pageXY),this.type="btnclick",this.clientX=t.oe.clientX,this.clientY=t.oe.clientY,this._target=e.node,this.pushToEvents(t)}}const l={threshold:300,button:1},u=function(t){t.stopDefaults()},p=function(t){const e=this.fetch("event:btnclick:options");if("dblclick"!==t.type&&t.button!==e.button)return;if(this.fetch("event:btnclick:ignore"))return void this.del("event:btnclick:ignore");let i;if("mousedown"===t.type)i=new d(t,this),this.store("event:btnclick:btnclickEvent",i);else if("mouseup"===t.type){if(i=this.fetch("event:btnclick:btnclickEvent"),!i)return;const s=t.pageXY;this.del("event:btnclick:btnclickEvent"),i.pushToEvents(t),t.timeStamp-i.timeStamp<=e.threshold&&Math.sqrt(Math.pow(s.x-i.x,2)+Math.pow(s.y-i.y,2))<=5&&this.callEvent("btnclick",i),bt(document).callEvent("mouseup",t)}else"dblclick"===t.type&&(i=new d(t,this),this.callEvent("btnclick",i))},m={add:function(t){this.store("event:btnclick:options",Object.assign({},l,t||{})),this.addEvent(["mousedown","mouseup"],p,1).addEvent("click",u,1)},remove:function(){this.removeEvent(["mousedown","mouseup"],p).removeEvent("click",u)}};class g extends c{constructor(t,e){super(t),({x:this.x,y:this.y}=t.pageXY),this.type="dblbtnclick",this.clientX=t.clientX,this.clientY=t.clientY,this._target=e.node,this.timedout=!1,this.tm=null,this.pushToEvents(t)}}const v={threshold:200},f=function(t){let e=this.fetch("event:dblbtnclick:event");if(e)clearTimeout(e.tm),this.del("event:dblbtnclick:event"),e.timedout||(e.pushToEvents(t),t.stopQueue().stop(),this.callEvent("dblbtnclick",e));else{const i=this.fetch("event:dblbtnclick:options");e=new g(t,this),e.tm=setTimeout((()=>{e.timedout=!0,t.isQueueStopped=()=>!1,this.callEvent("btnclick",t),this.del("event:dblbtnclick:event")}),i.threshold+10),this.store("event:dblbtnclick:event",e),t.stopQueue()}},w={add:function(t){this.store("event:dblbtnclick:options",Object.assign({},v,t||{})),this.addEvent("btnclick",f,1)},remove:function(){this.removeEvent("btnclick",f)}};class y extends c{constructor(t,e){super(t);const i=t.primaryTouch;this.type="tap",this.id=i.pointerId||i.identifier,this.x=i.pageX,this.y=i.pageY,this.pageX=i.pageX,this.pageY=i.pageY,this.clientX=i.clientX,this.clientY=i.clientY,this._target=e.node,this.pushToEvents(t)}get button(){return 0}}const b=function(t){t.stopDefaults()},S=function(t){t.isPrimaryTouch()?(this.store("event:tap:event",new y(t,this)),this.store("event:btnclick:ignore",!0)):this.del("event:tap:event")},E=function(t){const e=this.fetch("event:tap:event");e&&t.isPrimaryTouch()&&(this.del("event:tap:event"),e.id===t.primaryTouchId&&t.timeStamp-e.timeStamp<=200&&Math.sqrt(Math.pow(t.primaryTouch.pageX-e.x,2)+Math.pow(t.primaryTouch.pageY-e.y,2))<=10&&(this.del("event:btnclick:btnclickEvent"),t.stop(),e.pushToEvents(t),this.callEvent("tap",e)))},_={add:function(t){this.addEvent(["touchstart","pointerdown"],S,1).addEvent(["touchend","pointerup"],E,1).addEvent("click",b,1)},remove:function(){this.removeEvent(["touchstart","pointerdown"],S).removeEvent(["touchend","pointerup"],E).removeEvent("click",b)}};class x extends c{constructor(t,e){super(t),this.type="dbltap",this.x=t.x,this.y=t.y,this.clientX=t.clientX,this.clientY=t.clientY,this._target=e.node,this.timedout=!1,this.tm=null,this.pushToEvents(t)}}const A={threshold:300},Z=function(t){let e=this.fetch("event:dbltap:event");if(e)clearTimeout(e.tm),this.del("event:dbltap:event"),e.timedout||(e.pushToEvents(t),t.stopQueue().stop(),this.callEvent("dbltap",e));else{const i=this.fetch("event:dbltap:options");e=new x(t,this),e.tm=setTimeout((()=>{e.timedout=!0,t.isQueueStopped=()=>!1,this.callEvent("tap",t)}),i.threshold+10),this.store("event:dbltap:event",e),t.stopQueue()}},I={add:function(t){this.store("event:dbltap:options",Object.assign(JSON.parse(JSON.stringify(A)),t||{})),this.addEvent("tap",Z,1)},remove:function(){this.removeEvent("tap",Z)}};class O extends c{constructor(t,e,i){super(t),({x:this.x,y:this.y}=t.pageXY),this.type="mousedrag",this.clientX=t.clientX,this.clientY=t.clientY,this._target=e.node,this.state=i,this.dragged=!1,this.pushToEvents(t)}}const T=function(t){if(1!==t.button)return;const e=new O(t,this,"dragstart");this.store("event:mousedrag:dragstart",e)},N=function(t){let e=this.fetch("event:mousedrag:dragstart");e&&(t.stopDefaults(),e=new O(t,this,"dragend"),this.del("event:mousedrag:dragstart"),this.callEvent("mousedrag",e))},P=function(t){let e=this.fetch("event:mousedrag:dragstart");e&&(t.stopDefaults(),e.dragged||(e.dragged=!0,this.callEvent("mousedrag",e)),e=new O(t,this,"dragmove"),this.callEvent("mousedrag",e))},k={add:function(){const t=P.bind(this),e=N.bind(this);this.addEvent("mousedown",T,1).addEvent("mouseup",N,1),bt(document).addEvent("mousemove",t,1).addEvent("mouseup",e,1),this.store("event:mousedrag:listeners:document:move",t),this.store("event:mousedrag:listeners:document:end",e)},remove:function(){const t=()=>{};this.removeEvent("mousedown",T).removeEvent("mouseup",N),bt(document).removeEvent("mousemove",this.fetch("event:mousedrag:listeners:document:move")||t).removeEvent("mouseup",this.fetch("event:mousedrag:listeners:document:end")||t),this.del("event:mousedrag:listeners:document:move").del("event:mousedrag:listeners:document:end")}};let C,D,M="wheel";"onwheel"in document||(M="mousewheel");class F extends c{constructor(t,e,i,s,n,r,o){super(t),({x:this.x,y:this.y}=t.pageXY),this.type="mousescroll",this._target=e.node,this.delta=i||0,this.deltaX=s||0,this.deltaY=n||0,this.deltaZ=r||0,this.deltaFactor=o||0,this.deltaMode=t.deltaMode||0,this.isMouse=!1,this.pushToEvents(t)}}const z=()=>{C=null},j=function(t){let e=0,i=0;const s=t.originEvent;if(s.detail&&(i=-1*t.detail),void 0!==s.wheelDelta&&(i=s.wheelDelta),void 0!==s.wheelDeltaY&&(i=s.wheelDeltaY),void 0!==s.wheelDeltaX&&(e=-1*s.wheelDeltaX),s.deltaY&&(i=-1*s.deltaY),s.deltaX&&(e=s.deltaX),0===i&&0===e)return;let r=0===i?e:i;const o=Math.max(Math.abs(i),Math.abs(e));(!C||o<C)&&(C=o);const a=r>0?Math.floor:Math.ceil;r=a(r/C),e=a(e/C),i=a(i/C),D&&clearTimeout(D),D=setTimeout(z,200);const h=new F(t,this,r,e,i,0,C);var c,d;h.isMouse=(c=C,d=s.deltaMode||0,c>50||1===d&&!("win"===n.Z.platform&&c<1)||c%12==0||c%4.000244140625==0),this.callEvent("mousescroll",h)},Y={add:function(){this.addEvent(M,j,1)},remove:function(){this.removeEvent(M,j,1)}};let U=null;const X=(t,e)=>{const i=e.x-t.x,s=e.y-t.y;return Math.sqrt(i*i+s*s)},B=(t,e)=>{let i;const s=t.originEvent;return s.targetTouches&&s.changedTouches?(i=s.targetTouches?s.targetTouches:s.changedTouches,i=Array.prototype.slice.call(i)):(i=[],e&&e.forEach((t=>{i.push(t)}))),i},L=(t,e,i)=>!(!t.pointerId||"touch"!==t.pointerType||i&&!e.has(t.pointerId))&&(e.set(t.pointerId,t),!0),R=t=>t.pointerId&&"touch"===t.pointerType?t.pointerId:t.identifier,J=(t,e)=>{let i=!1;for(let s=0;s<t.length&&2!==e.length;s++){const n=R(t[s]);e.includes(n)||(e.push(n),i=!0)}return i},H=(t,e)=>{let i=!1;if(e){const s=(t=>t.map((t=>R(t))))(t);for(let t=0;t<e.length;t++)if(!s.includes(e[t])){e.splice(t,1),i=!0;break}}return i},W=(t,e)=>{const i=[];for(let s=0;s<t.length&&(!e.includes(R(t[s]))||(i.push(t[s]),2!==i.length));s++);return i},Q=t=>{const e=t.fetch("event:pinch:target");e&&e.removeEvent(["touchend"],t.fetch("event:pinch:listeners:document:end")),t.del("event:pinch:target")},q=t=>{const e=t.fetch("event:pinch:cache");e&&e.clear(),t.del("event:pinch:cache")};class V extends c{constructor(t,e,i,s){super(t),this.type="pinch",this._target=e.node,this.state=i,this.x=s.x,this.y=s.y,this.scale=s.scale,this.space=s.space,this.zoom=s.zoom,this.state=i,this.centerPoint=s.centerPoint,this.points=s.points,this.pushToEvents(t)}}const $={x:0,y:0,space:0,scale:1,zoom:0,startSpace:0,startScale:1,started:!1,dragged:!1,points:[],centerPoint:{x:0,y:0}},K=(t,e)=>{const i=e.space;t.length>1?(e.space=((t,e)=>{const i=Array.prototype.slice.call(t),s=Math.abs(i[1].pageX-i[0].pageX),n=Math.abs(i[1].pageY-i[0].pageY),r=Math.min(i[1].pageX,i[0].pageX)+s/2,o=Math.min(i[1].pageY,i[0].pageY)+n/2;let a=0;return e.points=[i[0],i[1]],a=Math.pow(X({x:i[0].pageX,y:i[0].pageY},{x:i[1].pageX,y:i[1].pageY}),2),e.centerPoint={x:r,y:o},e.x=e.centerPoint.x,e.y=e.centerPoint.y,a})(t,e),e.startSpace||(e.startSpace=e.space),i>e.space?e.zoom=-1:i<e.space?e.zoom=1:e.zoom=0,e.scale=e.space/U):e.points=[]},G=function(t){let e,i=this.fetch("event:pinch:variables");const s=this.fetch("event:pinch:cache"),n=this.fetch("event:pinch:activepoints");if(i||(i=JSON.parse(JSON.stringify($))),i.started){if(t.pointerId&&!L(t,s,!0))return;t.stop(),K(W(B(t,s),n),i),e=new V(t,this,"pinchmove",i),this.callEvent("pinch",e)}},tt=function(t){let e,i,s=this.fetch("event:pinch:cache"),n=this.fetch("event:pinch:activepoints");if("mouse"===t.pointerType)return;n||(n=[],this.store("event:pinch:activepoints",n)),s||(s=new Map,this.store("event:pinch:cache",s)),this.fetch("event:pinch:target")||(this.store("event:pinch:target",bt(t.target)),bt(t.target).addEvent(["touchend"],this.fetch("event:pinch:listeners:document:end"),1)),L(t,s);const r=B(t,s);J(r,n),2===r.length&&(e=this.fetch("event:pinch:pinchstart"),i=this.fetch("event:pinch:variables"),i||(i=JSON.parse(JSON.stringify($))),K(W(r,n),i),e||(e=new V(t,this,"pinchstart",i),this.store("event:pinch:pinchstart",e),this.store("event:pinch:variables",i),U=i.space,this.callEvent("pinch",e),i.started=!0))},et=function(t){const e=this.fetch("event:pinch:cache");if("mouse"===t.pointerType||t.pointerId&&(!e||!e.has(t.pointerId)))return;let i=this.fetch("event:pinch:pinchstart");const s=this.fetch("event:pinch:variables"),n=this.fetch("event:pinch:activepoints"),r=B(t,e);((t,e)=>{t.pointerId&&"touch"===t.pointerType&&e&&e.has(t.pointerId)&&e.delete(t.pointerId)})(t,e);const o=H(r,n);if(!(i&&s&&s.started&&o&&n))return;o&&J(r,n);let a="pinchend";r.length>1?a="pinchresize":(this.del("event:pinch:pinchstart").del("event:pinch:variables").del("event:pinch:activepoints"),q(this),Q(this)),K(W(r,n),s),i=new V(t,this,a,s),this.callEvent("pinch",i)},it={add:function(t){U||(U=(()=>{const t=bt(window).size;return t.width=Math.min(t.width,t.height),t.height=t.width,Math.pow(X({x:0,y:0},{x:t.width,y:t.height}),2)})());const e=G.bind(this),i=et.bind(this);this.addEvent(["touchstart","pointerdown"],tt,1).addEvent(["pointerup"],et,1).addEvent(["touchmove","pointermove"],G,1),this.store("event:pinch:listeners:document:move",e),this.store("event:pinch:listeners:document:end",i),bt(document).addEvent("pointermove",e,1).addEvent("pointerup",i,1)},remove:function(){this.removeEvent(["touchstart","pointerdown"],tt).removeEvent(["pointerup"],et).removeEvent(["touchmove","pointermove"],G);const t=()=>{};bt(document).removeEvent("pointermove",this.fetch("event:pinch:listeners:document:move")||t,1).removeEvent("pointerup",this.fetch("event:pinch:listeners:document:end")||t,1),this.del("event:pinch:listeners:document:move").del("event:pinch:listeners:document:end"),Q(this),q(this),this.del("event:pinch:variables").del("event:pinch:activepoints").del("event:pinch:pinchstart")}};class st extends c{constructor(t,e,i){super(t);const s=t.primaryTouch;this.type="touchdrag",this.id=s.pointerId||s.identifier,this.clientX=s.clientX,this.clientY=s.clientY,this.pageX=s.pageX,this.pageY=s.pageY,this.x=s.pageX,this.y=s.pageY,this._target=e.node,this.state=i,this.dragged=!1,this.pushToEvents(t)}get button(){return 0}}const nt=function(t){if(!t.isPrimaryTouch())return;const e=new st(t,this,"dragstart");this.store("event:touchdrag:dragstart",e)},rt=function(t){let e=this.fetch("event:touchdrag:dragstart");e&&e.dragged&&e.id===t.primaryTouchId&&(e=new st(t,this,"dragend"),this.del("event:touchdrag:dragstart"),this.callEvent("touchdrag",e))},ot=function(t){let e=this.fetch("event:touchdrag:dragstart");e&&t.isPrimaryTouch()&&(e.id===t.primaryTouchId?(!e.dragged&&Math.sqrt(Math.pow(t.primaryTouch.pageX-e.x,2)+Math.pow(t.primaryTouch.pageY-e.y,2))>10&&(e.dragged=!0,this.callEvent("touchdrag",e)),e.dragged&&(e=new st(t,this,"dragmove"),this.callEvent("touchdrag",e))):this.del("event:touchdrag:dragstart"))},at={btnclick:m,dblbtnclick:w,tap:_,dbltap:I,mousedrag:k,mousescroll:Y,pinch:it,touchdrag:{add:function(){const t=ot.bind(this),e=rt.bind(this);this.addEvent(["touchstart","pointerdown"],nt,1).addEvent(["touchend","pointerup"],rt,1).addEvent(["touchmove","pointermove"],ot,1),this.store("event:touchdrag:listeners:document:move",t),this.store("event:touchdrag:listeners:document:end",e),bt(document).addEvent("pointermove",t,1).addEvent("pointerup",e,1)},remove:function(){const t=()=>{};this.removeEvent(["touchstart","pointerdown"],nt).removeEvent(["touchend","pointerup"],rt).removeEvent(["touchmove","pointermove"],ot),bt(document).removeEvent("pointermove",this.fetch("event:touchdrag:listeners:document:move")||t,1).removeEvent("pointerup",this.fetch("event:touchdrag:listeners:document:end")||t,1),this.del("event:touchdrag:listeners:document:move").del("event:touchdrag:listeners:document:end")}}};const ht=class{constructor(t){this.node=t,this.$J_UUID=(0,r.Z)(this),this.$J_TYPE=null,this.$J_EXT=()=>{},s.P_.set(this.node,this)}fetch(t,e){var i;const s=(0,o.cF)(this.$J_UUID);return s.has(t)||void 0===e||s.set(t,e),null!=(i=s.get(t))?i:null}store(t,e){return(0,o.cF)(this.$J_UUID).set(t,e),this}del(t){return(0,o.cF)(this.$J_UUID).delete(t),this}addEvent(t,e,i,r){if(void 0===r&&(r={}),Array.isArray(t))return t.forEach((t=>{this.addEvent(t,e,i,r)})),this;const o=s.bC[t]||t;if(!o||!e||!(0,h.Z)(o)||"function"!==(0,a.Z)(e))return this;if("domready"===o&&n.Z.ready)return e(),this;i=parseInt(i||50,10),e.$J_EUID||(e.$J_EUID=Math.floor(Math.random()*+new Date));const c=this.fetch("_EVENTS_",{});let d=c[o];d||(d=[],c[o]=d,at[o]?at[o].add.call(this,r):(d.handle=t=>{t=Object.assign(t||window.e,{$J_TYPE:"event"}),this.callEvent(o,bt(t))},this.node.addEventListener(o,d.handle,r)));const l={type:o,fn:e,priority:i,euid:e.$J_EUID};return d.push(l),d.sort(((t,e)=>t.priority-e.priority)),this}removeEvent(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];const n=e.length>1?e[1]:-100;if(Array.isArray(e[0]))return e[0].forEach((t=>{this.removeEvent(t,n)})),this;const r=s.bC[e[0]]||e[0],o=this.fetch("_EVENTS_",{});if(!(r&&(0,h.Z)(r)&&o&&o[r]))return this;const a=o[r]||[];for(let t=0;t<a.length;t++){const e=a[t];(-100===n||n&&n.$J_EUID===e.euid)&&a.splice(t--,1)}return 0===a.length&&(at[r]?at[r].remove.call(this):this.node.removeEventListener(r,a.handle,!1),delete o[r]),this}callEvent(t,e){const i=this.fetch("_EVENTS_",{}),n=s.bC[t]||t;if(n&&(0,h.Z)(n)&&i&&i[n]){try{e&&e.type||(e=Object.assign(e||{},{type:n}))}catch(t){}void 0===e.timeStamp&&(e.timeStamp=Date.now());const t=i[n]||[];for(let i=0;i<t.length&&(!e.isQueueStopped||!e.isQueueStopped());i++)t[i].fn.call(this,e)}else;}clearEvents(){const t=this.fetch("_EVENTS_");return t?(Object.keys(t).forEach((t=>{this.removeEvent(t)})),this.del("_EVENTS_"),this):this}};const ct=class extends ht{constructor(t){super(t),this.$J_TYPE="magicjs-"+(t===window?"window":"document")}get size(){return n.Z.touchScreen?{width:window.innerWidth,height:window.innerHeight}:{width:n.Z.doc.clientWidth,height:n.Z.doc.clientHeight}}get scroll(){return{x:window.pageXOffset||n.Z.doc.scrollLeft,y:window.pageYOffset||n.Z.doc.scrollTop}}get fullSize(){return{width:Math.max(n.Z.doc.scrollWidth,this.size.width),height:Math.max(n.Z.doc.scrollHeight,this.size.height)}}},dt=t=>{if(!(t in document.documentElement.style)){const e=n.Z.cssDomPrefix+t.charAt(0).toUpperCase()+t.slice(1);if(e in document.documentElement.style)return e}return t};var lt=i(9058);const ut=/^(border(Top|Bottom|Left|Right)Width)|((padding|margin)(Top|Bottom|Left|Right))$/,pt={},mt={aspectRatio:!0,fontWeight:!0,lineHeight:!0,opacity:!0,zIndex:!0,zoom:!0},gt=/\S+/g,vt=t=>Array.isArray(t)?t:(0,h.Z)(t)&&t.match(gt)||[];const ft=class extends ht{constructor(t){super(t),this.$J_TYPE="magicjs-element"}requestFullScreen(){n.Z.fullScreen.capable&&!document.requestFullScreen?n.Z.fullScreen.request(this.node):this.node.requestFullScreen(this.node)}addClass(t){const e=vt(t);return e.length&&this.node.classList.add(...e),this}removeClass(t){const e=vt(t);return e.length&&this.node.classList.remove(...e),this}getCss(t){const e=(0,lt.Z)(t);pt[e]||(pt[e]=dt(e)),t=pt[e];let i=((t,e)=>{const i=window.getComputedStyle(t,null);return i?i.getPropertyValue(e)||i[e]:null})(this.node,t);if("auto"===i&&(i=null),null!==i){if("opacity"===t)return i?parseFloat(i):1;ut.test(t)&&(i=parseInt(i,10)?i:"0px")}return i}setCssProp(t,e){const i=(0,lt.Z)(t);try{pt[i]||(pt[i]=dt(i)),t=pt[i],this.node.style[t]=e+("number"!==(0,a.Z)(e)||mt[i]?"":"px")}catch(t){}return this}setCss(t){return Object.entries(t).forEach((t=>{this.setCssProp(...t)})),this}getStyles(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Object.fromEntries(e.map((t=>[t,this.getCss(t)])))}setProps(t){return Object.entries(t).forEach((t=>{t[1]=""+t[1],"class"===t[0]?this.addClass(t[1]):this.node.setAttribute(...t)})),this}get size(){return{width:this.node.offsetWidth,height:this.node.offsetHeight}}render(){return this.size}getInnerSize(t){const e=this.size;return e.width-=parseFloat(this.getCss("border-left-width")||0)+parseFloat(this.getCss("border-right-width")||0),e.height-=parseFloat(this.getCss("border-top-width")||0)+parseFloat(this.getCss("border-bottom-width")||0),t||(e.width-=parseFloat(this.getCss("padding-left")||0)+parseFloat(this.getCss("padding-right")||0),e.height-=parseFloat(this.getCss("padding-top")||0)+parseFloat(this.getCss("padding-bottom")||0)),e}get scroll(){return{top:this.node.scrollTop,left:this.node.scrollLeft}}get fullScroll(){let t=this.node;const e={top:0,left:0};do{e.left+=t.scrollLeft||0,e.top+=t.scrollTop||0,t=t.parentNode}while(t);return e}get position(){const t=this.node.getBoundingClientRect(),e=bt(document).scroll,i=n.Z.doc;return{top:t.top+e.y-i.clientTop,left:t.left+e.x-i.clientLeft}}get rect(){const t=this.position,e=this.size;return{top:t.top,bottom:t.top+e.height,left:t.left,right:t.left+e.width}}changeContent(t){try{this.node.innerHTML=t}catch(e){this.node.innerText=t}return this}remove(){return this.node.remove(),s.P_.delete(this.node),this}kill(){return Array.from(this.node.childNodes).forEach((t=>{3!==t.nodeType&&8!==t.nodeType&&bt(t).kill()})),this.remove(),this.clearEvents(),(0,o.ru)(this.$J_UUID),null}append(t,e){void 0===e&&(e="bottom");const i=this.node.firstChild;return t=bt(t),"top"===e&&i?this.node.insertBefore(t.node,i):this.node.appendChild(t.node||t),this}appendTo(t,e){return bt(t).append(this,e),this}get tagName(){return this.node.tagName.toLowerCase()}attr(t,e){let i=this;return null!=e?this.node.setAttribute(t,e):(i=this.node.getAttribute(t),i&&(0,h.Z)(i)&&""!==i.trim()||(i=null)),i}removeAttr(t){return this.node.removeAttribute(t),this}hasClass(t){return this.node.classList.contains(t)}hasAttribute(t){return this.node.hasAttribute(t)}};const wt=class{constructor(t){this.oe=t,this.$J_TYPE="event",this.isQueueStopped=()=>!1,this.type=this.oe.type,this.timeStamp=this.oe.timeStamp,this.propertyName=this.oe.propertyName,this.pointerType=this.oe.pointerType}get originEvent(){return this.oe}stop(){return this.stopDistribution().stopDefaults()}stopDistribution(){return this.oe.stopPropagation?this.oe.stopPropagation():this.oe.cancelBubble=!0,this}stopDefaults(){return this.oe.preventDefault?this.oe.preventDefault():this.oe.returnValue=!1,this}stopQueue(){return this.isQueueStopped=()=>!0,this}get clientXY(){let t,e={x:0,y:0};return t=/touch/i.test(this.type)?this.oe.changedTouches[0]:this.oe,t&&(e={x:t.clientX,y:t.clientY}),e}get pageXY(){let t=this.oe;return/touch/i.test(this.type)&&(t=this.oe.changedTouches[0]),t?{x:t.pageX||t.clientX+n.Z.doc.scrollLeft,y:t.pageY||t.clientY+n.Z.doc.scrollTop}:{x:0,y:0}}get target(){let t=this.oe.target;for(t||(t=this.oe.srcElement);t&&3===t.nodeType;)t=t.parentNode;return t}get related(){let t=null;switch(this.type){case"mouseover":case"pointerover":case"MSPointerOver":t=this.oe.relatedTarget,t||(t=this.oe.fromElement);break;case"mouseout":case"pointerout":case"MSPointerOut":t=this.oe.relatedTarget,t||(t=this.oe.toElement);break;default:return t}try{for(;t&&3===t.nodeType;)t=t.parentNode}catch(e){t=null}return t}get button(){let t=this.oe.which;return this.oe.which||void 0===this.oe.button||(t=1&this.oe.button?1:2&this.oe.button?3:4&this.oe.button?2:0),t}isTouchEvent(){return this.oe.pointerType&&("touch"===this.oe.pointerType||this.oe.pointerType===this.oe.MSPOINTER_TYPE_TOUCH)||/touch/i.test(this.type)}isPrimaryTouch(){return this.oe.pointerType?("touch"===this.oe.pointerType||this.oe.MSPOINTER_TYPE_TOUCH===this.oe.pointerType)&&this.oe.isPrimary:this.oe instanceof window.TouchEvent&&(1===this.oe.changedTouches.length&&(!this.oe.targetTouches.length||this.oe.targetTouches[0].identifier===this.oe.changedTouches[0].identifier))}get primaryTouch(){let t=null;return this.oe.pointerType?!this.oe.isPrimary||"touch"!==this.oe.pointerType&&this.oe.MSPOINTER_TYPE_TOUCH!==this.oe.pointerType||(t=this.oe):this.oe instanceof window.TouchEvent&&(t=this.oe.changedTouches[0]),t}get primaryTouchId(){let t=null;return this.oe.pointerType?!this.oe.isPrimary||"touch"!==this.oe.pointerType&&this.oe.MSPOINTER_TYPE_TOUCH!==this.oe.pointerType||(t=this.oe.pointerId):this.oe instanceof window.TouchEvent&&(t=this.oe.changedTouches[0].identifier),t}},yt=t=>{let e=t;switch((0,a.Z)(t)){case"string":{const i=document.getElementById(t);e=i?yt(i):null;break}case"window":case"document":e=s.P_.has(t)?s.P_.get(t):new ct(t);break;case"element":e=s.P_.has(t)?s.P_.get(t):new ft(t);break;case"event":e=new wt(t)}return e},bt=yt},7202:(t,e,i)=>{i.d(e,{Z:()=>n});var s=i(8410);const n=(t,e,i)=>(0,s.Z)(document.createElement(t)).setProps(e||{}).setCss(i||{})},9725:(t,e,i)=>{i.d(e,{Z:()=>n});let s=0;const n=t=>(t.$J_UUID||(t.$J_UUID=++s),t.$J_UUID)},9058:(t,e,i)=>{i.d(e,{Z:()=>s});const s=t=>t.replace(/-\D/g,(t=>t.charAt(1).toUpperCase()))},3412:(t,e,i)=>{i.d(e,{Z:()=>w});var s=i(9858),n=i(9725),r=i(6818),o=i(6248),a=i(8410),h=i(7202),c=i(9346),d=i(7410);const l=d.Z.constructableStylesheets?(t,e,i,n)=>{if(i||(i=s.A4),!s.Xb.has(i)){var r;const t=new CSSStyleSheet;s.Xb.set(i,t),null!=(r=n)&&r.adoptedStyleSheets||(n=document),n.adoptedStyleSheets=[...n.adoptedStyleSheets,t]}(0,c.Z)(e)||(e=Object.entries(e).map((t=>t[0]+":"+t[1])).join(";"));const o=s.Xb.get(i);return o.insertRule(t+"{"+e+"}"),o.cssRules.length-1}:(t,e,i,n)=>{i||(i=s.A4);let r=document.head||document.body;n&&(r=(0,a.Z)(n).node||n);let o=(0,a.Z)(r.querySelector("#"+i));o||(o=(0,h.Z)("style").attr("id",i).attr("type","text/css"),r.insertBefore(o.node,r.firstChild));const d=o.node.sheet||o.node.styleSheet;return(0,c.Z)(e)||(e=Object.entries(e).map((t=>t[0]+":"+t[1])).join(";")),d.insertRule(t+" {"+e+"}",d.cssRules.length)},u=d.Z.constructableStylesheets?(t,e)=>{if(s.Xb.has(t)){return s.Xb.get(t).deleteRule(e),!0}return!1}:(t,e)=>{const i=(0,a.Z)(t);if("element"!==(0,o.Z)(i))return;(i.sheet||i.styleSheet).deleteRule(e)},p=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})).toUpperCase(),m=t=>new URL(t,document.baseURI).href,g=t=>{let e=0;const i=t.length;for(let s=0;s<i;++s)e=31*e+t.charCodeAt(s),e%=4294967296;return e};var v=i(9058),f=i(6955);const w={$uuid:n.Z,getStorage:r.cF,typeOf:o.Z,$:a.Z,$new:h.Z,addCSS:l,removeCSS:u,generateUUID:p,getAbsoluteURL:m,getHashCode:g,camelize:v.Z,isObject:f.Z,isString:c.Z,DPPX:s.IU,W:(0,a.Z)(window),D:(0,a.Z)(document),U:void 0}},6955:(t,e,i)=>{i.d(e,{Z:()=>s});const s=t=>null!==t&&"object"==typeof t&&t.constructor===Object},9346:(t,e,i)=>{i.d(e,{Z:()=>s});const s=t=>"string"==typeof t||t instanceof window.String},6818:(t,e,i)=>{i.d(e,{cF:()=>n,ru:()=>r});const s=new Map,n=t=>(s.has(t)||s.set(t,new Map),s.get(t)),r=t=>{s.has(t)&&s.delete(t)}},6248:(t,e,i)=>{i.d(e,{Z:()=>s});const s=t=>{if(null==t)return!1;if(t.$J_TYPE)return t.$J_TYPE;if(t.nodeType){if(1===t.nodeType)return"element";if(3===t.nodeType)return"textnode"}return t===window?"window":t===document?"document":t instanceof window.Array?"array":t instanceof window.Function?"function":t instanceof window.String?"string":t===window.event||t.constructor==window.Event||t.constructor==window.MouseEvent||t.constructor==window.UIEvent||t.constructor==window.KeyboardEvent||t.constructor==window.KeyEvent?"event":t instanceof window.Date?"date":t instanceof window.RegExp?"regexp":t.length&&t.item?"collection":t.length&&t.callee?"arguments":typeof t}},7410:(t,e,i)=>{i.d(e,{Z:()=>l});var s=i(8410),n=i(7202),r=i(9858);const o=navigator.userAgent.toLowerCase(),a=o.match(/(webkit|gecko)\/(\d+\.?\d*)/i),h=o.match(/(edge|opr)\/(\d+\.?\d*)/i)||o.match(/(crios|chrome|safari|firefox|opera|opr)\/(\d+\.?\d*)/i),c=o.match(/version\/(\d+\.?\d*)/i);const d=new class{constructor(){this._magicClasses=[],this._features={fullScreen:!!(document.fullscreenEnabled||document.msFullscreenEnabled||document.webkitFullScreenEnabled||document.webkitFullscreenEnabled)},this._touchScreen="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,this._mobile=!!o.match(/(android|bb\d+|meego).+|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/),this._engine=(()=>{let t="unknown";return a&&a[1]?t=a[1].toLowerCase():null!==window.mozInnerScreenY?t="gecko":null!==window.WebKitPoint&&(t="webkit"),t})(),this._androidBrowser=!1,this._version=a&&a[2]?parseFloat(a[2]):0,this._uaName=h&&h[1]?h[1].toLowerCase():"",this._uaVersion=h&&h[2]?parseFloat(h[2]):0,this._cssPrefix="",this._cssDomPrefix="",this._domPrefix="",this._platform=(()=>{let t;return o.match(/ip(?:ad|od|hone)/)?t="ios":(t=o.match(/(?:webos|android)/),t||(t=navigator.platform.match(/mac|win|linux/i),t||(t=["other"])),t=t[0].toLowerCase()),t})(),this._scrollbarsWidth=0,this._ready=!1,this._constructableStylesheets=(()=>{try{return!!(new CSSStyleSheet).replace}catch(t){return!1}})(),this.calculate()}calculate(){"gecko"===this._engine&&(this._version=h&&h[2]?parseFloat(h[2]):0),h&&"crios"===h[1]&&(this._uaName="chrome"),"safari"===this._uaName&&c&&c[1]&&(this._uaVersion=parseFloat(c[1])),"android"===this._platform&&this.webkit&&c&&c[1]&&(this._androidBrowser=!0);const t={gecko:["-moz-","Moz","moz"],webkit:["-webkit-","Webkit","webkit"]}[this._engine]||["","",""];this._cssPrefix=t[0],this._cssDomPrefix=t[1],this._domPrefix=t[2],!this._mobile&&"mac"===this._platform&&this._touchScreen&&(this._mobile=!0,this._platform="ios"),this._magicClasses.push(this._platform+"-magic"),this._mobile&&this._magicClasses.push("mobile-magic"),this._androidBrowser&&this._magicClasses.push("android-browser-magic"),this._magicClasses.push("svg-magic"),document.documentElement.classList.add(...this._magicClasses);try{document.documentElement.setAttribute("data-magic-ua",this.uaName),document.documentElement.setAttribute("data-magic-ua-ver",this.uaVersion),document.documentElement.setAttribute("data-magic-engine",this.engine),document.documentElement.setAttribute("data-magic-engine-ver",this.version)}catch(t){}window.navigator.pointerEnabled||["down","up","move","over","out"].forEach((t=>{const e="pointer"+t;r.bC[e]="edge"===this.uaName?e:-1}))}get features(){return this._features}get touchScreen(){return this._touchScreen}get mobile(){return this._mobile}get engine(){return this._engine}get version(){return this._version}get uaName(){return this._uaName}get uaVersion(){return this._uaVersion}get cssPrefix(){return this._cssPrefix}get cssDomPrefix(){return this._cssDomPrefix}get domPrefix(){return this._domPrefix}get platform(){return this._platform}get scrollbarsWidth(){return this._scrollbarsWidth}get doc(){return document.documentElement}get ready(){return this._ready}get webkit(){return"webkit"===this._engine}get gecko(){return"gecko"===this._engine}get androidBrowser(){return this._androidBrowser}get constructableStylesheets(){return this._constructableStylesheets}onready(){if(!this._ready){this._ready=!0;try{const t=(0,n.Z)("div").setCss({width:100,height:100,overflow:"scroll",position:"absolute",top:-9999}).appendTo(document.body);this._scrollbarsWidth=t.node.offsetWidth-t.node.clientWidth,t.remove()}catch(t){}(0,s.Z)(document).callEvent("domready")}}};(()=>{const t={capable:d.features.fullScreen,enabled:()=>!!(document.fullscreenElement||document[d.domPrefix+"FullscreenElement"]||document.fullScreen||document.webkitIsFullScreen||document[d.domPrefix+"FullScreen"]),request:(e,i)=>{i||(i={}),t.capable&&!i.windowFullscreen?(t.onchange=e=>{t.enabled()?i.onEnter&&i.onEnter():((0,s.Z)(document).removeEvent(t.changeEventName,t.onchange),i.onExit&&i.onExit())},(0,s.Z)(document).addEvent(t.changeEventName,t.onchange),t.onerror=e=>{i.fallback&&i.fallback(),(0,s.Z)(document).removeEvent(t.errorEventName,t.onerror)},(0,s.Z)(document).addEvent(t.errorEventName,t.onerror),(t=>{(t.requestFullscreen||t[d.domPrefix+"RequestFullscreen"]||t[d.domPrefix+"RequestFullScreen"]||(()=>{})).call(t)})((0,s.Z)(e).node)):i.fallback&&i.fallback()},cancel:document.exitFullscreen||document.cancelFullScreen||document[d.domPrefix+"ExitFullscreen"]||document[d.domPrefix+"CancelFullScreen"]||(()=>{}),changeEventName:(document.exitFullscreen?"":d.domPrefix)+"fullscreenchange",errorEventName:(document.exitFullscreen?"":d.domPrefix)+"fullscreenerror",prefix:d.domPrefix,activeElement:null};d.fullScreen=t})();const l=d},9858:(t,e,i)=>{i.d(e,{A4:()=>n,IU:()=>r,P_:()=>s,Xb:()=>o,bC:()=>a});const s=new WeakMap,n="mjs-"+Math.floor(Math.random()*(new Date).getTime()),r=window.devicePixelRatio>=2?2:1,o=new Map,a={}},9913:(t,e,s)=>{s.d(e,{Z:()=>_});var n=s(3412),r=s(7410),o=s(8410),a=s(6248),h=s(9346);const c={linear:"linear",sineIn:"easeInSine",sineOut:"easeOutSine",expoIn:"easeInExpo",expoOut:"easeOutExpo",quadIn:"easeInQuad",quadOut:"easeOutQuad",cubicIn:"easeInCubic",cubicOut:"easeOutCubic",backIn:"easeInBack",backOut:"easeOutBack",elasticIn:(t,e)=>(e=e||[],Math.pow(2,10*--t)*Math.cos(20*t*Math.PI*(e[0]||1)/3)),elasticOut:(t,e)=>1-c.elasticIn(1-t,e),bounceIn:t=>{for(let e=0,i=1;;e+=i,i/=2)if(t>=(7-4*e)/11)return i*i-Math.pow((11-6*e-11*t)/4,2)},bounceOut:t=>1-c.bounceIn(1-t),none:t=>0},d={INIT:0,STARTED:1,PLAYING:2,PAUSED:3,ENDED:4};class l{constructor(t,e){this.styles=null,this.cubicBezier=null,this.easeFn=null,this.state=d.INIT,this.pStyles=[],this.alternate=!1,this.continuous=!1,this.startTime=null,this.finishTime=null,this.pausedTime=0,this.options={fps:60,duration:600,transition:"ease",cycles:1,direction:"normal",onStart:()=>{},onComplete:()=>{},onBeforeRender:()=>{},onAfterRender:()=>{},forceAnimation:!1,roundCss:!1},this.els=[],Array.isArray(t)||(t=[t]),t.forEach((t=>{t&&this.els.push((0,o.Z)(t))})),this.options=Object.assign(this.options,e),this.timer=!1,this.setTransition(this.options.transition),(0,h.Z)(this.options.cycles)&&(this.options.cycles="infinite"===this.options.cycles?1/0:parseInt(this.options.cycles,10)||1)}static getTransition(){return c}setTransition(t){this.options.transition=t,this.easeFn=l.cubicBezierAtTime;const e=c[this.options.transition]||this.options.transition;"function"===(0,a.Z)(e)?this.easeFn=e:this.cubicBezier=this.parseCubicBezier(e)||this.parseCubicBezier("ease")}start(t){const e=/%$/;if(this.state===d.PLAYING)return this;this.state=d.STARTED,this.cycle=0,this.alternate=["alternate","alternate-reverse"].includes(this.options.direction),this.continuous=["continuous","continuous-reverse"].includes(this.options.direction),t||(t={}),Array.isArray(t)||(t=[t]),this.styles=t;const i=this.styles.length;this.pStyles=new Array(i);for(let t=0;t<i;t++){this.pStyles[t]={};for(const i in this.styles[t])e.test(this.styles[t][i][0])&&(this.pStyles[i]=!0),["reverse","alternate-reverse","continuous-reverse"].includes(this.options.direction)&&this.styles[t][i].reverse()}return this.calcTime(),this.options.onStart(),0===this.options.duration?(this.render(1),this.options.onComplete(this.els.length<2?this.els[0]:this.els)):this.startAnimation(),this}stopAnimation(){this.timer&&(this.options.forceAnimation?clearInterval(this.timer):(0,o.Z)(window).node.cancelAnimationFrame.call((0,o.Z)(window).node,this.timer),this.timer=!1)}resume(){return this.state!==d.PAUSED||(this.calcTime(),this.pausedTime=0,this.startAnimation()),this}pause(){return[d.PAUSED,d.ENDED].includes(this.state)||(this.pausedTime=Date.now()-this.startTime,this.stopAnimation(),this.state=d.PAUSED),this}isPlaying(){return this.state===d.PLAYING}isPaused(){return this.state===d.PAUSED}stop(t){return[d.INIT,d.ENDED].includes(this.state)||(this.stopAnimation(),this.state=d.ENDED,t&&(this.render(1),this.options.onComplete(this.els.length<2?this.els[0]:this.els))),this}startAnimation(){this.options.forceAnimation?this.timer=setInterval((()=>{this.loop()}),Math.round(1e3/this.options.fps)):this.timer=(0,o.Z)(window).node.requestAnimationFrame.call((0,o.Z)(window).node,this.loop.bind(this)),this.state=d.PLAYING}calcTime(){this.startTime=Date.now()-this.pausedTime,this.finishTime=this.startTime+this.options.duration}loop(){const t=Date.now(),e=(t-this.startTime)/this.options.duration,i=Math.floor(e);if(t>=this.finishTime&&i>=this.options.cycles)return this.stopAnimation(),this.render(1),this.options.onComplete(this.els.length<2?this.els[0]:this.els),this;if(this.alternate&&this.cycle<i)for(let t=0,e=this.styles.length;t<e;t++)for(const e in this.styles[t])this.styles[t][e].reverse();this.cycle=i,this.options.forceAnimation||(this.timer=(0,o.Z)(window).node.requestAnimationFrame.call((0,o.Z)(window).node,this.loop.bind(this))),this.render((this.continuous?i:0)+this.easeFn(e%1,this.options.duration,this.cubicBezier))}render(t){const e=[],i=this.els.length;for(let s=0;s<i;s++)e.push(this.renderOverLoad(t,this.els[s],this.styles[s],this.pStyles[s]));let s=this.els,n=e;i<2&&(s=this.els[0],n=e[0]),this.options.onBeforeRender(n,s),this.set(e),this.options.onAfterRender(n,s)}renderOverLoad(t,e,i,s){const n={};return Object.entries(i).forEach((e=>{const[i,r]=e;"opacity"===i?n[i]=Math.round(100*this.calc(r[0],r[1],t))/100:(n[i]=this.calc(r[0],r[1],t),s[i]&&(n[i]+="%"))})),n}calc(t,e,i){return t=parseFloat(t),((e=parseFloat(e))-t)*i+t}set(t){for(let e=0,i=this.els.length;e<i;e++)this.els[e].setCss(t[e]);return this}parseCubicBezier(t){let e=null;if(Array.isArray(t)&&4===t.length)return t;if(!(0,h.Z)(t))return null;switch(t){case"linear":e=[0,0,1,1];break;case"ease":e=[.25,.1,.25,1];break;case"ease-in":e=[.42,0,1,1];break;case"ease-out":e=[0,0,.58,1];break;case"ease-in-out":e=[.42,0,.58,1];break;default:if((t=t.replace(/\s/g,"")).match(/^cubic-bezier\((?:-?[0-9\.]{0,}[0-9]{1,},){3}(?:-?[0-9\.]{0,}[0-9]{1,})\)$/)){e=t.replace(/^cubic-bezier\s*\(|\)$/g,"").split(",");for(let t=e.length-1;t>=0;t--)e[t]=parseFloat(e[t])}}return e}static cubicBezierAtTime(t,e,i){let s=0,n=0,r=0,o=0,a=0,h=0;const c=t=>((s*t+n)*t+r)*t,d=t=>(3*s*t+2*n)*t+r;return r=3*i[0],n=3*(i[2]-i[0])-r,s=1-r-n,h=3*i[1],a=3*(i[3]-i[1])-h,o=1-h-a,l=t,u=(t=>1/(200*t))(e),(t=>((o*t+a)*t+h)*t)(((t,e)=>{let i,s,n,r,o,a;const h=t=>t>=0?t:0-t;for(n=t,a=0;a<8;a++){if(r=c(n)-t,h(r)<e)return n;if(o=d(n),h(o)<1e-6)break;n-=r/o}if(i=0,s=1,n=t,n<i)return i;if(n>s)return s;for(;i<s;){if(r=c(n),h(r-t)<e)return n;t>r?i=n:s=n,n=.5*(s-i)+i}return n})(l,u));var l,u}}const u=l;var p=s(9058),m=s(6955);let g=null;const v={boolean:1,array:2,number:3,function:4,url:5,string:100},f={boolean:(t,e,i)=>{if("boolean"!==(0,a.Z)(e)){if(i||!(0,h.Z)(e))return!1;if(!/^(true|false)$/.test(e))return!1;e=!e.replace(/true/i,"").trim()}return!(t.hasOwnProperty("enum")&&!t.enum.includes(e))&&(g=e,!0)},url:(t,e,i)=>!(!(0,h.Z)(e)||!(t=>/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/i.test(t))(e))&&(!t.hasOwnProperty("enum")||t.enum.includes(e)),string:(t,e,i)=>!!(0,h.Z)(e)&&(!(t.hasOwnProperty("enum")&&!t.enum.includes(e))&&(g=""+e,!0)),number:(t,e,i)=>{let s=parseFloat(e);if(isNaN(s))return!1;if(isNaN(t.minimum)&&(t.minimum=Number.NEGATIVE_INFINITY),isNaN(t.maximum)&&(t.maximum=Number.POSITIVE_INFINITY),(0,h.Z)(e)&&/^\s*\d+\s*\/\s*\d+\s*$/.test(e)){const t=e.split("/");if(s=1===t.length?parseFloat(t[0]):parseFloat(t[0])/parseFloat(t[1]),isNaN(s))return!1}if(t.hasOwnProperty("enum")&&!t.enum.includes(s))return!1;if(t.minimum>s||s>t.maximum)return!1;const n=(0,h.Z)(e)&&e.endsWith("%");return g=n?e:s,!0},array:(t,e,i)=>{if((0,h.Z)(e))try{e=JSON.parse(e.replace(/'/g,'"'))}catch(t){return!1}return!!Array.isArray(e)&&(g=e,!0)},function:(t,e,i)=>"function"===(0,a.Z)(e)&&(g=e,!0)},w=(t,e,i)=>{const s=t.hasOwnProperty("oneOf")?t.oneOf:[t];return!!Array.isArray(s)&&s.some((t=>f[t.type](t,e,i)))},y=t=>{const e={},i=(t,s)=>{Object.entries(t).forEach((t=>{const[n,r]=t,o=s.slice(0);!(0,m.Z)(r)||(t=>Object.keys(t).some((t=>"default"===t)))(r)?(o.push(n),e[o.join(".")]=r):(o.push(n),i(r,o))}))};return i(t,[]),e},b=t=>{const e={};return Object.entries(t).forEach((t=>{((t,i)=>{let s=e;const n=t.length;""===t[n-1].trim()&&t.splice(n-1,1),t.forEach(((t,e)=>{e===n-1?s[t]=i:(s[t]||(s[t]={}),s=s[t])}))})(t[0].split("."),t[1])})),e},S=t=>(0,p.Z)((t+"").trim());const E=class{constructor(t){this.schema={},this.options={},this.parseSchema(t)}parseSchema(t,e){t=y(t),Object.entries(t).forEach((s=>{const[n,r]=s,o=S(n);if(!this.schema.hasOwnProperty(o)||e){if(this.schema[o]=(t=>{if(t.hasOwnProperty("oneOf")){const e=t.oneOf.length;for(let i=0;i<e;i++)for(let s=i+1;s<e;s++)if(v[t.oneOf[i].type]>v[t.oneOf[s].type]){const e=t.oneOf[i];t.oneOf[i]=t.oneOf[s],t.oneOf[s]=e}}return t})(r),!(t=>{const e=t.hasOwnProperty("oneOf")?t.oneOf:[t];if(!Array.isArray(e))return!1;for(let t=e.length-1;t>=0;t--){if(!e[t].type||!v.hasOwnProperty(e[t].type))return!1;if(void 0!==e[t].enum){if(!Array.isArray(e[t].enum))return!1;for(let i=e[t].enum.length-1;i>=0;i--)if(!f[e[t].type]({type:e[t].type},e[t].enum[i],!0))return!1}}return!(t.hasOwnProperty("default")&&!w(t,t.default,!0))})(this.schema[o]))throw"Incorrect definition of the '"+i+"' parameter in "+t;void 0!==this.options[o]&&this.checkValue(o,this.options[o])||(this.options[o]=void 0)}}))}set(t,e){t=S(t),(0,h.Z)(e)&&(e=e.trim()),this.schema.hasOwnProperty(t)&&(g=e,w(this.schema[t],e)&&(this.options[t]=g))}get(t){if(t=S(t),this.schema.hasOwnProperty(t))return void 0!==this.options[t]&&null!==this.options[t]?this.options[t]:this.schema[t].default}fromJSON(t){t=y(t);for(const e in t)this.set(e,t[e])}getJSON(){const t=Object.assign({},this.options);return Object.keys(t).forEach((e=>{void 0===t[e]&&void 0!==this.schema[e].default&&(t[e]=this.schema[e].default)})),b(t)}fromString(t,e){const i={};e||(e={});return t.split(";").forEach((t=>{var s;s=t.trim(),Object.entries(e).find((t=>{let[e,n]=t;return!(!n.test||!n.test(s)||(i[e]||(i[e]=""),i[e]+=s+";",0))}))||(t=t.split(":"),this.set(t.shift().trim(),t.join(":")))})),i}checkValue(t,e){return t=S(t),(0,h.Z)(e)&&(e=e.trim()),!(!this.schema.hasOwnProperty(t)||(g=e,!w(this.schema[t],e)))}exists(t){return t=S(t),this.schema.hasOwnProperty(t)}isset(t){return t=S(t),this.exists(t)&&void 0!==this.options[t]}remove(t){t=S(t),this.exists(t)&&(delete this.options[t],delete this.schema[t])}};"interactive"===document.readyState||"complete"===document.readyState?setTimeout((()=>r.Z.onready()),0):((0,o.Z)(document).addEvent("readystatechange",(t=>{"interactive"!==t.target.readyState&&"complete"!==t.target.readyState||r.Z.onready()})),(0,o.Z)(document).addEvent("DOMContentLoaded",(()=>{r.Z.onready()})),(0,o.Z)(window).addEvent("load",(()=>{r.Z.onready()})));const _=Object.assign(n.Z,{browser:r.Z,FX:u,Options:E})},2102:(t,e,i)=>{i.a(t,(async(t,s)=>{try{i.d(e,{Z:()=>l});var n=i(9508),r=t([n]);n=(r.then?(await r)():r)[0];const o=t=>{console.log("sirv.js: The method Sirv"+t+".refresh() is deprecated. \r\n         Use Sirv"+t+".stop() and Sirv"+t+".start() instead.")},a=(t,e)=>n.Z.eventManager.addEvent(t,e),h=(t,e)=>n.Z.eventManager.removeEvent(t,e),c={start:(t,e)=>{n.Z.start(t,e,"image",!0)},stop:(t,e)=>{n.Z.stop(t,e,"image")},getInstance:(t,e)=>{let i=null;return n.Z.getInstance&&(i=n.Z.getInstance(t,"image",e)),i},refresh:()=>{o(".image")},on:(t,e)=>a(t,e),off:(t,e)=>h(t,e)},d={start:(t,e)=>{n.Z.start(t,e,"viewer",!0)},stop:(t,e)=>{n.Z.stop(t,e,"viewer")},getInstance:(t,e)=>{let i=null;return n.Z.getInstance&&(i=n.Z.getInstance(t,"viewer",e)),i},refresh:()=>{o(".viewer")},on:(t,e)=>a(t,e),off:(t,e)=>h(t,e),filters:{add:(t,e)=>{n.Z.addFilterCallback(t,e)},remove:t=>{n.Z.removeFilterCallback(t)},removeAll:()=>{n.Z.removeAllFilterCallback()}}},l={version:"v3.14.5",build:"f1c058fc",options:{},lazyimage:c,viewer:d,start:(t,e)=>{n.Z.start(t,e,null,!0)},stop:(t,e)=>{n.Z.stop(t,e)},getInstance:(t,e,i)=>{let s=null;if(n.Z.getInstance){s=("lazyimage"===e?c:d).getInstance(t,i)}return s},refresh:()=>{o("")},on:a,off:h,whenReady:t=>t(),whenLoaded:t=>t()};s()}catch(t){s(t)}}))},5040:(t,e,i)=>{i.d(e,{Z:()=>h});var s=i(3089),n=i(9910),r=i(4186),o=i(9913);class a extends s.Z{constructor(t,e,i){super(),this.defaultSchema=i,this._options=e,this.instanceNode=o.Z.$(t),this.instanceUrl=this.instanceNode.attr("data-src")||this.instanceNode.attr("src")||this.instanceNode.attr("data-bg-src"),this.option=null,this.ready=!1,this.id=null,this.isCustomId=!1,this.isStartedFullInit=!1,this.isStarted=!1,this.destroyed=!1,this.referrerPolicy=this.instanceNode.attr("data-referrerpolicy")||this.instanceNode.attr("referrerpolicy")||"no-referrer-when-downgrade",this.instanceOptions=this.makeOptions(),this.createOptionFunction(),this.api={isReady:()=>this.ready,resize:()=>this.resize(),getOptions:()=>Object.freeze(this.options)}}setOptions(t,e,i,s){return t.fromJSON(e),t.fromString(i),t.fromString(s),t}makeGlobalOptions(t){const e=this._options.options;return this.setOptions(t,e.common.common,e.local.common,this.instanceNode.attr("data-options")||"")}makeMobileOptions(t){const e=this._options.options;return this.setOptions(t,e.common.mobile,e.local.mobile,this.instanceNode.attr("data-mobile-options")||"")}makeOptions(){let t=new o.Z.Options(this.defaultSchema);return t=this.makeGlobalOptions(t),o.Z.browser.touchScreen&&o.Z.browser.mobile&&(t=this.makeMobileOptions(t)),t}getOptionsForStartFullInit(t){t&&(this._options.options=t,this.instanceOptions=this.makeOptions(),this.createOptionFunction())}get options(){return this.instanceOptions.getJSON()}resize(){return!!this.ready&&this.onResize()}onResize(){return!0}get imageClassContainer(){return{}}checkImage(t,e){let i;const s=this.imageClassContainer;return i=e?s.isExist(t):s.isLoaded(t),i}getId(t,e){this.id=this.instanceNode.attr("id"),this.id||(this.isCustomId=!0,t||(t="component-"),e||(e=r.i2+"-"),this.id=(e+t+(0,n.Z)()).trim(),this.instanceNode.attr("id",this.id))}createOptionFunction(){var t=this;this.option=function(){return arguments.length>1?t.instanceOptions.set(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]):t.instanceOptions.get(arguments.length<=0?void 0:arguments[0])}}startFullInit(t){this.destroyed||this.isStartedFullInit||(this.isStartedFullInit=!0,this.getOptionsForStartFullInit(t))}get originImageUrl(){return null}run(){return!this.isStarted&&(this.isStarted=!0,!0)}done(){this.ready=!0}destroy(){this.destroyed=!0,this.isStarted=!1,this.ready=!1,this.isStartedFullInit=!1,this.isCustomId&&(this.instanceNode.removeAttr("id"),this.isCustomId=!1),this.instanceNode=null,super.destroy()}}const h=a},3089:(t,e,i)=>{i.d(e,{Z:()=>o});const s=class{constructor(t,e,i){this.type=t,this._direction=e,this.propagation=!0,this.nextCalls=!0,this.emptyEvent=!0,this.data=Object.assign(i,{eventType:this.type,eventDirection:this._direction,stopEmptyEvent:this.stopEmptyEvent.bind(this),stopPropagation:this.stopPropagation.bind(this),stopNextCalls:this.stopNextCalls.bind(this),stop:this.stop.bind(this),stopAll:this.stopAll.bind(this)})}copyData(){const t=Object.assign({},this.data);return delete t.eventDirection,delete t.stopEmptyEvent,delete t.stopPropagation,delete t.stopNextCalls,delete t.stop,delete t.stopAll,t}get customData(){return this.data}get direction(){return this._direction}get emptyEventStopped(){return!this.emptyEvent}get propagationStopped(){return!this.propagation}get nextCallsStopped(){return!this.nextCalls}stopEmptyEvent(){this.emptyEvent=!1}stopPropagation(){this.propagation=!1}stopNextCalls(){this.nextCalls=!1}stop(){this.stopPropagation(),this.stopEmptyEvent()}stopAll(){this.stop(),this.stopNextCalls()}};var n=i(3412);const r=(t,e)=>(n.Z.isString(t)?""===(t=t.trim())&&(t=e):t=e,t);const o=class{constructor(){this.__parent=null,this.__childs=[],this.__subscribers={},this.__NAME_OF_EMPTY_EVENT="__empty__"}__setChild(t){this.__childs.push(t)}__removeChild(t){const e=this.__childs.indexOf(t);-1!==e&&this.__childs.splice(e,1)}set parentClass(t){this.__parent=t,this.__parent.__setChild(this)}__removeParent(){this.__parent&&(this.__parent.__removeChild(this),this.__parent=null)}__callNext(t){t.propagationStopped||("up"===t.direction?this.__parent&&this.__parent.__next(t):this.__childs.forEach((e=>{e.__next(t)})))}__next(t){const e=this.__subscribers[t.type];if(t=new s(t.type,t.direction,t.copyData()),e)for(let i=0,s=e.length;i<s&&(e[i](t.customData,t,this),!t.nextCallsStopped);i++);if(Object.prototype.hasOwnProperty.call(this.__subscribers,this.__NAME_OF_EMPTY_EVENT)&&!t.emptyEventStopped)for(let e=0,i=this.__subscribers[this.__NAME_OF_EMPTY_EVENT].length;e<i;e++)this.__subscribers[this.__NAME_OF_EMPTY_EVENT][e](t.customData);this.__callNext(t)}emit(t,e){e&&n.Z.isObject(e)||(n.Z.isObject(t)?(e=t,t=null):e={}),t=r(t,this.__NAME_OF_EMPTY_EVENT),this.__callNext(new s(t,"up",e))}broadcast(t,e){e&&n.Z.isObject(e)||(n.Z.isObject(t)?(e=t,t=null):e={}),t=r(t,this.__NAME_OF_EMPTY_EVENT),this.__callNext(new s(t,"down",e))}on(t,e){const i=this;return"function"===n.Z.typeOf(t)&&(e=t,t=null),e?(t=r(t,this.__NAME_OF_EMPTY_EVENT),this.__subscribers[t]||(this.__subscribers[t]=[]),this.__subscribers[t].push(e),()=>i.off(t,e)):null}off(t,e){let i;"function"===n.Z.typeOf(t)&&(e=t,t=null),t=r(t,this.__NAME_OF_EMPTY_EVENT),e?Object.prototype.hasOwnProperty.call(this.__subscribers,t)&&(i=this.__subscribers[t].indexOf(e),-1!==i&&this.__subscribers[t].splice(i,1)):delete this.__subscribers[t]}destroy(){this.__removeParent(),this.__childs=[],this.__subscribers={}}}},2671:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(9913),n=i(3089),r=i(932);class o extends n.Z{constructor(t){super(),this.items=t,this.stopInstance=null,this.events={lazyimage:{},viewer:{},spin:{},zoom:{},image:{},video:{},model:{}},this.reversedEvents=[],this.addEvents()}static eventsNameParser(t){let e=null;return s.Z.isString(t)&&(e=t.split(":").map((t=>t.trim())).filter((t=>""!==t)),/sirv/i.test(e[0])&&e.shift(),e.length<2&&(e=null)),e}static triggerCustomEvent(t,e,i,n,r){let o;n===s.Z.U&&(n=!0),r===s.Z.U&&(r=!0);try{o=new CustomEvent(t,{bubbles:n,cancelable:r,detail:i})}catch(e){try{o=s.Z.D.createEvent("Event"),o.initEvent(t,n,r),o.detail=i}catch(t){}}o&&e.node.dispatchEvent(o)}addReverseEvent(t,e,i){this.reversedEvents.push({eventName:t,componentName:i,callback:e})}callReverseCallback(t,e,i){let s=!1;for(let n=0,r=this.reversedEvents.length;n<r;n++)if(this.reversedEvents[n].componentName===t&&this.reversedEvents[n].eventName===e){this.reversedEvents[n].callback(i),this.reversedEvents.splice(n,1),s=!0;break}return s}addStopInstanceCB(t){this.stopInstance=t}addEvents(){this.on("destroy",(t=>{t.stopAll(),this.stopInstance&&this.stopInstance(t.data.node,"viewer")})),this.on("imagePublicEvent",(t=>{t.stopAll();if(!this.callReverseCallback("lazyimage",t.data.type,t.data.image)){o.triggerCustomEvent("sirv:lazyimage:"+t.data.type,t.data.node,Object.assign({},t.data.image));const e=this.events.lazyimage[t.data.type];e&&e.forEach((e=>{e(t.data.image)}))}})),this.on("viewerPublicEvent",(t=>{let e,i,s;t.stopAll();let n="viewer";"componentEvent"===t.data.slider.type?(i=t.data.type,s=Object.assign({},t.data.slide[t.data.slide.component]),n=t.data.slide.component,t.data.node&&(e=t.data.componentEventData.node),Object.entries(t.data.componentEventData).forEach((e=>{let[i,n]=e;"node"===i?t.data.node&&(s[i]=n.node):"type"!==i&&(s[i]=n)}))):(i=t.data.slider.type,"ready"===i&&r.m0.remove(),t.data.node&&(e=t.data.node),t.data.slider&&(s=t.data.slider,"sendStats"===i&&(s.statsData=t.data.event)),["beforeSlideIn","beforeSlideOut","afterSlideIn","afterSlideOut","enableItem","disableItem","thumbnailClick"].includes(i)&&(s=t.data.slide));if(!this.callReverseCallback(n,i,s)){e&&o.triggerCustomEvent("sirv:"+n+":"+i,e,Object.assign({},s));const t=this.events[n][i];t&&t.forEach((t=>{t(s)}))}})),this.on((t=>{t.stopAll()}))}addEvent(t,e){let i=()=>!1;const s=o.eventsNameParser(t);if(s&&this.events[s[0]]&&e){if(this.events[s[0]][s[1]]||(this.events[s[0]][s[1]]=[]),this.events[s[0]][s[1]].push(e),["ready","init","onLoad"].includes(s[1])){const t="lazyimage"===s[0]?"image":"viewer";("viewer"===t&&"onLoad"!==s[1]||"onLoad"===s[1]&&"image"===t)&&setTimeout((()=>{this.items[t].forEach((t=>{t.checkReadiness(s[1],s[0])&&(this.addReverseEvent(s[1],e,s[0]),t.sendEvent(s[1],s[0]))}))}),0)}i=()=>this.removeEvent(t,e)}return i}removeEvent(t,e){const i=o.eventsNameParser(t);if(i&&this.events[i[0]]&&this.events[i[0]][i[1]]){if(!e)return delete this.events[i[0]][i[1]],!0;{const t=this.events[i[0]][i[1]].indexOf(e);if(t>=0)return this.events[i[0]][i[1]].splice(t,1),!0}}return!1}}const a=o},6450:(t,e,i)=>{i.d(e,{Z:()=>b});var s=i(9099),n=i(8196),r=i(9913);const o=(t,e)=>(0,s.Z)(t+"?"+(0,n.Z)(e));const a=class{constructor(t,e,i,s,n,r){this._name=t,this._state=0,this.imageNode=null,this._size={width:0,height:0},this.loader=null,this.callbacks=[],this.srcSettings=i,this.srcsetSettings=s,this.dontLoad=n,this.dppx=this.srcsetSettings?this.srcsetSettings.dppx:1,this.referrerPolicy=r,""===i.profile&&delete i.profile,s&&""===s.profile&&delete s.profile,this._src=o(e,i),this._srcset=null,s&&(this._srcset=o(e,s.settings))}get name(){return this._name}get node(){return this.imageNode}get size(){return this._size}get src(){return this._src}get srcset(){return this._srcset}get state(){return this._state}get DPPX(){return this.dppx}load(){return new Promise(((t,e)=>{this.dontLoad||this._state?t(this):(this._state=1,this.imageNode=r.Z.$(new Image),this.imageNode.attr("referrerpolicy",this.referrerPolicy||"no-referrer-when-downgrade"),this.imageNode.addEvent("load",(e=>{if(e.stop(),this._state=2,this._size={width:this.imageNode.node.naturalWidth||this.imageNode.node.width,height:this.imageNode.node.naturalHeight||this.imageNode.node.height},"safari"===r.Z.browser.uaName){let t=!1;this.srcSettings.scale.width?this._size.width>this.srcSettings.scale.width+5&&(t=!0):this._size.height>this.srcSettings.scale.height+5&&(t=!0),t&&(this._size.width/=this.dppx,this._size.height/=this.dppx)}t(this)})),this.imageNode.addEvent("error",(t=>{t.stop(),this._state=3,this.imageNode=null,e(this)})),this.addSrcset(),this.addSrc())}))}addSrc(){this.imageNode.node.src=this._src}addSrcset(){this._srcset&&(this.imageNode.node.srcset=this._srcset+" "+this.dppx+"x")}get loading(){return 1===this._state}destroy(){1===this._state&&this.imageNode&&this.imageNode.attr("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="),this._state=0}};const h=class extends a{constructor(t,e,i,s,n,r,o){super(t,e,i,s,n,r),this._tileName=o}get tileName(){return this._tileName}addSrc(){1===this.dppx&&super.addSrc()}};var c=i(3089),d=i(3315),l=i(9910),u=i(6476);const p=(t,e)=>(t&&(e||(e=100),t=Math.ceil(t/e)*e),t);var m=i(6511);const g=(t,e)=>{const i=Object.assign({},t);let s;return delete i.src,delete i.srcset,i.imageSettings=Object.assign({},(null==t?void 0:t.imageSettings)||{}),e>1&&(s=JSON.parse(JSON.stringify(i)),s.width&&(s.width=Math.trunc(s.width*e)),s.height&&(s.height=Math.trunc(s.height*e)),s.imageSettings.crop&&(s.imageSettings.crop.width&&(s.imageSettings.crop.width=Math.trunc(s.imageSettings.crop.width*e)),s.imageSettings.crop.height&&(s.imageSettings.crop.height=Math.trunc(s.imageSettings.crop.height*e))),s.dppx=e),i.imageSettings=Object.assign(i.imageSettings,t.src),s&&t.srcset&&(s.imageSettings=Object.assign(s.imageSettings,t.srcset)),{src:i,srcset:s}},v=t=>(100*t).toFixed(4)+"%",f=(t,e)=>t&&t.crop&&t.crop[e]?t.crop[e]:null,w={};class y extends c.Z{constructor(t,e){super(),r.Z.isString(t)||(t=r.Z.$(t).attr("src")),this.o=Object.assign({type:"main",infoId:"sirv-image-"+(0,l.Z)(),imageSettings:{},round:!0,dontLoad:!1,convertSmallerSideToZero:!0,referrerPolicy:"no-referrer-when-downgrade",loadNewImage:!1},e),this.imageInfoPromise=null,this.images={},this._originUrl=(t=>t.split("?")[0])(r.Z.getAbsoluteURL(t)),this.infoUrl=this._originUrl+"?nometa&info",this.imageSettings=Object.assign({},this.o.imageSettings)}static roundImageSize(t,e){let i;return e||(e={width:Number.MAX_VALUE,height:Number.MAX_VALUE}),t.width&&t.height?t.width>=t.height?(i=p(t.width),i<=e.width&&(t.height=Math.floor(t.height/t.width*i),t.width=i)):(i=p(t.height),i<=e.height&&(t.width=Math.floor(t.width/t.height*i),t.height=i)):t.width?(i=p(t.width),i<=e.width&&(t.width=i)):t.height&&(i=p(t.height),i<=e.height&&(t.height=i)),t}static getDPPX(t,e,i,s,n,o){let a=1;if(r.Z.DPPX>1)if(e>t){const t=n?y.roundImageSize({height:e}).height:e;a=(0,m.Z)(t,s,o)}else{const e=n?y.roundImageSize({width:t}).width:t;a=(0,m.Z)(e,i,o)}return a}_convertImageSettings(t){const e=(t,e)=>{e.width&&(t.width=e.width),e.height&&(t.height=e.height)};t||(t={}),t=Object.assign({},t);let i=this.getClearSizeWithoutProcessingSettings({width:t.width,height:t.height});e(t,i);const s=g(t,t.dppx);if(t.round||!t.hasOwnProperty("round")&&this.o.round){const t=this.originSize;i=y.roundImageSize(s.src,t),e(s,i),s.srcset&&(i=y.roundImageSize(s.srcset,t),e(s,i))}return s}_mixSettings(t){return((t,e,i)=>{let s=(0,d.Z)({},e);return t&&t.imageSettings.processingSettings&&(s.crop||(s.crop={}),s.crop=(0,d.Z)(s.crop,t.cropSettings),s.canvas||(s.canvas={}),s.canvas=(0,d.Z)(s.canvas,t.canvasSettings),s.frame||(s.frame={}),s.frame=(0,d.Z)(s.frame,t.frameSettings),s.scale||(s.scale={}),s.scale.option||(s.scale.option="fill")),i.width&&"auto"!==i.width&&(s.scale.width=i.width),i.height&&"auto"!==i.height&&(s.scale.height=i.height),i.imageSettings&&(s=(0,d.Z)(s,i.imageSettings)),s})(w[this.o.infoId],this.imageSettings,t)}_calcProcessingSettings(){let t=w[this.o.infoId];const e={},i={},s={};t.imageSettings.viewer||(t.imageSettings.viewer={});const n=t.imageSettings.viewer,r={width:t.imageSettings.original.width,height:t.imageSettings.original.height,widthScale:1,heightScale:1};n.scale&&(n.scale.width&&(r.width*=n.scale.width),n.scale.height&&(r.height*=n.scale.height)),r.widthScale=r.width/t.imageSettings.width,r.heightScale=r.height/t.imageSettings.height,n.crop&&(n.crop.width&&(e.width=v(n.crop.width)),n.crop.height&&(e.height=v(n.crop.height)),n.crop.x&&(e.x=v(n.crop.x)),n.crop.y&&(e.y=v(n.crop.y))),n.canvas&&(n.canvas.width&&(i.width=v(n.canvas.width)),n.canvas.height&&(i.height=v(n.canvas.height)),n.canvas.border&&(i.border={},n.canvas.border.width&&(i.border.width=v(n.canvas.border.width)),n.canvas.border.height&&(i.border.height=v(n.canvas.border.height)))),n.frame&&n.frame.width&&(s.width=v(n.frame.width)),t=Object.assign(t,{cropSettings:e,canvasSettings:i,frameSettings:s,originSize:r})}_addImage(t,e){const i=e.src.dontLoad?e.src.dontLoad:this.o.dontLoad,s=t=>{const e=this._mixSettings(t);return e.scale&&e.scale.width&&e.scale.height&&"ignore"!==e.scale.option&&(e.scale.width>=e.scale.height?this.o.convertSmallerSideToZero&&(e.scale.height=0):this.o.convertSmallerSideToZero&&(e.scale.width=0)),e},n=s(e.src);let r=null,o=null;if(e.src.imageSettings&&e.src.imageSettings.tile){o=e.src.imageSettings.tile.number+""}e.srcset&&(r={dppx:e.srcset.dppx,settings:s(e.srcset)});const c=null===o?new a(t,this._originUrl,n,r,i,this.o.referrerPolicy):new h(t,this._originUrl,n,r,i,this.o.referrerPolicy,o);return this.images[t]={serverWidth:e.src.width,serverHeight:e.src.height,image:c},this.images[t]}_load(t,e){let i,s;this._addImage(t,e).image.load().then((t=>{s=t,i="imageOnload",this.someImageIsLoaded=s instanceof a})).catch((t=>{s=t,i="imageOnerror"})).finally((()=>{this.someImageIsComplete=s instanceof a;const t=this.images[s.name];t&&this.emit(i,{data:this._createImageData(t,e.src.callbackData)})}))}_createImageData(t,e){const i=t.image;return{callbackData:e,name:i.name,tileName:i.tileName,tile:i instanceof h,node:i.node,serverWidth:t.serverWidth,serverHeight:t.serverHeight,width:i.size.width,height:i.size.height,src:i.src,srcset:i.srcset,state:i.state,dppx:i.DPPX||1}}getCropPosition(){const t=w[this.o.infoId];let e=f(this.imageSettings,"x");e&&!/%$/.test(e)&&(e=v(e/t.originSize.width));let i=f(this.imageSettings,"y");return i&&!/%$/.test(i)&&(i=v(i/t.originSize.height)),{x:e||t.cropSettings.x,y:i||t.cropSettings.y,type:f(this.imageSettings,"type")||f(t.imageSettings.processingSettings,"type")}}isExist(t){t=this._convertImageSettings(t);const e=this.generateImageName(t.src);let i=Object.prototype.hasOwnProperty.call(this.images,e);if(!i&&(!t.src.imageSettings||!t.src.imageSettings.tile)&&t.src.width){const e=Object.entries(this.images).filter((t=>t[1].image instanceof h==!1)).map((t=>t[1]));i=this._getBiggerImage(t.src.width,e)}return!!i}isLoaded(t){t=this._convertImageSettings(t);let e=this.images[this.generateImageName(t.src)];return e&&(e=2===e.image.state),!!e}get ready(){return this.someImageIsLoaded}get complete(){return this.someImageIsComplete}get originSize(){let t=null,e=null;if(w[this.o.infoId]&&(e=w[this.o.infoId].imageSettings),e){let i,s;e.processingSettings?(i=e.width,s=e.height):(i=e.original.width,s=e.original.height),t={width:i,height:s}}return t}loadInfo(){return this.imageInfoPromise||(this.imageInfoPromise=new Promise(((t,e)=>{const i=r.Z.getHashCode(this.infoUrl.replace(/^http(s)?:\/\//,"")),o=(0,s.Z)(this._originUrl+"?"+(0,n.Z)(this.imageSettings)+"&nometa&info=sirv_image_info_"+i+"_"+this.o.type);(0,u.Z)(o,"image_info_"+(0,l.Z)(),this.o.referrerPolicy).then((i=>{!i.width||i._isplaceholder?e(i):(w[this.o.infoId]={imageSettings:i},this._calcProcessingSettings(),t(w[this.o.infoId]))})).catch(e)}))),this.imageInfoPromise}_getBiggerImage(t,e,i){return t||(t=0),e||(e=this.images),i===r.Z.U&&(i=this.o.dontLoad),Object.entries(e).map((t=>t[1])).sort(((t,e)=>t.serverWidth-e.serverWidth)).find((e=>t<e.serverWidth&&(2===e.image.state||i)))||null}sendLoad(t){t=this._convertImageSettings(t);let e=this.images[this.generateImageName(t.src)];e||(e=this._getBiggerImage(t.src.width)),this.emit("imageOnload",{data:this._createImageData(e,t.src.callbackData)})}cancelLoadingImage(t){t=this._convertImageSettings(t);const e=this.generateImageName(t.src),i=this.images[e];i&&i.image.loading&&(i.image.destroy(),delete this.images[e])}generateImageName(t){return(t=>{let e=(t=t.replace("?+","?").replace("&+","&").split("?"))[1];return t=t[0],e=e.split("&").sort(),""+r.Z.getHashCode(t+"?"+e.join("&"))})((0,s.Z)(this._originUrl+"?"+(0,n.Z)(this._mixSettings(t))))}getClearSizeWithoutProcessingSettings(t){const e={},i=w[this.o.infoId];return t.width&&(e.width=Math.round(t.width*i.originSize.widthScale)),t.height&&(e.height=Math.round(t.height*i.originSize.heightScale)),e}getImage(t){const e=this._convertImageSettings(t),i=e.src.dontLoad?e.src.dontLoad:this.o.dontLoad,s=this.generateImageName(e.src);let n=this.images[s];return n||this._load(s,Object.assign({},e)),n&&n.image.state<2&&!i&&(n=null),n||!e.src.maxSize&&this.o.loadNewImage||(e.src.exactSize?i&&(n=this.images[s]):n=this._getBiggerImage(null,null,i)),n&&(n=this._createImageData(n,e.src.callbackData)),n}get originUrl(){let t=null;return this._originUrl&&(t=this._originUrl),t}getProcessingSettings(){const t=w[this.o.infoId];return{crop:t.cropSettings,cropClear:t.cropSettingsClear,canvas:t.canvasSettings,canvasClear:t.canvasSettingsClear}}get description(){let t=null;const e=w[this.o.infoId];return e&&(t=e.imageSettings.original.description||null),t}getThumbnail(t){let e={imageSettings:null,size:null,src:null,srcset:null};if(w[this.o.infoId]){const i=g(t,r.Z.DPPX);let o=null,a=this.o.convertSmallerSideToZero;const h=t.originUrl||this._originUrl,c=(e,i)=>{let s={scale:{option:"fill"}};if(e.width||e.height)if(e.width&&e.height)s.scale.width=e.width,s.scale.height=e.height;else{const t=e.width||e.height;s.scale.width=t,s.scale.height=t}e.width===e.height&&(t.crop?s.crop={x:"center",y:"center",width:e.width,height:e.height}:(s.scale.option="fit",s.canvas||(s.canvas={}),s.canvas.width=e.width,s.canvas.height=e.height)),s.scale&&(t.width&&t.height?w[this.o.infoId].imageSettings.original.width>=w[this.o.infoId].imageSettings.original.height?a&&(s.scale.height=0):a&&(s.scale.width=0):t.width?a&&(s.scale.height=0):t.height&&a&&(s.scale.width=0)),i&&(s=Object.assign(s,i));const r=s;return s={},s.imageSettings=r,s=this._mixSettings(s),s.text&&delete s.text,!t.watermark&&s.watermark&&delete s.watermark,(0,n.Z)(s)},d=t=>{const e={};return t.width&&(e.width=t.width),t.height&&(e.height=t.height),e};(i.src.crop||i.src.width&&i.src.height)&&(a=!1),e={callbackData:t.callbackData,size:d(i.src.imageSettings),src:(0,s.Z)(h+"?"+c(d(i.src),i.src.imageSettings))},r.Z.DPPX>1&&(o=c(d(i.srcset),i.srcset.imageSettings),o&&(e.srcset=(0,s.Z)(h+"?"+o)))}return e}get accountInfo(){const t={},e=w[this.o.infoId];return e&&(t.account=e.imageSettings.account,t.branded=e.imageSettings.branded),t}destroy(){Object.values(this.images).forEach((t=>t.image.destroy())),this.images={},this.someImageIsLoaded=!1,this.someImageIsComplete=!1,w[this.infoId]&&(delete w[this.infoId],this.infoId=null),super.destroy()}}const b=y},9099:(t,e,i)=>{i.d(e,{Z:()=>s});const s=t=>t.replace(/&+/g,"&").replace(/&$/,"").replace(/\?&/,"?").replace(/profile=&|profile=$/g,"").replace(/image=&/g,"image&").replace(/image=$/g,"image")},6031:(t,e,i)=>{i.d(e,{Z:()=>n});var s=i(9913);const n=(t,e,i)=>{let n,r,o,a,h,c,d=0,l=!1,u=!1,p=!0;const m=!e&&0!==e&&s.Z.browser.features.requestAnimationFrame;if("function"!=typeof t)throw new TypeError("Expected a function");e=+e||0,s.Z.isObject(i)&&(l=!!i.leading,u="maxWait"in i,o=u?Math.max(+i.maxWait||0,e):o,p="trailing"in i?!!i.trailing:p);const g=e=>{const i=n,s=r;return n=void 0,r=n,d=e,a=t.apply(s,i),a},v=(t,e)=>m?(s.Z.browser.cancelAnimationFrame(h),s.Z.browser.requestAnimationFrame(t)):setTimeout(t,e),f=t=>{const i=t-c;return void 0===c||i>=e||i<0||u&&t-d>=o},w=t=>(h=void 0,p&&n?g(t):(n=void 0,r=n,a)),y=()=>{const t=Date.now();if(f(t))return w(t);h=v(y,(t=>{const i=t-d,s=e-(t-c);return u?Math.min(s,o-i):s})(t))},b=function(){const t=Date.now(),i=f(t);for(var s=arguments.length,o=new Array(s),p=0;p<s;p++)o[p]=arguments[p];if(n=o,r=undefined,c=t,i){if(void 0===h)return(t=>(d=t,h=v(y,e),l?g(t):a))(c);if(u)return h=v(y,e),g(c)}return void 0===h&&(h=v(y,e)),a};return b.cancel=()=>{var t;void 0!==h&&(t=h,m?s.Z.browser.cancelAnimationFrame(t):clearTimeout(t)),d=0,n=void 0,c=n,r=n,h=n},b.flush=()=>void 0===h?a:w(Date.now()),b.pending=()=>void 0!==h,b}},3315:(t,e,i)=>{i.d(e,{Z:()=>r});var s=i(9913);const n=(t,e)=>(t||(t=Array.isArray(e)?[]:{}),Array.isArray(e)?e.forEach(((e,i)=>{Array.isArray(e)&&Array.isArray(t[i])||s.Z.isObject(e)&&s.Z.isObject(t[i])?t[i]=n(t[i],e):t.push(e)})):Object.entries(e).forEach((e=>{let[i,r]=e;Array.isArray(r)||s.Z.isObject(r)?t[i]=n(t[i],r):t[i]=r})),t),r=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return i.length&&i.forEach((e=>{(Array.isArray(e)||s.Z.isObject(e))&&(t=n(t,e))})),t}},1068:(t,e,i)=>{i.d(e,{Z:()=>r});var s=i(9913);const n=(t,e)=>{const i=(t.getCss(e)||"0").replace(/px$/,"");return isFinite(i)?Math.round(parseFloat(i))-parseFloat(t.getCss("border-top-width")||0)-parseFloat(t.getCss("border-bottom-width")||0)-parseFloat(t.getCss("padding-top")||0)-parseFloat(t.getCss("padding-bottom")||0):0},r=(t,e)=>{t=s.Z.$(t);return["width","height"].forEach((i=>{var s;0===e[i]&&(e[i]=n(t,i)),e[i]=((s=e[i])<=4&&(s=0),s)})),e}},9910:(t,e,i)=>{i.d(e,{Z:()=>s});const s=()=>Math.trunc(1e7*Math.random())},6511:(t,e,i)=>{i.d(e,{Z:()=>n});var s=i(9913);const n=(t,e,i)=>{let n=e/t;return n=n>=s.Z.DPPX||i?s.Z.DPPX:Math.ceil(100*n)/100,n}},6476:(t,e,i)=>{i.d(e,{Z:()=>r});var s=i(9910);const n=window.fetch?(t,e)=>fetch(t,{referrerPolicy:e||"no-referrer-when-downgrade"}).then((t=>{if(200===t.status)return t.json();throw{status:t.status,data:t}})):t=>new Promise(((e,i)=>{const s=new XMLHttpRequest;s?(s.onerror=t=>{i(t||!0)},s.onload=t=>{try{if(200!==s.status)throw{status:s.status,data:t};e(JSON.parse(s.responseText))}catch(t){i(t)}},s.open("GET",t),void 0!==s.responseType&&(s.responseType="text"),s.send(null)):i(!0)})),r=(t,e,i)=>new Promise(((r,o)=>{n(t,i).then(r).catch((i=>{i&&i.status&&[404,200].includes(i.status)?o(i):(console.log("XHR error. Switching to JSONP."),e||(e="sirv_data_"+(0,s.Z)()),((t,e)=>new Promise(((i,s)=>{let n=!1;const r=document.createElement("script");window[e]||(window[e]=function(){n=!0,delete window[e],document.body.removeChild(r),i(arguments.length<=0?void 0:arguments[0])});const o=()=>{n||(delete window[e],document.body.removeChild(r),s(t))};r.onreadystatechange=()=>{"complete"!==(void 0).readyState&&"loaded"!==(void 0).readyState||((void 0).onreadystatechange=null,setTimeout(o,0))},r.onerror=o,r.onload=o,r.src=t+"&callback="+e,document.body.appendChild(r)})))(t,e).then(r).catch(o))}))}))},6479:(t,e,i)=>{i.d(e,{Z:()=>a});const s=(t,e,i,s)=>{const n=i[e]/i[t],r={};return r[t]=s,r[e]=Math.trunc(n*r[t]),r},n=(t,e)=>{let i={width:t.width,height:t.height};return e.width&&i.width>e.width&&(i=s("width","height",i,e.width)),e.height&&i.height>e.height&&(i=s("height","width",i,e.height)),i},r=(t,e)=>{let i={width:t.width,height:t.height};return e.width&&i.width<e.width&&(i=s("width","height",i,e.width)),e.height&&i.height<e.height&&(i=s("height","width",i,e.height)),i},o=t=>/(px|%)$/.test(t),a=(t,e,i)=>{let a={},h=e.width,c=e.height;const d=h/c,l=c/h,u=()=>{a.height=t.height,a.width=Math.trunc(d*t.height)},p=()=>{a.width=t.width,a.height=Math.trunc(l*t.width)};return(t.width>h||t.height>c)&&(t.width>h?(t.width=h,t.height&&(t.height>c?t.height=c:u())):(t.height=c,t.width&&(t.width>h?t.width=h:p()))),(t.width||t.height)&&(t.width&&t.height?t.width/t.height-d<=t.height/t.width-l?p():u():t.width?p():u()),i&&(o(i.width)&&o(i.height)?(h=parseInt(i.width,10),/%$/.test(i.width)&&(h=h/100*t.width),c=parseInt(i.height,10),/%$/.test(i.height)&&(c=c/100*t.height),a=h<e.width/e.height*c?s("width","height",e,h):s("height","width",e,c)):(o(i.width)&&(h=parseInt(i.width,10),/%$/.test(i.width)&&(h=h/100*t.width),a=s("width","height",e,h)),o(i.height)&&(c=parseInt(i.height,10),/%$/.test(i.height)&&(c=c/100*t.height),a=s("height","width",e,c)),[i.width,i.height].includes("initial")?(a.width=e.width,a.height=e.height):[i.width,i.height].includes("cover")?a=r(a,t):[i.width,i.height].includes("contain")&&(a=n(a,t)))),a}},1737:(t,e,i)=>{i.d(e,{Z:()=>r});const s="width",n="height",r=(t,e,i)=>{let r,o;return(t.width>e.width*i||t.height>e.height*i)&&(t.width>e.width?(r=s,o=n):(r=n,o=s),t[r]=e[r],t[o]&&(t[o]=e[o]),t.round=!1),t}},3331:(t,e,i)=>{i.d(e,{Z:()=>r});var s=i(9913);const n=(t,e)=>new Promise(((i,r)=>{const o=s.Z.$(t).getInnerSize();e||(e=100),e-=1,!o.width&&!o.height&&e>0?setTimeout((()=>{n(t,e).then(i)}),16):i(o)})),r=n},9764:(t,e,i)=>{i.d(e,{Z:()=>s});const s=t=>!!t&&/\.svg$/i.test(new URL(t,document.baseURI).pathname)},9680:(t,e,i)=>{i.d(e,{Z:()=>n});var s=i(9913);const n=t=>new Promise(((e,i)=>{let n,r;if(s.Z.isString(t)&&(t=[t]),Array.isArray(t)?(n=s.Z.$new("img").setCss({maxWidth:"none",maxHeight:"none"}),n.attr("referrerpolicy","no-referrer-when-downgrade")):n=s.Z.$(t),n.node.parentNode||(r=s.Z.$new("div").setCss({top:"-10000px",left:"-10000px",width:"10px",height:"10px",position:"absolute",overflow:"hidden"}),r.append(n),s.Z.$(s.Z.D.node.body).append(r)),n.node.complete&&n.node.src)r&&r.remove(),e({image:null,size:n.size});else{const s=t=>{n.removeEvent(["load","error"],s),"error"===t.type?i({error:t}):e({image:t,size:{width:n.node.naturalWidth||n.node.width,height:n.node.naturalHeight||n.node.height}}),r&&r.remove()};n.addEvent(["load","error"],s),r&&Array.isArray(t)&&(n.attr("src",t[0]),t[1]&&n.attr("srcset",t[1]+" 2x"))}}))},7504:(t,e,i)=>{i.d(e,{Z:()=>n});const s={w:"scale.width",h:"scale.height",cw:"crop.width",ch:"crop.height",cx:"crop.x",cy:"crop.y",q:"quality",s:"size",text:"text.text",watermark:"watermark.image","watermark.w":"watermark.scale.width","watermark.h":"watermark.scale.height","watermark.cw":"watermark.crop.width","watermark.ch":"watermark.crop.height","watermark.cx":"watermark.crop.x","watermark.cy":"watermark.crop.y"},n=t=>{const e={};return t&&(t.split("&").forEach((t=>{const i=t.split("=");i[0]=s[i[0]]||i[0],i[0].trim().split(".").reduce(((t,e,s,n)=>(/^\d$/.test(e)&&(t.__toArray=!0),void 0===t[e]&&(s<n.length-1?t[e]={}:t[e]=(t=>{let e="";const i=t.split(/(%(?:D0|D1)%.{2})/);for(let t=0,s=i.length;t<s;t++){let s;try{s=decodeURIComponent(i[t])}catch(e){s=i[t]}e+=s}return e})(i[1]||"")),t[e])),e)})),Object.keys(e).forEach((t=>{if("object"==typeof e[t]&&e[t].__toArray){delete e[t].__toArray;const i=Object.keys(e[t]);e[t]=i.map((i=>e[t][i]))}}))),e}},8196:(t,e,i)=>{i.d(e,{Z:()=>o});var s=i(9913);const n={"scale.width":"w","scale.height":"h","crop.width":"cw","crop.height":"ch","crop.x":"cx","crop.y":"cy",quality:"q",size:"s","text.text":"text","watermark.image":"watermark","watermark.scale.width":"watermark.w","watermark.scale.height":"watermark.h","watermark.crop.width":"watermark.cw","watermark.crop.height":"watermark.ch","watermark.crop.x":"watermark.cx","watermark.crop.y":"watermark.cy"},r=(t,e)=>{const i=[];for(const o in t){if(!Object.prototype.hasOwnProperty.call(t,o))continue;if("$J"===(o+"").substring(0,2))continue;let a=t[o];if(s.Z.isObject(a))a=r(a,(e||"")+o+"."),i.push(a);else if(Array.isArray(a))a.forEach(((t,s)=>{a=r(t,(e||"")+o+"."+s+"."),i.push(a)}));else{let t=(e||"")+o;t=n[t]||t,i.push(t+"="+encodeURIComponent(a))}}return i.join("&")},o=r},2194:(t,e,i)=>{i.d(e,{Z:()=>s});const s=(t,e,i)=>{e||(e=0);let s=Math.pow(10,e);return s=i?Math.trunc(t*s)/s:Math.round(t*s)/s,s}},3952:(t,e,i)=>{i.a(t,(async(t,e)=>{try{var s=i(9913),n=i(2102),r=i(9508),o=i(5183),a=t([n,r,o]);[n,r,o]=a.then?(await a)():a,window.Sirv=n.Z,"loading"===s.Z.D.node.readyState&&r.Z.start(!0),s.Z.D.addEvent("domready",(()=>{r.Z.start(),(0,o.Z)()})),e()}catch(t){e(t)}}))},9508:(t,e,i)=>{i.a(t,(async(t,s)=>{try{i.d(e,{Z:()=>_});var n=i(9913),r=i(2671),o=i(932),a=i(3315);let t=null;try{t=(await Promise.resolve().then((()=>{if(!i.m[4592]){var t=new Error("Module '4592' is not available (weak dependency)");throw t.code="MODULE_NOT_FOUND",t}return i(4592)}))).default}catch(t){}let h=null;try{h=(await Promise.resolve().then((()=>{if(!i.m[9806]){var t=new Error("Module '9806' is not available (weak dependency)");throw t.code="MODULE_NOT_FOUND",t}return i(9806)}))).default}catch(t){}const c={},d={image:[],viewer:[]},l=new r.Z(d),u=(t,e)=>{let i=t;return n.Z.isString(i)&&(i=(e||document).querySelector(i)),n.Z.$(i)},p=(t,e,i)=>{let s=[],n=null;const r=d[e];return r.length&&t&&(n=u(t,i),n&&(s=r.filter((t=>t.node===n)))),s.length?s[0]:null},m=(t,e)=>{let i;return e||(e=document),i="collection"===n.Z.typeOf(t)?t:["element","magicjs-element"].includes(n.Z.typeOf(t))?[t]:Array.from((n.Z.$(e).node||e).querySelectorAll(t||".Sirv")),i},g=t=>{let e=null;return(t=n.Z.$(t)).hasClass("Sirv")&&(e="img"===t.tagName||t.attr("data-bg-src")||t.getCss("background-image")&&"none"!==t.getCss("background-image")?"image":"viewer"),e},v=(t,e)=>{let i=!1,s=e;return"image"===s&&(s="lazyImage"),t.common[s]&&(!1===t.common[s].autostart||["false","off"].includes(t.common[s].autostart))&&(i=!0),!i&&n.Z.browser.touchScreen&&n.Z.browser.mobile&&t.mobile[s]&&(!1===t.mobile[s].autostart||["false","off"].includes(t.mobile[s].autostart))&&(i=!0),i},f=(e,i,s,r)=>{let u=!1;"boolean"===n.Z.typeOf(e)&&(u=e,e=void 0),Array.from(m(e,i)).forEach((e=>{const i=n.Z.$(e);if(e&&i.hasClass("Sirv")){let m=g(i.node);if(s&&s!==m&&(m=null),c.common=(0,a.Z)({},n.Z.W.node.SirvOptions||{}),c.mobile=(0,a.Z)({},n.Z.W.node.SirvMobileOptions||{}),m&&["image","viewer"].includes(m)){if(!r&&v(c,m))return;let s=p(i.node,m);if(s)s.startFullInit(Object.assign({},c),r,u);else switch(o.KF.appendResetCss(e),m){case"image":t?(s=new t(i.node,{options:{common:(0,a.Z)({},c.common.lazyImage||{}),mobile:(0,a.Z)({},c.mobile.lazyImage||{})}},r),s.isRun&&(d.image.push(s),s.parentClass=l)):console.info("Sirv: Image component wasn't found.");break;case"viewer":if(h){o.KF.addMainStyle(e),s=new h(i,Object.assign({},c),r,u),s.isRun&&(d.viewer.push(s),s.parentClass=l);break}console.info("Sirv: Slider component wasn't found.")}}}}))},w=(t,e,i)=>{let s=["image","viewer"];i&&(s=[i]),s.forEach((i=>{t||e?Array.from(m(t,e)).forEach((t=>{const e=p(t,i);e&&e.stop()&&d[i].splice(d[i].indexOf(e),1)})):d[i]=d[i].filter((t=>!t.stop(!0)))}))},y=(t,e,i)=>{const s=p(t,e,i);return s?s.api:s},b=(t,e)=>{e?(0,o.o9)().unshift(t):(0,o.o9)().push(t)},S=t=>{const e=[];(0,o.o9)().forEach((i=>{i!==t&&e.push(i)})),(0,o.qB)(e)},E=()=>{(0,o.qB)()};l.addStopInstanceCB(((t,e)=>w(t,null,e))),o.KF.appendResetCss(),o.m0.make();const _={start:f,stop:w,getInstance:y,addFilterCallback:b,removeFilterCallback:S,removeAllFilterCallback:E,getTypeOfView:g,eventManager:l};s()}catch(t){s(t)}}),1)},932:(t,e,i)=>{i.d(e,{$n:()=>b,o9:()=>w,m0:()=>y,kB:()=>S,KF:()=>g,qB:()=>f});var s=i(4186),n=i(9913);const r=()=>"sirv-module-"+Math.floor(Math.random()*Date.now());class o{constructor(t){this.root=t,this.appended=!1}append(){this.appended=!0}}class a extends o{constructor(t,e,i,s){super(t),this.styleSheet=e,this.id=i||r(),this.addAfterId=s,this.sheet=null}createSheet(){this.sheet=this.root.querySelector("#"+this.id),this.sheet||(this.sheet=n.Z.$new("style",{type:"text/css"}),this.sheet.attr("id",this.id)),this.sheet.node.innerHTML=this.sheet.node.innerHTML+this.styleSheet}append(){if(this.appended)return;super.append(),this.createSheet();const t=this.root===document?document.head:this.root;let e=t.firstChild;if(this.addAfterId){const t=this.root.querySelector("#"+this.addAfterId);t&&t.nextSibling&&(e=t.nextSibling)}t.insertBefore(this.sheet.node,e)}}class h extends o{constructor(t,e,i){super(t),this.rules=e,this.id=i||r()}append(){this.appended||(super.append(),this.rules.forEach((t=>n.Z.addCSS(t[0],t[1],this.id,this.root))))}}const c=(t,e,i,s)=>new Promise(((r,o)=>{const a=i||n.Z.D.node;let h,c=!1;try{h=n.Z.getAbsoluteURL(t)}catch(t){}if(h&&(c=Array.from(a.querySelectorAll("link[rel=stylesheet]")).some((t=>{try{return n.Z.getAbsoluteURL(n.Z.$(t).attr("href")||"")===h}catch(t){return!1}}))),c)r();else{const a=n.Z.$new("link");e!==n.Z.U&&(a.node.id=e),a.node.rel="stylesheet",a.node.type="text/css",a.node.onload=()=>{r()},a.node.onerror=t=>{o(t)},a.node.href=t;let h=n.Z.D.node.head||n.Z.D.node.getElementsByTagName("head")[0]||n.Z.D.node.body||n.Z.D.node.documentElement;i&&(h=i);let c=h.firstChild;const d=h.querySelector(s);d&&d.nextSibling&&(c=d.nextSibling),h.insertBefore(a.node,c)}})),d={width:90,height:18,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAAkCAYAAAAgqxBxAAAMJ0lEQVR4nO1ce5AUxRnv4yH4wCfREogIqFHOI94uVoSNMnFvZ6e/30+TGB/BRFPRUomWRiMKd2tUTKEWKlGSCBKCxtJSSKkxKLhnKqaiJvgOYjSAAhdQ8EDkIYgm8fLH9hzNZGZn9+68o8r5VU3V7fbXX389+5vu79FzSiVIkCBBggQJegiu6w4DMIlkkeRKklsBbCG5EsAzJKeJyCnldDiOs5/neaO6y+YECUJBciaAz0i2xV0AFmut+wV1iMhoAK1GZqnjOAN7Yi4JvsDQWu9PckkIaTcBWAbgHZI7Am1vKqV6BXUBWBzQ87MemFKCLzJIvhIg671a63Gu6+7ryziOMxBAA4DpADYDuDRC14qArl9130wSfOEhIpcFCPjduD75fP5gx3H2C2sDcJal62MAx3W91QkShKMGwDqL0DO7QimAsQAubGhoOKIr9CVIUBHy+XxtYHUe3tM2JUjQYWitT7PI/EFP25MgQadA8kxrhd7mOE6fnrYpk8kMEJHRnud9padtSRADkm0NDQ0HRLU3NDQcAWBzd9njed7XbZdDa31SZ3WKSB2AR80133GcA+1213W/bLXf5H+fzWYPATAHwAdmx1jjt+Xz+YMBPALgIZIPxxV2gkhNLp6TamqeV18oPlxfKM7p7BwTGOxphM5kMgNI/tdyO57urE7bjTHXYLsdwHFW2/umz5BAcNoGYIvfx3GcPradJP9cjU2pQnFdqtDclio0t9UXis93do4JDPY0QiulFIB7AkS6Kb5XNLTWp1r6Pslms4fZ7SQHW+RcaL5bGXgI/gNgmVKqxu8nIj+xZTKZzIBK7Plq45PH+GROFZrbUpOL6c7ML4GFPZHQjuMcCODfAUI9lsvlBnVEXxyhXdc9lOQnfgGHZKP1MP0GwNhcLjcon88frqxKZD6fPzzgHp1TiT31heYpu1bn5tWVTqKfiAw1N6EmTh7AQQCGl/txuwqmwjU87NxBEFrrfp7nHWl+hOA8anK53CARGVpB8FRDcrCIDLXHrZbQ/n0123bsfe0oAJwccl5jB8lpWush1eiKI3Q2mz3EKqOvB7DTkPkHFdj5nKV7QSX2pJqKS9tX56ZiIcrokQCeBnAQybnGsKUAVgFYJyITwvp5npcl+aI5vLKE5EZzyCVjGV0AMCOsP8lbSD4c0fZrABf6n0UkZ8ZoIfmqGWt2Op3ex+4H4HXHcfqIyDUkN5JcYUq7x1kyFwNYTfKfJJcAaAXQpEJIJiJXkHwXwCqSb5B8n+TMdDq9D4CdlRDacZz9ANxN8n1zX1cDeE9ErvLHBPAQgO9H6TIrWktwvlEwxZDWEGJ/AuC+Sit+cYQ2nNkecHNmVaKb5EVWn521tbV7lZOvb1w40nY3aictCC/0iEgdyQ0A/iIil6TT6b5W2wkkV4jINYE+3zE/rqhdROhtSqUbtNauUu2Rd0vIsDWGVOtDyq41ANb5qR6t9bcArNFaj/MFMpnMAADzADxlja9ItgC4EsDvABwUHBTATwG8TPJo/zsTxLwAYGpAdgrJN0Skzv/OcZz+ACaSXEByaxyhzcOwSEQm2DuByR68TvIW8/lsAM9E6SJ5LYD7otrDYDINs0JI7V932b91GCohNICPLJntjuP0r9S+atyOVFOx0O5uNBWfixQ0hG4jeWNYu+d5o0hu9yeTTqf3IblRa31qmDzJMwGsMU9cbwCbXdc91pbRWmdIPgtgnoicbbcBON5/CMzq1gpgbHAcQ67V/sNjxm4B8HrY0661HklyY/BHMfdgKMkdxtdTnucdSXK71npE2ByNvxjrcvjEidAxnOQO13WH1dbW7kVyg+u6wyJk3wRwctRY5SAiJwCYjdI56OAJvGX5fL42qm+1hAYwrxrbAPze6ju/nGyqqfiWRegLyk24zvw4kbV6AM8DuMDIjwfwUoyhy0WE5u/5InJFYMw7jVtwUdDtMCvsHCN3HoDIpxHA7SR/6X82hL48Yp53AvhFGV3NvptjVuHHomSNu1URoT3PO7HMmE8AmGj+niEiNwRltNYnAViuOul3mxXxRpJbg25I1IPbAUJfXY1NZqdvLwZFxUappkWjdvnOzZ8edfnC6BjKbH8flRsYwAwA083f0wH8PEZ+Ns3ZWQAXAHjCau4FYC3Jo3O53CAAmwPB1gKYU2IA7gFwa9Q4JC8ybof/uSWqoADghXLbGoC7ReRm8/dDACZFyWaz2cMqJXS5ABbAFN+V0FrXk1ypAsQFMEtEJkfpqBau6x4K4NHASr1GKdU7KNsBQp9RjS2O4/Qnuc3vLyLfDJOzsxuppubyu4Ah9JoYmetI3q+UUiQfjLvBAG4CMFsppXK53CD76UMpCn/Fkn1Oa32aUkql0+m+JpAaaNoeB/ABgHfCLuPHP+vrItli+7wBm9YanzZK14cA7jZ6/ogykbopDlSS5fi43H0yxz3bI3yWAl7H/zxmzJi9WQpuB4cq6AQAzAmQ+sqgTLWE1lrrDtjxgEXo34bJpArFt31CnzB5kVNWoSF0a8yg15Oc6xuAUlagnPxUWIfBAfwdwDfM3zNINlrjX+Xr1lpnALxs9XtcRK4xNy70spPyMYReo7V2y+nyswgA/kTy/Kj5pdPpvhUSeme5+0Tyx7ZrA+ByAPda92Z8YHfrUgBYbhH67WB7tYT23cxqICJeIKjcLY1a11g81vKdy/LUV1gH4NNy+VgAs/3tWERu9lffKARXcZZSdD9TpZzuu7SyDCYgW6+U6iUik20XA6Uo/ZbYSewapxyhXwBwViV6AMwjeW1Uu18YqMTlKJdqA3Cbvyso1e7nbrQerCeq3carQcgLAbsdOe0OQiulFMkPfR2e52XttlSheJuVe55WyaTqSLbl8/lUmQFXWEFeA4BVKuQdNKXat+P1dj5aRE4h+azWuh7AayH6X/Q870SSf7AnJCLjSb4aO4ldeiIJTXKaH2zGwQSskUEhAFThQ4+LkgHwkoicF/huvoic6zjOQJLvxuVnOwOTlrVTZ67d3l2ENjFXqNtR3/TUivYVunHhyEomVYfS28FzI9rPBbDayln2YqkgEfoeGoBJxm1oD27MFr3e+OKNwT4s5VmvN25BexA1ZsyYvY3v+73YiajyhNZajzC+fH2cHq31EJJbtdahNxDAkwA+q4TQiEhHkRSSG4N5eK21NoHxpSTviLO1MzDpSTvjIQFbuoXQIvI1a5wdjqPavYX6QnGOIXRlC5sh9FIAj5C8S0SOUUrVmGN+l7JUKBkX7GMIeoPrusPS6XTffD5/FIBbAaxFSCUKpWLHWtvd8GH6rgWwKNhm/OpWAFO01iMcx+njOE5/z/NGAZgoIqN92XKENnb/EECriEwwgVZNJpMZYFJjU13XPdSSnQBgDYAzDOl6marqAyYF+I8KfOjnSc4FMMcUino1NDQcgFLmp9UPhgPobYLUJQCOj9LfFRCR0Tahg7t0dxHa6HrP13O6m835348qPHNSqtDclmpsjnQBg5OqA7DKlIyvMpH2BgDvoVT4iFrxhgCYhVIpd5MJMO7yixNBkPw2ylS7ANwXtRKb1W4mgOVmrLUk/yoi12mtv2SN8WBUccIaJ43SWdwWAJtYKqcXReSyYIoNQN6sxuvMQ7UYpkRtHoB9w0cppcdMhbWGpfTiYuu+PgIg8qQYgNsBLC43j64AgIJF2K3BymE3E/rWMLfjsInFfeubiu+OaipW9nCb1TasPJ2ghwDgSRG55PMcw8Q6G6yA8N6gTHcS2vbnAWyy21JNi0aps+b/X548SlFC6D0IxlXZorXev5p+psQ93XabomCyKX8LuBtHBeW6k9BG37JdAaoberQiFgmh9yyQvCMuLRoGa8veZty38wEcr7XeX2vdz8REYwFMZalYY6frQkvW3U1olkrzJZt4etX3QCmVEHpPgO+7m8LP5rDAOQ4mHgg7VbeVpYrq9rB2BE4ZBuw61ZL7NO74aGcJ7bruMGu8dR1SkhC654HSwagtJP8F4PSO6NBanwbg6QhSh12vRGRZdtMZ6LNbCd7kytssQo/viO02ALy5y+1gWfui0Ls73jZJEIvKgp4YaK1HAPgRyftReivkDZJvAXgNwFMicnOlb1obf34igKsBXBmsejqO019ErjAyE9EF/9wGwMVmV9nGzzkPnyBBggQJugP/A94x91x//ZrKAAAAAElFTkSuQmCC"},l="sirv-stylesheet-sirv";class u{constructor(t,e){this.root=t,this.styleSheetModules=e,this.crId="sirvCR"+Math.floor(Math.random()*Date.now()),this.stylePomises=new Map,this.javaScriptPomises=new Map,this.sheets=new Map,this.brandSheet=null}addJavaScript(t){return this.javaScriptPomises.has(t)||this.javaScriptPomises.set(t,new Promise(((e,i)=>{const s=n.Z.$new("script");s.attr("type","text/javascript"),s.node.onload=e,s.node.onerror=i,s.attr("src",t),s.appendTo(this.root.head||this.root.body||this.root)}))),this.javaScriptPomises.get(t)}appendMainCSS(){return this.addStyle(s.Cc+"viewer.css",l,"#"+s.wo)}addStyle(t,e,i){return this.stylePomises.has(t)||this.stylePomises.set(t,new Promise(((s,n)=>c(t,e,this.root.head||this.root.body||this.root,i).then(s).catch(n)))),this.stylePomises.get(t)}createBrandSheet(){var t;this.brandSheet||(this.brandSheet=new h(this.root,[["#"+(t=this.crId),"\n                display: inline-block !important;\n                position: absolute !important;\n                top: auto !important;\n                right: 0 !important;\n                bottom: 0 !important;\n                left: auto !important;\n                width: auto !important;\n                height: auto !important;\n                max-width: none !important;\n                max-height: none !important;\n                margin: auto !important;\n                padding: 8px !important;\n                z-index: 2147483647 !important;\n                visibility: visible !important;\n                opacity: 1 !important;\n                transform: none !important;\n                font-size: 0 !important;\n                line-height: 1 !important;\n                background-color: #ffffffbf;\n                backdrop-filter: blur(10px);\n                -webkit-backdrop-filter: blur(10px);\n            "],["#"+t+" > img","\n                display: inline-block !important;\n                position: static !important;\n                width: 90px !important;\n                height: auto !important;\n                max-width: 100% !important;\n                max-height: none !important;\n                margin: 0 !important;\n                padding: 0 !important;\n                visibility: visible !important;\n                opacity: 1 !important;\n                transform: none !important;\n            "],["@media screen and (min-width: 481px)","\n                #"+t+" > img {\n                    width: 135px !important;\n                }\n            "]],s.wo))}showSirvAd(t,e,i){/^my.sirv.(com|localhost)$/i.test(document.location.hostname)||(this.createBrandSheet(),this.brandSheet.append(),((t,e,i,s)=>{const r=n.Z.$new("a",{id:t,href:i,target:"_blank"});r.attr("style","position: absolute !important; opacity: 1 !important"),r.setCss({display:"inline-block",overflow:"hidden",visibility:"visible",fontSize:0,fontWeight:"normal",fontFamily:"sans-serif",bottom:0,right:0,margin:"auto",width:"auto",height:"auto",transform:"none",zIndex:2147483647}).appendTo(e).addEvent(["tap","btnclick"],(t=>{t.stopDistribution(),window.open(r.attr("href"))})).append(n.Z.$new("img",d).setProps({alt:s}))})(this.crId,t,e,i))}createSheet(t){let e=null,i=l;return"reset"===t&&(i=null,e=s.wo),new a(this.root,this.styleSheetModules.get(t),e,i)}appendStyleSheet(t){if(this.styleSheetModules.has(t)&&!this.sheets.has(t)){const e=this.createSheet(t);this.sheets.set(t,e),e.append()}}append(){const t=this.styleSheetModules.keys();let e={done:!1};do{e=t.next(),e.value&&this.appendStyleSheet(e.value)}while(!e.done)}}const p=t=>{let e=t.replace(/^(https?:)?/,"https:");return/^(http(s)?:)?\/\/[^/]+?sirv\.localhost(:\d+)?\/.*$/i.test(t)&&(e=t.replace(/^(https?:)?/,"http:")),e},m=t=>t.replace(/^((?:https?:)?\/\/)([^/].*)/,(function(t,e,i){return e+i.split("/").map((function(t,e){return 0===e?t:(t=>{try{t=decodeURIComponent(t)}catch(t){}return encodeURIComponent(t)})(t)})).join("/")})),g=new class{constructor(){this.roots=new WeakMap,this.rootsArr=[],this.styleSheets=new Map,this.sirvCSSSrc="viewer.css",this.addCssModule("reset",".smv{display:flex!important}.smv.smv-selectors-top{flex-direction:column-reverse}.smv.smv-selectors-left{flex-direction:row-reverse}.smv.smv-selectors-right{flex-direction:row}.smv.smv-selectors-bottom{flex-direction:column}.smv-slides-box{flex-grow:1;flex-shrink:1}figure>.Sirv{vertical-align:top}.Sirv>iframe,.Sirv>video,:not(.smv) smv-thumbnail{display:none}.Sirv,.Sirv .smv-component{box-sizing:border-box!important}div.Sirv,div.Sirv div.smv-component,div.smv-component,figure.Sirv{height:100%;margin:0;text-align:center;width:100%}div.Sirv{block-size:inherit;max-height:100%}.Sirv img{height:100%;width:100%}.Sirv img,img.Sirv{max-width:100%}img.Sirv:not([width]):not([height]){width:100%}img.Sirv{display:inline-block;font-size:0;line-height:0}.Sirv.smv-bg-image.smv-bg-contain,.Sirv.smv-bg-image.smv-bg-cover{background-position:50%;background-repeat:no-repeat}.Sirv.smv-bg-image.smv-bg-contain{background-size:contain}.Sirv.smv-bg-image.smv-bg-cover{background-size:cover}img.Sirv.sirv-image-loading:not([src]),img.Sirv:not([src]){opacity:0}img.Sirv.sirv-image-loaded{opacity:1;transition:opacity .5s linear}")}rootContains(t){return this.rootsArr.some((e=>e.contains(t)))}addCssModule(t,e){this.styleSheets.set(t,e)}getRootDom(t){const e=(t=>{for(t=n.Z.$(t).node;"document"!==n.Z.typeOf(t)&&!(t instanceof window.ShadowRoot)&&t;)t=t.parentNode;return t})(t)||document;if(this.roots.has(e))return this.roots.get(e);const i=new u(e,this.styleSheets);return this.roots.set(e,i),this.rootsArr.push(e),i}appendResetCss(t){this.getRootDom(t||document).appendStyleSheet("reset")}appendCss(t){this.getRootDom(t).append()}showSirvAd(t,e,i,s){this.getRootDom(t).showSirvAd(e,i,s)}appendMainCSS(t){return this.getRootDom(t).appendMainCSS()}addMainStyle(t){return this.appendMainCSS(t)}addStyle(t,e,i,s){return this.getRootDom(t).addStyle(e,i,s)}addJavaScript(t,e){return this.getRootDom(t).addJavaScript(e)}};let v=[];const f=function(t){void 0===t&&(t=[]),v=t},w=()=>v,y={nodes:[],elements:[[{classes:[s.i2+"-arrow-control"]},{classes:[s.i2+"-arrow"]},{classes:[s.i2+"-icon"]}],[{classes:[s.i2+"-button-fullscreen-open"]},{classes:[s.i2+"-icon"]}],[{classes:[s.i2+"-button-fullscreen-close"]},{classes:[s.i2+"-icon"]}],[{classes:[s.i2+"-thumbnails"]},{classes:[s.i2+"-selector"],attrs:[{name:"data-type",value:"spin"}]}]],waitBody:()=>new Promise(((t,e)=>{const i=document.body;i?t(i):setTimeout((function(){y.waitBody().then(t)}),16)})),make:()=>{y.elements.forEach((t=>{const e=[];t.reverse().forEach((t=>{const i=n.Z.$new("div");t.classes&&t.classes.forEach((t=>{i.addClass(t)})),t.attrs&&t.attrs.forEach((t=>{i.attr(t.name,t.value)})),e.push(i)}));for(let t=1,i=e.length;t<i;t++)e[t].append(e[t-1]);y.nodes.push(e[e.length-1])})),y.nodes.forEach((t=>{t.setCss({top:"-10000px",left:"-10000px",width:"10px",height:"10px",position:"absolute",visibility:"hodden",opacity:0}),y.waitBody().finally((()=>{n.Z.$(n.Z.D.node.body).append(t)}))}))},remove:()=>{y.nodes.length&&(y.nodes.forEach((t=>{t.remove()})),y.nodes=[])}},b=t=>(/^(http(s)?:)?\/\//.test(t)||(t=s.oZ+t),p(t).replace(/([^:])\/+/g,"$1/")),S=t=>m(p(t))},4186:(t,e,i)=>{i.d(e,{Cc:()=>o,HB:()=>b,Jk:()=>p,OR:()=>w,UW:()=>f,cY:()=>m,i2:()=>n,lh:()=>u,mA:()=>y,oQ:()=>d,oZ:()=>a,oc:()=>g,pX:()=>v,vd:()=>l,wo:()=>c});var s=i(9913);const n="smv";let r="https:",o="",a="";const h=document.getElementsByTagName("script");for(let t=0,e=h.length;t<e;t++){const e=h[t].getAttribute("src")||"";if(null!==h[t].getAttribute("data-sirvjs-test"))o=s.Z.getAbsoluteURL(e).replace(/([^#?]+)\/.*$/,"$1/");else if(/sirv\.(com|localhost(:\d+)?)\/(([^#?]+)\/)?sirv\.js([?#].*)?$/i.test(e)||/sirv\.(com|localhost(:\d+)?)\/(([^#?]+)\/)?sirv\.full\.js([?#].*)?$/i.test(e)){a=s.Z.getAbsoluteURL(e).replace(/(^https?:\/\/[^/]*).*/,"$1/"),o=s.Z.getAbsoluteURL(e).replace(/([^#?]+)\/.*$/,"$1/"),(/sirv\.localhost(:\d+)?\/(([^#?]+)\/)?sirv\.js([?#].*)?$/i.test(e)||/sirv\.localhost(:\d+)?\/(([^#?]+)\/)?sirv\.full\.js([?#].*)?$/i.test(e))&&(r="http:");break}}const c="sirv-core-css-reset",d=/([^\?]+)\??([^\?]+)?/,l=[],u=n+"-cursor-fullscreen-always",p=1.2,m=n+"-cursor-zoom-in",g={NONE:0,AUTOPLAY:1,USER:2,INIT:3,ENABLE:4},v={NONE:0,PLAY:1,PAUSE:2,PLAYING:3},f={CLOSED:0,OPENING:1,OPENED:2,CLOSING:3},w={HIDDEN:0,SHOWING:1,SHOWN:2,HIDING:3},y={NONE:0,HTML:1,IMAGE:2,PANZOOM:3,ZOOM:4,SPIN:5,VIDEO:6,MODEL:7},b=["none","html","image","panzoom","zoom","spin","video","model"]},5183:(t,e,i)=>{i.a(t,(async(t,s)=>{try{i.d(e,{Z:()=>p});var n=i(9913),r=i(6031),o=i(932),a=i(9508),h=t([a]);a=(h.then?(await h)():h)[0];const c={added:[],removed:[]},d=t=>!!t.closest&&!t.closest("div.Sirv"),l=(0,r.Z)((()=>{const t=c.added.splice(0),e=c.removed.splice(0);t.forEach((t=>{(t=n.Z.$(t)).node&&3!==t.node.nodeType&&8!==t.node.nodeType&&t.node.getElementsByClassName&&(t.hasClass("Sirv")?a.Z.start(t,null,a.Z.getTypeOfView(t)):o.KF.rootContains(t.node)&&d(t.node)&&a.Z.start(null,t))}));const i=[];e.forEach((t=>{(t=n.Z.$(t)).node&&3!==t.node.nodeType&&8!==t.node.nodeType&&t.node.getElementsByClassName&&(t.hasClass("Sirv")?i.push(t):[].push.apply(i,t.node.getElementsByClassName("Sirv"))),i.forEach((t=>{if(t=n.Z.$(t),!n.Z.D.node.body.contains(t.node))try{a.Z.stop(t,null,a.Z.getTypeOfView(t))}catch(t){}}))}))}),250),u=(t,e)=>{for(let e=0,i=t.length;e<i;e++)"childList"===t[e].type&&([].push.apply(c.added,t[e].addedNodes),[].push.apply(c.removed,t[e].removedNodes));l()},p=()=>{n.Z.W.node.MutationObserver&&new MutationObserver(u).observe(n.Z.D.node.body,{childList:!0,subtree:!0,attributes:!1})};s()}catch(t){s(t)}}))}},t=>{var e=e=>t(t.s=e);e(9913),e(9099),e(6031),e(3315),e(9910),e(1068),e(6511),e(6476),e(2194),e(9764),e(9680),e(7504),e(8196),e(6479),e(1737),e(3331),e(6450),e(5040),e(4186),e(932),e(3952)}]);}